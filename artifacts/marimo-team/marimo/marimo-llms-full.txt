# llms-full (private-aware)
> Built from GitHub files and website pages. Large files may be truncated.

--- docs/examples/index.md ---
# Examples

This page includes dozens of bite-sized how-to examples to help you get started
with marimo. Be sure to also read the [quickstart](../getting_started/index.md) and
the [user guide](../guides/index.md), especially the guide on [how marimo runs
cells](../guides/reactivity.md).

!!! Tip "Get inspired at our gallery!"

    For inspirational examples, including embedding-driven
    data labelers, Stanford-scientist authored tutorials, and more,
    check out our [public gallery](https://marimo.io/gallery).


## Running cells

<div class="grid cards" markdown>

-  ‚ö°Ô∏è [**Basic execution**](running_cells/basics.md)

-  üêû [**Getting around multiple definition errors**](running_cells/multiple_definitions.md)

-  üõë [**Stop cells from running**](running_cells/stop.md)

-  üñ±Ô∏è [**Run cells on button click**](running_cells/run_button.md)

-  üïì [**Refresh on a timer**](running_cells/refresh.md)

-  ‚è≥ [**Run async functions**](running_cells/async_await.md)

-  üíæ [**Caching computations in memory**](running_cells/memory_cache.md)

-  üíæ [**Cache computations to persistent storage**](running_cells/persistent_cache.md)

-  üêû [**Using the debugger**](running_cells/debugging.md)

-  üêç [**Run notebooks as scripts**](../guides/scripts.md)

</div>

## Visual Outputs

<div class="grid cards" markdown>

-   üì§ [**Cell outputs**](outputs/basic_output.md)

-   ‚úçÔ∏è  [**Basic markdown**](outputs/basic_markdown.md)

-   üí¨ [**Console outputs**](outputs/console_outputs.md)

-   üìã [**Capturing console output**](outputs/capture_console_outputs.md)

-   üìà [**Showing plots**](outputs/plots.md)

-   üé• [**Showing videos and other media**](../api/media/index.md)

-   üéõÔ∏è [**Conditionally showing outputs**](outputs/conditional_output.md)

-   üß© [**Showing multiple outputs in one cell**](outputs/multiple_outputs.md)

</div>

### Writing markdown

<div class="grid cards examples-grid" markdown>

-   ‚ö°Ô∏è [**Python values in markdown**](markdown/dynamic_markdown.md)

    ---

    <a href="markdown/dynamic_markdown"><img src="/_static/example-thumbs/dynamic_markdown.png" /></a>

-   ü™Ñ [**Mermaid diagrams**](markdown/mermaid.md)

    ---

    <a href="markdown/mermaid"><img src="/_static/example-thumbs/mermaid.png" /></a>

-   üö® [**Admonitions**](markdown/admonitions.md)

    ---

    <a href="markdown/admonitions"><img src="/_static/example-thumbs/admonitions.png" /></a>

-   üìÇ [**Collapsible details**](markdown/details.md)

    ---

    <a href="markdown/details"><img src="/_static/example-thumbs/details.png" /></a>

-   üòÄ [**Emoji**](markdown/emoji.md)

</div>

## Working with data

### Dataframes

marimo is designed for working with dataframes. Here are a few examples; see
the [dataframes guide](../guides/working_with_data/dataframes.md) for details.

<div class="grid cards" markdown>

-   üßÆ [**Interactive dataframe viewer**](outputs/dataframes.md)

    ---

    <a href="outputs/dataframes"><img src="/_static/example-thumbs/dataframes.png" /></a>

-   üîç [**Select dataframe rows**](../api/inputs/table.md)

    ---

    <a href="../api/inputs/table"><img src="/_static/example-thumbs/tables.png" /></a>

-   ‚úèÔ∏è  [**Editable dataframe**](../api/inputs/data_editor.md)

    ---

    <a href="api/inputs/data_editor"><img src="/_static/example-thumbs/editable_dataframes.png" /></a>

-   üõ†Ô∏è [**Interactive dataframe transformer**](../api/inputs/dataframe.md)

    ---

    <a href="api/inputs/dataframe"><img src="/_static/example-thumbs/dataframe_transformer.png" /></a>

</div>

### SQL

Here are some basic examples, see the [SQL
guide](../guides/working_with_data/sql.md) for more details.

<div class="grid cards examples-grid" markdown>

-   ü¶Ü [**Query dataframes with DuckDB SQL**](../guides/working_with_data/sql.md#example)

-   üõ¢Ô∏è [**SQLite, Postgres, and other engines**](../guides/working_with_data/sql.md#connecting-to-a-custom-database)

</div>

### Plots

See the [plotting guide](../guides/working_with_data/plotting.md) for a full
overview.

<div class="grid cards examples-grid" markdown>

-   üìä [**Selecting data with Altair**](../api/plotting.md#reactive-charts-with-altair)

    ---

    <a href="../api/plotting#reactive-charts-with-altair"><img src="/_static/example-thumbs/altair.png" /></a>

-   üìâ [**Selecting data with Plotly**](../guides/working_with_data/plotting.md#plotly)

    ---

    <a href="../guides/working_with_data/plotting#Plotly"><img src="/_static/example-thumbs/plotly.png" /></a>

-   üî≠ [**Showing matplotlib plots**](outputs/plots.md)

</div>

### Progress bars and status elements

<div class="grid cards examples-grid" markdown>

-   üì∂ [**Progress bar**](outputs/progress_bar.md)

    ---

    <a href="outputs/progress_bar"><img src="/_static/example-thumbs/progress_bar.png" /></a>

-   üåÄ [**Loading spinner**](outputs/spinner.md)

    ---

    <a href="outputs/spinner"><img src="/_static/example-thumbs/spinner.png" /></a>

</div>


### Layouts

<div class="grid cards examples-grid" markdown>

-   üìê [**Horizontal and vertical stacking**](outputs/stacks.md)

    ---

    <a href="outputs/stacks.md"><img src="/_static/example-thumbs/stacks.png" /></a>

-   üìÅ [**Accordion toggle**](../api/layouts/accordion.md)

    ---

    <a href="../api/layouts/accordion"><img src="/_static/example-thumbs/accordion.png" /></a>

-   üóÇÔ∏è [**Tabs**](../api/inputs/tabs.md)

    ---

    <a href="../api/inputs/tabs"><img src="/_static/example-thumbs/tabs.png" /></a>

</div>

## Input elements

### Basic input elements

marimo has a large library of interactive UI elements, which you can use
without callbacks ‚Äî just make sure to assign elements to global variables. See
the [API reference](../api/inputs/index.md) for a full list, and the [interactivity
guide](../guides/interactivity.md) for rules governing how UI elements work.

<div class="grid cards examples-grid" markdown>

-   üéöÔ∏è [**Slider**](../api/inputs/slider.md)

    ---

    <a href="../api/inputs/slider.md"><img src="/_static/example-thumbs/slider.png" /></a>

-   üßæ [**Dropdown**](../api/inputs/dropdown.md)

    ---

    <a href="../api/inputs/dropdown.md"><img src="/_static/example-thumbs/dropdown.png" /></a>

-   üëÜ [**Multi-select**](../api/inputs/multiselect.md)

    ---

    <a href="../api/inputs/multiselect.md"><img src="/_static/example-thumbs/multiselect.png" /></a>

-   üîò [**Radio buttons**](../api/inputs/radio.md)

    ---

    <a href="../api/inputs/radio.md"><img src="/_static/example-thumbs/radio.png" /></a>

-   ‚òëÔ∏è [**Checkbox**](../api/inputs/checkbox.md)

    ---

    <a href="../api/inputs/checkbox.md"><img src="/_static/example-thumbs/checkbox.png" /></a>

-   üìÖ [**Date**](../api/inputs/dates.md)

    ---

    <a href="../api/inputs/date.md"><img src="/_static/example-thumbs/date.png" /></a>

-   üìÅ [**File**](../api/inputs/file.md)

    ---

    <a href="../api/inputs/file.md"><img src="/_static/example-thumbs/file_upload.png" /></a>

-   üî§ [**Text input**](../api/inputs/text.md)

    ---

    <a href="../api/inputs/text.md"><img src="/_static/example-thumbs/text.png" /></a>

-   üìù [**Text area**](../api/inputs/text_area.md)

    ---

    <a href="../api/inputs/text_area.md"><img src="/_static/example-thumbs/text_area.png" /></a>

-   üßë‚Äçüíª [**Code editor**](../api/inputs/code_editor.md)

    ---

    <a href="../api/inputs/code_editor.md"><img src="/_static/example-thumbs/code_editor.png" /></a>

-   üîç [**Table**](../api/inputs/table.md)

    ---

    <a href="../api/inputs/table.md"><img src="/_static/example-thumbs/tables.png" /></a>

-   üéôÔ∏è [**Microphone**](../api/inputs/microphone.md)

    ---

    <a href="../api/inputs/microphone.md"><img src="/_static/example-thumbs/microphone.png" /></a>

-   üí¨ [**Chat**](../api/inputs/chat.md)

    ---

    <a href="../api/inputs/chat.md"><img src="/_static/example-thumbs/chat.png" /></a>

</div>

### Composite input elements

Composite input elements let you create a single UI element from multiple
other UI elements.

<div class="grid cards examples-grid" markdown>

-   üßæ [**Form**](../api/inputs/form.md)

    ---

    <a href="../api/inputs/form.md"><img src="/_static/example-thumbs/form.png" /></a>

-   üéí [**Array**](../api/inputs/array.md)

    ---

    <a href="../api/inputs/array.md"><img src="/_static/example-thumbs/array.png" /></a>

-   üìñ [**Dictionary**](../api/inputs/dictionary.md)

    ---

    <a href="../api/inputs/dictionary.md"><img src="/_static/example-thumbs/dictionary.png" /></a>

</div>


## Links discovered
- [quickstart](https://github.com/marimo-team/marimo/blob/main/docs/getting_started/index.md)
- [user guide](https://github.com/marimo-team/marimo/blob/main/docs/guides/index.md)
- [how marimo runs
cells](https://github.com/marimo-team/marimo/blob/main/docs/guides/reactivity.md)
- [public gallery](https://marimo.io/gallery)
- [**Basic execution**](https://github.com/marimo-team/marimo/blob/main/docs/examples/running_cells/basics.md)
- [**Getting around multiple definition errors**](https://github.com/marimo-team/marimo/blob/main/docs/examples/running_cells/multiple_definitions.md)
- [**Stop cells from running**](https://github.com/marimo-team/marimo/blob/main/docs/examples/running_cells/stop.md)
- [**Run cells on button click**](https://github.com/marimo-team/marimo/blob/main/docs/examples/running_cells/run_button.md)
- [**Refresh on a timer**](https://github.com/marimo-team/marimo/blob/main/docs/examples/running_cells/refresh.md)
- [**Run async functions**](https://github.com/marimo-team/marimo/blob/main/docs/examples/running_cells/async_await.md)
- [**Caching computations in memory**](https://github.com/marimo-team/marimo/blob/main/docs/examples/running_cells/memory_cache.md)
- [**Cache computations to persistent storage**](https://github.com/marimo-team/marimo/blob/main/docs/examples/running_cells/persistent_cache.md)
- [**Using the debugger**](https://github.com/marimo-team/marimo/blob/main/docs/examples/running_cells/debugging.md)
- [**Run notebooks as scripts**](https://github.com/marimo-team/marimo/blob/main/docs/guides/scripts.md)
- [**Cell outputs**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/basic_output.md)
- [**Basic markdown**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/basic_markdown.md)
- [**Console outputs**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/console_outputs.md)
- [**Capturing console output**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/capture_console_outputs.md)
- [**Showing plots**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/plots.md)
- [**Showing videos and other media**](https://github.com/marimo-team/marimo/blob/main/docs/api/media/index.md)
- [**Conditionally showing outputs**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/conditional_output.md)
- [**Showing multiple outputs in one cell**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/multiple_outputs.md)
- [**Python values in markdown**](https://github.com/marimo-team/marimo/blob/main/docs/examples/markdown/dynamic_markdown.md)
- [**Mermaid diagrams**](https://github.com/marimo-team/marimo/blob/main/docs/examples/markdown/mermaid.md)
- [**Admonitions**](https://github.com/marimo-team/marimo/blob/main/docs/examples/markdown/admonitions.md)
- [**Collapsible details**](https://github.com/marimo-team/marimo/blob/main/docs/examples/markdown/details.md)
- [**Emoji**](https://github.com/marimo-team/marimo/blob/main/docs/examples/markdown/emoji.md)
- [dataframes guide](https://github.com/marimo-team/marimo/blob/main/docs/guides/working_with_data/dataframes.md)
- [**Interactive dataframe viewer**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/dataframes.md)
- [**Select dataframe rows**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/table.md)
- [**Editable dataframe**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/data_editor.md)
- [**Interactive dataframe transformer**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/dataframe.md)
- [SQL
guide](https://github.com/marimo-team/marimo/blob/main/docs/guides/working_with_data/sql.md)
- [**Query dataframes with DuckDB SQL**](https://github.com/marimo-team/marimo/blob/main/docs/guides/working_with_data/sql.md#example)
- [**SQLite, Postgres, and other engines**](https://github.com/marimo-team/marimo/blob/main/docs/guides/working_with_data/sql.md#connecting-to-a-custom-database)
- [plotting guide](https://github.com/marimo-team/marimo/blob/main/docs/guides/working_with_data/plotting.md)
- [**Selecting data with Altair**](https://github.com/marimo-team/marimo/blob/main/docs/api/plotting.md#reactive-charts-with-altair)
- [**Selecting data with Plotly**](https://github.com/marimo-team/marimo/blob/main/docs/guides/working_with_data/plotting.md#plotly)
- [**Showing matplotlib plots**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/plots.md)
- [**Progress bar**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/progress_bar.md)
- [**Loading spinner**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/spinner.md)
- [**Horizontal and vertical stacking**](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/stacks.md)
- [**Accordion toggle**](https://github.com/marimo-team/marimo/blob/main/docs/api/layouts/accordion.md)
- [**Tabs**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/tabs.md)
- [API reference](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/index.md)
- [interactivity
guide](https://github.com/marimo-team/marimo/blob/main/docs/guides/interactivity.md)
- [**Slider**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/slider.md)
- [**Dropdown**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/dropdown.md)
- [**Multi-select**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/multiselect.md)
- [**Radio buttons**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/radio.md)
- [**Checkbox**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/checkbox.md)
- [**Date**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/dates.md)
- [**File**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/file.md)
- [**Text input**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/text.md)
- [**Text area**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/text_area.md)
- [**Code editor**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/code_editor.md)
- [**Table**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/table.md)
- [**Microphone**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/microphone.md)
- [**Chat**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/chat.md)
- [**Form**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/form.md)
- [**Array**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/array.md)
- [**Dictionary**](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/dictionary.md)
- [<img src="/_static/example-thumbs/dynamic_markdown.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/markdown/dynamic_markdown.md)
- [<img src="/_static/example-thumbs/mermaid.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/markdown/mermaid.md)
- [<img src="/_static/example-thumbs/admonitions.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/markdown/admonitions.md)
- [<img src="/_static/example-thumbs/details.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/markdown/details.md)
- [<img src="/_static/example-thumbs/dataframes.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/dataframes.md)
- [<img src="/_static/example-thumbs/tables.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/table.md)
- [<img src="/_static/example-thumbs/editable_dataframes.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/api/inputs/data_editor.md)
- [<img src="/_static/example-thumbs/dataframe_transformer.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/api/inputs/dataframe.md)
- [<img src="/_static/example-thumbs/progress_bar.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/progress_bar.md)
- [<img src="/_static/example-thumbs/spinner.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/spinner.md)
- [<img src="/_static/example-thumbs/stacks.png" />](https://github.com/marimo-team/marimo/blob/main/docs/examples/outputs/stacks.md)
- [<img src="/_static/example-thumbs/accordion.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/layouts/accordion.md)
- [<img src="/_static/example-thumbs/tabs.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/tabs.md)
- [<img src="/_static/example-thumbs/slider.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/slider.md)
- [<img src="/_static/example-thumbs/dropdown.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/dropdown.md)
- [<img src="/_static/example-thumbs/multiselect.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/multiselect.md)
- [<img src="/_static/example-thumbs/radio.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/radio.md)
- [<img src="/_static/example-thumbs/checkbox.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/checkbox.md)
- [<img src="/_static/example-thumbs/date.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/date.md)
- [<img src="/_static/example-thumbs/file_upload.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/file.md)
- [<img src="/_static/example-thumbs/text.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/text.md)
- [<img src="/_static/example-thumbs/text_area.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/text_area.md)
- [<img src="/_static/example-thumbs/code_editor.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/code_editor.md)
- [<img src="/_static/example-thumbs/microphone.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/microphone.md)
- [<img src="/_static/example-thumbs/chat.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/chat.md)
- [<img src="/_static/example-thumbs/form.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/form.md)
- [<img src="/_static/example-thumbs/array.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/array.md)
- [<img src="/_static/example-thumbs/dictionary.png" />](https://github.com/marimo-team/marimo/blob/main/docs/api/inputs/dictionary.md)

--- docs/getting_started/installation.md ---
# Installation

Before installing marimo, we recommend creating and activating a Python
[virtual environment](https://docs.python.org/3/tutorial/venv.html#creating-virtual-environments).

??? note "Setting up a virtual environment"

    Python uses virtual environments to minimize conflicts among packages.
    Here's a quickstart for `pip` users. If you use `conda`, please use a [`conda`
    environment](https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#creating-an-environment-with-commands)
    instead.

    Run the following in the terminal:

    - create an environment with `python -m venv marimo-env`
    - activate the environment:
      - macOS/Unix: `source marimo-env/bin/activate`
      - Windows: `marimo-env\Scripts\activate`

    _Make sure the environment is activated before installing marimo and when
    using marimo._ Install other packages you may need, such as numpy, pandas, matplotlib,
    and altair, in this environment. When you're done, deactivate the environment
    with `deactivate` in the terminal.

    Learn more from the [official Python tutorial](https://docs.python.org/3/tutorial/venv.html#creating-virtual-environments).

/// admonition | Using uv?
    type: tip

[uv](https://docs.astral.sh/uv/) is a next-generation Python package
installer and manager that is 10-100x faster than pip, and also makes it easy
to install Python and manage projects. Create a [uv
project](https://docs.astral.sh/uv/guides/projects/) with `uv init`; this
creates and manages a virtual environment for you behind-the-scenes. For
detailed information on using marimo with `uv`, see our [uv
guide](../guides/package_management/using_uv.md).
///

/// admonition | Prefer VS Code/Cursor?
    type: tip

[Try our extension](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo),
which works in VS Code, Cursor, and other VS Code forks.
///



## Install with minimal dependencies

To install marimo, run the following in a terminal:

/// tab | install with pip

```bash
pip install marimo
```

To check if the install worked, run

```bash
marimo tutorial intro
```

///

/// tab | install with uv

```bash
uv add marimo
```

To check if the install worked, run

```bash
uv run marimo tutorial intro
```

///

/// tab | install with conda

```bash
conda install -c conda-forge marimo
```

To check if the install worked, run

```bash
marimo tutorial intro
```

///

A tutorial notebook should open in your browser.

/// admonition | Installation issues?
    type: note

Having installation issues? Reach out to us [at GitHub](https://github.com/marimo-team/marimo/issues) or [on Discord](https://marimo.io/discord?ref=docs).
///

## Install with recommended dependencies

marimo is lightweight, with few dependencies, to maximize compatibility with
your own environments.

To unlock additional features in the marimo editor, including SQL cells,
AI completion, server-side plotting of dataframe columns, and more, we
suggest installing `marimo[recommended]`:

/// tab | install with pip

```bash
pip install "marimo[recommended]"
```

///

/// tab | install with uv

```bash
uv add "marimo[recommended]"
```

///

/// tab | install with conda

```bash
conda install -c conda-forge marimo "duckdb>=1.0.0" "altair>=5.4.0" pyarrow "polars>=1.9.0" "sqlglot[rs]>=23.4" "openai>=1.55.3" "ruff" "nbformat>=5.7.0" "vegafusion>=2.0.0" "vl-convert-python>=1.0.0"
```

///

Installing marimo in this way installs the following additional dependencies and unlocks the following features:

| Dependency                 | Feature                         |
|----------------------------|---------------------------------|
| duckdb>=1.0.0              | SQL cells                       |
| altair>=5.4.0              | Plotting in datasource viewer   |
| polars[pyarrow]>=1.9.0     | SQL output back in Python       |
| sqlglot[rs]>=23.4          | SQL cells parsing               |
| openai>=1.55.3             | AI features                     |
| ruff                       | Formatting                      |
| nbformat>=5.7.0            | Export as IPYNB                 |
| vegafusion>=2.0.0          | Performant charting             |
| vl-convert-python>=1.0.0   | Required by vegafusion          |


## Links discovered
- [virtual environment](https://docs.python.org/3/tutorial/venv.html#creating-virtual-environments)
- [`conda`
    environment](https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#creating-an-environment-with-commands)
- [official Python tutorial](https://docs.python.org/3/tutorial/venv.html#creating-virtual-environments)
- [uv](https://docs.astral.sh/uv/)
- [uv
project](https://docs.astral.sh/uv/guides/projects/)
- [uv
guide](https://github.com/marimo-team/marimo/blob/main/docs/guides/package_management/using_uv.md)
- [Try our extension](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)
- [at GitHub](https://github.com/marimo-team/marimo/issues)
- [on Discord](https://marimo.io/discord?ref=docs)

--- docs/getting_started/quickstart.md ---
# Quickstart

Installing marimo gets you the `marimo` command-line interface (CLI), the entry
point to all things marimo.

## Run tutorials

`marimo tutorial intro` opens the intro tutorial. List all tutorials with

```bash
marimo tutorial --help
```

!!! tip "See marimo in action on YouTube"

    The [marimo concepts playlist](https://www.youtube.com/watch?v=3N6lInzq5MI&list=PLNJXGo8e1XT9jP7gPbRdm1XwloZVFvLEq) on our [YouTube channel](https://www.youtube.com/@marimo-team) gives an overview of many features.

## Edit notebooks

Create and edit notebooks with `marimo edit`.

- launch the notebook server to create new notebooks,
  and start or stop existing ones:

```bash
marimo edit
```

- create or edit a single notebook with

```bash
marimo edit your_notebook.py
```

(If `your_notebook.py` doesn't exist, marimo will create a blank notebook
named `your_notebook.py`.)

## Deploy as apps

Use `marimo run` to [serve your notebook as an app](../guides/apps.md), with
Python code hidden and uneditable.

```bash
marimo run your_notebook.py
```

## Run as scripts

Run your notebook as a script with

```python
python your_notebook.py
```

You can also [pass CLI args](../guides/scripts.md) to your notebook.

## Convert Jupyter notebooks and Python scripts to marimo

Automatically convert Jupyter notebooks and Python scripts to marimo notebooks with `marimo convert`:

```bash
# From Jupyter notebook
marimo convert your_notebook.ipynb -o your_notebook.py

# From Python script or jupytext py:percent format
marimo convert your_script.py -o your_notebook.py
```

Then open the notebook with `marimo edit your_notebook.py`

!!! tip "Disable autorun on startup"
    marimo automatically runs notebooks when they are opened. If this
    is a problem for you (not all Jupyter notebooks are designed to be run on
    startup), you can disable autorun on startup via [user configuration](../guides/configuration/runtime_configuration.md).

    1. Type `marimo config show` to get the location of your config file.
    2. If no config file exists, create it at `$XDG_CONFIG_HOME/marimo/marimo.toml`.
    3. Update your config to include the following:

    ```toml title="marimo.toml"
    [runtime]
    auto_instantiate = false
    ```

## Export marimo notebooks to other file formats

Use

```bash
marimo export
```

to [export marimo notebooks](../guides/exporting.md) to other file formats,
including HTML, IPYNB, and markdown.

## Install optional dependencies for more features

Some features require additional dependencies, which are not installed by default. This includes:

- [SQL cells](../guides/working_with_data/sql.md)
- Charts in the datasource viewer
- [AI features](../guides/editor_features/ai_completion.md)
- Format on save

To install the optional dependencies, run:

/// tab | install with pip

```bash
pip install "marimo[recommended]"
```

///

/// tab | install with uv

```bash
uv add "marimo[recommended]"
```

///

/// tab | install with conda

```bash
conda install -c conda-forge marimo duckdb altair polars openai ruff
```

///

This will install: `duckdb`, `altair`, `polars`, `openai`, and `ruff`.

## Enable GitHub Copilot and AI Assistant

The marimo editor natively supports [GitHub Copilot](https://copilot.github.com/),
an AI pair programmer, similar to VS Code.

_Get started with Copilot_:

1. Install [Node.js](https://nodejs.org/en/download).
2. Enable Copilot via the settings menu in the marimo editor.

_Note_: Copilot is not yet available in our conda distribution; please install
marimo from `PyPI` if you need Copilot.

marimo also comes with support for [other copilots](../guides/editor_features/ai_completion.md#custom-copilots),
and a built-in [AI assistant](../guides/editor_features/ai_completion.md) that helps you write code.

## Share links to cloud notebooks

Use [molab](https://molab.marimo.io/notebooks), a cloud-based marimo notebook
service similar to Google Colab, to create and share notebook links
([docs](../guides/molab.md)).

## VS Code/Cursor extension

You can edit and run marimo notebooks in VS Code or Cursor using our
extension; this provides a user interface that's similar to VS Code
Jupyter, but with marimo's reactive execution, interactive elements,
built-in package management, Git-friendly file format, and more.

Install the extension by searching "marimo" in the extensions sidebar
(`Cmd/Ctrl-Shift-P`, type "install extension", then search "marimo")
or from the [VS Code marketplace site](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo).

<iframe width="560" height="315" src="https://www.youtube.com/embed/BOzK-XBK8A4?si=Bj_Hjuz46jGqMIrt" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>


## Links discovered
- [marimo concepts playlist](https://www.youtube.com/watch?v=3N6lInzq5MI&list=PLNJXGo8e1XT9jP7gPbRdm1XwloZVFvLEq)
- [YouTube channel](https://www.youtube.com/@marimo-team)
- [serve your notebook as an app](https://github.com/marimo-team/marimo/blob/main/docs/guides/apps.md)
- [pass CLI args](https://github.com/marimo-team/marimo/blob/main/docs/guides/scripts.md)
- [user configuration](https://github.com/marimo-team/marimo/blob/main/docs/guides/configuration/runtime_configuration.md)
- [export marimo notebooks](https://github.com/marimo-team/marimo/blob/main/docs/guides/exporting.md)
- [SQL cells](https://github.com/marimo-team/marimo/blob/main/docs/guides/working_with_data/sql.md)
- [AI features](https://github.com/marimo-team/marimo/blob/main/docs/guides/editor_features/ai_completion.md)
- [GitHub Copilot](https://copilot.github.com/)
- [Node.js](https://nodejs.org/en/download)
- [other copilots](https://github.com/marimo-team/marimo/blob/main/docs/guides/editor_features/ai_completion.md#custom-copilots)
- [AI assistant](https://github.com/marimo-team/marimo/blob/main/docs/guides/editor_features/ai_completion.md)
- [molab](https://molab.marimo.io/notebooks)
- [docs](https://github.com/marimo-team/marimo/blob/main/docs/guides/molab.md)
- [VS Code marketplace site](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)

--- docs/apps/README.md ---
# Documentation Apps

This directory contains marimo apps that are used in the documentation.


--- docs/apps/readme_ui.py ---
import marimo

__generated_with = "0.0.13"
app = marimo.App()


@app.cell
def __(mo):
    x = mo.ui.slider(1, 9)
    x
    return x,


@app.cell
def __(math, mo, x):
    mo.md(f"$e^{x.value} = {math.exp(x.value):0.3f}$")
    return


@app.cell
def __():
    import marimo as mo
    return mo,


@app.cell
def __(mo):
    form = mo.ui.slider(1, 9).form()
    form
    return form,


@app.cell
def __(form, mo):
    mo.md(f"The last submitted value is **{form.value}**")
    return


@app.cell
def __():
    import math
    return math,


if __name__ == "__main__":
    app.run()


--- docs/guides/package_management/installing_packages.md ---
# Installing packages

marimo supports package management for `pip`, `uv`, `poetry`, `pixi`, and
`rye`. When marimo comes across a module that is not installed, you will be
prompted to install it using your preferred package manager. Once the module is
installed, all cells that depend on the module will be rerun
(or marked as stale).

You can also install (and remove) packages using the package manager sidebar panel.

!!! note "Resolving package names"

    We use a heuristic for guessing the package name in your registry (e.g. PyPI) from the module name. It is possible that the package name is different from the module name. If you encounter an error, please [file an issue](https://github.com/marimo-team/marimo/issues) or help us by adding your mapping [directly to the codebase](https://github.com/marimo-team/marimo/blob/main/marimo/_runtime/packages/module_name_to_pypi_name.py).

**Notes.**

* When using imperative style package managers like `pip`, packages are installed directly
in the active virtual environment.
* When using `uv`, marimo will decide whether to add it to your `pyproject.toml`
(if running as part of a uv project), or whether to install it imperatively with `uv pip` (otherwise).
* When running in a [package sandbox](inlining_dependencies.md), package installation
and removal also updates the notebook's inline dependencies.


## Links discovered
- [file an issue](https://github.com/marimo-team/marimo/issues)
- [directly to the codebase](https://github.com/marimo-team/marimo/blob/main/marimo/_runtime/packages/module_name_to_pypi_name.py)
- [package sandbox](https://github.com/marimo-team/marimo/blob/main/docs/guides/package_management/inlining_dependencies.md)

--- docs/guides/editor_features/overview.md ---
# Editor overview

This guide introduces some of marimo editor's features, including
a variables panel, dependency graph viewer, table of contents, HTML export,
[GitHub copilot](ai_completion.md#github-copilot), code formatting, a feedback form, and more.

## Configuration

The editor exposes of a number of settings for the current notebook,
as well as user-wide configuration that will apply to all your notebooks.
These settings include the option to display the current notebook in
full width, to use [vim keybindings](#vim-keybindings), to enable [GitHub copilot](ai_completion.md#github-copilot), and more.

To access these settings, click the gear icon in the top-right of the editor:

<div align="center">
<img src="/_static/docs-user-config.png"  />
</div>

A non-exhaustive list of settings:

- [Command mode](#command-mode)
- Outputs above or below code cells
- [Disable/enable autorun](../reactivity.md#configuring-how-marimo-runs-cells)
- Package installation
- [Vim keybindings](#vim-keybindings)
- Dark mode
- Auto-save
- Auto-complete
- Editor font-size
- Code formatting with ruff/black
- [GitHub Copilot](ai_completion.md#github-copilot)
- [LLM coding assistant](ai_completion.md)
- [Module autoreloading](../configuration/runtime_configuration.md#on-module-change)
- [Reactive reference highlighting](dataflow.md#reactive-reference-highlighting)

## Command mode

marimo distinguishes between editing cell content and working with cells at the
notebook level.

**Command mode** lets you navigate, select, and manipulate _cells_ rather than
editing their contents.

**Enter/Exit:**

- Enter command mode: `Esc` (from cell editor) or `Ctrl+Esc`/`Cmd+Esc` (when [vim keybindings](#vim-keybindings) are enabled, `Shift+Esc` on Windows)
- Exit command mode: `Enter` or click on a cell

**Shortcuts:**

- `‚Üì`/`‚Üë` - navigate cells
- `Shift+‚Üì`/`Shift+‚Üë` - multi-select cells
- `Enter` - edit selected cell
- `a`/`b` - new cell above/below
- `c`/`v` - copy/paste cells
- `s` - save notebook
- `Shift+Enter` - run cell and move to next
- `Ctrl/Cmd+‚Üë` / `Ctrl/Cmd+‚Üì` - jump to top/bottom of notebook

When [vim keybindings](#vim-keybindings) are enabled, additional shortcuts are available.

### Vim keybindings

marimo supports vim keybindings that extend to notebook editing. Within cells,
use standard vim modes. Press `Ctrl+Esc` (or `Cmd+Esc` on macOS, `Shift+Esc` on Windows) from normal mode to enter [command
mode](#command-mode) for notebook navigation.

**Cell editing additions:**

- `gd` - go to definition
- `dd` - delete empty cell
- `:w` - save notebook

**Custom vimrc:**

You can customize your vim experience by adding a `.vimrc` configuration in the user settings or pyproject.toml

/// tab | User config

```toml title="marimo.toml"
[keymap]
vimrc = "/User/absolute/path/to/.vimrc"
```

///

/// tab | pyproject.toml

```toml title="pyproject.toml"
[tool.marimo.keymap]
vimrc = "relative/path/.vimrc"
```

///

**Command mode additions:**

When vim keybindings are enabled, press `Ctrl+Esc` (or `Cmd+Esc` on macOS, `Shift+Esc` on Windows) from normal mode to enter
[command mode](#command-mode) with additional vim-specific keybindings:

- `j`/`k` - navigate cells
- `gg`/`G` - first/last cell
- `Shift+j`/`k` - extend selection
- `dd` - delete cell
- `yy` - copy cell
- `p`/`P` - paste below/above
- `o`/`O` - new cell below/above
- `u` - undo deletion
- `i` - edit cell (i.e., return to normal mode)

Press `i` or `Enter` to return to cell editing.

## Sidebar and Developer Panel

marimo organizes editor tools into two areas: the **sidebar** on the left for everyday notebook tools (files, variables, packages, AI, documentation), and the **developer panel** at the bottom for debugging utilities (errors, logs, terminal, tracing).

You can customize both areas by dragging panels to reorder them or move them between sections. Toggle the sidebar with `Cmd/Ctrl-Shift-S` and the developer panel with `Cmd/Ctrl-J`.

See the [Sidebar and Developer Panel](panels.md) guide for a complete list of available panels and customization options.

## Cell actions

Click the three dots in the top right of a cell to pull up a context menu,
letting you format code, hide code, send a cell to the top or bottom of the
notebook, give the cell a name, and more.

Drag a cell using the vertical dots to the right of the cell.

## Right-click menus

marimo supports context-sensitive right-click menus in various locations of
the editor. Right-click on a cell to open a context-sensitive menu; right click
on the create-cell button (the plus icon) to get options for the cell type to
create.

## Go-to-definition

- Click on a variable in the editor to see where it's defined and used
- `Cmd/Ctrl-Click` on a variable to jump to its definition
- Right-click on a variable to see a context menu with options to jump to its definition

## Signature hints

Signature hints show a function‚Äôs docstring above your code as you type, making it easy to recall its arguments and usage.
Enable this feature under the **Editor** section in the Settings panel.

<div align="center">
<figure>
<img src="/_static/docs-signature-hint.png" width="600px" />
</figure>
</div>


## Keyboard shortcuts

We've kept some well-known [keyboard
shortcuts](hotkeys.md) for notebooks (`Ctrl-Enter`, `Shift-Enter`), dropped others, and added a few of our own. Hit `Ctrl/Cmd-Shift-H` to pull up the shortcuts.

We know keyboard shortcuts are very personal; you can remap them in the
configuration.

_Missing a shortcut? File a
[GitHub issue](https://github.com/marimo-team/marimo/issues)._


## Command palette

Hit `Cmd/Ctrl+K` to open the command palette.

<div align="center">
<figure>
<img src="/_static/docs-command-palette.png"/>
<figcaption>Quickly access common commands with the command palette.</figcaption>
</figure>
</div>

_Missing a command? File a
[GitHub issue](https://github.com/marimo-team/marimo/issues)._

## Editor widths

You can set the width of the editor in the notebook settings:

- **Compact**: A narrow width with generous margins, ideal for reading
- **Wide**: A wider layout that gives more space for content
- **Full**: Uses the full width of your browser window, ideal for dashboard-style notebooks
- **Multi-column**: Splits your notebook into multiple columns, letting you view and edit cells side-by-side. This is only possible because marimo models your notebook as a directed acyclic graph (DAG) and the [execution order](../reactivity.md#execution-order) is determined by the relationships between
cells and their variables, not by the order of cells on the page.

<div align="center">
<figure>
<img src="/_static/docs-multi-column.png"/>
<figcaption>Multi-column notebook</figcaption>
</figure>
</div>

## Share on our online playground

Get a link to share your notebook via our [online playground](../wasm.md):

<div align="center">
<figure>
<video autoplay muted loop playsinline width="100%" height="100%" align="center">
    <source src="/_static/share-wasm-link.mp4" type="video/mp4">
    <source src="/_static/share-wasm-link.webm" type="video/webm">
</video>
</figure>
</div>

_Our online playground uses WebAssembly. Most but not all packages on PyPI
are supported. Local files are not synchronized to our playground._

## Export to static HTML

Export the current view your notebook to static HTML via the notebook
menu:

<div align="center">
<figure>
<img src="/_static/docs-html-export.png"/>
<figcaption>Download as static HTML.</figcaption>
</figure>
</div>

You can also export to HTML at the command-line:

```bash
marimo export html notebook.py -o notebook.html
```

## Send feedback

The question mark icon in the panel tray opens a
dialog to send anonymous feedback. We welcome any and all feedback, from the
tiniest quibbles to the biggest blue-sky dreams.

<div align="center">
<figure>
<img src="/_static/docs-feedback-form.png"/>
<figcaption>Send anonymous feedback with our feedback form.</figcaption>
</figure>
</div>

If you'd like your feedback to start a conversation (we'd love to talk with
you!), please consider posting in our [GitHub
issues](https://github.com/marimo-team/marimo/issues) or
[Discord](https://marimo.io/discord?ref=docs). But if you're in a flow state and
can't context switch out, the feedback form has your back.


## Links discovered
- [GitHub copilot](https://github.com/marimo-team/marimo/blob/main/docs/guides/editor_features/ai_completion.md#github-copilot)
- [Disable/enable autorun](https://github.com/marimo-team/marimo/blob/main/docs/guides/reactivity.md#configuring-how-marimo-runs-cells)
- [GitHub Copilot](https://github.com/marimo-team/marimo/blob/main/docs/guides/editor_features/ai_completion.md#github-copilot)
- [LLM coding assistant](https://github.com/marimo-team/marimo/blob/main/docs/guides/editor_features/ai_completion.md)
- [Module autoreloading](https://github.com/marimo-team/marimo/blob/main/docs/guides/configuration/runtime_configuration.md#on-module-change)
- [Reactive reference highlighting](https://github.com/marimo-team/marimo/blob/main/docs/guides/editor_features/dataflow.md#reactive-reference-highlighting)
- [Sidebar and Developer Panel](https://github.com/marimo-team/marimo/blob/main/docs/guides/editor_features/panels.md)
- [keyboard
shortcuts](https://github.com/marimo-team/marimo/blob/main/docs/guides/editor_features/hotkeys.md)
- [GitHub issue](https://github.com/marimo-team/marimo/issues)
- [execution order](https://github.com/marimo-team/marimo/blob/main/docs/guides/reactivity.md#execution-order)
- [online playground](https://github.com/marimo-team/marimo/blob/main/docs/guides/wasm.md)
- [GitHub
issues](https://github.com/marimo-team/marimo/issues)
- [Discord](https://marimo.io/discord?ref=docs)

--- frontend/src/core/packages/useInstallPackage.ts ---
/* Copyright 2026 Marimo. All rights reserved. */

import { useState } from "react";
import { Logger } from "@/utils/Logger";
import { useRequestClient } from "../network/requests";
import { showAddPackageToast } from "./toast-components";

export function useInstallPackages(): {
  handleInstallPackages: (
    packages: string[],
    onSuccess?: () => void,
  ) => Promise<void>;
  loading: boolean;
} {
  const [loading, setLoading] = useState(false);
  const { addPackage } = useRequestClient();

  const handleInstallPackages = async (
    packages: string[],
    onSuccess?: () => void,
  ) => {
    setLoading(true);

    try {
      for (const [idx, packageName] of packages.entries()) {
        const response = await addPackage({ package: packageName });
        if (response.success) {
          showAddPackageToast(packageName);
        } else {
          showAddPackageToast(packageName, response.error);
        }
        // Wait 1s if there are more packages to install
        if (idx < packages.length - 1) {
          await new Promise((resolve) => setTimeout(resolve, 1000));
        }
      }
      onSuccess?.();
    } catch (error) {
      Logger.error(error);
    } finally {
      setLoading(false);
    }
  };

  return { loading, handleInstallPackages };
}


--- docs/guides/island_example.md ---
# marimo islands üèùÔ∏è

<!-- marimo js/ccs -->
<script
  type="module"
  src="https://cdn.jsdelivr.net/npm/@marimo-team/islands@0.5.0/dist/main.js"
></script>
<link
  href="https://cdn.jsdelivr.net/npm/@marimo-team/islands@0.5.0/dist/style.css"
  rel="stylesheet"
  crossorigin="anonymous"
/>
<!-- fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500;700&amp;family=Lora&amp;family=PT+Sans:wght@400;700&amp;display=swap"
  rel="stylesheet"
/>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css"
  integrity="sha384-wcIxkf4k558AjM3Yz3BBFQUbk/zgIYC2R0QpeeYb+TwlBVMrlgLqwRjRtGZiK7ww"
  crossorigin="anonymous"
/>

!!! note "Preview"

    Islands are an early feature. While the API likely won't change, there are some improvements we'd like to make before we consider them stable.
    Please let us know on [GitHub](https://github.com/marimo-team/marimo/issues) if you run into any issues or have any feedback!

> This content below is powered by marimo's reactive runtime. It will become interactive after initializing the marimo runtime.

<hr/>

<marimo-island data-app-id="main" data-cell-id="Hbol" data-reactive="true">
  <marimo-cell-output></marimo-cell-output>
  <marimo-cell-code hidden>import%20marimo%20as%20mo</marimo-cell-code>
</marimo-island>
<marimo-island data-app-id="main" data-cell-id="MJUe" data-reactive="true">
  <marimo-cell-output>
    <marimo-ui-element object-id="MJUe-0" random-id="0a0beb44-f946-450d-a690-678a45aeb110">
      <marimo-slider
        data-initial-value="2"
        data-label="null"
        data-start="0"
        data-stop="10"
        data-steps="[]"
        data-debounce="false"
        data-orientation='"horizontal"'
        data-show-value="false"
        data-full-width="false"
      ></marimo-slider>
    </marimo-ui-element>
  </marimo-cell-output>
  <marimo-cell-code hidden>slider%20%3D%20mo.ui.slider(0%2C%2010,value=2)%3B%20slider</marimo-cell-code>
</marimo-island>
<marimo-island data-app-id="main" data-cell-id="vblA" data-reactive="true">
  <marimo-cell-output>
    <span class="markdown"><span class="paragraph">Hello, islands! üèùÔ∏èüèùÔ∏è</span></span>
  </marimo-cell-output>
  <marimo-ui-element object-id="9c045fc3-f483-4024-ad01-cbf8f06cd7b7" random-id="9c045fc3-f483-4024-ad01-cbf8f06cd7b7">
    <marimo-code-editor
      data-initial-value='"mo.md(f&#x27;Hello, islands! {&#92;"&#92;ud83c&#92;udfdd&#92;ufe0f&#92;" * slider.value}&#x27;)"'
      data-label="null"
      data-language='"python"'
      data-placeholder='""'
      data-disabled="false"
    ></marimo-code-editor>
  </marimo-ui-element>
</marimo-island>

<hr style="margin: 20px 0;" />

??? example "See the HTML"

    ```html
    <marimo-island data-app-id="main" data-cell-id="Hbol" data-reactive="true">
      <marimo-cell-output></marimo-cell-output>
      <marimo-cell-code hidden>import%20marimo%20as%20mo</marimo-cell-code>
    </marimo-island>
    <marimo-island data-app-id="main" data-cell-id="MJUe" data-reactive="true">
      <marimo-cell-output>
        <marimo-ui-element object-id="MJUe-0" random-id="0a0beb44-f946-450d-a690-678a45aeb110">
          <marimo-slider
            data-initial-value="2"
            data-label="null"
            data-start="0"
            data-stop="10"
            data-steps="[]"
            data-debounce="false"
            data-orientation='"horizontal"'
            data-show-value="false"
            data-full-width="false"
          ></marimo-slider>
        </marimo-ui-element>
      </marimo-cell-output>
      <marimo-cell-code hidden>slider%20%3D%20mo.ui.slider(0%2C%2010,value=2)%3B%20slider</marimo-cell-code>
    </marimo-island>
    <marimo-island data-app-id="main" data-cell-id="vblA" data-reactive="true">
      <marimo-cell-output>
        <span class="markdown"><span class="paragraph">Hello, islands! üèùÔ∏èüèùÔ∏è</span></span>
      </marimo-cell-output>
      <marimo-ui-element object-id="9c045fc3-f483-4024-ad01-cbf8f06cd7b7" random-id="9c045fc3-f483-4024-ad01-cbf8f06cd7b7">
        <marimo-code-editor
          data-initial-value='"mo.md(f&#x27;Hello, islands! {&#92;"&#92;ud83c&#92;udfdd&#92;ufe0f&#92;" * slider.value}&#x27;)"'
          data-label="null"
          data-language='"python"'
          data-placeholder='""'
          data-disabled="false"
        ></marimo-code-editor>
      </marimo-ui-element>
    </marimo-island>
    ```


## Links discovered
- [GitHub](https://github.com/marimo-team/marimo/issues)

--- docs/examples/markdown/admonitions.md ---
# Admonitions


/// marimo-embed-file
    size: xlarge
    mode: edit
    filepath: examples/markdown/admonitions.py
///


--- examples/README.md ---
# Examples

This folder contains example marimo notebooks, meant to teach you how to
use marimo's features as well as inspire you to make awesome notebooks.


- üñ±Ô∏è [`ui/`](ui/): how to use UI elements or widgets
- üõ¢Ô∏è [`sql/`](sql/): how to use SQL in marimo
- ‚õ≤ [`control_flow/`](control_flow/): how to control cell execution and output display
- üìù [`markdown/`](markdown/): how to write markdown, including dynamic markdown
- üìΩÔ∏è [`layouts/`](layouts/): how to present notebooks as slides, add sidebars, and more
- ü§ñ [`ai/`](ai/): AI-related examples
- üß™ [`testing/`](testing/): how to test marimo notebooks, and use marimo notebooks as tests
- üì¶ [`third_party/`](third_party/): using popular third-party packages in marimo
- ‚òÅÔ∏è  [`cloud/`](cloud/): using various cloud providers
- üß© [`frameworks/`](frameworks/): integrating with different frameworks (web/ASGI)
- ‚ú® [`misc/`](misc/): miscellaneous topical examples

> [!TIP]
> New to marimo? Run `marimo tutorial intro` at the command line first!

> [!TIP]
> Check out our [public gallery](https://marimo.io/gallery) of interactive
> notebooks to get inspired.

> [!NOTE]
> Submit a
> [pull request](https://github.com/marimo-team/marimo/pulls) to add an example!
> We especially welcome library developers to add examples to `third_party/`.

## Running examples

The requirements of each notebook are serialized in them as a top-level
comment. Here are the steps to open an example notebook:

1. [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
2. Open an example with `marimo edit --sandbox <notebook-url>`.

For example:

```bash
uvx marimo edit --sandbox https://github.com/marimo-team/marimo/blob/main/examples/misc/seam_carving.py
```

> [!TIP]
> The [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html) opens the notebook in an isolated virtual environment,
> automatically installing the notebook's dependencies üì¶

You can also open notebooks without `uv`, in which case you'll need to
manually [install marimo](https://docs.marimo.io/getting_started/index.html#installation)
first. Then run `marimo edit <notebook.py>`; however, you'll also need to
install the requirements yourself.

## More examples üåü

Every week, we highlight stellar examples and projects from our community.
Check them out at our [marimo spotlights](https://github.com/marimo-team/spotlights)
repo!


## Links discovered
- [`ui/`](https://github.com/marimo-team/marimo/blob/main/examples/ui.md)
- [`sql/`](https://github.com/marimo-team/marimo/blob/main/examples/sql.md)
- [`control_flow/`](https://github.com/marimo-team/marimo/blob/main/examples/control_flow.md)
- [`markdown/`](https://github.com/marimo-team/marimo/blob/main/examples/markdown.md)
- [`layouts/`](https://github.com/marimo-team/marimo/blob/main/examples/layouts.md)
- [`ai/`](https://github.com/marimo-team/marimo/blob/main/examples/ai.md)
- [`testing/`](https://github.com/marimo-team/marimo/blob/main/examples/testing.md)
- [`third_party/`](https://github.com/marimo-team/marimo/blob/main/examples/third_party.md)
- [`cloud/`](https://github.com/marimo-team/marimo/blob/main/examples/cloud.md)
- [`frameworks/`](https://github.com/marimo-team/marimo/blob/main/examples/frameworks.md)
- [`misc/`](https://github.com/marimo-team/marimo/blob/main/examples/misc.md)
- [public gallery](https://marimo.io/gallery)
- [pull request](https://github.com/marimo-team/marimo/pulls)
- [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
- [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html)
- [install marimo](https://docs.marimo.io/getting_started/index.html#installation)
- [marimo spotlights](https://github.com/marimo-team/spotlights)

--- examples/ai/README.md ---
# AI ü§ñ

These examples showcase a few simple applications of AI.

- üí¨ [`chat/`](chat/): creating chatbots with marimo, using [`mo.ui.chat`](https://docs.marimo.io/api/inputs/chat.html#marimo.ui.chat)
- üõ¢Ô∏è [`data/`](data/): making data labeling and model comparison tools
- üõ† [`tools/`](tools/): interacting with external functions and services with function calling, returning rich responses
- üçø [`misc/`](misc/): miscellaneous AI examples

> [!TIP]
> Submit a
> [pull request](https://github.com/marimo-team/marimo/pulls) to add an example!

## Running examples

The requirements of each notebook are serialized in them as a top-level
comment. Here are the steps to open an example notebook:

1. [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
2. Open an example with `uvx marimo edit --sandbox <notebook-url>`

> [!TIP]
> The [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html) opens the notebook in an isolated virtual environment,
> automatically installing the notebook's dependencies üì¶

You can also open notebooks without `uv`, in which case you'll need to
manually [install marimo](https://docs.marimo.io/getting_started/index.html#installation)
first. Then run `marimo edit <notebook-url>`; however, you'll also need to
install the requirements yourself.


## Links discovered
- [`chat/`](https://github.com/marimo-team/marimo/blob/main/examples/ai/chat.md)
- [`mo.ui.chat`](https://docs.marimo.io/api/inputs/chat.html#marimo.ui.chat)
- [`data/`](https://github.com/marimo-team/marimo/blob/main/examples/ai/data.md)
- [`tools/`](https://github.com/marimo-team/marimo/blob/main/examples/ai/tools.md)
- [`misc/`](https://github.com/marimo-team/marimo/blob/main/examples/ai/misc.md)
- [pull request](https://github.com/marimo-team/marimo/pulls)
- [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
- [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html)
- [install marimo](https://docs.marimo.io/getting_started/index.html#installation)

--- examples/cloud/README.md ---
# Cloud ‚òÅÔ∏è

These examples show how to use various cloud provider APIs.

> [!TIP]
> Submit a
> [pull request](https://github.com/marimo-team/marimo/pulls) to add an example!

## Running examples

The requirements of each notebook are serialized in them as a top-level
comment. Here are the steps to open an example notebook:

1. [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
2. Open an example with `uvx marimo edit --sandbox <notebook-url>`

> [!TIP]
> The [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html) opens the notebook in an isolated virtual environment,
> automatically installing the notebook's dependencies üì¶

You can also open notebooks without `uv`, in which case you'll need to
manually [install marimo](https://docs.marimo.io/getting_started/index.html#installation)
first. Then run `marimo edit <notebook-url>`; however, you'll also need to
install the requirements yourself.


## Links discovered
- [pull request](https://github.com/marimo-team/marimo/pulls)
- [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
- [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html)
- [install marimo](https://docs.marimo.io/getting_started/index.html#installation)

--- examples/control_flow/README.md ---
# Control Flow

These basic examples show how to control execution of cells.

> [!TIP]
> New to marimo? Run `marimo tutorial intro` and `marimo tutorial dataflow`
> at the command line first!

_Looking for examples on making chatbots? Check out the [`ai/chat`](../ai/chat)
examples folder_.

## Running examples

The requirements of each notebook are serialized in them as a top-level
comment. Here are the steps to open an example notebook:

1. [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
2. Open an example with `uvx marimo edit --sandbox <notebook-url>`

> [!TIP]
> The [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html) opens the notebook in an isolated virtual environment,
> automatically installing the notebook's dependencies üì¶

You can also open notebooks without `uv`, in which case you'll need to
manually [install marimo](https://docs.marimo.io/getting_started/index.html#installation)
first. Then run `marimo edit <notebook-url>`; however, you'll also need to
install the requirements yourself.


## Links discovered
- [`ai/chat`](https://github.com/marimo-team/marimo/blob/main/examples/ai/chat.md)
- [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
- [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html)
- [install marimo](https://docs.marimo.io/getting_started/index.html#installation)

--- examples/frameworks/README.md ---
# Frameworks üß©

These examples show how to use marimo with various web/ASGI frameworks, such as FastAPI, Flask, and FastHTML.

> [!TIP]
> Submit a
> [pull request](https://github.com/marimo-team/marimo/pulls) to add an example!

## Running examples

Each example includes a `README.md` file with instructions for running it.


## Links discovered
- [pull request](https://github.com/marimo-team/marimo/pulls)

--- examples/layouts/README.md ---
# Layouts üìΩÔ∏è

These examples show how to use marimo's built-in features for laying out
notebooks in interesting ways, such as presenting notebooks as slides,
adding sidebars, and arranging cells into columns while editing.

> [!TIP]
> Submit a
> [pull request](https://github.com/marimo-team/marimo/pulls) to add an example!


## Running examples

The requirements of each notebook are serialized in them as a top-level
comment. Here are the steps to open an example notebook:

1. [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
2. Open an example with `uvx marimo edit --sandbox <notebook-url>`

> [!TIP]
> The [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html) opens the notebook in an isolated virtual environment,
> automatically installing the notebook's dependencies üì¶

You can also open notebooks without `uv`, in which case you'll need to
manually [install marimo](https://docs.marimo.io/getting_started/index.html#installation)
first. Then run `marimo edit <notebook-url>`; however, you'll also need to
install the requirements yourself.


## Links discovered
- [pull request](https://github.com/marimo-team/marimo/pulls)
- [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
- [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html)
- [install marimo](https://docs.marimo.io/getting_started/index.html#installation)

--- examples/markdown/README.md ---
# Markdown

These basic examples show how to use write markdown in marimo.

> [!TIP]
> New to marimo? Run `marimo tutorial intro` and `marimo tutorial markdown`
> at the command line first!

## Running examples

The requirements of each notebook are serialized in them as a top-level
comment. Here are the steps to open an example notebook:

1. [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
2. Open an example with `uvx marimo edit --sandbox <notebook-url>`

> [!TIP]
> The [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html) opens the notebook in an isolated virtual environment,
> automatically installing the notebook's dependencies üì¶

You can also open notebooks without `uv`, in which case you'll need to
manually [install marimo](https://docs.marimo.io/getting_started/index.html#installation)
first. Then run `marimo edit <notebook-url>`; however, you'll also need to
install the requirements yourself.


## Links discovered
- [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
- [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html)
- [install marimo](https://docs.marimo.io/getting_started/index.html#installation)

--- examples/misc/README.md ---
# Misc ‚ú® 

A hodgepodge of examples!

> [!TIP]
> Submit a
> [pull request](https://github.com/marimo-team/marimo/pulls) to add an example!

## Running examples

The requirements of each notebook are serialized in them as a top-level
comment. Here are the steps to open an example notebook:

1. [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
2. Open an example with `uvx marimo edit --sandbox <notebook.py>`.

> [!TIP]
> The [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html) opens the notebook in an isolated virtual environment,
> automatically installing the notebook's dependencies üì¶

You can also open notebooks without `uv`, with just `marimo edit <notebook.py>`;
however, you'll need to install the requirements yourself.


## Links discovered
- [pull request](https://github.com/marimo-team/marimo/pulls)
- [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
- [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html)

--- examples/sql/README.md ---
# SQL üõ¢Ô∏è

These examples show how to use marimo's built-in support for SQL, which
is powered by [duckdb](https://duckdb.org/), a fast in-process
analytical database.

- `querying_dataframes.py` shows hows to query Pandas or Polars dataframes
- `paremetrizing_sql_queries.py` shows hows to parametrize queries with Python values
- `read_csv.py` shows hows to read CSV data into duckdb
- `read_json.py` shows hows to read JSON data into duckdb
- `read_parquet.py` shows hows to read parquet data into duckdb
- `connect_to_persistent_db.py` shows hows to connect to a duckdb persistent database
- `connect_to_sqlite.py` shows hows to connect to a SQLite database
- `connect_to_postgres.py` shows hows to connect to a PostgreSQL database
- `connect_to_motherduck.py` shows hows to connect to [motherduck](https://motherduck.com)
- `histograms.py` shows hows to plot histograms of a column's values
- [`misc/`](misc/) contains illustrative examples

> [!TIP]
> For a broad overview of using SQL in marimo, run `marimo tutorial sql` at the
> command-line.

Consult the [duckdb documentation](https://duckdb.org/docs/index) for a
comprehensive guide on duckdb.

## Running examples

The requirements of each notebook are serialized in them as a top-level
comment. Here are the steps to open an example notebook:

1. [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
2. Open an example with `uvx marimo edit --sandbox <notebook-url>`

> [!TIP]
> The [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html) opens the notebook in an isolated virtual environment,
> automatically installing the notebook's dependencies üì¶

You can also open notebooks without `uv`, in which case you'll need to
manually [install marimo](https://docs.marimo.io/getting_started/index.html#installation)
first. Then run `marimo edit <notebook-url>`; however, you'll also need to
install the requirements yourself.


## Links discovered
- [duckdb](https://duckdb.org/)
- [motherduck](https://motherduck.com)
- [`misc/`](https://github.com/marimo-team/marimo/blob/main/examples/sql/misc.md)
- [duckdb documentation](https://duckdb.org/docs/index)
- [Install `uv`](https://github.com/astral-sh/uv/?tab=readme-ov-file#installation)
- [`--sandbox` flag](https://docs.marimo.io/guides/editor_features/package_management.html)
- [install marimo](https://docs.marimo.io/getting_started/index.html#installation)

--- examples/testing/README.md ---
# Testing üß™

These basic examples show how to use test marimo notebooks.

## Testing with pytest

Run `pytest test_with_pytest.py`.

## Testing with doctests

See `running_doctests.py`


--- tests/test_api.py ---
from __future__ import annotations

from tests.mocks import snapshotter
from tests.utils import explore_module

snapshot = snapshotter(__file__)


def test_api():
    import marimo as mo

    results = explore_module(mo)
    assert len(results) > 0
    snapshot("api.txt", "\n".join(results))


--- tests/snapshots/api.txt ---
App
AppMeta
Cell
Html
MarimoIslandGenerator
MarimoStopError
Thread
accordion
ai
  ChatAttachment
  ChatMessage
  ChatModelConfig
  llm
    anthropic
    bedrock
    google
    groq
    openai
    pydantic_ai
app_meta
as_html
audio
cache
callout
capture_stderr
capture_stdout
carousel
center
cli_args
create_asgi_app
current_thread
defs
doc
download
hstack
icon
iframe
image
image_compare
inspect
islands
  MarimoIslandGenerator
  MarimoIslandStub
json
latex
lazy
left
lru_cache
md
mermaid
mpl
  interactive
nav_menu
notebook_dir
notebook_location
outline
output
  append
  clear
  replace
  replace_at_index
pdf
persistent_cache
plain
plain_text
query_params
redirect_stderr
redirect_stdout
refs
right
routes
running_in_notebook
show_code
sidebar
sql
stat
state
status
  progress_bar
  spinner
  toast
stop
style
tabs
tree
ui
  altair_chart
  anywidget
  array
  batch
  button
  chat
  checkbox
  code_editor
  data_editor
  data_explorer
  dataframe
  date
  date_range
  datetime
  dictionary
  dropdown
  experimental_data_editor
  file
  file_browser
  form
  microphone
  multiselect
  number
  panel
  plotly
  radio
  range_slider
  refresh
  run_button
  slider
  switch
  table
  tabs
  text
  text_area
video
vstack
watch
  directory
  file

--- packages/openapi/convert_types.js ---
/* Copyright 2026 Marimo. All rights reserved. */
/** biome-ignore-all lint/suspicious/noConsole: for debugging */
// @ts-check
import * as fs from "node:fs";
import * as process from "node:process";

/**
 * Make an assertion.
 *
 * @param {unknown} expression - The expression to test.
 * @param {string=} msg - The optional message to display if the assertion fails.
 * @returns {asserts expression}
 * @throws an {@link Error} if `expression` is not truthy.
 */
function assert(expression, msg = "") {
  if (!expression) {
    console.error(msg);
    process.exit(1);
  }
}

function main() {
  const paths = process.argv.slice(2);

  if (paths.length === 0) {
    console.error("Usage: node convert_types.js file1.ts [file2.ts ...]");
    process.exit(1);
  }

  for (const filePath of paths) {
    assert(fs.existsSync(filePath), `Expected ${filePath} to exist`);
    assert(
      filePath.endsWith(".ts"),
      `Expected ${filePath} to have .ts extension`,
    );
    const stats = fs.statSync(filePath);
    assert(stats.isFile(), `Expected ${filePath} to be a file`);

    const content = fs.readFileSync(filePath, "utf8");
    const newContent = content.replace(
      /Record<string, never>/g,
      "Record<string, any>",
    );
    if (content !== newContent) {
      fs.writeFileSync(filePath, newContent);
      console.log(`Updated: ${filePath}`);
    } else {
      console.log(`No changes made to: ${filePath}`);
    }
  }
}

main();


--- marimo/_utils/dataclass_to_openapi.py ---
# Copyright 2026 Marimo. All rights reserved.
from __future__ import annotations

import dataclasses
import datetime
import sys
from collections.abc import Mapping, Sequence as CollectionSequence
from decimal import Decimal
from enum import Enum
from typing import (
    Any,
    ClassVar,
    ForwardRef,
    Literal,
    Optional,
    Union,
    get_args,
    get_origin,
    get_type_hints,
)

from marimo._utils.case import to_camel_case

if sys.version_info < (3, 11):
    from typing_extensions import NotRequired
else:
    from typing import NotRequired

from typing import Sequence  # noqa: UP035

import msgspec
import msgspec.json


class PythonTypeToOpenAPI:
    def __init__(self, *, name_overrides: dict[Any, str], camel_case: bool):
        self.name_overrides = name_overrides
        self.camel_case = camel_case
        self.optional_name_overrides = {
            Optional[arg]: name for arg, name in name_overrides.items()
        }

    def convert(
        self,
        py_type: Any,
        processed_classes: dict[Any, str],
    ) -> dict[str, Any]:
        """
        Convert a Python type to an OpenAPI schema.

        Returns:
            Dict[str, Any]: The OpenAPI schema.
        """
        if type(py_type) is type(msgspec.Struct):
            return msgspec.json.schema(py_type)["$defs"][py_type.__name__]  # type: ignore[no-any-return]

        origin = get_origin(py_type)
        optional_name_overrides = self.optional_name_overrides

        if isinstance(py_type, ForwardRef):
            return {"$ref": f"#/components/schemas/{py_type.__forward_arg__}"}

        # Handle NewType by unwrapping to its base type
        if hasattr(py_type, "__supertype__"):  # NewType check
            return self.convert(py_type.__supertype__, processed_classes)

        if origin is Union:
            args = get_args(py_type)
            if py_type in processed_classes:
                ref = processed_classes[py_type]
                return {"$ref": f"#/components/schemas/{ref}"}
            if py_type in optional_name_overrides:
                ref = optional_name_overrides[py_type]
                return {
                    "$ref": f"#/components/schemas/{ref}",
                    "nullable": True,
                }

            # Optional is a Union[None, ...]
            if type(None) in args:
                non_none_args = [arg for arg in args if arg is not type(None)]
                if len(non_none_args) == 1:
                    return {
                        **self.convert(
                            non_none_args[0],
                            processed_classes,
                        ),
                        "nullable": True,
                    }
                else:
                    return {
                        "oneOf": _unique(
                            [
                                self.convert(
                                    arg,
                                    processed_classes,
                                )
                                for arg in non_none_args
                            ]
                        ),
                        "nullable": True,
                    }
            else:
                return {
                    "oneOf": _unique(
                        [
                            self.convert(
                                arg,
                                processed_classes,
                            )
                            for arg in args
                        ]
                    )
                }
        elif (
            origin is list
            or origin is CollectionSequence
            or origin is Sequence
        ):
            if py_type in processed_classes:
                ref = processed_classes[py_type]
                return {"$ref": f"#/components/schemas/{ref}"}
            (item_type,) = get_args(py_type)
            return {
                "type": "array",
                "items": self.convert(item_type, processed_classes),
            }
        elif origin is dict or origin is Mapping:
            if py_type in processed_classes:
                ref = processed_classes[py_type]
                return {"$ref": f"#/components/schemas/{ref}"}
            _key_type, value_type = get_args(py_type)
            return {
                "type": "object",
                "additionalProperties": self.convert(
                    value_type, processed_classes
                ),
            }
        elif origin is Literal:
            if py_type in processed_classes:
                ref = processed_classes[py_type]
                return {"$ref": f"#/components/schemas/{ref}"}
            return {"enum": list(get_args(py_type)), "type": "string"}
        elif origin is NotRequired:
            return self.convert(
                get_args(py_type)[0],
                processed_classes,
            )
        elif origin is tuple:
            args = get_args(py_type)
            if len(args) == 2 and isinstance(args[1], type(Ellipsis)):
                return {
                    "type": "array",
                    "items": self.convert(args[0], processed_classes),
                }
            else:
                return {
                    "type": "array",
                    "prefixItems": [
                        self.convert(arg, processed_classes) for arg in args
                    ],
                }
        elif is_typeddict_subclass(py_type):
            if py_type in processed_classes:
                ref = processed_classes[py_type]
                return {"$ref": f"#/components/schemas/{ref}"}

            properties: dict[str, Any] = {}
            required: list[str] = []
            annotations = py_type.__annotations__
            for key, value in get_type_hints(py_type).items():
                properties[to_camel_case(key) if self.camel_case else key] = (
                    self.convert(value, processed_classes)
                )
                annotation = annotations[key]
                if "NotRequired[" not in str(annotation):
                    required.append(
                        to_camel_case(key) if self.camel_case else key
                    )

            # Optional keys come from TypedDict(total=False)
            optional_keys = py_type.__optional_keys__
            # Remove any keys that are optional
            required = [key for key in required if key not in optional_keys]

            schema: dict[str, Any] = {
                "type": "object",
                "properties": properties,
            }
            if required:
                schema["required"] = required

            schema_name = self.name_overrides.get(py_type, py_type.__name__)
            processed_classes[py_type] = schema_name

            return schema
        elif dataclasses.is_dataclass(py_type):
            return self.convert_dataclass(py_type, processed_classes)
        elif py_type is Any:
            return {}
        elif py_type is object:
            return {"type": "object", "additionalProperties": True}
        elif py_type is str:
            return {"type": "string"}
        elif py_type is int:
            return {"type": "integer"}
        elif py_type is float:
            return {"type": "number"}
        elif py_type is bool:
            return {"type": "boolean"}
        elif py_type is Decimal:
            return {"type": "number"}
        elif py_type is bytes:
            return {"type": "string", "format": "byte"}
        elif py_type is datetime.date:
            return {"type": "string", "format": "date"}
        elif py_type is datetime.time:
            return {"type": "string", "format": "time"}
        elif py_type is datetime.datetime:
            return {"type": "string", "format": "date-time"}
        elif py_type is datetime.timedelta:
            return {"type": "string", "format": "duration"}
        elif py_type is None:
            return {"type": "null"}
        elif isinstance(py_type, type) and issubclass(py_type, Enum):
            if py_type in processed_classes:
                ref = processed_classes[py_type]
                return {"$ref": f"#/components/schemas/{ref}"}
            return {"type": "string", "enum": [e.value for e in py_type]}
        else:
            raise ValueError(
                f"Unsupported type: py_type={py_type}, origin={origin}"
            )

    def convert_dataclass(
        self,
        cls: Any,
        processed_classes: dict[Any, str],
    ) -> dict[str, Any]:
        """Convert a dataclass to an OpenAPI schema.

        Args:
            cls (Any): The dataclass type or instance to convert.
            processed_classes (Dict[Any, str]): A dictionary of processed classes.

        Raises:
            ValueError: If cls is not a dataclass.

        Returns:
            Dict[str, Any]: The OpenAPI schema.
        """
        # If cls is an instance, get its class
        if not isinstance(cls, type) and dataclasses.is_dataclass(cls):
            cls = cls.__class__

        if not dataclasses.is_dataclass(cls):
            raise ValueError(f"{cls} is not a dataclass")

        if cls in processed_classes:
            return {"$ref": f"#/components/schemas/{processed_classes[cls]}"}

        # Handle both class and instance for __name__ access
        if isinstance(cls, type):
            schema_name = self.name_overrides.get(cls, cls.__name__)
        else:
            schema_name = self.name_overrides.get(cls, cls.__class__.__name__)
        processed_classes[cls] = schema_name

        type_hints = get_type_hints(cls)
        fields: tuple[dataclasses.Field[Any], ...] = dataclasses.fields(cls)
        properties: dict[str, dict[str, Any]] = {}
        required: list[str] = []

        for field in fields:
            cased_field_name = (
                to_camel_case(field.name) if self.camel_case else field.name
            )
            field_type = type_hints[field.name]
            properties[cased_field_name] = self.convert(
                field_type, processed_classes
            )
            if not _is_optional(field_type):
                required.append(cased_field_name)

        # Handle ClassVar that might be initialized already
        for field_name, type_hint in type_hints.items():
            cased_field_name = (
                to_camel_case(field_name) if self.camel_case else field_name
            )
            if get_origin(type_hint) is ClassVar:
                # Literal type
                value = getattr(cls, field_name)
                properties[cased_field_name] = {
                    "type": "string",
                    "enum": [value] if isinstance(value, str) else value,
                }
                required.append(cased_field_name)

        schema: dict[str, Any] = {
            "type": "object",
            "properties": properties,
        }
        if required:
            schema["required"] = required

        return schema


def _unique(items: list[Any]) -> list[Any]:
    # Unique dictionaries
    seen: set[str] = set()
    result: list[Any] = []
    for item in items:
        if isinstance(item, dict):
            key = str(item)
            if key in seen:
                continue
            seen.add(key)
        result.append(item)
    return result


def _is_optional(field: dataclasses.Field[Any]) -> bool:
    """
    Check if a field is Optional
    """
    return (get_origin(field) is Union and type(None) in get_args(field)) or (
        get_origin(field) is NotRequired
    )


def is_typeddict_subclass(cls: Any) -> bool:
    return (
        isinstance(cls, type)
        and issubclass(cls, dict)
        and hasattr(cls, "__annotations__")
        and hasattr(cls, "__total__")
        and isinstance(cls.__total__, bool)  # ignore
    )


--- marimo/_utils/parse_dataclass.py ---
# Copyright 2026 Marimo. All rights reserved.
from __future__ import annotations

import dataclasses
import datetime
import json
import sys
from enum import Enum
from typing import (
    Any,
    Literal,
    Optional,
    TypeVar,
    Union,
    cast,
    get_args,
    get_origin,
    get_type_hints,
)

import msgspec
import msgspec.json

# Import NotRequired from typing_extensions for Python < 3.11
if sys.version_info < (3, 11):
    from typing_extensions import NotRequired
else:
    from typing import NotRequired

T = TypeVar("T")


def to_snake(string: str) -> str:
    # basic conversion of javascript camel case to snake
    # does not handle contiguous caps
    return "".join(
        ["_" + i.lower() if i.isupper() else i for i in string]
    ).lstrip("_")


class _DataclassParser:
    def __init__(self, allow_unknown_keys: bool = False):
        self.allow_unknown_keys = allow_unknown_keys

    def _build_value(self, value: Any, cls: type[T]) -> T:
        # Handle basic types
        if cls is float and isinstance(value, (int, float)):
            return float(value)  # type: ignore[return-value]
        if cls is int and isinstance(value, int):
            return int(value)  # type: ignore[return-value]
        if cls is str and isinstance(value, str):
            return str(value)  # type: ignore[return-value]
        if cls is bool and isinstance(value, bool):
            return bool(value)  # type: ignore[return-value]
        if cls is bytes and isinstance(value, bytes):
            return bytes(value)  # type: ignore[return-value]

        # Handle date and datetime types
        if cls is datetime.date and isinstance(value, str):
            return datetime.datetime.fromisoformat(value).date()  # type: ignore[return-value]
        if cls is datetime.datetime and isinstance(value, str):
            return datetime.datetime.fromisoformat(value)  # type: ignore[return-value]

        if cls is Any:  # type: ignore[comparison-overlap]
            return value  # type: ignore[no-any-return]

        # Already a dataclass
        if dataclasses.is_dataclass(value):
            return value  # type: ignore[return-value]

        # Handle container types
        # origin_cls is not None if cls is a container (such as list,
        # tuple, set, ...)
        origin_cls = get_origin(cls)

        # Handle NewType - check if cls has __supertype__ attribute
        if hasattr(cls, "__supertype__"):
            # NewType returns its argument at runtime, but we need to validate
            # against the supertype
            supertype = cls.__supertype__  # type: ignore
            return cls(self._build_value(value, supertype))  # type: ignore

        # Handle NotRequired type
        if origin_cls is NotRequired:
            (arg_type,) = get_args(cls)
            if value is None:
                return None  # type: ignore[return-value]
            return self._build_value(value, arg_type)  # type: ignore[no-any-return]

        if origin_cls is Optional:
            (arg_type,) = get_args(cls)
            if value is None:
                return None  # type: ignore[return-value]
            else:
                return self._build_value(value, arg_type)  # type: ignore # noqa: E501
        elif origin_cls in (list, set) and isinstance(
            value, (tuple, list, set)
        ):
            (arg_type,) = get_args(cls)
            return origin_cls(self._build_value(v, arg_type) for v in value)  # type: ignore # noqa: E501
        elif origin_cls is tuple and isinstance(value, (tuple, list)):
            arg_types = get_args(cls)
            if len(arg_types) == 2 and isinstance(
                arg_types[1], type(Ellipsis)
            ):
                return origin_cls(  # type: ignore
                    self._build_value(v, arg_types[0]) for v in value
                )
            else:
                return origin_cls(  # type: ignore # noqa: E501
                    self._build_value(v, t) for v, t in zip(value, arg_types)
                )
        elif origin_cls is dict and isinstance(value, dict):
            key_type, value_type = get_args(cls)
            return origin_cls(  # type: ignore[no-any-return]
                **{
                    self._build_value(k, key_type): self._build_value(
                        v, value_type
                    )
                    for k, v in value.items()
                }
            )
        elif origin_cls == Union:
            arg_types = get_args(cls)
            for arg_type in arg_types:
                try:
                    return self._build_value(value, arg_type)  # type: ignore # noqa: E501
                # catch expected exceptions when conversion fails
                except (TypeError, ValueError):
                    continue
                except:
                    raise
            raise ValueError(
                f"Value '{value}' does not fit any type of the union"
            )
        elif origin_cls is Literal:
            # if its a single Literal of an enum, we can just return the enum
            arg_types = get_args(cls)
            first_arg_type = arg_types[0]
            if (
                len(arg_types) == 1
                and isinstance(first_arg_type, Enum)
                and first_arg_type.value == value
            ):
                return first_arg_type  # type: ignore[return-value]
            if value not in arg_types:
                raise ValueError(
                    f"Value '{value}' does not fit any type of the literal"
                )
            return value  # type: ignore[no-any-return]
        elif type(cls) is type(Enum) and issubclass(cls, Enum):
            return cls(value)  # type: ignore[return-value]
        elif dataclasses.is_dataclass(cls):
            return self.build_dataclass(value, cls)  # type: ignore[return-value]

        if issubclass(cls, msgspec.Struct):
            return _parse_msgspec(
                value, strict=not self.allow_unknown_keys, cls=cls
            )  # type: ignore[return-value]

        try:
            if isinstance(value, cls):
                return value  # type: ignore[no-any-return]
        except TypeError:
            pass

        raise ValueError(f"Value '{value}' does not fit '{cls}'")

    def build_dataclass(self, values: dict[Any, Any], cls: type[T]) -> T:
        """Returns instance of dataclass [cls] instantiated from [values]."""

        if not isinstance(values, dict):
            raise ValueError(
                "value passed to build_dataclass needs to be a dictionary"
            )

        types = get_type_hints(cls)

        snake_cased_values = {
            to_snake(k): v for k, v in values.items() if not k.startswith("_")
        }
        if (
            not self.allow_unknown_keys
            and not snake_cased_values.keys() <= types.keys()
        ):
            unknown_keys = snake_cased_values.keys() - types.keys()
            raise ValueError(
                f"values in build_dataclass do not match arguments "
                f"for constructor. Unknown keys: {unknown_keys}. "
                f"Expected keys: {types.keys()}"
            )

        transformed = {
            k: self._build_value(v, types[k])
            for k, v in snake_cased_values.items()
            if k in types
        }

        return cls(**transformed)


def _parse_msgspec(
    value: Union[bytes, str, dict[Any, Any]], *, strict: bool, cls: type[T]
) -> T:
    # If it is a dict, it is already parsed and we can just build the dataclass.
    if isinstance(value, dict):
        return msgspec.convert(value, strict=strict, type=cls)

    return msgspec.json.decode(value, strict=strict, type=cls)


def parse_raw(
    message: Union[bytes, str, dict[Any, Any]],
    cls: type[T],
    allow_unknown_keys: bool = False,
) -> T:
    """Utility to parse a message as JSON, and instantiate into supplied type.

    Args:
        message: The message to parse
        cls: The type to instantiate. Must be a dataclass.
        allow_unknown_keys: Whether to allow unknown keys in the message.

    Returns:
        An instance of the supplied dataclass type.

    Notes:
        Supported collection types in the dataclass:
        - List, Tuple, Set, Dict
        - for Python 3.8 compatibility, must use collection types from
          the typing module (e.g., `typing.List[int]` instead of `list[int]`)

        Transforms all fields in the parsed JSON from camel case to snake case.
    """
    # Previous behavior (before using msgspec). Our DataClassParser handles
    # non-discrimated unions, unlike msgspec, so we use dataclasses for non-discrimated
    # union types. We could move off if we changed the over-the-wire types to have
    # a tag, but that would require updating the front end.
    if dataclasses.is_dataclass(cls):
        as_dict = (
            json.loads(message) if not isinstance(message, dict) else message
        )
        parser = _DataclassParser(allow_unknown_keys)
        return cast(
            "T",
            parser.build_dataclass(as_dict, cls),
        )

    return _parse_msgspec(message, strict=not allow_unknown_keys, cls=cls)


--- tests/_utils/test_dataclass_to_openapi.py ---
from __future__ import annotations

import dataclasses
import sys
from typing import Any, ClassVar, Literal, Optional, TypedDict, Union

import pytest

from marimo._utils.dataclass_to_openapi import (
    PythonTypeToOpenAPI,
)


@dataclasses.dataclass
class Address:
    street: str
    city: str
    zip_code: Optional[int]
    kind: Literal["home", "work"]


@dataclasses.dataclass
class Person:
    name: str
    age: int
    address: Address
    tags: list[str]
    metadata: Any


def test_dataclass_to_openapi() -> None:
    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=False
    ).convert(Person, processed_classes={})
    assert openapi_spec == {
        "type": "object",
        "properties": {
            "name": {"type": "string"},
            "age": {"type": "integer"},
            "address": {
                "type": "object",
                "properties": {
                    "street": {"type": "string"},
                    "city": {"type": "string"},
                    "zip_code": {"type": "integer", "nullable": True},
                    "kind": {"enum": ["home", "work"], "type": "string"},
                },
                "required": ["street", "city", "kind"],
            },
            "tags": {"type": "array", "items": {"type": "string"}},
            "metadata": {},
        },
        "required": ["name", "age", "address", "tags", "metadata"],
    }


def test_dataclass_to_openapi_with_camelcase() -> None:
    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=True
    ).convert(Address, processed_classes={})
    assert openapi_spec == {
        "type": "object",
        "properties": {
            "street": {"type": "string"},
            "city": {"type": "string"},
            "zipCode": {"type": "integer", "nullable": True},
            "kind": {"enum": ["home", "work"], "type": "string"},
        },
        "required": ["street", "city", "kind"],
    }


@dataclasses.dataclass
class Node:
    value: int
    left: Optional[Node]
    right: Optional[Node]


def test_recursive_dataclass_to_openapi() -> None:
    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=False
    ).convert(Node, processed_classes={})
    assert openapi_spec == {
        "type": "object",
        "properties": {
            "value": {"type": "integer"},
            "left": {"$ref": "#/components/schemas/Node", "nullable": True},
            "right": {"$ref": "#/components/schemas/Node", "nullable": True},
        },
        "required": ["value"],
    }


Colors = Union[Literal["red"], Literal["green"], Literal["blue"]]


def test_named_union() -> None:
    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=False
    ).convert(Colors, processed_classes={})
    assert openapi_spec == {
        "oneOf": [
            {"enum": ["red"], "type": "string"},
            {"enum": ["green"], "type": "string"},
            {"enum": ["blue"], "type": "string"},
        ]
    }


@dataclasses.dataclass
class Theme:
    primary_color: Colors
    secondary_color: Optional[Colors]


def test_nested_named_union() -> None:
    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={Colors: "colors"}, camel_case=False
    ).convert(Theme, {Colors: "colors"})
    assert openapi_spec == {
        "type": "object",
        "properties": {
            "primary_color": {"$ref": "#/components/schemas/colors"},
            "secondary_color": {
                "$ref": "#/components/schemas/colors",
                "nullable": True,
            },
        },
        "required": ["primary_color"],
    }


@dataclasses.dataclass
class Dog:
    name: ClassVar[str] = "dog"


def test_class_var() -> None:
    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=False
    ).convert(Dog, {})
    assert openapi_spec == {
        "type": "object",
        "properties": {"name": {"type": "string", "enum": ["dog"]}},
        "required": ["name"],
    }


def test_optional() -> None:
    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=False
    ).convert(Optional[str], {})
    assert openapi_spec == {
        "type": "string",
        "nullable": True,
    }


if sys.version_info >= (3, 11):
    from typing import NotRequired


@pytest.mark.skipif(
    sys.version_info < (3, 11), reason="Not supported in Python < 3.11"
)
def test_not_required() -> None:
    class NotRequiredDict(TypedDict):
        not_required_item: NotRequired[str]
        optional_item: Optional[str]

    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=False
    ).convert(NotRequiredDict, {})
    assert openapi_spec == {
        "type": "object",
        "properties": {
            "optional_item": {"type": "string", "nullable": True},
            "not_required_item": {"type": "string"},
        },
        "required": ["optional_item"],
    }


@pytest.mark.skipif(
    sys.version_info < (3, 11), reason="Not supported in Python < 3.11"
)
def test_not_required_total_false() -> None:
    class NotRequiredDictTotalFalse(TypedDict, total=False):
        not_required_item: NotRequired[str]
        optional_item: Optional[str]

    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=False
    ).convert(NotRequiredDictTotalFalse, {})
    assert openapi_spec == {
        "type": "object",
        "properties": {
            "optional_item": {"type": "string", "nullable": True},
            "not_required_item": {"type": "string"},
        },
    }


@pytest.mark.skipif(
    sys.version_info < (3, 11), reason="Not supported in Python < 3.11"
)
def test_not_required_as_dataclass() -> None:
    @dataclasses.dataclass
    class NotRequiredDictAsDataclass(TypedDict):
        not_required_item: NotRequired[str]
        optional_item: Optional[str]

    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=False
    ).convert(NotRequiredDictAsDataclass, {})

    assert NotRequiredDictAsDataclass(optional_item="hello") is not None

    assert openapi_spec == {
        "type": "object",
        "properties": {
            "optional_item": {"type": "string", "nullable": True},
            "not_required_item": {"type": "string"},
        },
        "required": ["optional_item"],
    }


@pytest.mark.skipif(
    sys.version_info < (3, 11), reason="Not supported in Python < 3.11"
)
def test_not_required_as_dataclass_total_false() -> None:
    @dataclasses.dataclass
    class NotRequiredDictAsDataclassTotalFalse(TypedDict, total=False):
        not_required_item: NotRequired[str]
        optional_item: Optional[str]

    openapi_spec = PythonTypeToOpenAPI(
        name_overrides={}, camel_case=False
    ).convert(NotRequiredDictAsDataclassTotalFalse, {})

    assert (
        NotRequiredDictAsDataclassTotalFalse(optional_item="hello") is not None
    )

    assert openapi_spec == {
        "type": "object",
        "properties": {
            "optional_item": {"type": "string", "nullable": True},
            "not_required_item": {"type": "string"},
        },
    }


--- tests/_sql/test_dbapi.py ---
# Copyright 2026 Marimo. All rights reserved.
from __future__ import annotations

import sqlite3
from unittest.mock import patch

import pytest

from marimo._sql.engines.dbapi import DBAPIEngine
from marimo._sql.engines.types import EngineCatalog, QueryEngine


@pytest.fixture
def sqlite_connection() -> sqlite3.Connection:
    conn = sqlite3.connect(":memory:")
    conn.execute("""
        CREATE TABLE test (
            id INTEGER PRIMARY KEY,
            name TEXT,
            value REAL
        )
    """)
    conn.execute("""
        INSERT INTO test (name, value) VALUES
        ('a', 1.0),
        ('b', 2.0),
        ('c', 3.0)
    """)
    return conn


@pytest.fixture
def dbapi_engine(sqlite_connection: sqlite3.Connection) -> DBAPIEngine:
    return DBAPIEngine(connection=sqlite_connection)


def test_source(dbapi_engine: DBAPIEngine) -> None:
    assert dbapi_engine.source == "dbapi"


def test_dialect(dbapi_engine: DBAPIEngine) -> None:
    assert dbapi_engine.dialect == "sql"


def test_is_compatible() -> None:
    # Test with sqlite3 connection
    conn = sqlite3.connect(":memory:")
    assert DBAPIEngine.is_compatible(conn)
    conn.close()

    # Test with non-DBAPI object
    assert not DBAPIEngine.is_compatible("not a connection")
    assert not DBAPIEngine.is_compatible(None)

    engine = DBAPIEngine(conn)
    assert isinstance(engine, DBAPIEngine)
    assert isinstance(engine, QueryEngine)
    assert not isinstance(engine, EngineCatalog)


def test_execute_native(dbapi_engine: DBAPIEngine) -> None:
    with patch.object(
        dbapi_engine, "sql_output_format", return_value="native"
    ):
        result = dbapi_engine.execute("SELECT * FROM test")
        assert isinstance(result, sqlite3.Cursor)
        assert result.fetchall() == [
            (1, "a", 1.0),
            (2, "b", 2.0),
            (3, "c", 3.0),
        ]


def test_execute_pandas(dbapi_engine: DBAPIEngine) -> None:
    pd = pytest.importorskip("pandas")
    with patch.object(
        dbapi_engine, "sql_output_format", return_value="pandas"
    ):
        result = dbapi_engine.execute("SELECT * FROM test")
        assert isinstance(result, pd.DataFrame)
        assert list(result.columns) == ["id", "name", "value"]
        assert len(result) == 3
    assert result.iloc[0].to_dict() == {"id": 1, "name": "a", "value": 1.0}


def test_execute_polars(dbapi_engine: DBAPIEngine) -> None:
    pl = pytest.importorskip("polars")
    with patch.object(
        dbapi_engine, "sql_output_format", return_value="polars"
    ):
        result = dbapi_engine.execute("SELECT * FROM test")
        assert isinstance(result, pl.DataFrame)
        assert result.columns == ["id", "name", "value"]
        assert len(result) == 3
        assert result.row(0) == (1, "a", 1.0)


def test_execute_lazy_polars(dbapi_engine: DBAPIEngine) -> None:
    pl = pytest.importorskip("polars")
    with patch.object(
        dbapi_engine, "sql_output_format", return_value="lazy-polars"
    ):
        result = dbapi_engine.execute("SELECT * FROM test")
        assert isinstance(result, pl.LazyFrame)
        result = result.collect()
        assert result.columns == ["id", "name", "value"]
        assert result.row(0) == (1, "a", 1.0)


def test_execute_no_results(dbapi_engine: DBAPIEngine) -> None:
    result = dbapi_engine.execute("CREATE TABLE empty (id INTEGER)")
    assert result is None


def test_execute_error(dbapi_engine: DBAPIEngine) -> None:
    with pytest.raises(sqlite3.OperationalError):
        dbapi_engine.execute("SELECT * FROM nonexistent")


def test_execute_transaction(dbapi_engine: DBAPIEngine) -> None:
    pytest.importorskip("pandas")

    # Test that transaction is committed
    with patch.object(
        dbapi_engine, "sql_output_format", return_value="pandas"
    ):
        dbapi_engine.execute(
            "INSERT INTO test (name, value) VALUES ('d', 4.0)"
        )
        result = dbapi_engine.execute("SELECT * FROM test")
        assert len(result) == 4
        assert result.iloc[3].to_dict() == {"id": 4, "name": "d", "value": 4.0}


def test_execute_with_parameters(dbapi_engine: DBAPIEngine) -> None:
    pytest.importorskip("pandas")

    with patch.object(
        dbapi_engine, "sql_output_format", return_value="pandas"
    ):
        result = dbapi_engine.execute(
            "SELECT * FROM test WHERE name = ?", ["a"]
        )
        assert len(result) == 1
        assert result.iloc[0].to_dict() == {"id": 1, "name": "a", "value": 1.0}


def test_is_dbapi_cursor() -> None:
    cursor = sqlite3.connect(":memory:").cursor()
    assert DBAPIEngine.is_dbapi_cursor(cursor)

    # Test with non-DBAPI object
    assert not DBAPIEngine.is_dbapi_cursor("not a cursor")
    assert not DBAPIEngine.is_dbapi_cursor(None)


def test_get_cursor_metadata(dbapi_engine: DBAPIEngine) -> None:
    with patch.object(
        dbapi_engine, "sql_output_format", return_value="native"
    ):
        result = dbapi_engine.execute("SELECT * FROM test")
        result = DBAPIEngine.get_cursor_metadata(result)

        assert result is not None
        assert len(result["columns"]) == 3
        assert result["sql_statement_type"] == "Query/DDL"


--- tests/_internal/test_internal_api.py ---
from __future__ import annotations

import importlib
from pathlib import Path

from tests.mocks import snapshotter
from tests.utils import explore_module

snapshot = snapshotter(__file__)


def test_internal_api():
    # Get all Python files and folders in marimo/_internal
    internal_path = (
        Path(__file__).parent.parent.parent / "marimo" / "_internal"
    )

    # Get both .py files and directories
    items = []
    for item in sorted(internal_path.iterdir()):
        if item.name.startswith("_"):
            continue
        if item.is_file() and item.suffix == ".py":
            items.append((item.stem, False))
        elif item.is_dir():
            items.append((item.name, True))

    all_results = []
    for name, _is_dir in items:
        # Import the module dynamically
        module_name = f"marimo._internal.{name}"
        module = importlib.import_module(module_name)

        # Explore the module
        results = explore_module(module)
        if results:
            all_results.append(name)
            all_results.extend([f"  {line}" for line in results])

    assert len(all_results) > 0
    snapshot("internal_api.txt", "\n".join(all_results))


--- tests/_utils/test_parse_dataclass.py ---
# Copyright 2026 Marimo. All rights reserved.
from __future__ import annotations

import datetime as dt
import json
import sys
from dataclasses import dataclass, field
from enum import Enum
from typing import (
    Any,
    Generic,
    Literal,
    NewType,
    Optional,
    TypedDict,
    TypeVar,
    Union,
)

import msgspec
import pytest

from marimo._config.config import ExperimentalConfigType
from marimo._messaging.msgspec_encoder import asdict
from marimo._runtime.commands import UpdateCellConfigCommand
from marimo._types.ids import CellId_t
from marimo._utils.parse_dataclass import parse_raw

# Import NotRequired for testing
if sys.version_info < (3, 11):
    from typing_extensions import NotRequired
else:
    from typing import NotRequired


@dataclass
class Config:
    disabled: bool
    gpu: bool


@dataclass
class ConfigOne:
    disabled: bool


@dataclass
class ConfigTwo:
    gpu: bool


class AnimalType(Enum):
    DOG = "dog"
    CAT = "cat"


@dataclass
class Dog:
    type: Literal[AnimalType.DOG]
    bark: bool


@dataclass
class Cat:
    type: Literal[AnimalType.CAT]
    meow: bool


def serialize(obj: Any) -> bytes:
    return bytes(
        json.dumps(asdict(obj) if not isinstance(obj, dict) else obj),
        encoding="utf-8",
    )


class TestParseRaw:
    def test_invalid_message(self) -> None:
        with pytest.raises(ValueError) as e:
            parse_raw(b'"string"', ConfigOne)
        assert "needs to be a dictionary" in str(e.value)

    def test_flat(self) -> None:
        @dataclass
        class Flat:
            x: str
            y: int

        flat = Flat(x="hello", y=0)
        parsed = parse_raw(serialize(flat), Flat)
        assert parsed == flat

    def test_camel_case_to_snake(self) -> None:
        @dataclass
        class Flat:
            my_variable: str
            my_other_variable: int

        parsed = parse_raw(
            serialize({"MyVariable": "0", "MyOtherVariable": 1}), Flat
        )
        assert parsed == Flat(my_variable="0", my_other_variable=1)

    def test_nested_singleton(self) -> None:
        @dataclass
        class Nested:
            config: Config

        nested = Nested(Config(disabled=True, gpu=False))

        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

    def test_nested_list(self) -> None:
        @dataclass
        class Nested:
            configs: list[Config]

        nested = Nested(
            configs=[
                Config(disabled=True, gpu=False),
                Config(disabled=False, gpu=True),
            ]
        )

        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

    def test_nested_dict(self) -> None:
        @dataclass
        class Nested:
            configs: dict[str, Config]

        nested = Nested(
            configs={
                "0": Config(disabled=True, gpu=False),
                "1": Config(disabled=False, gpu=True),
            }
        )

        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

    def test_nested_tuple_ellipses(self) -> None:
        @dataclass
        class Nested:
            configs: tuple[Config, ...]

        nested = Nested(
            configs=tuple(
                [
                    Config(disabled=True, gpu=False),
                    Config(disabled=False, gpu=True),
                ]
            )
        )

        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

    def test_nested_tuple_fixed(self) -> None:
        @dataclass
        class Nested:
            configs: tuple[str, Config]

        nested = Nested(
            configs=(
                "0",
                Config(disabled=True, gpu=False),
            )
        )

        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

    def test_set_cell_config(self) -> None:
        config = UpdateCellConfigCommand(
            {
                CellId_t("0"): {"disabled": True},
                CellId_t("1"): {"disabled": False},
            }
        )
        parsed = parse_raw(serialize(config), UpdateCellConfigCommand)
        assert parsed == config

    def test_unions(self) -> None:
        @dataclass
        class Nested:
            config: Union[ConfigOne, ConfigTwo]

        # first
        nested = Nested(config=ConfigOne(disabled=True))
        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

        # other
        nested = Nested(config=ConfigTwo(gpu=True))
        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

        # should raise ("invalid" is not a dict and thus cannot be converted
        # to a dataclass)
        with pytest.raises(ValueError) as e:
            parsed = parse_raw(serialize({"config": "invalid"}), Nested)
        assert "invalid" in str(e.value)

        # should raise (value of key "config" is dataclass not included in
        # Union)
        nested = Nested(config=Config(True, True))  # type: ignore
        with pytest.raises(ValueError) as e:
            parsed = parse_raw(serialize(nested), Nested)

    def test_awkward_unions(self):
        @dataclass
        class Nested:
            data: Union[str, bool, dict[str, Any], list[float], list[bytes]]

        # str
        nested = Nested(data="string")
        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

        # bool
        nested = Nested(data=True)
        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

        # dict
        nested = Nested(data={"first": "hi", "second": False})
        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

        # list floats
        nested = Nested(data=[1, 2])
        parsed = parse_raw(serialize(nested), Nested)
        assert parsed == nested

        # not valid, list of strings
        with pytest.raises(ValueError) as e:
            parsed = parse_raw({"data": ["one", "two"]}, Nested)
        assert "does not fit any type of the union" in str(e.value)

        # not valid, int
        with pytest.raises(ValueError) as e:
            parsed = parse_raw({"data": 1}, Nested)
        assert "does not fit any type of the union" in str(e.value)

    def test_enums(self) -> None:
        @dataclass
        class Nested:
            config: AnimalType

        parsed = parse_raw(serialize({"config": AnimalType.CAT.value}), Nested)
        assert parsed.config == AnimalType.CAT

        parsed = parse_raw(serialize({"config": AnimalType.DOG.value}), Nested)
        assert parsed.config == AnimalType.DOG

        # handle error
        with pytest.raises(ValueError) as e:
            parsed = parse_raw(serialize({"config": "invalid"}), Nested)
        assert "invalid" in str(e.value)

    def test_discriminated_union(self) -> None:
        @dataclass
        class Nested:
            config: Union[Dog, Cat]

        parsed = parse_raw(
            serialize({"config": {"type": "dog", "bark": True}}),
            Nested,
        )
        assert parsed.config == Dog(type=AnimalType.DOG, bark=True)

        parsed = parse_raw(
            serialize({"config": {"type": "cat", "meow": True}}), Nested
        )
        assert parsed.config == Cat(type=AnimalType.CAT, meow=True)

        # handle error
        with pytest.raises(ValueError) as e:
            parsed = parse_raw(
                serialize({"config": {"invalid": True}}), Nested
            )
        assert "invalid" in str(e.value)

    def test_parse_raw_experimental_config_variants(self) -> None:
        """Test parse_raw with different variants of experimental config."""

        # Create a dataclass that contains the experimental field,
        # Similar to MarimoConfig and PartialMarimoConfig
        @dataclass
        class TestConfig:
            experimental: ExperimentalConfigType

        # Test 1: Known features
        structured_data = {
            "experimental": {"markdown": True, "cache": {"type": "redis"}}
        }

        parsed_structured = parse_raw(
            structured_data, TestConfig, allow_unknown_keys=True
        )
        assert parsed_structured.experimental["markdown"] is True
        assert parsed_structured.experimental["cache"]["type"] == "redis"

        # Test 1.5: Invalid values on known features
        invalid_data = {"experimental": {"markdown": "invalid"}}
        invalid = parse_raw(invalid_data, TestConfig)
        assert invalid.experimental["markdown"] == "invalid"

        # Test 2: Custom features
        dynamic_data = {
            "experimental": {
                "custom_feature": "custom_value",
                "another_flag": 42,
                "nested_config": {"key": "value"},
                "boolean_flag": True,
            }
        }

        parsed_dynamic = parse_raw(
            dynamic_data, TestConfig, allow_unknown_keys=True
        )
        assert parsed_dynamic.experimental["custom_feature"] == "custom_value"
        assert parsed_dynamic.experimental["another_flag"] == 42
        assert parsed_dynamic.experimental["nested_config"]["key"] == "value"
        assert parsed_dynamic.experimental["boolean_flag"] is True
        # Check not present field
        assert parsed_dynamic.experimental.get("mcp_docs") is None

        # Test 3: Mixed approach - known features + custom features
        mixed_data = {
            "experimental": {
                "markdown": True,
                "custom_feature": "mixed_value",
                "experimental_number": 123.45,
                "experimental_dict": {"nested": "value"},
            }
        }

        parsed_mixed = parse_raw(
            mixed_data, TestConfig, allow_unknown_keys=True
        )
        # Known features should work
        assert parsed_mixed.experimental["markdown"] is True
        # Custom features should also work
        assert parsed_mixed.experimental["custom_feature"] == "mixed_value"
        assert parsed_mixed.experimental["experimental_number"] == 123.45
        assert parsed_mixed.experimental["experimental_dict"] == {
            "nested": "value"
        }


def test_build_optional() -> None:
    @dataclass
    class TestOptional:
        x: Optional[str] = None

    parsed = parse_raw({}, TestOptional)
    assert parsed == TestOptional(x=None)

    parsed = parse_raw({"x": "hello"}, TestOptional)
    assert parsed == TestOptional(x="hello")


def test_build_empty_dataclass() -> None:
    @dataclass
    class Empty: ...

    parsed = parse_raw({}, Empty)
    assert parsed == Empty()


def test_with_unknown_keys() -> None:
    @dataclass
    class Empty: ...

    parsed = parse_raw({"key": "value"}, Empty, allow_unknown_keys=True)
    assert parsed == Empty()


def test_newtype() -> None:
    UserId = NewType("UserId", int)

    @dataclass
    class User:
        id: UserId
        name: str

    # Need to use globals() to make the NewType available in the scope
    globals()["UserId"] = UserId

    parsed = parse_raw({"id": 123, "name": "John"}, User)
    assert parsed == User(id=UserId(123), name="John")
    assert isinstance(parsed.id, int)


def test_nested_optional_fields() -> None:
    @dataclass
    class NestedOptional:
        value: Optional[Config] = None

    # Test with None value
    parsed = parse_raw({}, NestedOptional)
    assert parsed == NestedOptional(value=None)

    # Test with actual value
    parsed = parse_raw(
        {"value": {"disabled": True, "gpu": False}}, NestedOptional
    )
    assert parsed == NestedOptional(value=Config(disabled=True, gpu=False))


def test_mixed_container_types() -> None:
    @dataclass
    class MixedContainer:
        data: list[Union[int, str, Config]]

    mixed = MixedContainer(
        data=[1, "string", Config(disabled=True, gpu=False)]
    )

    parsed = parse_raw(serialize(mixed), MixedContainer)
    assert parsed == mixed


def test_complex_nested_structures() -> None:
    @dataclass
    class ComplexNested:
        mapping: dict[str, list[Optional[Config]]]

    complex_data = ComplexNested(
        mapping={
            "first": [Config(disabled=True, gpu=False), None],
            "second": [Config(disabled=False, gpu=True)],
        }
    )

    parsed = parse_raw(serialize(complex_data), ComplexNested)
    assert parsed == complex_data


def test_invalid_enum_value() -> None:
    @dataclass
    class WithEnum:
        animal: AnimalType

    # Test with invalid enum value
    with pytest.raises(ValueError) as e:
        parse_raw({"animal": "fish"}, WithEnum)
    assert "fish" in str(e.value)


def test_literal_types() -> None:
    @dataclass
    class WithLiteral:
        status: Literal["active", "inactive", "pending"]

    # Valid literal value
    parsed = parse_raw({"status": "active"}, WithLiteral)
    assert parsed == WithLiteral(status="active")

    # Invalid literal value
    with pytest.raises(ValueError) as e:
        parse_raw({"status": "deleted"}, WithLiteral)
    assert "does not fit any type of the literal" in str(e.value)


def test_missing_required_fields() -> None:
    @dataclass
    class Required:
        name: str
        age: int

    # Missing required field
    with pytest.raises(TypeError) as e:
        parse_raw({"name": "John"}, Required)
    assert (
        "missing" in str(e.value).lower() or "required" in str(e.value).lower()
    )


def test_bytes_handling() -> None:
    @dataclass
    class WithBytes:
        data: bytes

    # We need to handle bytes specially since JSON doesn't support bytes directly
    # This test verifies that bytes passed as a string are properly converted
    original = WithBytes(data=b"hello")
    serialized = json.dumps({"data": original.data.decode("utf-8")}).encode(
        "utf-8"
    )

    # This should raise an error since JSON serialization of bytes doesn't work directly
    with pytest.raises(ValueError):
        parse_raw(serialized, WithBytes)


def test_default_values() -> None:
    @dataclass
    class WithDefaults:
        name: str
        age: int = 30
        active: bool = True

    # Test with all values provided
    parsed = parse_raw(
        {"name": "John", "age": 25, "active": False}, WithDefaults
    )
    assert parsed == WithDefaults(name="John", age=25, active=False)

    # Test with only required values
    parsed = parse_raw({"name": "John"}, WithDefaults)
    assert parsed == WithDefaults(name="John", age=30, active=True)


def test_type_conversion() -> None:
    @dataclass
    class TypeConversion:
        integer: int
        floating: float
        boolean: bool

    parsed = parse_raw(
        {"integer": 42, "floating": 3.14, "boolean": True}, TypeConversion
    )
    assert parsed.integer == 42
    assert parsed.floating == 3.14
    assert parsed.boolean is True


def test_nested_union_with_none() -> None:
    @dataclass
    class NestedUnionWithNone:
        value: Union[Config, None]

    # Test with None
    parsed = parse_raw({"value": None}, NestedUnionWithNone)
    assert parsed.value is None

    # Test with actual value
    parsed = parse_raw(
        {"value": {"disabled": True, "gpu": False}}, NestedUnionWithNone
    )
    assert parsed.value == Config(disabled=True, gpu=False)


def test_forward_references() -> None:
    # Define classes with forward references
    @dataclass
    class Node:
        value: int
        children: list[Node] = field(default_factory=list)

    # Make Node available in globals for forward reference resolution
    globals()["Node"] = Node

    # Create a simple tree
    leaf1 = Node(value=1)
    leaf2 = Node(value=2)
    root = Node(value=0, children=[leaf1, leaf2])

    # Test serialization and parsing
    parsed = parse_raw(serialize(root), Node)
    assert parsed.value == 0
    assert len(parsed.children) == 2
    assert parsed.children[0].value == 1
    assert parsed.children[1].value == 2


def test_case_insensitive_enum() -> None:
    class CaseInsensitiveEnum(str, Enum):
        UPPER = "UPPER"
        LOWER = "lower"
        MIXED = "MiXeD"

    # Make enum available in globals
    globals()["CaseInsensitiveEnum"] = CaseInsensitiveEnum

    @dataclass
    class WithCaseEnum:
        value: CaseInsensitiveEnum

    # Test with exact case
    parsed = parse_raw({"value": "UPPER"}, WithCaseEnum)
    assert parsed.value == CaseInsensitiveEnum.UPPER

    parsed = parse_raw({"value": "lower"}, WithCaseEnum)
    assert parsed.value == CaseInsensitiveEnum.LOWER

    # Test with different case (this will fail with current implementation)
    with pytest.raises(ValueError):
        parsed = parse_raw({"value": "upper"}, WithCaseEnum)


def test_allow_unknown_keys_nested() -> None:
    @dataclass
    class Inner:
        required: str

    # Make Inner available in globals
    globals()["Inner"] = Inner

    @dataclass
    class Outer:
        inner: Inner

    # Test with unknown keys in nested structure
    data = {
        "inner": {"required": "value", "unknown": "extra"},
        "outer_unknown": "something",
    }

    # Should fail without allow_unknown_keys
    with pytest.raises(ValueError) as e:
        parsed = parse_raw(data, Outer)
    assert "Unknown keys" in str(e.value)

    # Should succeed with allow_unknown_keys
    parsed = parse_raw(data, Outer, allow_unknown_keys=True)
    assert parsed.inner.required == "value"


def test_inheritance() -> None:
    @dataclass
    class Base:
        id: int
        name: str

    @dataclass
    class Derived(Base):
        extra: bool

    # Test parsing with inheritance
    parsed = parse_raw({"id": 1, "name": "test", "extra": True}, Derived)
    assert parsed == Derived(id=1, name="test", extra=True)

    # Missing field from derived class
    with pytest.raises(TypeError):
        parsed = parse_raw({"id": 1, "name": "test"}, Derived)


@pytest.mark.xfail(reason="Generic types are not supported yet")
def test_generic_types() -> None:
    T = TypeVar("T")

    # Make T available in globals
    globals()["T"] = T

    @dataclass
    class GenericContainer(Generic[T]):
        value: T

    @dataclass
    class StringContainer(GenericContainer[str]):
        pass

    @dataclass
    class IntContainer(GenericContainer[int]):
        pass

    # Test with string
    parsed = parse_raw({"value": "test"}, StringContainer)
    assert parsed == StringContainer(value="test")

    # Test with int
    parsed = parse_raw({"value": 42}, IntContainer)
    assert parsed == IntContainer(value=42)


def test_complex_union_discrimination() -> None:
    @dataclass
    class TypeA:
        type: Literal["a"]
        value_a: str

    @dataclass
    class TypeB:
        type: Literal["b"]
        value_b: int

    @dataclass
    class TypeC:
        type: Literal["c"]
        value_c: bool

    # Make types available in globals
    globals()["TypeA"] = TypeA
    globals()["TypeB"] = TypeB
    globals()["TypeC"] = TypeC

    @dataclass
    class Container:
        data: Union[TypeA, TypeB, TypeC]

    # Test with TypeA
    parsed = parse_raw({"data": {"type": "a", "value_a": "test"}}, Container)
    assert isinstance(parsed.data, TypeA)
    assert parsed.data.value_a == "test"

    # Test with TypeB
    parsed = parse_raw({"data": {"type": "b", "value_b": 42}}, Container)
    assert isinstance(parsed.data, TypeB)
    assert parsed.data.value_b == 42

    # Test with TypeC
    parsed = parse_raw({"data": {"type": "c", "value_c": True}}, Container)
    assert isinstance(parsed.data, TypeC)
    assert parsed.data.value_c is True

    # Test with invalid discriminator
    with pytest.raises(ValueError):
        parsed = parse_raw(
            {"data": {"type": "d", "value": "invalid"}}, Container
        )


def test_empty_containers() -> None:
    @dataclass
    class EmptyContainers:
        empty_list: list[str]
        empty_dict: dict[str, int]
        empty_tuple: tuple[int, ...]

    # Test with empty containers
    parsed = parse_raw(
        {"empty_list": [], "empty_dict": {}, "empty_tuple": []},
        EmptyContainers,
    )
    assert parsed.empty_list == []
    assert parsed.empty_dict == {}
    assert parsed.empty_tuple == ()


def test_invalid_json() -> None:
    @dataclass
    class Simple:
        value: str

    # Test with invalid JSON
    with pytest.raises(json.JSONDecodeError):
        parse_raw(b"{invalid json}", Simple)


def test_recursive_structure_limit() -> None:
    @dataclass
    class RecursiveNode:
        value: int
        next: Optional[RecursiveNode] = None

    # Make RecursiveNode available in globals
    globals()["RecursiveNode"] = RecursiveNode

    # Create a deeply nested structure
    current = None
    for i in range(100):  # Create a chain of 100 nodes
        current = RecursiveNode(value=i, next=current)

    # This should work fine
    parsed = parse_raw(serialize(current), RecursiveNode)

    # Verify the structure
    count = 0
    node = parsed
    while node is not None:
        count += 1
        node = node.next
    assert count == 100


@pytest.mark.skipif(
    sys.version_info >= (3, 11), reason="Not supported in Python >= 3.11"
)
def test_not_required_types() -> None:
    class WithNotRequired(TypedDict):
        required: str
        optional: NotRequired[str]
        optional_dict: NotRequired[dict[str, str]]
        optional_list: NotRequired[list[str]]

    # Test with all fields provided
    data: dict[str, Any] = {
        "required": "value",
        "optional": "optional_value",
        "optional_dict": {"key": "value"},
        "optional_list": ["item"],
    }
    parsed = parse_raw(data, WithNotRequired)
    assert parsed["required"] == "value"
    assert parsed["optional"] == "optional_value"
    assert parsed["optional_dict"] == {"key": "value"}
    assert parsed["optional_list"] == ["item"]

    # Test with only required fields
    data = {"required": "value"}
    parsed = parse_raw(data, WithNotRequired)
    assert parsed["required"] == "value"
    assert not hasattr(parsed, "optional") or parsed["optional"] is None
    assert (
        not hasattr(parsed, "optional_dict") or parsed["optional_dict"] is None
    )
    assert (
        not hasattr(parsed, "optional_list") or parsed["optional_list"] is None
    )

    # Test with empty values for container types
    data = {
        "required": "value",
        "optional_dict": {},
        "optional_list": [],
    }
    parsed = parse_raw(data, WithNotRequired)
    assert parsed["required"] == "value"
    assert "optional" not in parsed
    assert parsed["optional_dict"] == {}
    assert parsed["optional_list"] == []


def test_date_and_datetime_types() -> None:
    @dataclass
    class DateTimeTypes:
        date_value: dt.date
        datetime_value: dt.datetime
        optional_date: Optional[dt.date] = None
        optional_datetime: Optional[dt.datetime] = None

    # Test with ISO format strings
    data = {
        "dateValue": "2023-01-15",
        "datetimeValue": "2023-01-15T14:30:45",
        "optionalDate": "2023-02-20",
        "optionalDatetime": "2023-02-20T18:15:30",
    }

    parsed = parse_raw(data, DateTimeTypes)

    assert isinstance(parsed.date_value, dt.date)
    assert parsed.date_value == dt.date(2023, 1, 15)

    assert isinstance(parsed.datetime_value, dt.datetime)
    assert parsed.datetime_value == dt.datetime(2023, 1, 15, 14, 30, 45)

    assert isinstance(parsed.optional_date, dt.date)
    assert parsed.optional_date == dt.date(2023, 2, 20)

    assert isinstance(parsed.optional_datetime, dt.datetime)
    assert parsed.optional_datetime == dt.datetime(2023, 2, 20, 18, 15, 30)

    # Test with None values for optional fields
    data = {
        "dateValue": "2023-01-15",
        "datetimeValue": "2023-01-15T14:30:45",
        "optionalDate": None,
        "optionalDatetime": None,
    }

    parsed = parse_raw(data, DateTimeTypes)

    assert isinstance(parsed.date_value, dt.date)
    assert parsed.date_value == dt.date(2023, 1, 15)

    assert isinstance(parsed.datetime_value, dt.datetime)
    assert parsed.datetime_value == dt.datetime(2023, 1, 15, 14, 30, 45)

    assert parsed.optional_date is None
    assert parsed.optional_datetime is None

    # Test with nested structures containing dates and datetimes
    @dataclass
    class NestedDateTimes:
        dates: list[dt.date]
        datetimes: dict[str, dt.datetime]

    nested_data = {
        "dates": ["2023-01-15", "2023-02-20", "2023-03-25"],
        "datetimes": {
            "morning": "2023-01-15T08:00:00",
            "noon": "2023-01-15T12:00:00",
            "evening": "2023-01-15T18:00:00",
        },
    }

    nested_parsed = parse_raw(nested_data, NestedDateTimes)

    assert all(isinstance(d, dt.date) for d in nested_parsed.dates)
    assert nested_parsed.dates[0] == dt.date(2023, 1, 15)
    assert nested_parsed.dates[1] == dt.date(2023, 2, 20)
    assert nested_parsed.dates[2] == dt.date(2023, 3, 25)

    assert all(
        isinstance(d, dt.datetime) for d in nested_parsed.datetimes.values()
    )
    assert nested_parsed.datetimes["morning"] == dt.datetime(
        2023, 1, 15, 8, 0, 0
    )
    assert nested_parsed.datetimes["noon"] == dt.datetime(
        2023, 1, 15, 12, 0, 0
    )
    assert nested_parsed.datetimes["evening"] == dt.datetime(
        2023, 1, 15, 18, 0, 0
    )


class StructClass(msgspec.Struct):
    limit: int


@dataclass
class Nested:
    config: StructClass


def test_dataclass_with_nested_msgspec_struct() -> None:
    data = {"config": {"limit": 10}}

    # Test as bytes
    serialized: bytes = serialize(data)
    parsed = parse_raw(serialized, Nested)
    assert parsed == Nested(config=StructClass(limit=10))

    # Test as str
    parsed = parse_raw(json.dumps(data), Nested)
    assert parsed == Nested(config=StructClass(limit=10))

    # Test as dict
    parsed = parse_raw(data, Nested, allow_unknown_keys=True)
    assert parsed == Nested(config=StructClass(limit=10))


--- marimo/_server/templates/api.py ---
# Copyright 2026 Marimo. All rights reserved.
"""Public API for rendering marimo notebooks as HTML.

This module provides a clean, public API for rendering marimo notebooks
to HTML without needing to use internal template functions directly.
"""

from __future__ import annotations

from pathlib import Path
from typing import Any, Literal, Optional, cast

from marimo._ast.app_config import _AppConfig
from marimo._config.config import MarimoConfig, PartialMarimoConfig
from marimo._convert.converters import MarimoConvert
from marimo._schemas.notebook import NotebookV1
from marimo._schemas.session import NotebookSessionV1
from marimo._server.templates.templates import (
    _custom_css_block,
    notebook_page_template,
    static_notebook_template,
)
from marimo._server.tokens import SkewProtectionToken
from marimo._session.model import SessionMode
from marimo._utils.code import hash_code


def _get_html_template() -> str:
    """Get the base HTML template."""
    from marimo._utils.paths import marimo_package_path

    index_html = Path(marimo_package_path()) / "_static" / "index.html"
    return index_html.read_text(encoding="utf-8")


def _parse_config(config: Optional[dict[str, Any]]) -> MarimoConfig:
    """Parse config dict to MarimoConfig."""
    if config is None:
        return cast(MarimoConfig, {})
    return cast(MarimoConfig, config)


def _parse_partial_config(
    config: Optional[dict[str, Any]],
) -> PartialMarimoConfig:
    """Parse config dict to PartialMarimoConfig."""
    if config is None:
        return cast(PartialMarimoConfig, {})
    return cast(PartialMarimoConfig, config)


def _convert_code_to_notebook(
    code: str,
) -> tuple[NotebookV1, _AppConfig]:
    """Convert Python code to notebook format."""
    try:
        ir = MarimoConvert.from_py(code)
    except Exception:
        # Fallback to non-marimo script conversion
        ir = MarimoConvert.from_non_marimo_python_script(code, aggressive=True)

    app_config = _AppConfig.from_untrusted_dict(ir.ir.app.options)
    notebook = cast(NotebookV1, ir.to_notebook_v1())
    return notebook, app_config


def render_notebook(
    *,
    code: str,
    mode: Literal["edit", "read"],
    filename: str | None = None,
    config: dict[str, Any] | None = None,
    config_overrides: dict[str, Any] | None = None,
    app_config: dict[str, Any] | None = None,
    runtime_config: list[dict[str, Any]] | None = None,
    server_token: str | None = None,
    session_snapshot: NotebookSessionV1 | None = None,
    notebook_snapshot: NotebookV1 | None = None,
    base_url: str = "",
    asset_url: str | None = None,
    custom_css: str | None = None,
) -> str:
    """Render a marimo notebook to HTML.

    Handles all the conversions internally.

    Args:
        code: Raw Python code as a string.
        filename: Display filename.
        mode: Rendering mode - "edit" for editable, "read" for read-only.
        config: User configuration overrides as a dict.
        config_overrides: Notebook-specific configuration overrides as a dict.
        app_config: Notebook-specific configuration as a dict.
        runtime_config: Remote kernel configuration, e.g.,
            [{"url": "wss://...", "authToken": "..."}]
        server_token: Skew protection token.
        session_snapshot: Pre-computed session state.
        notebook_snapshot: Notebook structure/metadata.
        base_url: Base URL for the application (for <base> tag).
        asset_url: CDN URL for static assets (supports {version} placeholder).
        custom_css: CSS string to inject directly into the HTML.

    Returns:
        HTML string of the rendered notebook.

    Example:
        >>> html = render_notebook(
        ...     code="import marimo as mo\\nmo.md('Hello')",
        ...     filename="notebook.py",
        ...     mode="edit",
        ...     runtime_config=[{"url": "wss://kernel.example.com"}],
        ... )
    """

    # Convert code to notebook format if not already provided
    if notebook_snapshot is None or app_config is None:
        converted_notebook, converted_app_config = _convert_code_to_notebook(
            code
        )
        if notebook_snapshot is None:
            notebook_snapshot = converted_notebook
        if app_config is None:
            app_config = converted_app_config.asdict()

    # Parse configs
    user_config = _parse_config(config)
    config_overrides_obj = _parse_partial_config(config_overrides)
    app_config_obj = _AppConfig.from_untrusted_dict(app_config)

    # Get HTML template
    html = _get_html_template()

    result = notebook_page_template(
        html=html,
        base_url=base_url,
        user_config=user_config,
        config_overrides=config_overrides_obj,
        server_token=SkewProtectionToken(server_token or ""),
        app_config=app_config_obj,
        filename=filename,
        mode=_parse_session_mode(mode),
        session_snapshot=session_snapshot,
        notebook_snapshot=notebook_snapshot,
        runtime_config=runtime_config,
        asset_url=asset_url,
    )

    # Add custom CSS if provided
    if custom_css:
        result = _add_custom_css(result, custom_css)

    return result


def render_static_notebook(
    *,
    code: str,
    filename: str | None = None,
    include_code: bool = True,
    session_snapshot: NotebookSessionV1,
    notebook_snapshot: NotebookV1 | None = None,
    files: dict[str, str] | None = None,
    config: dict[str, Any] | None = None,
    app_config: dict[str, Any] | None = None,
    asset_url: str | None = None,
) -> str:
    """Render a static (pre-computed) marimo notebook to HTML.

    Creates a fully self-contained HTML file with pre-computed outputs.
    Ideal for sharing read-only versions of notebooks.

    Args:
        code: Raw Python code as a string.
        filename: Display filename.
        include_code: Whether to include source code in the export.
        session_snapshot: Pre-computed outputs for all cells (required).
        notebook_snapshot: Notebook structure/metadata.
        files: Files to embed (key=path, value=base64 content).
        config: User configuration overrides.
        app_config: Notebook-specific configuration.
        asset_url: CDN URL for assets (default: jsDelivr).

    Returns:
        HTML string of the static notebook.

    Example:
        >>> html = render_static_notebook(
        ...     code=Path("analysis.py").read_text(),
        ...     session_snapshot=precomputed_outputs,
        ...     config={"theme": "dark"},
        ... )
    """

    # Convert code to notebook format if not already provided
    if notebook_snapshot is None or app_config is None:
        converted_notebook, converted_app_config = _convert_code_to_notebook(
            code
        )
        if notebook_snapshot is None:
            notebook_snapshot = converted_notebook
        if app_config is None:
            app_config = converted_app_config.asdict()

    # Parse configs
    user_config = _parse_config(config)
    config_overrides_obj = _parse_partial_config(config or {})
    app_config_obj = _AppConfig.from_untrusted_dict(app_config)

    # Get HTML template
    html = _get_html_template()

    return static_notebook_template(
        html=html,
        user_config=user_config,
        config_overrides=config_overrides_obj,
        server_token=SkewProtectionToken("static"),
        app_config=app_config_obj,
        filepath=filename,
        code=code if include_code else "",
        code_hash=hash_code(code),
        session_snapshot=session_snapshot,
        notebook_snapshot=notebook_snapshot,
        files=files or {},
        asset_url=asset_url,
    )


def _add_custom_css(html: str, custom_css: str) -> str:
    css_block = _custom_css_block(custom_css)
    return html.replace("</head>", f"{css_block}</head>")


def _parse_session_mode(mode: Literal["edit", "read"]) -> SessionMode:
    if mode == "edit":
        return SessionMode.EDIT
    elif mode in ["run", "read"]:
        return SessionMode.RUN
    else:
        raise ValueError(
            f"Invalid session mode: {mode}. Must be 'edit' or 'run'."
        )


__all__ = [
    "render_notebook",
    "render_static_notebook",
]


--- CONTRIBUTING.md ---
# Contributing Guide

We welcome all kinds of contributions. _You don't need to be an expert
in frontend or Python development to help out._

## Checklist

Contributions are made through
[pull requests](https://help.github.com/articles/using-pull-requests/).
Before sending a pull request, make sure to do the following:

- [Lint, typecheck, and format](#lint-typecheck-format) your code
- [Write tests](#tests)
- [Run tests](#tests) and check that they pass
- Read the [CLA](https://marimo.io/cla)

_Please reach out to the marimo team before starting work on a large
contribution._ Get in touch at
[GitHub issues](https://github.com/marimo-team/marimo/issues)
or [on Discord](https://marimo.io/discord?ref=contributing).

## Setup
_Note: We recommend that Windows developers use [WSL](https://learn.microsoft.com/en-us/windows/wsl/install) and clone the marimo repository [into the WSL environment and not the Windows mount](https://learn.microsoft.com/en-us/windows/wsl/filesystems)._

Install [pixi](https://github.com/prefix-dev/pixi) to manage your development environment. The following command uses `pixi` to launch a development shell with all dependencies installed, using `hatch` as the environment manager.

> [!NOTE]
>
> As an alternative to installing `pixi`, you can try developing in [Gitpod](https://gitpod.io/#https://github.com/marimo-team/marimo).
> Note that developing in Gitpod is not officially supported by the marimo team.

> [!TIP]
> New to both `pixi` and `hatch`? Pick `pixi`. It installs and manages both the Python and Node toolchains, then drops you into a ready shell with one command. Choose `hatch` only if you already maintain Node 20+/pnpm 9+ yourself and just want a Python environment manager. Typical flows:
> - `pixi shell` ‚Üí `make fe && make py` ‚Üí `make dev`
> - `hatch shell` ‚Üí `make fe && make py` ‚Üí `make dev`

```bash
pixi shell
```

If you have the right non-python dependencies installed via other methods (e.g. homebrew) you can simply activate your `marimo` development
environment with `hatch shell`.

Now you can install the environment frontend and Python dependencies.

```bash
make fe && make py
```

After doing this, you can instantiate your marimo development environment by running the following command.

```bash
make dev
```

This will launch two processes, the backend one in port 2718 and the front end one in port 3000.

In summary you will need to run:

```bash
pixi shell
make fe && make py
make dev
```

or if not using `pixi`:

```bash
hatch shell
make fe && make py
make dev
```

### `pre-commit` hooks

You can optionally install [pre-commit](https://pre-commit.com/) hooks to automatically run the validation checks when making a commit:

```bash
uvx pre-commit install
```

or

```bash
pixi run pre-commit install
```

To build the frontend unminified, run:

```bash
NODE_ENV=development make fe -B
```

## `make` commands

> [!NOTE]
> Refer to the [Makefile](Makefile) for the implementation details

| Command        | Category  | Description                                                    |
| -------------- | --------- | -------------------------------------------------------------- |
| `help`         | General   | üìñ Show available commands                                     |
| `install-all`  | Setup     | üöÄ First-time setup: Install all dependencies (frontend & Python) |
| `check-prereqs`| Setup     | ‚úì Check if all required tools are installed                    |
| `py`           | Setup     | üêç Install Python dependencies in editable mode                |
| `fe`           | Build     | üîß Build frontend assets                                       |
| `test`         | Test      | üß™ Run all tests (frontend, Python, end-to-end)                |
| `check`        | Test      | üßπ Run all checks                                              |
| `fe-check`     | Lint/Test | üßπ Check frontend (lint, typecheck)                            |
| `fe-test`      | Test      | üß™ Test frontend                                               |
| `e2e`          | Test      | üß™ Test end-to-end                                             |
| `fe-lint`      | Lint      | üßπ Lint frontend                                               |
| `fe-typecheck` | Lint      | üîç Typecheck frontend                                          |
| `fe-codegen`   | Build     | üîÑ Generate frontend API                                       |
| `py-check`     | Lint      | üîç Typecheck, lint, format python                              |
| `typos`        | Lint      | üîç Check for typos                                             |
| `py-test`      | Test      | üß™ Test python                                                 |
| `py-snapshots` | Test      | üì∏ Update snapshots                                            |
| `wheel`        | Build     | üì¶ Build wheel                                                 |
| `docs`         | Docs      | üìö Build docs                                                  |
| `docs-serve`   | Docs      | üìö Serve docs                                                  |
| `storybook`    | Docs      | üß© Start Storybook for UI development                          |

## Lint, Typecheck, Format

**All checks.**

```bash
make check
```

**Frontend.**

```bash
make fe-check
```

**Python.**

<table>
  <tr>
    <th>Using <code>make</code></th>
    <th>Using <code>hatch</code></th>
  </tr>
  <tr>
    <td>
      <pre><code>make py-check         </code></pre>
    </td>
    <td>
      <pre><code>hatch run lint
hatch run format
hatch run typecheck:check     </code></pre>
    </td>
  </tr>
</table>

## Tests

We have frontend unit tests, Python unit tests, and end-to-end tests.
Code changes should be accompanied by unit tests. Some changes
should also be accompanied by end-to-end tests.

To run all tests:

```bash
make test
```

This can take some time. To run just frontend tests, just Python tests, or just
end-to-end tests, read below.

### Frontend

In the root directory, run:

```bash
make fe-test
```

### Python

We use [pytest syntax](https://docs.pytest.org/en/stable/how-to/usage.html) for Python tests.

#### Using Make

```bash
make py-test
```

#### Using Hatch

Run a specific test

```bash
hatch run +py=3.13 test:test tests/_ast/
```

Run all changed tests

```bash
hatch run +py=3.13 test:test --picked
```

Run tests with optional dependencies

```bash
hatch run +py=3.13 test-optional:test tests/_ast/
```

Run tests across all Python versions (omit `+py`)

```bash
hatch run test:test tests/_ast/
```

Run all tests across all Python versions

Not recommended since it takes a long time.

```bash
hatch run test:test
```

### End-to-end

We use playwright to write and run end-to-end tests, which exercise both the
marimo library and the frontend.

(The first time you run, you may be prompted by playwright to install some
dependencies; follow those instructions.)

For best practices on writing end-to-end tests, check out the [Best Practices
doc](https://playwright.dev/docs/best-practices).

For frontend tests, you want to build the frontend first with `make fe` so that Playwright works on your latest changes.

**Run end-to-end tests.**

In the root directory, run:

```bash
make e2e
```

**Run tests interactively.**

In `frontend/`:

```bash
pnpm playwright test --ui
```

**Run a specific test.**

In `frontend/`:

<table>
  <tr>
    <th>Without debugger</th>
    <th>With debugger</th>
  </tr>
  <tr>
    <td>
      <pre><code>pnpm playwright test $FILENAME        </code></pre>
    </td>
    <td>
      <pre><code>pnpm playwright test --debug $FILENAME</code></pre>
    </td>
  </tr>
</table>

## Storybook

To open Storybook, run the following:

```bash
cd frontend && pnpm storybook
```

## Hot reloading / development mode

You can develop on marimo with hot reloading on the frontend and/or development
mode on the server (which automatically restarts the server on code changes).
These modes are especially helpful when you're making many small changes and
want to see changes end-to-end very quickly.

For the frontend, you can choose to run slower hot reloading for an environment closer to production.

<table>
  <tr>
    <th>Production</th>
    <th>Development</th>
  </tr>
  <tr>
    <td>
      <pre><code>pnpm build:watch      </code></pre>
    </td>
    <td>
      <pre><code>pnpm dev              </code></pre>
    </td>
  </tr>
</table>

For the backend, we recommend running without auth (`--no-token`):

<table>
  <tr>
    <th>Production</th>
    <th>Debug</th>
  </tr>
  <tr>
    <td>
      <pre><code>marimo edit --no-token   </code></pre>
    </td>
    <td>
      <pre><code>marimo -d edit --no-token</code></pre>
    </td>
  </tr>
</table>

### FAQ

- **When to run with hot-reloading?**: When you are developing on the frontend
  and want to see changes immediately. This is useful for styling, layout, new
  plugins, etc. Developing through the Vite server may have inconsistent
  behavior due to proxied api/websocket request and since the marimo Python
  server is not serving the HTML.
- **When to develop with the frontend in watch mode?**: When you are making few
  frontend changes, or when you want to test the frontend in a way that is
  closer to production.
- **When to run marimo CLI with development mode?**: When you are making
  changes to the backend and want to see debug logs.
  When developing on marimo plugins, you can run with "On module change" as "autorun" to see changes immediately.

**Caveats for running `pnpm dev`**

Running `pnpm dev` will serve the frontend from a Vite dev server, not from the
marimo server. This means that:

1. You will want to run your marimo server with `--headless` and `--no-token` so it does not open a new browser tab, as it will interfere with the frontend dev server.
1. The tradeoff of using the frontend dev server is that it is faster to
   develop on the frontend, but you will not be able to test the frontend in
   the same way that it will be used in production.

## Editor settings

If you use vscode, you might find the following `settings.json` useful:

```json
{
  "editor.formatOnSave": true,
  "editor.formatOnPaste": false,
  "[typescript]": {
    "editor.defaultFormatter": "biomejs.biome"
  },
  "[typescriptreact]": {
    "editor.defaultFormatter": "biomejs.biome"
  }
}
```

## PRs

When submitting a pull request, marimo will run: lint, typecheck, and test jobs.

We have some labels which can influence which tests are run:

- `test-all`: Run all tests across unchanged files as well.

## Your first PR

Marimo has a variety of CI jobs that run on pull requests. All new PRs will fail until you have signed the [CLA](https://marimo.io/cla). Don't fret. You can sign the CLA by leaving a comment in the PR with text of `I have read the CLA Document and I hereby sign the CLA`


## Links discovered
- [pull requests](https://help.github.com/articles/using-pull-requests/)
- [CLA](https://marimo.io/cla)
- [GitHub issues](https://github.com/marimo-team/marimo/issues)
- [on Discord](https://marimo.io/discord?ref=contributing)
- [WSL](https://learn.microsoft.com/en-us/windows/wsl/install)
- [into the WSL environment and not the Windows mount](https://learn.microsoft.com/en-us/windows/wsl/filesystems)
- [pixi](https://github.com/prefix-dev/pixi)
- [Gitpod](https://gitpod.io/#https://github.com/marimo-team/marimo)
- [pre-commit](https://pre-commit.com/)
- [Makefile](https://github.com/marimo-team/marimo/blob/main/Makefile.md)
- [pytest syntax](https://docs.pytest.org/en/stable/how-to/usage.html)
- [Best Practices
doc](https://playwright.dev/docs/best-practices)

--- SECURITY.md ---
# Security Policy

marimo is committed to providing a secure environment for notebook development and application deployment. For a comprehensive overview of marimo's security model and features, see our [Security documentation](https://docs.marimo.io/security/).

## Reporting a Vulnerability

To report a security vulnerability, [please draft an advisory through
Github](https://github.com/marimo-team/marimo/security/advisories/new), or
email the marimo team; security [at] marimo [dot] io.

### What Warrants a Security Advisory

We issue CVEs and security advisories when:

- A vulnerability could affect long-running app deployments
- End-users are directly impacted
- The issue has security implications beyond normal bug fixes

General safety improvements and hardening work are documented in our [release notes](https://github.com/marimo-team/marimo/releases) without formal advisories.

Advisories will be escalated to a CVE and/or a general advisory issued if end-users
are directly impacted. Attribution for any actionable report will be provided
in the section below (unless anonymity is preferred).

### molab Security

For security issues affecting [molab](https://docs.marimo.io/guides/molab/) (our hosted platform):

- Reports can be submitted through the same channels above
- We handle disclosure on a case-by-case basis
- General security improvements are disclosed publicly when applicable
- User-specific issues are handled privately through direct notification

## Recognition and Thanks

We deeply appreciate the security research community's efforts to improve marimo's security. Responsible disclosure helps protect all marimo users, and we recognize the time and expertise that goes into security research.

We would like to acknowledge and thank the following individuals for their responsible disclosure of security issues:

 - @AlexanderBarabanov
 - @pwntester
 - @s-celles
 - @acepace
 - @devgi
 - @W-M-T (Ward Theunisse)
 - @doredry

Your contributions help keep marimo safe for the entire community. We encourage security researchers to report issues and welcome your help in making marimo more secure.


## Links discovered
- [Security documentation](https://docs.marimo.io/security/)
- [please draft an advisory through
Github](https://github.com/marimo-team/marimo/security/advisories/new)
- [release notes](https://github.com/marimo-team/marimo/releases)
- [molab](https://docs.marimo.io/guides/molab/)

--- scripts/generate_release_notes.py ---
# /// script
# requires-python = ">=3.13,<3.14"
# dependencies = [
#     "msgspec",
# ]
#
# [tool.uv]
# exclude-newer = "2025-06-27T12:38:25.742953-04:00"
# ///
"""Generate release notes from commits on main branch."""

from __future__ import annotations

import re
import subprocess
import sys

import msgspec


class Author(msgspec.Struct):
    """GitHub author/user information."""

    login: str


class Label(msgspec.Struct):
    """GitHub label information."""

    name: str
    color: str | None = None
    description: str | None = None


class PullRequest(msgspec.Struct):
    """GitHub Pull Request information."""

    number: int
    title: str
    author: Author
    labels: list[Label]
    body: str | None
    mergedAt: str | None = None


class Commit(msgspec.Struct):
    """Git commit information."""

    sha: str
    message: str
    pr_number: int | None = None


class CategorizedEntry(msgspec.Struct):
    """A release note entry with its PR information."""

    commit: Commit
    pr: PullRequest | None = None


def get_commits_since_tag(since_tag: str) -> list[Commit]:
    """Get commits on main since a specific tag."""
    result = subprocess.run(
        [
            "git",
            "log",
            f"{since_tag}..HEAD",
            "--format=%H %s",
            "--first-parent",  # Only follow the first parent (main branch)
            "main",
        ],
        capture_output=True,
        text=True,
        check=True,
    )

    commits = []
    for line in result.stdout.strip().split("\n"):
        if not line:
            continue

        parts = line.split(" ", 1)
        if len(parts) != 2:
            continue

        sha, message = parts

        # Extract PR number from squash merge commit message
        # Looking for patterns like (#1234) or #1234
        pr_match = re.search(r"#(\d+)", message)
        pr_number = int(pr_match.group(1)) if pr_match else None

        commits.append(Commit(sha=sha, message=message, pr_number=pr_number))

    return commits


def get_merged_prs(limit: int = 100) -> dict[int, PullRequest]:
    """Get recently merged PRs and return as a dict keyed by PR number."""
    result = subprocess.run(
        [
            "gh",
            "pr",
            "list",
            "--base",
            "main",
            "--state",
            "merged",
            "--limit",
            str(limit),
            "--json",
            "number,title,author,labels,body,mergedAt",
        ],
        check=True,
        capture_output=True,
        text=True,
    )
    return {
        pr.number: pr
        for pr in msgspec.json.decode(result.stdout, type=list[PullRequest])
    }


def extract_media_from_body(body: str | None) -> list[str]:
    """Extract media (images/links) from PR body."""
    if not body:
        return []

    media = []

    # Find markdown images: ![alt](url)
    img_pattern = r"!\[.*?\]\((.*?)\)"
    for match in re.finditer(img_pattern, body):
        media.append(f'<img src="{match.group(1)}" alt="PR media">')

    # Find HTML img tags
    html_img_pattern = r'<img[^>]+src=["\']([^"\']+)["\'][^>]*>'
    for match in re.finditer(html_img_pattern, body):
        media.append(match.group(0))

    # Find video links (common patterns)
    video_patterns = [
        r"https?://[^\s]+\.(?:mp4|webm|mov|gif)",
        r"https?://(?:www\.)?(?:youtube\.com/watch\?v=|youtu\.be/)[^\s]+",
        r"https?://(?:www\.)?vimeo\.com/[^\s]+",
    ]
    for pattern in video_patterns:
        for match in re.finditer(pattern, body):
            media.append(f'<a href="{match.group(0)}">{match.group(0)}</a>')

    return media


def categorize_entries(
    entries: list[CategorizedEntry],
) -> dict[str, list[CategorizedEntry]]:
    """Categorize entries based on PR labels."""
    # TODO: Could add more or be more granular
    categories = {
        "breaking": [],
        "bug": [],
        "enhancement": [],
        "documentation": [],
        "preview": [],
        "other": [],
        "highlights": [],
    }

    for entry in entries:
        if entry.pr is None:
            categories["other"].append(entry)
            continue

        label_names = {label.name for label in entry.pr.labels}

        # Skip entries labeled as "internal"
        if "internal" in label_names:
            continue

        if "release-highlight" in label_names:
            categories["highlights"].append(entry)

        if "breaking" in label_names:
            categories["breaking"].append(entry)
        elif "preview" in label_names:
            categories["preview"].append(entry)
        elif "bug" in label_names:
            categories["bug"].append(entry)
        elif "enhancement" in label_names:
            categories["enhancement"].append(entry)
        elif "documentation" in label_names:
            categories["documentation"].append(entry)
        else:
            categories["other"].append(entry)

    return categories


def strip_conventional_prefix(title: str) -> str:
    """Strip conventional commit prefixes and capitalize first letter."""
    # Match patterns like "word:" or "word(scope):" at the beginning
    match = re.match(r"^(\w+)(?:\([^)]+\))?:\s*(.+)", title)
    if match:
        # Get the part after the prefix and capitalize first letter
        stripped = match.group(2)
        return stripped[0].upper() + stripped[1:] if stripped else stripped
    return title


def format_entry(entry: CategorizedEntry) -> str:
    if entry.pr:
        title = strip_conventional_prefix(entry.pr.title)
        return f"* {title} ([#{entry.pr.number}](https://github.com/marimo-team/marimo/pull/{entry.pr.number}))"
    title = entry.commit.message
    title = strip_conventional_prefix(entry.commit.message)
    return f"* {title} ({entry.commit.sha[:7]})"


def get_contributors(entries: list[CategorizedEntry]) -> list[str]:
    """Extract unique contributors from all entries."""
    contributors = set()
    for entry in entries:
        if entry.pr and entry.pr.author:
            contributors.add(entry.pr.author.login)
    return sorted(contributors, key=str.lower)


def generate_release_notes(since_tag: str) -> str:
    """Generate release notes since a specific tag."""
    commits = get_commits_since_tag(since_tag)
    pr_map = get_merged_prs(limit=100)

    # Match commits with PRs
    entries = []
    for commit in commits:
        pr = pr_map.get(commit.pr_number) if commit.pr_number else None
        entries.append(CategorizedEntry(commit=commit, pr=pr))

    categories = categorize_entries(entries)

    notes = ["## What's Changed\n"]
    if categories["highlights"]:
        for i, entry in enumerate(categories["highlights"]):
            if i > 0:
                notes.append("")

            if entry.pr:
                notes.append(f"**TODO: {entry.pr.title} #{entry.pr.number}**")
                notes.append("")
                notes.append("TODO: Description of the feature")

                # Check for media
                label_names = {label.name for label in entry.pr.labels}
                if "includes-media" in label_names:
                    media = extract_media_from_body(entry.pr.body)
                    if media:
                        notes.append("")
                        for item in media:
                            notes.append(item)
                notes.append("")

    if categories["breaking"]:
        notes.append("## üö® Breaking changes")
        for entry in categories["breaking"]:
            notes.append(format_entry(entry))
        notes.append("")

    if categories["enhancement"]:
        notes.append("## ‚ú® Enhancements")
        for entry in categories["enhancement"]:
            notes.append(format_entry(entry))
        notes.append("")

    if categories["bug"]:
        notes.append("## üêõ Bug fixes")
        for entry in categories["bug"]:
            notes.append(format_entry(entry))
        notes.append("")

    if categories["documentation"]:
        notes.append("## üìö Documentation")
        for entry in categories["documentation"]:
            notes.append(format_entry(entry))
        notes.append("")

    if categories["preview"]:
        notes.append("## üî¨ Preview features")
        for entry in categories["preview"]:
            notes.append(format_entry(entry))
        notes.append("")

    if categories["other"]:
        notes.append("## üìù Other changes")
        for entry in categories["other"]:
            notes.append(format_entry(entry))
        notes.append("")

    contributors = get_contributors(entries)
    notes.append("## Contributors")
    notes.append(
        f"Thanks to all our community and contributors who made this release possible: @{', @'.join(contributors)}"
    )
    notes.append("")
    notes.append("And especially to our new contributors:")
    notes.append("* TODO: Check for new contributors")
    notes.append("")

    current_tag = "TODO_CURRENT_VERSION"
    notes.append(
        f"\n**Full Changelog**: https://github.com/marimo-team/marimo/compare/{since_tag}...{current_tag}"
    )

    return "\n".join(notes)


def main() -> None:
    if len(sys.argv) < 2:
        print("Usage: generate_release_notes.py <since-tag>")
        print("Example: generate_release_notes.py 0.14.7")
        sys.exit(1)

    print(generate_release_notes(sys.argv[1]))


if __name__ == "__main__":
    main()


## Links discovered
- [alt](https://github.com/marimo-team/marimo/blob/main/scripts/url.md)
- ["\'](https://github.com/marimo-team/marimo/blob/main/scripts/[^"\']+.md)
- [#{entry.pr.number}](https://github.com/marimo-team/marimo/pull/{entry.pr.number})
- [{match.group(0)}](https://github.com/marimo-team/marimo/blob/main/scripts/{match.group(0)})

--- marimo/third_party_licenses.txt ---
This file contains licenses of third party packages used by the frontend.
See third_party.txt for a list of packages and their licenses.

MIT LICENSE TEXT

Copyright (c) <year> <copyright holders>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

APACHE 2.0 LICENSE TEXT

                     Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use, reproduction,
      and distribution as defined by Sections 1 through 9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized by
      the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under common
      control with that entity. For the purposes of this definition,
      "control" means (i) the power, direct or indirect, to cause the
      direction or management of such entity, whether by contract or
      otherwise, or (ii) ownership of fifty percent (50%) or more of the
      outstanding shares, or (iii) beneficial ownership of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making modifications,
      including but not limited to software source code, documentation
      source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or Object
      form, that is based on (or derived from) the Work and for which the
      editorial revisions, annotations, elaborations, or other modifications
      represent, as a whole, an original work of authorship. For the purposes
      of this License, Derivative Works shall not include works that remain
      separable from, or merely link (or bind by name) to the interfaces of,
      the Work and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or additions
      to that Work or Derivative Works thereof, that is intentionally
      submitted to Licensor for inclusion in the Work by the copyright owner
      or by an individual or Legal Entity authorized to submit on behalf of
      the copyright owner. For the purposes of this definition, "submitted"
      means any form of electronic, verbal, or written communication sent
      to the Licensor or its representatives, including but not limited to
      communication on electronic mailing lists, source code control systems,
      and issue tracking systems that are managed by, or on behalf of, the
      Licensor for the purpose of discussing and improving the Work, but
      excluding communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a Contribution."

      "Contributor" shall mean Licensor and any individual or Legal Entity
      on behalf of whom a Contribution has been received by Licensor and
      subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      copyright license to reproduce, prepare Derivative Works of,
      publicly display, publicly perform, sublicense, and distribute the
      Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have made,
      use, offer to sell, sell, import, and otherwise transfer the Work,
      where such license applies only to those patent claims licensable
      by such Contributor that are necessarily infringed by their
      Contribution(s) alone or by combination of their Contribution(s)
      with the Work to which such Contribution(s) was submitted. If You
      institute patent litigation against any entity (including a
      cross-claim or counterclaim in a lawsuit) alleging that the Work
      or a Contribution incorporated within the Work constitutes direct
      or contributory patent infringement, then any patent licenses
      granted to You under this License for that Work shall terminate
      as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.

      You may add Your own copyright statement to Your modifications and
      may provide additional or different license terms and conditions
      for use, reproduction, or distribution of Your modifications, or
      for any such Derivative Works as a whole, provided Your use,
      reproduction, and distribution of the Work otherwise complies with
      the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
      any Contribution intentionally submitted for inclusion in the Work
      by You to the Licensor shall be under the terms and conditions of
      this License, without any additional terms or conditions.
      Notwithstanding the above, nothing herein shall supersede or modify
      the terms of any separate license agreement you may have executed
      with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
      names, trademarks, service marks, or product names of the Licensor,
      except as required for reasonable and customary use in describing the
      origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or conditions
      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
      PARTICULAR PURPOSE. You are solely responsible for determining the
      appropriateness of using or redistributing the Work and assume any
      risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and grossly
      negligent acts) or agreed to in writing, shall any Contributor be
      liable to You for damages, including any direct, indirect, special,
      incidental, or consequential damages of any character arising as a
      result of this License or out of the use or inability to use the
      Work (including but not limited to damages for loss of goodwill,
      work stoppage, computer failure or malfunction, or any and all
      other commercial damages or losses), even if such Contributor
      has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by reason
      of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS

   APPENDIX: How to apply the Apache License to your work.

      To apply the Apache License to your work, attach the following
      boilerplate notice, with the fields enclosed by brackets "[]"
      replaced with your own identifying information. (Don't include
      the brackets!)  The text should be enclosed in the appropriate
      comment syntax for the file format. We also recommend that a
      file or class name and description of purpose be included on the
      same "printed page" as the copyright notice for easier
      identification within third-party archives.

   Copyright [yyyy] [name of copyright owner]

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

APACHE LICENSE TEXT

/* ====================================================================
 * Copyright (c) 1995-1999 The Apache Group.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer. 
 *
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3. All advertising materials mentioning features or use of this
 *    software must display the following acknowledgment:
 *    "This product includes software developed by the Apache Group
 *    for use in the Apache HTTP server project (http://www.apache.org/)."
 *
 * 4. The names "Apache Server" and "Apache Group" must not be used to
 *    endorse or promote products derived from this software without
 *    prior written permission. For written permission, please contact
 *    apache@apache.org.
 *
 * 5. Products derived from this software may not be called "Apache"
 *    nor may "Apache" appear in their names without prior written
 *    permission of the Apache Group.
 *
 * 6. Redistributions of any form whatsoever must retain the following
 *    acknowledgment:
 *    "This product includes software developed by the Apache Group
 *    for use in the Apache HTTP server project (http://www.apache.org/)."
 *
 * THIS SOFTWARE IS PROVIDED BY THE APACHE GROUP ``AS IS'' AND ANY
 * EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE APACHE GROUP OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Group and was originally based
 * on public domain software written at the National Center for
 * Supercomputing Applications, University of Illinois, Urbana-Champaign.
 * For more information on the Apache Group and the Apache HTTP server
 * project, please see <http://www.apache.org/>.
 *
 */

BSD LICENSE

Copyright (c) <year>, <copyright holder> All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer. Redistributions in binary form
must reproduce the above copyright notice, this list of conditions and the
following disclaimer in the documentation and/or other materials provided with
the distribution. All advertising materials mentioning features or use of this
software must display the following acknowledgement: This product includes
software developed by the <copyright holder>. Neither the name of the
<copyright holder> nor the names of its contributors may be used to endorse or
promote products derived from this software without specific prior written
permission. THIS SOFTWARE IS PROVIDED BY <COPYRIGHT HOLDER> AS IS AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

BSD-3 LICENSE TEXT

Copyright <year> <copyright holder>

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer. Redistributions in binary form
must reproduce the above copyright notice, this list of conditions and the
following disclaimer in the documentation and/or other materials provided with
the distribution. Neither the name of the copyright holder nor the names of its
contributors may be used to endorse or promote products derived from this
software without specific prior written permission. THIS SOFTWARE IS PROVIDED
BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED
WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO
EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

UNLICENSE TEXT

This is free and unencumbered software released into the public domain.

Anyone is free to copy, modify, publish, use, compile, sell, or distribute this
software, either in source code form or as a compiled binary, for any purpose,
commercial or non-commercial, and by any means.

In jurisdictions that recognize copyright laws, the author or authors of this
software dedicate any and all copyright interest in the software to the public
domain. We make this dedication for the benefit of the public at large and to
the detriment of our heirs and successors. We intend this dedication to be an
overt act of relinquishment in perpetuity of all present and future rights to
this software under copyright law.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

ISC LICENSE TEXT

ISC License

Copyright <YEAR> <OWNER>

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND
FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.


--- frontend/benchmarks/base64-conversion.bench.ts ---
import { bench, describe } from "vitest";

// To run:
// pnpm vitest bench benchmarks/base64-conversion.bench.ts

// Helper to convert Uint8Array to base64
function uint8ArrayToBase64(bytes: Uint8Array): string {
  let binary = "";
  for (let i = 0; i < bytes.length; i++) {
    binary += String.fromCharCode(bytes[i]);
  }
  return window.btoa(binary);
}

// Slow implementation (using Uint8Array.from)
function base64ToUint8ArraySlow(bytes: string): Uint8Array {
  const binary = window.atob(bytes);
  return Uint8Array.from(binary, (c) => c.charCodeAt(0));
}

// Fast implementation (using manual loop)
function base64ToUint8ArrayFast(bytes: string): Uint8Array {
  const binary = window.atob(bytes);
  const len = binary.length;
  const uint8Array = new Uint8Array(len);
  for (let i = 0; i < len; i++) {
    uint8Array[i] = binary.charCodeAt(i);
  }
  return uint8Array;
}

// Test data setup
const sizes = {
  small: 1024, // 1KB
  medium: 10 * 1024, // 10KB
  large: 100 * 1024, // 100KB
  xlarge: 1024 * 1024, // 1MB
};

const testData: Record<string, string> = {};
for (const [name, size] of Object.entries(sizes)) {
  const data = new Uint8Array(size);
  for (let i = 0; i < size; i++) {
    data[i] = i % 256;
  }
  testData[name] = uint8ArrayToBase64(data);
}

// Benchmarks
describe("base64 to Uint8Array conversion", () => {
  for (const [name, base64] of Object.entries(testData)) {
    bench(`slow - ${name}`, () => {
      base64ToUint8ArraySlow(base64);
    });

    bench(`fast - ${name}`, () => {
      base64ToUint8ArrayFast(base64);
    });
  }
});


--- frontend/benchmarks/uint8array-to-base64.bench.ts ---
import { bench, describe } from "vitest";

// To run:
// pnpm vitest bench benchmarks/uint8array-to-base64.bench.ts

// Slow implementation (using Array.from with callback)
function uint8ArrayToBase64Slow(binary: Uint8Array): string {
  const chars = Array.from(binary, (byte) => String.fromCharCode(byte));
  return window.btoa(chars.join(""));
}

// Fast implementation (using manual loop)
function uint8ArrayToBase64Fast(binary: Uint8Array): string {
  let binaryString = "";
  const len = binary.length;
  for (let i = 0; i < len; i++) {
    binaryString += String.fromCharCode(binary[i]);
  }
  return window.btoa(binaryString);
}

// Test data setup
const sizes = {
  small: 1024, // 1KB
  medium: 10 * 1024, // 10KB
  large: 100 * 1024, // 100KB
  xlarge: 1024 * 1024, // 1MB
};

const testData: Record<string, Uint8Array> = {};
for (const [name, size] of Object.entries(sizes)) {
  const data = new Uint8Array(size);
  for (let i = 0; i < size; i++) {
    data[i] = i % 256;
  }
  testData[name] = data;
}

// Benchmarks
describe("Uint8Array to base64 conversion", () => {
  for (const [name, data] of Object.entries(testData)) {
    bench(`slow - ${name}`, () => {
      uint8ArrayToBase64Slow(data);
    });

    bench(`fast - ${name}`, () => {
      uint8ArrayToBase64Fast(data);
    });
  }
});


--- .github/PULL_REQUEST_TEMPLATE.md ---
## üìù Summary

<!--
Provide a concise summary of what this pull request is addressing.

If this PR closes any issues, list them here by number (e.g., Closes #123).
-->
Closes #

## üîç Description of Changes

<!--
Detail the specific changes made in this pull request. Explain the problem addressed and how it was resolved. If applicable, provide before and after comparisons, screenshots, or any relevant details to help reviewers understand the changes easily.
-->

## üìã Checklist

- [ ] I have read the [contributor guidelines](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md).
- [ ] For large changes, or changes that affect the public API: this change was discussed or approved through an issue, on [Discord](https://marimo.io/discord?ref=pr), or the community [discussions](https://github.com/marimo-team/marimo/discussions) (Please provide a link if applicable).
- [ ] Tests have been added for the changes made.
- [ ] Documentation has been updated where applicable, including docstrings for API changes.
- [ ] Pull request title is a good summary of the changes - it will be used in the [release notes](https://github.com/marimo-team/marimo/releases).


## Links discovered
- [contributor guidelines](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md)
- [Discord](https://marimo.io/discord?ref=pr)
- [discussions](https://github.com/marimo-team/marimo/discussions)
- [release notes](https://github.com/marimo-team/marimo/releases)

--- AGENTS.md ---
# marimo Development Guidelines

marimo is a reactive notebook for Python with a modern web frontend.

## Quick Setup

```bash
pixi shell
make fe && make py
make dev
```

See [CONTRIBUTING.md](CONTRIBUTING.md) for detailed setup options.

## Project Structure

```
marimo/           # Python backend - see marimo/AGENTS.md
frontend/         # React frontend - see frontend/AGENTS.md
tests/            # Python tests (mirrors marimo/ structure)
docs/             # Documentation site
```

## High-Level Architecture

**Backend (`/marimo/`)**: Reactive notebook runtime built on Starlette/Uvicorn
- `_ast/`: AST handling, cell parsing, dependency analysis
- `_runtime/`: Reactive execution engine, dataflow graph
- `_server/`: HTTP/WebSocket server, API endpoints, session management
- `_plugins/`: UI components (buttons, sliders, tables)
- `_sql/`: SQL cell support with multiple engine backends
- `_output/`: Output formatting and MIME types

**Frontend (`/frontend/src/`)**: Interactive UI built with React/TypeScript/Vite
- `core/`: Application state, cell management, runtime communication
- `codemirror/`: Code editor with Python/SQL support, completions
- `plugins/`: React implementations of UI components
- `components/`: Reusable UI components
- `hooks/`: Custom React hooks

**Communication**: WebSocket protocol (`/ws`) for real-time bidirectional messaging using typed operation-based messages.

## Development Commands

```bash
# Python
make py-check              # Typecheck and lint Python
uvx hatch run +py=3.12 test:test tests/path/to/test.py
uvx hatch run +py=3.12 test-optional:test tests/path/to/test.py  # with optional deps

# Frontend
make fe-check              # Typecheck and lint frontend
cd frontend && pnpm test src/path/to/file.test.ts
```

## Key Development Tips

- UI plugins require changes in both Python (`_plugins/`) and React (`plugins/`)
- The frontend communicates with the backend via WebSocket on `/ws`

## Pull Requests

- Run `make check` before committing
- See [CONTRIBUTING.md](CONTRIBUTING.md) for PR guidelines and CLA


## Links discovered
- [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md)

--- CLAUDE.md ---
@AGENTS.md


--- CODE_OF_CONDUCT.md ---
# Contributor Covenant Code of Conduct

## Our Pledge

In the interest of fostering an open and welcoming environment, we as
contributors and maintainers pledge to making participation in our project and
our community a harassment-free experience for everyone, regardless of age, body
size, disability, ethnicity, sex characteristics, gender identity and expression,
level of experience, education, socio-economic status, nationality, personal
appearance, race, religion, or sexual identity and orientation.

## Our Standards

Examples of behavior that contributes to creating a positive environment
include:

* Using welcoming and inclusive language
* Being respectful of differing viewpoints and experiences
* Gracefully accepting constructive criticism
* Focusing on what is best for the community
* Showing empathy towards other community members

Examples of unacceptable behavior by participants include:

* The use of sexualized language or imagery and unwelcome sexual attention or
 advances
* Trolling, insulting/derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others' private information, such as a physical or electronic
 address, without explicit permission
* Other conduct which could reasonably be considered inappropriate in a
 professional setting

## Our Responsibilities

Project maintainers are responsible for clarifying the standards of acceptable
behavior and are expected to take appropriate and fair corrective action in
response to any instances of unacceptable behavior.

Project maintainers have the right and responsibility to remove, edit, or
reject comments, commits, code, wiki edits, issues, and other contributions
that are not aligned to this Code of Conduct, or to ban temporarily or
permanently any contributor for other behaviors that they deem inappropriate,
threatening, offensive, or harmful.

## Scope

This Code of Conduct applies both within project spaces and in public spaces
when an individual is representing the project or its community. Examples of
representing a project or community include using an official project e-mail
address, posting via an official social media account, or acting as an appointed
representative at an online or offline event. Representation of a project may be
further defined and clarified by project maintainers.

## Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported by contacting the project team at contact@marimo.io. All
complaints will be reviewed and investigated and will result in a response that
is deemed necessary and appropriate to the circumstances. The project team is
obligated to maintain confidentiality with regard to the reporter of an incident.
Further details of specific enforcement policies may be posted separately.

Project maintainers who do not follow or enforce the Code of Conduct in good
faith may face temporary or permanent repercussions as determined by other
members of the project's leadership.

## Attribution

This Code of Conduct is adapted from the [Contributor Covenant][homepage], version 1.4,
available at https://www.contributor-covenant.org/version/1/4/code-of-conduct.html

[homepage]: https://www.contributor-covenant.org

For answers to common questions about this code of conduct, see
https://www.contributor-covenant.org/faq


--- GOVERNANCE.md ---
# **Governance Structure**

This document describes the formal governance structure of the marimo project.

## **Mission**

The marimo project builds next-generation developer tools for working with
data that are reproducible and scalable, and that create easy-to-share
artifacts. Our main project is the marimo notebook.

marimo is a reactive Python notebook: run a cell or interact with a UI
element, and marimo automatically runs dependent cells (or marks them as
stale), keeping code and outputs consistent. marimo notebooks are stored as
pure Python, executable as scripts, and deployable as apps. marimo
provides a batteries-included programming environment designed specifically
for working with data. marimo aims to be easy to get started with, while
providing expressivity and extensibility for power users.

## **Code of Conduct**

The marimo community strongly values inclusivity and diversity. Everyone should
treat others with the utmost respect. Everyone in the community must adhere to
the Code of Conduct specified in [the marimo GitHub
repository](https://github.com/marimo-team/marimo/blob/main/CODE_OF_CONDUCT.md).
Violations of this code of conduct may be reported confidentially to Project
Maintainers indicated at that link.

## **Entities**

This section outlines the different entities that exist within the marimo project, their basic role, and how membership of each entity is determined.

### **Benevolent Dictator For Life**

Due to his role in the creation of marimo, [Akshay Agrawal](https://akshayagrawal.com/) holds the title of [Benevolent Dictator For Life (BDFL)](https://en.wikipedia.org/wiki/Benevolent_dictator_for_life).

### **Project Maintainers**

Project Maintainers lead the technical development of the marimo project, and
they are the ultimate authority on the direction of the marimo project. The
current Project Maintainers are:

- Akshay Agrawal ([@akshaya](https://github.com/akshayka))
- Myles Scolnick ([@mscolnick](https://github.com/mscolnick))
- Bennet Meyers ([@bmeyers](https://github.com/bmeyers))

A new maintainer may be added by consensus of the current Project Maintainers
and notification to the Steering Committee.

Before becoming a maintainer, it is expected that the community member will
have been an active participant in the development and maintenance of the marimo
repository for a sustained period of time. This includes triaging issues,
proposing and reviewing pull requests, and updating continuous integration
as needed.

### **Emeritus Project Maintainers**

Emeritus Project Maintainers are community members who were Project
Maintainers, but have stepped back to a less active role. A Project Maintainer
may choose to switch to emeritus status by informing the other Project
Maintainers and the Steering Committee.

### **Steering Committee**

The Steering Committee supports the Project Maintainers by representing marimo
in all administrative and legal capacities. In addition, the Steering
Committee:

- Approves expenditures related to marimo.
- Negotiates and approves contracts with external contractors who provide paid work to marimo.

The current members of the Steering Committee are:

- Akshay Agrawal ([@akshaya](https://github.com/akshayka))
- Myles Scolnick ([@mscolnick](https://github.com/mscolnick))
- Bennet Meyers ([@bmeyers](https://github.com/bmeyers))

A member of the Steering Committee may leave the committee by notifying the
Steering Committee and Project Maintainers. The remaining Steering Committee
members, in consultation with the Project Maintainers, will invite a member of
the community to join in order to maintain a quorum of five members.

## **Decision Making Process**

This section outlines how financial and non-financial decisions are made in the
marimo project.

### **Financial Decisions**

All financial decisions are made by the Steering Committee to ensure any funds
are spent in a manner that furthers the mission of marimo. Financial decisions
require majority approval by Steering Committee members.

Community members proposing decisions with a financial aspect should contact
the Steering Committee directly.

### **Non-financial Decisions**

All non-financial decisions are made via consensus of the Project Maintainers.
Emeritus Project Maintainers are not considered to be Project Maintainers for
this purpose.

Code-related decisions, such as when a pull request is ready to be accepted and
merged, should be discussed via the relevant GitHub issues and pull requests.
If consensus cannot be achieved, the community member proposing the change may
be invited by a project maintainer to present their proposal at a developer
call for further discussion and community input.

Changes to any public API require explicit approval (in the form of an
"Approval" on a GitHub review) from a majority of the Project Maintainers.

Non-code-related decisions, such as long-term strategic planning for marimo,
should either be discussed in a GitHub issue, or tabled as an agenda item and
discussed on a developer call.

If consensus on a non-financial decision cannot be achieved, the final decision
will be made by the BDFL.

The Steering Committee can gain additional decision-making power if the Project
Maintainers decide to delegate.

### **Conflict of Interest**

It is expected that community members will be employed at a wide range of
companies, universities and non-profit organizations. Because of this, it is
possible that members will have conflicts of interest. Such conflicts of
interest include, but are not limited to:

- Financial interests, such as investments, employment or contracting work, outside of marimo that may influence their work on marimo.
- Access to proprietary information of their employer that could potentially leak into their work with marimo.

All members of the Steering Committee shall disclose to the Steering Committee
any conflict of interest they may have. Members with a conflict of interest in
a particular issue may participate in Steering Committee discussions on that
issue, but must recuse themselves from voting.

Project Maintainers and repository maintainers should also disclose conflicts
of interest with other Project Maintainers and step back from decisions when
conflicts of interests are in play.

## **GitHub Permissions**

GitHub permissions are used to control access to the marimo GitHub repository.

Anyone with commit access to the repository is trusted to use it in a way that
is consistent with the Decision Making Process. Those with permissions should
prefer pull requests over direct pushes, ask for feedback on changes if they
are not sure there is a consensus, and follow marimo‚Äôs [style
guide](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md) and
development processes.

### **Project Maintainers**

Project Maintainers are added as
[Owners](https://docs.github.com/en/free-pro-team@latest/github/setting-up-and-managing-organizations-and-teams/permission-levels-for-an-organization#permission-levels-for-an-organization)
of the marimo GitHub organization.

### **Emeritus Project Maintainers**

Emeritus Project Maintainers retain the same commit rights as Project
Maintainers, unless they choose to surrender them.

## **Community Involvement**

The marimo project highly values the contributions made by members of the
community. As an open-source project, marimo is both made for the community,
and by the community.

There are three channels that marimo uses to engage with the community.

### **Discord Server**

Discussions focused on marimo‚Äôs development are conducted on a [Discord Server](https://marimo.io/discord?ref=governance). The server is public but requires email verification.

The server consists of several channels with different permissions based on the
concept of Discord roles. The named roles are ‚ÄúProject Maintainer‚Äù and
‚ÄúContributor.‚Äù The Project Maintainers have write access to all channels and
also have a private channel.

Individuals who have contributed significantly to the development of marimo,
for example by proposing and merging at least one substantial pull request, may
be invited to the Discord server as Contributors. Project Maintainers may grant
the Contributor role within Discord at their discretion, and may create
additional channels for specific long-term projects in marimo‚Äôs development.

### **Developer Calls**

The Steering Committee hosts semiannual developer calls to discuss
marimo-related business.

The precise time of a given call is determined one month ahead of time by discussions on the "developer-calls" channel of the marimo Discord Server.

### **Contributor License Agreement**

All contributors to marimo must sign a Contributor License Agreement (CLA) before their contributions can be accepted. The CLA is a legal agreement that assigns copyright of contributions to Marimo Inc. This helps protect the project and its users by ensuring clear ownership and licensing of all contributions.

The CLA can be found at <https://marimo.io/cla> and must be signed before any pull requests can be merged.


## Links discovered
- [the marimo GitHub
repository](https://github.com/marimo-team/marimo/blob/main/CODE_OF_CONDUCT.md)
- [Akshay Agrawal](https://akshayagrawal.com/)
- [Benevolent Dictator For Life (BDFL)](https://en.wikipedia.org/wiki/Benevolent_dictator_for_life)
- [@akshaya](https://github.com/akshayka)
- [@mscolnick](https://github.com/mscolnick)
- [@bmeyers](https://github.com/bmeyers)
- [style
guide](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md)
- [Owners](https://docs.github.com/en/free-pro-team@latest/github/setting-up-and-managing-organizations-and-teams/permission-levels-for-an-organization#permission-levels-for-an-organization)
- [Discord Server](https://marimo.io/discord?ref=governance)

--- README.md ---
<p align="center">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-thick.svg">
</p>

<p align="center">
  <em>A reactive Python notebook that's reproducible, git-friendly, and deployable as scripts or apps.</em>
</p>

<p align="center">
  <a href="https://docs.marimo.io" target="_blank"><strong>Docs</strong></a> ¬∑
  <a href="https://marimo.io/discord?ref=readme" target="_blank"><strong>Discord</strong></a> ¬∑
  <a href="https://docs.marimo.io/examples/" target="_blank"><strong>Examples</strong></a> ¬∑
  <a href="https://marimo.io/gallery/" target="_blank"><strong>Gallery</strong></a> ¬∑
  <a href="https://www.youtube.com/@marimo-team/" target="_blank"><strong>YouTube</strong></a>
</p>

<p align="center">
  <b>English</b>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Traditional_Chinese.md" target="_blank"><b>ÁπÅÈ´î‰∏≠Êñá</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Chinese.md" target="_blank"><b>ÁÆÄ‰Ωì‰∏≠Êñá</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Japanese.md" target="_blank"><b>Êó•Êú¨Ë™û</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Spanish.md" target="_blank"><b>Espa√±ol</b></a>
</p>

<p align="center">
  <a href="https://pypi.org/project/marimo/"><img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/></a>
  <a href="https://anaconda.org/conda-forge/marimo"><img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/></a>
  <a href="https://marimo.io/discord?ref=readme"><img src="https://shields.io/discord/1059888774789730424" alt="discord"/></a>
  <img alt="Pepy Total Downloads" src="https://img.shields.io/pepy/dt/marimo?label=pypi%20%7C%20downloads"/>
  <img alt="Conda Downloads" src="https://img.shields.io/conda/d/conda-forge/marimo"/>
  <a href="https://github.com/marimo-team/marimo/blob/main/LICENSE"><img src="https://img.shields.io/pypi/l/marimo"/></a>
</p>

**marimo** is a reactive Python notebook: run a cell or interact with a UI
element, and marimo automatically runs dependent cells (or <a href="#expensive-notebooks">marks them as stale</a>), keeping code and outputs
consistent. marimo notebooks are stored as pure Python (with first-class SQL support), executable as scripts,
and deployable as apps.

**Highlights**.

- üöÄ **batteries-included:** replaces `jupyter`, `streamlit`, `jupytext`, `ipywidgets`, `papermill`, and more
- ‚ö°Ô∏è **reactive**: run a cell, and marimo reactively [runs all dependent cells](https://docs.marimo.io/guides/reactivity.html) or <a href="#expensive-notebooks">marks them as stale</a>
- üñêÔ∏è **interactive:** [bind sliders, tables, plots, and more](https://docs.marimo.io/guides/interactivity.html) to Python ‚Äî no callbacks required
- üêç **git-friendly:** stored as `.py` files
- üõ¢Ô∏è **designed for data**: query dataframes, databases, warehouses, or lakehouses [with SQL](https://docs.marimo.io/guides/working_with_data/sql.html), filter and search [dataframes](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- ü§ñ **AI-native**: [generate cells with AI](https://docs.marimo.io/guides/generate_with_ai/) tailored for data work
- üî¨ **reproducible:** [no hidden state](https://docs.marimo.io/guides/reactivity.html#no-hidden-state), deterministic execution, [built-in package management](https://docs.marimo.io/guides/package_management/)
- üèÉ **executable:** [execute as a Python script](https://docs.marimo.io/guides/scripts.html), parameterized by CLI args
- üõú **shareable**: [deploy as an interactive web app](https://docs.marimo.io/guides/apps.html) or [slides](https://docs.marimo.io/guides/apps.html#slides-layout), [run in the browser via WASM](https://docs.marimo.io/guides/wasm.html)
- üß© **reusable:** [import functions and classes](https://docs.marimo.io/guides/reusing_functions/) from one notebook to another
- üß™ **testable:** [run pytest](https://docs.marimo.io/guides/testing/) on notebooks
- ‚å®Ô∏è **a modern editor**: [GitHub Copilot](https://docs.marimo.io/guides/editor_features/ai_completion.html#github-copilot), [AI assistants](https://docs.marimo.io/guides/editor_features/ai_completion.html), vim keybindings, variable explorer, and [more](https://docs.marimo.io/guides/editor_features/index.html)
- üßë‚Äçüíª **use your favorite editor**: run in [VS Code or Cursor](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo), or edit in neovim, Zed, [or any other text editor](https://docs.marimo.io/guides/editor_features/watching/)

```python
pip install marimo && marimo tutorial intro
```

_Get started instantly with [**mo**lab, our free online
notebook](https://molab.marimo.io/notebooks). Or jump to the
[quickstart](#quickstart) for a primer on our CLI._

## A reactive programming environment

marimo guarantees your notebook code, outputs, and program state are consistent. This [solves many problems](https://docs.marimo.io/faq.html#faq-problems) associated with traditional notebooks like Jupyter.

**A reactive programming environment.**
Run a cell and marimo _reacts_ by automatically running the cells that
reference its variables, eliminating the error-prone task of manually
re-running cells. Delete a cell and marimo scrubs its variables from program
memory, eliminating hidden state.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/reactive.gif" width="700px" />

<a name="expensive-notebooks"></a>

**Compatible with expensive notebooks.** marimo lets you [configure the runtime
to be
lazy](https://docs.marimo.io/guides/configuration/runtime_configuration.html),
marking affected cells as stale instead of automatically running them. This
gives you guarantees on program state while preventing accidental execution of
expensive cells.

**Synchronized UI elements.** Interact with [UI
elements](https://docs.marimo.io/guides/interactivity.html) like [sliders](https://docs.marimo.io/api/inputs/slider.html#slider),
[dropdowns](https://docs.marimo.io/api/inputs/dropdown.html), [dataframe
transformers](https://docs.marimo.io/api/inputs/dataframe.html), and [chat
interfaces](https://docs.marimo.io/api/inputs/chat.html), and the cells that
use them are automatically re-run with their latest values.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" width="700px" />

**Interactive dataframes.** [Page through, search, filter, and
sort](https://docs.marimo.io/guides/working_with_data/dataframes.html)
millions of rows blazingly fast, no code required.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-df.gif" width="700px" />

**Generate cells with data-aware AI.** [Generate code with an AI
assistant](https://docs.marimo.io/guides/editor_features/ai_completion/) that is highly
specialized for working with data, with context about your variables in memory;
[zero-shot entire notebooks](https://docs.marimo.io/guides/generate_with_ai/text_to_notebook/).
Customize the system prompt, bring your own API keys, or use local models.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-generate-with-ai.gif" width="700px" />

**Query data with SQL.** Build [SQL](https://docs.marimo.io/guides/working_with_data/sql.html) queries
that depend on Python values and execute them against dataframes, databases, lakehouses,
CSVs, Google Sheets, or anything else using our built-in SQL engine, which
returns the result as a Python dataframe.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-sql-cell.png" width="700px" />

Your notebooks are still pure Python, even if they use SQL.

**Dynamic markdown.** Use markdown parametrized by Python variables to tell
dynamic stories that depend on Python data.

**Built-in package management.** marimo has built-in support for all major
package managers, letting you [install packages on import](https://docs.marimo.io/guides/editor_features/package_management.html). marimo can even
[serialize package
requirements](https://docs.marimo.io/guides/package_management/inlining_dependencies/)
in notebook files, and auto install them in
isolated venv sandboxes.

**Deterministic execution order.** Notebooks are executed in a deterministic
order, based on variable references instead of cells' positions on the page.
Organize your notebooks to best fit the stories you'd like to tell.

**Performant runtime.** marimo runs only those cells that need to be run by
statically analyzing your code.

**Batteries-included.** marimo comes with GitHub Copilot, AI assistants, Ruff
code formatting, HTML export, fast code completion, a [VS Code
extension](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo),
an interactive dataframe viewer, and [many more](https://docs.marimo.io/guides/editor_features/index.html)
quality-of-life features.

## Quickstart

_The [marimo concepts
playlist](https://www.youtube.com/watch?v=3N6lInzq5MI&list=PLNJXGo8e1XT9jP7gPbRdm1XwloZVFvLEq)
on our [YouTube channel](https://www.youtube.com/@marimo-team) gives an
overview of many features._

**Installation.** In a terminal, run

```bash
pip install marimo  # or conda install -c conda-forge marimo
marimo tutorial intro
```

To install with additional dependencies that unlock SQL cells, AI completion, and more,
run

```bash
pip install "marimo[recommended]"
```

**Create notebooks.**

Create or edit notebooks with

```bash
marimo edit
```

**Run apps.** Run your notebook as a web app, with Python
code hidden and uneditable:

```bash
marimo run your_notebook.py
```

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-model-comparison.gif" style="border-radius: 8px" width="450px" />

**Execute as scripts.** Execute a notebook as a script at the
command line:

```bash
python your_notebook.py
```

**Automatically convert Jupyter notebooks.** Automatically convert Jupyter
notebooks to marimo notebooks with the CLI

```bash
marimo convert your_notebook.ipynb > your_notebook.py
```

or use our [web interface](https://marimo.io/convert).

**Tutorials.**
List all tutorials:

```bash
marimo tutorial --help
```

**Share cloud-based notebooks.** Use
[molab](https://molab.marimo.io/notebooks), a cloud-based marimo notebook
service similar to Google Colab, to create and share notebook links.

## Questions?

See the [FAQ](https://docs.marimo.io/faq.html) at our docs.

## Learn more

marimo is easy to get started with, with lots of room for power users.
For example, here's an embedding visualizer made in marimo
([try the notebook live on molab!](https://molab.marimo.io/notebooks/nb_jJiFFtznAy4BxkrrZA1o9b/app?show-code=true)):

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/embedding.gif" width="700px" />

Check out our [docs](https://docs.marimo.io),
[usage examples](https://docs.marimo.io/examples/), and our [gallery](https://marimo.io/gallery) to learn more.

<table border="0">
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html">
        <img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html"> Tutorial </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html"> Inputs </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html"> Plots </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html"> Layout </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://molab.marimo.io/notebooks/nb_TWVGCgZZK4L8zj5ziUBNVL">
        <img src="https://marimo.io/molab-shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://molab.marimo.io/notebooks/nb_WuoXgs7mjg5yqrMxJXjRpF">
        <img src="https://marimo.io/molab-shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://molab.marimo.io/notebooks/nb_vXxD13t2RoMTLjC89qdn6c">
        <img src="https://marimo.io/molab-shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://molab.marimo.io/notebooks/nb_XpXx8MX99dWAjn4k1b3xiU">
        <img src="https://marimo.io/molab-shield.svg"/>
      </a>
    </td>
  </tr>
</table>

## Contributing

We appreciate all contributions! You don't need to be an expert to help out.
Please see [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md) for more details on how to get
started.

> Questions? Reach out to us [on Discord](https://marimo.io/discord?ref=readme).

## Community

We're building a community. Come hang out with us!

- üåü [Star us on GitHub](https://github.com/marimo-team/marimo)
- üí¨ [Chat with us on Discord](https://marimo.io/discord?ref=readme)
- üìß [Subscribe to our Newsletter](https://marimo.io/newsletter)
- ‚òÅÔ∏è [Join our Cloud Waitlist](https://marimo.io/cloud)
- ‚úèÔ∏è [Start a GitHub Discussion](https://github.com/marimo-team/marimo/discussions)
- ü¶ã [Follow us on Bluesky](https://bsky.app/profile/marimo.io)
- üê¶ [Follow us on Twitter](https://twitter.com/marimo_io)
- üé• [Subscribe on YouTube](https://www.youtube.com/@marimo-team)
- ü§ñ [Follow us on Reddit](https://www.reddit.com/r/marimo_notebook)
- üï¥Ô∏è [Follow us on LinkedIn](https://www.linkedin.com/company/marimo-io)

**A NumFOCUS affiliated project.** marimo is a core part of the broader Python
ecosystem and is a member of the NumFOCUS community, which includes projects
such as NumPy, SciPy, and Matplotlib.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/numfocus_affiliated_project.png" height="40px" />


## Inspiration ‚ú®

marimo is a **reinvention** of the Python notebook as a reproducible, interactive,
and shareable Python program, instead of an error-prone JSON scratchpad.

We believe that the tools we use shape the way we think ‚Äî better tools, for
better minds. With marimo, we hope to provide the Python community with a
better programming environment to do research and communicate it; to experiment
with code and share it; to learn computational science and teach it.

Our inspiration comes from many places and projects, especially
[Pluto.jl](https://github.com/fonsp/Pluto.jl),
[ObservableHQ](https://observablehq.com/tutorials), and
[Bret Victor's essays](http://worrydream.com/). marimo is part of
a greater movement toward reactive dataflow programming. From
[IPyflow](https://github.com/ipyflow/ipyflow), [streamlit](https://github.com/streamlit/streamlit),
[TensorFlow](https://github.com/tensorflow/tensorflow),
[PyTorch](https://github.com/pytorch/pytorch/tree/main),
[JAX](https://github.com/google/jax), and
[React](https://github.com/facebook/react), the ideas of functional,
declarative, and reactive programming are transforming a broad range of tools
for the better.

<p align="right">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-horizontal.png" height="200px">
</p>


## Links discovered
- [runs all dependent cells](https://docs.marimo.io/guides/reactivity.html)
- [bind sliders, tables, plots, and more](https://docs.marimo.io/guides/interactivity.html)
- [with SQL](https://docs.marimo.io/guides/working_with_data/sql.html)
- [dataframes](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- [generate cells with AI](https://docs.marimo.io/guides/generate_with_ai/)
- [no hidden state](https://docs.marimo.io/guides/reactivity.html#no-hidden-state)
- [built-in package management](https://docs.marimo.io/guides/package_management/)
- [execute as a Python script](https://docs.marimo.io/guides/scripts.html)
- [deploy as an interactive web app](https://docs.marimo.io/guides/apps.html)
- [slides](https://docs.marimo.io/guides/apps.html#slides-layout)
- [run in the browser via WASM](https://docs.marimo.io/guides/wasm.html)
- [import functions and classes](https://docs.marimo.io/guides/reusing_functions/)
- [run pytest](https://docs.marimo.io/guides/testing/)
- [GitHub Copilot](https://docs.marimo.io/guides/editor_features/ai_completion.html#github-copilot)
- [AI assistants](https://docs.marimo.io/guides/editor_features/ai_completion.html)
- [more](https://docs.marimo.io/guides/editor_features/index.html)
- [VS Code or Cursor](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)
- [or any other text editor](https://docs.marimo.io/guides/editor_features/watching/)
- [**mo**lab, our free online
notebook](https://molab.marimo.io/notebooks)
- [solves many problems](https://docs.marimo.io/faq.html#faq-problems)
- [configure the runtime
to be
lazy](https://docs.marimo.io/guides/configuration/runtime_configuration.html)
- [UI
elements](https://docs.marimo.io/guides/interactivity.html)
- [sliders](https://docs.marimo.io/api/inputs/slider.html#slider)
- [dropdowns](https://docs.marimo.io/api/inputs/dropdown.html)
- [dataframe
transformers](https://docs.marimo.io/api/inputs/dataframe.html)
- [chat
interfaces](https://docs.marimo.io/api/inputs/chat.html)
- [Page through, search, filter, and
sort](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- [Generate code with an AI
assistant](https://docs.marimo.io/guides/editor_features/ai_completion/)
- [zero-shot entire notebooks](https://docs.marimo.io/guides/generate_with_ai/text_to_notebook/)
- [SQL](https://docs.marimo.io/guides/working_with_data/sql.html)
- [install packages on import](https://docs.marimo.io/guides/editor_features/package_management.html)
- [serialize package
requirements](https://docs.marimo.io/guides/package_management/inlining_dependencies/)
- [VS Code
extension](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)
- [many more](https://docs.marimo.io/guides/editor_features/index.html)
- [marimo concepts
playlist](https://www.youtube.com/watch?v=3N6lInzq5MI&list=PLNJXGo8e1XT9jP7gPbRdm1XwloZVFvLEq)
- [YouTube channel](https://www.youtube.com/@marimo-team)
- [web interface](https://marimo.io/convert)
- [molab](https://molab.marimo.io/notebooks)
- [FAQ](https://docs.marimo.io/faq.html)
- [try the notebook live on molab!](https://molab.marimo.io/notebooks/nb_jJiFFtznAy4BxkrrZA1o9b/app?show-code=true)
- [docs](https://docs.marimo.io)
- [usage examples](https://docs.marimo.io/examples/)
- [gallery](https://marimo.io/gallery)
- [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md)
- [on Discord](https://marimo.io/discord?ref=readme)
- [Star us on GitHub](https://github.com/marimo-team/marimo)
- [Chat with us on Discord](https://marimo.io/discord?ref=readme)
- [Subscribe to our Newsletter](https://marimo.io/newsletter)
- [Join our Cloud Waitlist](https://marimo.io/cloud)
- [Start a GitHub Discussion](https://github.com/marimo-team/marimo/discussions)
- [Follow us on Bluesky](https://bsky.app/profile/marimo.io)
- [Follow us on Twitter](https://twitter.com/marimo_io)
- [Subscribe on YouTube](https://www.youtube.com/@marimo-team)
- [Follow us on Reddit](https://www.reddit.com/r/marimo_notebook)
- [Follow us on LinkedIn](https://www.linkedin.com/company/marimo-io)
- [Pluto.jl](https://github.com/fonsp/Pluto.jl)
- [ObservableHQ](https://observablehq.com/tutorials)
- [Bret Victor's essays](http://worrydream.com/)
- [IPyflow](https://github.com/ipyflow/ipyflow)
- [streamlit](https://github.com/streamlit/streamlit)
- [TensorFlow](https://github.com/tensorflow/tensorflow)
- [PyTorch](https://github.com/pytorch/pytorch/tree/main)
- [JAX](https://github.com/google/jax)
- [React](https://github.com/facebook/react)
- [<strong>Docs</strong>](https://docs.marimo.io)
- [<strong>Discord</strong>](https://marimo.io/discord?ref=readme)
- [<strong>Examples</strong>](https://docs.marimo.io/examples/)
- [<strong>Gallery</strong>](https://marimo.io/gallery/)
- [<strong>YouTube</strong>](https://www.youtube.com/@marimo-team/)
- [<b>ÁπÅÈ´î‰∏≠Êñá</b>](https://github.com/marimo-team/marimo/blob/main/README_Traditional_Chinese.md)
- [<b>ÁÆÄ‰Ωì‰∏≠Êñá</b>](https://github.com/marimo-team/marimo/blob/main/README_Chinese.md)
- [<b>Êó•Êú¨Ë™û</b>](https://github.com/marimo-team/marimo/blob/main/README_Japanese.md)
- [<b>Espa√±ol</b>](https://github.com/marimo-team/marimo/blob/main/README_Spanish.md)
- [<img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/>](https://pypi.org/project/marimo/)
- [<img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/>](https://anaconda.org/conda-forge/marimo)
- [<img src="https://shields.io/discord/1059888774789730424" alt="discord"/>](https://marimo.io/discord?ref=readme)
- [<img src="https://img.shields.io/pypi/l/marimo"/>](https://github.com/marimo-team/marimo/blob/main/LICENSE)
- [<img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/getting_started/key_concepts.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/inputs/index.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/layouts/index.html)
- [Tutorial](https://docs.marimo.io/getting_started/key_concepts.html)
- [Inputs](https://docs.marimo.io/api/inputs/index.html)
- [Plots](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [Layout](https://docs.marimo.io/api/layouts/index.html)
- [<img src="https://marimo.io/molab-shield.svg"/>](https://molab.marimo.io/notebooks/nb_TWVGCgZZK4L8zj5ziUBNVL)
- [<img src="https://marimo.io/molab-shield.svg"/>](https://molab.marimo.io/notebooks/nb_WuoXgs7mjg5yqrMxJXjRpF)
- [<img src="https://marimo.io/molab-shield.svg"/>](https://molab.marimo.io/notebooks/nb_vXxD13t2RoMTLjC89qdn6c)
- [<img src="https://marimo.io/molab-shield.svg"/>](https://molab.marimo.io/notebooks/nb_XpXx8MX99dWAjn4k1b3xiU)

--- README_Chinese.md ---
<p align="center">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-thick.svg">
</p>

<p align="center">
  <em>ËøôÊòØ‰∏ÄÊ¨æÂìçÂ∫îÂºèÁöÑPythonÁ¨îËÆ∞Êú¨ÔºåÂÖ∑Êúâ‰ºòÁßÄÁöÑÂèØÂ§çÁé∞ÊÄßÔºåÂéüÁîüÊîØÊåÅGitÔºåÂπ∂ÂèØ‰Ωú‰∏∫ËÑöÊú¨ÊàñÂ∫îÁî®Á®ãÂ∫èÈÉ®ÁΩ≤„ÄÇ</em>
</p>

<p align="center">
  <a href="https://docs.marimo.io" target="_blank"><strong>Áî®Êà∑ÊâãÂÜå</strong></a> ¬∑
  <a href="https://marimo.io/discord?ref=readme" target="_blank"><strong>Discord Á§æÂå∫</strong></a> ¬∑
  <a href="https://docs.marimo.io/examples/" target="_blank"><strong>Á§∫‰æã</strong></a> ¬∑
  <a href="https://marimo.io/gallery/" target="_blank"><strong>Â±ïÁ§∫Âªä</strong></a> ¬∑
  <a href="https://www.youtube.com/@marimo-team/" target="_blank"><strong>YouTube</strong></a>
</p>

<p align="center">
  <a href="https://github.com/marimo-team/marimo/blob/main/README.md" target="_blank"><b>English</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Traditional_Chinese.md" target="_blank"><b>ÁπÅÈ´î‰∏≠Êñá</b></a>
  <b> | </b>
  <b>ÁÆÄ‰Ωì‰∏≠Êñá</b>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Japanese.md" target="_blank"><b>Êó•Êú¨Ë™û</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Spanish.md" target="_blank"><b>Espa√±ol</b></a>
</p>

<p align="center">
  <a href="https://pypi.org/project/marimo/"><img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/></a>
  <a href="https://anaconda.org/conda-forge/marimo"><img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/></a>
  <a href="https://marimo.io/discord?ref=readme"><img src="https://shields.io/discord/1059888774789730424" alt="discord"/></a>
  <img alt="Pepy Total Downloads" src="https://img.shields.io/pepy/dt/marimo?label=pypi%20%7C%20downloads"/>
  <img alt="Conda Downloads" src="https://img.shields.io/conda/d/conda-forge/marimo"/>
  <a href="https://github.com/marimo-team/marimo/blob/main/LICENSE"><img src="https://img.shields.io/pypi/l/marimo"/></a>
</p>

**Marimo** ÊòØ‰∏ÄÊ¨æÂìçÂ∫îÂºè Python Á¨îËÆ∞Êú¨ÔºöËøêË°åÂçïÂÖÉÊ†ºÂèØ‰∏é UI ÂÖÉÁ¥†‰∫§‰∫íÔºåmarimo ‰ºöËá™Âä®Êõ¥Êñ∞‰æùËµñ‰∫éÂÆÉÁöÑÂçïÂÖÉÊ†ºÔºàÊàñÂ∞ÜÂÖ∂<a href="#expensive-notebooks">Ê†áËÆ∞‰∏∫ËøáÊó∂ÂçïÂÖÉÊ†º</a>ÔºâÔºå‰ªéËÄå‰øùÊåÅ‰ª£Á†ÅÂíåËæìÂá∫ÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ**marimo** Á¨îËÆ∞Êú¨‰ª•Á∫Ø Python Ê†ºÂºèÂ≠òÂÇ®ÔºåÂèØ‰Ωú‰∏∫ËÑöÊú¨ÊâßË°åÔºå‰πüÂèØ‰Ωú‰∏∫Â∫îÁî®Á®ãÂ∫èÈÉ®ÁΩ≤„ÄÇ

**‰∏∫‰ªÄ‰πàÈÄâÊã© marimo**

- üöÄ **ÂäüËÉΩÈΩêÂÖ®**ÔºöÊõø‰ª£ `jupyter`„ÄÅ`streamlit`„ÄÅ`jupytext`„ÄÅ`ipywidgets`„ÄÅ`papermill` Á≠âÊõ¥Â§öÂ∑•ÂÖ∑
- ‚ö°Ô∏è **ÂìçÂ∫îÂºè**ÔºöËøêË°å‰∏Ä‰∏™ÂçïÂÖÉÊ†ºÔºåmarimo‰ºöÂìçÂ∫îÂºèÂú∞[ËøêË°åÊâÄÊúâ‰æùËµñÂçïÂÖÉÊ†º](https://docs.marimo.io/guides/reactivity.html)Êàñ<a href="#expensive-notebooks">Â∞ÜÂÆÉ‰ª¨Ê†áËÆ∞‰∏∫ËøáÊó∂</a>
- üñêÔ∏è **‰∫§‰∫íÊÄß**Ôºö[ÁªëÂÆöÊªëÂùó„ÄÅË°®Ê†º„ÄÅÂõæË°®Á≠âUIÂÖÉÁ¥†](https://docs.marimo.io/guides/interactivity.html)Âà∞Python‰ª£Á†Å‚Äî‚ÄîÊó†ÈúÄÂõûË∞ÉÂáΩÊï∞
- üêç **ÊîØÊåÅGitÁâàÊú¨ÊéßÂà∂**ÔºöÁ¨îËÆ∞Êú¨‰ª•`.py`Êñá‰ª∂Ê†ºÂºèÂ≠òÂÇ®
- üõ¢Ô∏è **‰∏∫Êï∞ÊçÆËÆæËÆ°**Ôºö‰ΩøÁî®[SQL](https://docs.marimo.io/guides/working_with_data/sql.html)Êü•ËØ¢Êï∞ÊçÆÊ°ÜÂíåÊï∞ÊçÆÂ∫ìÔºåËøáÊª§ÂíåÊêúÁ¥¢[Êï∞ÊçÆÊ°Ü](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- üî¨ **ÂèØÂ§çÁé∞**Ôºö[Êó†ÈöêËóèÁä∂ÊÄÅ](https://docs.marimo.io/guides/reactivity.html#no-hidden-state)ÔºåÁ°ÆÂÆöÊÄßÊâßË°åÔºå[ÂÜÖÁΩÆÂåÖÁÆ°ÁêÜ](https://docs.marimo.io/guides/editor_features/package_management.html)
- üèÉ **ÂèØÊâßË°å**Ôºö[‰Ωú‰∏∫PythonËÑöÊú¨ÊâßË°å](https://docs.marimo.io/guides/scripts.html)ÔºåÈÄöËøáÂëΩ‰ª§Ë°åÂèÇÊï∞ËøõË°åÈÖçÁΩÆ
- üõú **ÂèØÂàÜ‰∫´**Ôºö[ÈÉ®ÁΩ≤‰∏∫‰∫§‰∫íÂºèWebÂ∫îÁî®](https://docs.marimo.io/guides/apps.html)Êàñ[ÂπªÁÅØÁâá](https://docs.marimo.io/guides/apps.html#slides-layout)Ôºå[ÈÄöËøáWASMÂú®ÊµèËßàÂô®‰∏≠ËøêË°å](https://docs.marimo.io/guides/wasm.html)
- üß© **ÂèØÂ§çÁî®Ôºö** ÂèØ‰ªé‰∏Ä‰∏™Á¨îËÆ∞Êú¨[ÂØºÂÖ•ÂáΩÊï∞ÂíåÁ±ª](https://docs.marimo.io/guides/reusing_functions/)Âà∞Âè¶‰∏Ä‰∏™Á¨îËÆ∞Êú¨
- üß™ **‰æø‰∫éÊµãËØïÔºö** ÂèØÂú®Á¨îËÆ∞Êú¨‰∏äËøêË°å [pytest](https://docs.marimo.io/guides/testing/)
- ‚å®Ô∏è **Áé∞‰ª£ÁºñËæëÂô®**Ôºö[GitHub Copilot](https://docs.marimo.io/guides/editor_features/ai_completion.html#github-copilot)„ÄÅ[AIÂä©Êâã](https://docs.marimo.io/guides/editor_features/ai_completion.html#using-ollama)„ÄÅvimÂø´Êç∑ÈîÆ„ÄÅÂèòÈáèÊµèËßàÂô®Âíå[Êõ¥Â§öÂäüËÉΩ](https://docs.marimo.io/guides/editor_features/index.html)

```python
pip install marimo && marimo tutorial intro
```

_Âú®Êàë‰ª¨ÁöÑ[Âú®Á∫ø‰ΩìÈ™åÂπ≥Âè∞](https://marimo.app/l/c7h6pz)ËØïÁî®marimoÔºåÂÆåÂÖ®Âú®ÊµèËßàÂô®‰∏≠ËøêË°åÔºÅ_

_Ë∑≥ËΩ¨Âà∞[Âø´ÈÄüÂÖ•Èó®](#Âø´ÈÄüÂÖ•Èó®)‰∫ÜËß£Êàë‰ª¨ÁöÑÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑„ÄÇ_

## ÂìçÂ∫îÂºèÁºñÁ®ãÁéØÂ¢É

Marimo Á°Æ‰øù‰∫ÜÊÇ®ÁöÑ‰ª£Á†Å„ÄÅËæìÂá∫ÂíåÁ®ãÂ∫èÁöÑÁä∂ÊÄÅÂßãÁöÑ‰∏ÄËá¥ÊÄßÔºåËß£ÂÜ≥‰∫Ü‰∏é Jupyter Á≠â‰º†ÁªüÁ¨îËÆ∞Êú¨Áõ∏ÂÖ≥ÁöÑËÆ∏Â§ö[ÈóÆÈ¢ò](https://docs.marimo.io/faq.html#faq-problems)„ÄÇ

**Áã¨ÊúâÁöÑÂìçÂ∫îÂºèËÆæËÆ°**
ËøêË°å‰∏Ä‰∏™ÂçïÂÖÉÊ†ºÔºåmarimo Â∞±‰ºöËá™Âä®ËøêË°åÂºïÁî®ÂÖ∂ÂèòÈáèÁöÑÂçïÂÖÉÊ†ºÔºå‰ªéËÄåÈÅøÂÖç‰∫ÜÊâãÂä®ÈáçÊñ∞ËøêË°åÂçïÂÖÉÊ†ºËøô‰∏ÄÂÆπÊòìÂá∫ÈîôÁöÑÂ∑•‰Ωú„ÄÇÂà†Èô§ÂçïÂÖÉÊ†ºÔºåmarimo ‰ºö‰ªéÁ®ãÂ∫èÂÜÖÂ≠ò‰∏≠Âà†Èô§ÂÖ∂ÂèòÈáèÔºåÊ∂àÈô§ÈöêËóèÁä∂ÊÄÅ„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/reactive.gif" width="700px" />

<a name="expensive-notebooks"></a>

**ÂÖºÂÆπËÆ°ÁÆóÂØÜÈõÜÂûãÁ¨îËÆ∞Êú¨**„ÄÇmarimoÂÖÅËÆ∏ÊÇ®[Â∞ÜËøêË°åÊó∂ÈÖçÁΩÆ‰∏∫Âª∂ËøüÊ®°Âºè](https://docs.marimo.io/guides/configuration/runtime_configuration.html)ÔºåÂ∞ÜÂèóÂΩ±ÂìçÁöÑÂçïÂÖÉÊ†ºÊ†áËÆ∞‰∏∫ËøáÊó∂ËÄå‰∏çÊòØËá™Âä®ËøêË°åÂÆÉ‰ª¨„ÄÇËøôÊó¢ËÉΩ‰øùËØÅÁ®ãÂ∫èÁä∂ÊÄÅÁöÑÂÆåÊï¥ÊÄßÔºåÂèàËÉΩÈò≤Ê≠¢ÊÑèÂ§ñÊâßË°åËÆ°ÁÆóÂØÜÈõÜÂûãÂçïÂÖÉÊ†º„ÄÇ

**ÂêåÊ≠•ÁöÑUIÂÖÉÁ¥†**„ÄÇ‰∏é[UIÂÖÉÁ¥†](https://docs.marimo.io/guides/interactivity.html)Â¶Ç[ÊªëÂùó](https://docs.marimo.io/api/inputs/slider.html#slider)„ÄÅ[‰∏ãÊãâËèúÂçï](https://docs.marimo.io/api/inputs/dropdown.html)„ÄÅ[Êï∞ÊçÆÊ°ÜËΩ¨Êç¢Âô®](https://docs.marimo.io/api/inputs/dataframe.html)Âíå[ËÅäÂ§©ÁïåÈù¢](https://docs.marimo.io/api/inputs/chat.html)‰∫§‰∫íÊó∂Ôºå‰ΩøÁî®ÂÆÉ‰ª¨ÁöÑÂçïÂÖÉÊ†º‰ºöËá™Âä®‰ª•ÊúÄÊñ∞ÂÄºÈáçÊñ∞ËøêË°å„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" width="700px" />

**‰∫§‰∫íÂºèÊï∞ÊçÆÊ°Ü**„ÄÇ[ÂàÜÈ°µÊµèËßà„ÄÅÊêúÁ¥¢„ÄÅËøáÊª§ÂíåÊéíÂ∫è](https://docs.marimo.io/guides/working_with_data/dataframes.html)Êï∞Áôæ‰∏áË°åÊï∞ÊçÆÔºåÊûÅÈÄüËøêË°åÔºåÊó†ÈúÄÁºñÂÜô‰ª£Á†Å„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-df.gif" width="700px" />

**È´òÊïàËøêË°åÊó∂**„ÄÇmarimoÈÄöËøáÈùôÊÄÅÂàÜÊûê‰ª£Á†ÅÔºåÂè™ËøêË°åÈúÄË¶ÅËøêË°åÁöÑÂçïÂÖÉÊ†º„ÄÇ

**Âä®ÊÄÅMarkdownÂíåSQL**„ÄÇ‰ΩøÁî®MarkdownÂàõÂª∫‰æùËµñPythonÊï∞ÊçÆÁöÑÂä®ÊÄÅÊñáÊ°£„ÄÇÊàñËÄÖÊûÑÂª∫‰æùËµñPythonÂÄºÁöÑ[SQL](https://docs.marimo.io/guides/working_with_data/sql.html)Êü•ËØ¢ÔºåÂπ∂ÈíàÂØπÊï∞ÊçÆÊ°Ü„ÄÅÊï∞ÊçÆÂ∫ì„ÄÅCSV„ÄÅGoogle SheetsÊàñÂÖ∂‰ªñÊï∞ÊçÆÊ∫êÊâßË°åÔºå‰ΩøÁî®Êàë‰ª¨ÂÜÖÁΩÆÁöÑSQLÂºïÊìéÂ∞ÜÁªìÊûú‰Ωú‰∏∫PythonÊï∞ÊçÆÊ°ÜËøîÂõû„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-sql-cell.png" width="700px" />

Âç≥‰Ωø‰ΩøÁî®‰∫ÜMarkdownÊàñSQLÔºåÊÇ®ÁöÑÁ¨îËÆ∞Êú¨‰ªçÁÑ∂ÊòØÁ∫ØPython‰ª£Á†Å„ÄÇ

**Á°ÆÂÆöÊÄßÊâßË°åÈ°∫Â∫è**„ÄÇÁ¨îËÆ∞Êú¨ÊåâÁÖßÂü∫‰∫éÂèòÈáèÂºïÁî®ËÄåÈùûÂçïÂÖÉÊ†ºÈ°µÈù¢‰ΩçÁΩÆÁöÑÁ°ÆÂÆöÊÄßÈ°∫Â∫èÊâßË°å„ÄÇÊÇ®ÂèØ‰ª•Ê†πÊçÆÊÉ≥Ë¶ÅËÆ≤Ëø∞ÁöÑÊïÖ‰∫ãÁªÑÁªáÁ¨îËÆ∞Êú¨„ÄÇ

**ÂÜÖÁΩÆÂåÖÁÆ°ÁêÜ**„ÄÇmarimoÂÜÖÁΩÆÊîØÊåÅÊâÄÊúâ‰∏ªË¶ÅÁöÑÂåÖÁÆ°ÁêÜÂô®ÔºåÂÖÅËÆ∏ÊÇ®[Âú®ÂØºÂÖ•Êó∂ÂÆâË£ÖÂåÖ](https://docs.marimo.io/guides/editor_features/package_management.html)„ÄÇmarimoÁîöËá≥ÂèØ‰ª•[Â∫èÂàóÂåñÂåÖ‰æùËµñ](https://docs.marimo.io/guides/package_management/inlining_dependencies/)Âà∞Á¨îËÆ∞Êú¨Êñá‰ª∂‰∏≠ÔºåÂπ∂Âú®ÈöîÁ¶ªÁöÑvenvÊ≤ôÁÆ±‰∏≠Ëá™Âä®ÂÆâË£ÖÂÆÉ‰ª¨„ÄÇ

**ÂäüËÉΩÈΩêÂÖ®**„ÄÇmarimoÈõÜÊàê‰∫ÜGitHub Copilot„ÄÅAIÂä©Êâã„ÄÅRuff‰ª£Á†ÅÊ†ºÂºèÂåñ„ÄÅHTMLÂØºÂá∫„ÄÅÂø´ÈÄü‰ª£Á†ÅË°•ÂÖ®„ÄÅ[VS CodeÊâ©Â±ï](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)„ÄÅ‰∫§‰∫íÂºèÊï∞ÊçÆÊ°ÜÊü•ÁúãÂô®Âíå[Êõ¥Â§ö](https://docs.marimo.io/guides/editor_features/index.html)‰æøÊç∑ÂäüËÉΩ„ÄÇ

## Âø´ÈÄüËµ∑Ê≠•

**ÂÆâË£Ö** Âú®ÁªàÁ´ØËøêË°å‰ª•‰∏ã‰ª£Á†ÅÔºö

```bash
pip install marimo  # or conda install -c conda-forge marimo
marimo tutorial intro
```

Ë¶ÅÂÆâË£ÖÂåÖÂê´È¢ùÂ§ñ‰æùËµñÈ°πÁöÑÁâàÊú¨ÔºàÂêØÁî®SQLÂçïÂÖÉÊ†º„ÄÅAIË°•ÂÖ®Á≠âÂäüËÉΩÔºâÔºåËøêË°åÔºö

```bash
pip install marimo[recommended]
```

**ÂàõÂª∫Êñ∞ÁöÑÁ¨îËÆ∞Êú¨**

‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ÂàõÂª∫ÊàñÁºñËæëÁ¨îËÆ∞Êú¨

```bash
marimo edit
```

**ËøêË°åÂ∫îÁî®** Â∞ÜÁ¨îËÆ∞Êú¨‰Ωú‰∏∫WebÂ∫îÁî®ËøêË°åÔºåÈöêËóèÂπ∂ÈîÅÂÆöPython‰ª£Á†ÅÔºö

```bash
marimo run your_notebook.py
```

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-model-comparison.gif" style="border-radius: 8px" width="450px" />

**‰Ωú‰∏∫ËÑöÊú¨ÊâßË°å** Âú®ÂëΩ‰ª§Ë°å‰∏≠Â∞ÜÁ¨îËÆ∞Êú¨‰Ωú‰∏∫ËÑöÊú¨ÊâßË°åÔºö

```bash
python your_notebook.py
```

**Ëá™Âä®ËΩ¨Êç¢Â∑≤ÊúâÁöÑ Jupyter Á¨îËÆ∞Êú¨** ÈÄöËøáÂëΩ‰ª§Ë°åÂ∞Ü Jupyter Á¨îËÆ∞Êú¨Ëá™Âä®ËΩ¨Êç¢‰∏∫ marimo Ê†ºÂºèÁöÑÁ¨îËÆ∞Êú¨

```bash
marimo convert your_notebook.ipynb > your_notebook.py
```

ÂØπÊ≠§ÔºåÊàë‰ª¨‰πüÊúâ[Âú®Á∫øÂ∑•ÂÖ∑](https://marimo.io/convert)ÂèØ‰æõ‰ΩøÁî®„ÄÇ

**ÊïôÁ®ã**
ÂàóÂá∫ÊâÄÊúâÁöÑÂèØÁî®ÊïôÁ®ã:

```bash
marimo tutorial --help
```

## Â¶ÇÊûú‰Ω†Êúâ‰∏Ä‰∫õÈóÆÈ¢òÔºü

ËØ∑ÂèÇÈòÖÊàë‰ª¨ÊñáÊ°£‰∏≠ÁöÑ[FAQ](https://docs.marimo.io/faq.html)ÈÉ®ÂàÜ„ÄÇ

## Êõ¥Â§ö‰ø°ÊÅØ

Marimo ÂæàÂÆπÊòì‰∏äÊâãÔºå‰∏∫È´òÁ∫ßÁî®Êà∑Êèê‰æõ‰∫ÜÂæàÂ§ßÁöÑÁ©∫Èó¥„ÄÇ ‰æãÂ¶ÇÔºåËøôÊòØ‰∏Ä‰∏™Áî® marimo Âà∂‰ΩúÁöÑ embedding ÂèØËßÜÂåñÂ∑•ÂÖ∑
([Á§∫‰æãËßÜÈ¢ë](https://marimo.io/videos/landing/full.mp4)):

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/embedding.gif" width="700px" />

Êü•ÁúãÊàë‰ª¨ÁöÑ[ÊñáÊ°£](https://docs.marimo.io)„ÄÅ
[‰ΩøÁî®Á§∫‰æã](https://docs.marimo.io/examples/)Âíå[Â±ïÁ§∫Âªä](https://marimo.io/gallery)‰∫ÜËß£Êõ¥Â§ö„ÄÇ

<table border="0">
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html">
        <img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html"> ÊïôÁ®ã </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html"> ËæìÂÖ•Êéß‰ª∂ </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html"> ÁªòÂõæ </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html"> Â∏ÉÂ±Ä </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://marimo.app/l/c7h6pz">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/0ue871">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/lxp1jk">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/14ovyr">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
  </tr>
</table>

## Ë¥°ÁåÆ

Êàë‰ª¨ÊÑüË∞¢ÊâÄÊúâ‰∫∫ÁöÑË¥°ÁåÆ! ËøôÊòØ‰∏∫ÊâÄÊúâ‰∫∫ËÆæËÆ°ÁöÑÂ∑•ÂÖ∑ÔºåÊàë‰ª¨ÁúüÊåöÁöÑÊ¨¢Ëøé‰ªª‰Ωï‰∫∫ÁöÑ‰ªª‰ΩïÊÑèËßÅÔºÅ
ËØ∑ÂèÇÈòÖ[CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md) Ëé∑ÂèñÊõ¥Â§ö‰ø°ÊÅØÔºå‰∫ÜËß£Â¶Ç‰ΩïÂèÇ‰∏éÂà∞Ëøô‰∏™È°πÁõÆ‰∏≠Êù•„ÄÇ

> ÊúâÈóÆÈ¢òÔºüËØ∑[Âú®Discord‰∏äËÅîÁ≥ªÊàë‰ª¨](https://marimo.io/discord?ref=readme)„ÄÇ

## Á§æÂå∫

Êàë‰ª¨‰πüÊ≠£Âú®Âª∫ËÆæ marimo Á§æÂå∫ÔºåÊù•ÂíåÊàë‰ª¨‰∏ÄËµ∑Áé©ÂêßÔºÅ

- üåü [Âú®GitHub‰∏ä‰∏∫Êàë‰ª¨ÁÇπËµû](https://github.com/marimo-team/marimo)
- üí¨ [Âú®Discord‰∏ä‰∏éÊàë‰ª¨‰∫§ÊµÅ](https://marimo.io/discord?ref=readme)
- üìß [ËÆ¢ÈòÖÊàë‰ª¨ÁöÑÈÄöËÆØ](https://marimo.io/newsletter)
- ‚òÅÔ∏è [Âä†ÂÖ•Êàë‰ª¨ÁöÑ‰∫ëÊúçÂä°ÂÄôË°•ÂêçÂçï](https://marimo.io/cloud)
- ‚úèÔ∏è [Âú®GitHub‰∏äÂºÄÂßãËÆ®ËÆ∫](https://github.com/marimo-team/marimo/discussions)
- ü¶ã [Âú®Bluesky‰∏äÂÖ≥Ê≥®Êàë‰ª¨](https://bsky.app/profile/marimo.io)
- üê¶ [Âú®Twitter‰∏äÂÖ≥Ê≥®Êàë‰ª¨](https://twitter.com/marimo_io)
- üé• [Âú®YouTube‰∏äËÆ¢ÈòÖ](https://www.youtube.com/@marimo-team)
- üï¥Ô∏è [Âú®LinkedIn‰∏äÂÖ≥Ê≥®Êàë‰ª¨](https://www.linkedin.com/company/marimo-io)

## ÊÑøÊôØ ‚ú®

marimo ÊòØÂØπ Python Á¨îËÆ∞Êú¨ÁöÑ**ÈáçÂ°ë**ÔºåÂÆÉÊòØ‰∏Ä‰∏™ÂèØÂ§çÂà∂„ÄÅÂèØ‰∫§‰∫í„ÄÅÂèØÂÖ±‰∫´ÁöÑ Python Á®ãÂ∫èÔºåËÄå‰∏çÊòØÂÆπÊòìÂá∫ÈîôÁöÑ JSON ‰æøÁ¨∫„ÄÇ

Êàë‰ª¨Áõ∏‰ø°ÔºåÊàë‰ª¨‰ΩøÁî®ÁöÑÂ∑•ÂÖ∑‰ºöÂΩ±ÂìçÊàë‰ª¨ÁöÑÊÄùÁª¥ÊñπÂºè--Êõ¥Â•ΩÁöÑÂ∑•ÂÖ∑ÔºåÈÄ†Â∞±Êõ¥Â•ΩÁöÑÊÄùÁª¥„ÄÇÊàë‰ª¨Â∏åÊúõÈÄöËøá marimo ‰∏∫ Python Á§æÂå∫Êèê‰æõ‰∏Ä‰∏™Êõ¥Â•ΩÁöÑÁºñÁ®ãÁéØÂ¢ÉÔºå‰ª•‰æøËøõË°åÁ†îÁ©∂Âíå‰∫§ÊµÅÔºõËøõË°å‰ª£Á†ÅÂÆûÈ™åÂíåÂàÜ‰∫´ÔºõÂ≠¶‰π†ËÆ°ÁÆóÁßëÂ≠¶ÂíåÊïôÊéàËÆ°ÁÆóÁßëÂ≠¶„ÄÇ

Êàë‰ª¨ÁöÑÁÅµÊÑüÊù•Ëá™‰∫éÂæàÂ§öÂ∑≤ÊúâÁöÑÈ°πÁõÆ, ÁâπÂà´ÊòØ
[Pluto.jl](https://github.com/fonsp/Pluto.jl)Ôºå
[ObservableHQ](https://observablehq.com/tutorials)ÔºåÂíå
[Bret Victor's essays](http://worrydream.com/)„ÄÇ
marimo ÊòØÂêëÂìçÂ∫îÂºèÊï∞ÊçÆÊµÅÁºñÁ®ãËøàËøõÁöÑ‰∏ÄÂ§ßÊ≠•„ÄÇ‰ªé
[IPyflow](https://github.com/ipyflow/ipyflow)Ôºå[streamlit](https://github.com/streamlit/streamlit)Ôºå
[TensorFlow](https://github.com/tensorflow/tensorflow)Ôºå
[PyTorch](https://github.com/pytorch/pytorch/tree/main)Ôºå
[JAX](https://github.com/google/jax)ÔºåÂà∞
[React](https://github.com/facebook/react)ÔºåÂáΩÊï∞Âºè„ÄÅÂ£∞ÊòéÂºèÂíåÂìçÂ∫îÂºèÁºñÁ®ãÁöÑÁêÜÂøµÊ≠£Âú®ÊîπÂñÑ‰∏ÄÁ≥ªÂàóÂ∑•ÂÖ∑„ÄÇ

<p align="right">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-horizontal.png" height="200px">
</p>


## Links discovered
- [ËøêË°åÊâÄÊúâ‰æùËµñÂçïÂÖÉÊ†º](https://docs.marimo.io/guides/reactivity.html)
- [ÁªëÂÆöÊªëÂùó„ÄÅË°®Ê†º„ÄÅÂõæË°®Á≠âUIÂÖÉÁ¥†](https://docs.marimo.io/guides/interactivity.html)
- [SQL](https://docs.marimo.io/guides/working_with_data/sql.html)
- [Êï∞ÊçÆÊ°Ü](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- [Êó†ÈöêËóèÁä∂ÊÄÅ](https://docs.marimo.io/guides/reactivity.html#no-hidden-state)
- [ÂÜÖÁΩÆÂåÖÁÆ°ÁêÜ](https://docs.marimo.io/guides/editor_features/package_management.html)
- [‰Ωú‰∏∫PythonËÑöÊú¨ÊâßË°å](https://docs.marimo.io/guides/scripts.html)
- [ÈÉ®ÁΩ≤‰∏∫‰∫§‰∫íÂºèWebÂ∫îÁî®](https://docs.marimo.io/guides/apps.html)
- [ÂπªÁÅØÁâá](https://docs.marimo.io/guides/apps.html#slides-layout)
- [ÈÄöËøáWASMÂú®ÊµèËßàÂô®‰∏≠ËøêË°å](https://docs.marimo.io/guides/wasm.html)
- [ÂØºÂÖ•ÂáΩÊï∞ÂíåÁ±ª](https://docs.marimo.io/guides/reusing_functions/)
- [pytest](https://docs.marimo.io/guides/testing/)
- [GitHub Copilot](https://docs.marimo.io/guides/editor_features/ai_completion.html#github-copilot)
- [AIÂä©Êâã](https://docs.marimo.io/guides/editor_features/ai_completion.html#using-ollama)
- [Êõ¥Â§öÂäüËÉΩ](https://docs.marimo.io/guides/editor_features/index.html)
- [Âú®Á∫ø‰ΩìÈ™åÂπ≥Âè∞](https://marimo.app/l/c7h6pz)
- [ÈóÆÈ¢ò](https://docs.marimo.io/faq.html#faq-problems)
- [Â∞ÜËøêË°åÊó∂ÈÖçÁΩÆ‰∏∫Âª∂ËøüÊ®°Âºè](https://docs.marimo.io/guides/configuration/runtime_configuration.html)
- [UIÂÖÉÁ¥†](https://docs.marimo.io/guides/interactivity.html)
- [ÊªëÂùó](https://docs.marimo.io/api/inputs/slider.html#slider)
- [‰∏ãÊãâËèúÂçï](https://docs.marimo.io/api/inputs/dropdown.html)
- [Êï∞ÊçÆÊ°ÜËΩ¨Êç¢Âô®](https://docs.marimo.io/api/inputs/dataframe.html)
- [ËÅäÂ§©ÁïåÈù¢](https://docs.marimo.io/api/inputs/chat.html)
- [ÂàÜÈ°µÊµèËßà„ÄÅÊêúÁ¥¢„ÄÅËøáÊª§ÂíåÊéíÂ∫è](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- [Âú®ÂØºÂÖ•Êó∂ÂÆâË£ÖÂåÖ](https://docs.marimo.io/guides/editor_features/package_management.html)
- [Â∫èÂàóÂåñÂåÖ‰æùËµñ](https://docs.marimo.io/guides/package_management/inlining_dependencies/)
- [VS CodeÊâ©Â±ï](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)
- [Êõ¥Â§ö](https://docs.marimo.io/guides/editor_features/index.html)
- [Âú®Á∫øÂ∑•ÂÖ∑](https://marimo.io/convert)
- [FAQ](https://docs.marimo.io/faq.html)
- [Á§∫‰æãËßÜÈ¢ë](https://marimo.io/videos/landing/full.mp4)
- [ÊñáÊ°£](https://docs.marimo.io)
- [‰ΩøÁî®Á§∫‰æã](https://docs.marimo.io/examples/)
- [Â±ïÁ§∫Âªä](https://marimo.io/gallery)
- [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md)
- [Âú®Discord‰∏äËÅîÁ≥ªÊàë‰ª¨](https://marimo.io/discord?ref=readme)
- [Âú®GitHub‰∏ä‰∏∫Êàë‰ª¨ÁÇπËµû](https://github.com/marimo-team/marimo)
- [Âú®Discord‰∏ä‰∏éÊàë‰ª¨‰∫§ÊµÅ](https://marimo.io/discord?ref=readme)
- [ËÆ¢ÈòÖÊàë‰ª¨ÁöÑÈÄöËÆØ](https://marimo.io/newsletter)
- [Âä†ÂÖ•Êàë‰ª¨ÁöÑ‰∫ëÊúçÂä°ÂÄôË°•ÂêçÂçï](https://marimo.io/cloud)
- [Âú®GitHub‰∏äÂºÄÂßãËÆ®ËÆ∫](https://github.com/marimo-team/marimo/discussions)
- [Âú®Bluesky‰∏äÂÖ≥Ê≥®Êàë‰ª¨](https://bsky.app/profile/marimo.io)
- [Âú®Twitter‰∏äÂÖ≥Ê≥®Êàë‰ª¨](https://twitter.com/marimo_io)
- [Âú®YouTube‰∏äËÆ¢ÈòÖ](https://www.youtube.com/@marimo-team)
- [Âú®LinkedIn‰∏äÂÖ≥Ê≥®Êàë‰ª¨](https://www.linkedin.com/company/marimo-io)
- [Pluto.jl](https://github.com/fonsp/Pluto.jl)
- [ObservableHQ](https://observablehq.com/tutorials)
- [Bret Victor's essays](http://worrydream.com/)
- [IPyflow](https://github.com/ipyflow/ipyflow)
- [streamlit](https://github.com/streamlit/streamlit)
- [TensorFlow](https://github.com/tensorflow/tensorflow)
- [PyTorch](https://github.com/pytorch/pytorch/tree/main)
- [JAX](https://github.com/google/jax)
- [React](https://github.com/facebook/react)
- [<strong>Áî®Êà∑ÊâãÂÜå</strong>](https://docs.marimo.io)
- [<strong>Discord Á§æÂå∫</strong>](https://marimo.io/discord?ref=readme)
- [<strong>Á§∫‰æã</strong>](https://docs.marimo.io/examples/)
- [<strong>Â±ïÁ§∫Âªä</strong>](https://marimo.io/gallery/)
- [<strong>YouTube</strong>](https://www.youtube.com/@marimo-team/)
- [<b>English</b>](https://github.com/marimo-team/marimo/blob/main/README.md)
- [<b>ÁπÅÈ´î‰∏≠Êñá</b>](https://github.com/marimo-team/marimo/blob/main/README_Traditional_Chinese.md)
- [<b>Êó•Êú¨Ë™û</b>](https://github.com/marimo-team/marimo/blob/main/README_Japanese.md)
- [<b>Espa√±ol</b>](https://github.com/marimo-team/marimo/blob/main/README_Spanish.md)
- [<img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/>](https://pypi.org/project/marimo/)
- [<img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/>](https://anaconda.org/conda-forge/marimo)
- [<img src="https://shields.io/discord/1059888774789730424" alt="discord"/>](https://marimo.io/discord?ref=readme)
- [<img src="https://img.shields.io/pypi/l/marimo"/>](https://github.com/marimo-team/marimo/blob/main/LICENSE)
- [<img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/getting_started/key_concepts.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/inputs/index.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/layouts/index.html)
- [ÊïôÁ®ã](https://docs.marimo.io/getting_started/key_concepts.html)
- [ËæìÂÖ•Êéß‰ª∂](https://docs.marimo.io/api/inputs/index.html)
- [ÁªòÂõæ](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [Â∏ÉÂ±Ä](https://docs.marimo.io/api/layouts/index.html)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/c7h6pz)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/0ue871)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/lxp1jk)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/14ovyr)

--- README_Japanese.md ---
<p align="center">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-thick.svg">
</p>

<p align="center">
  <em>ÂÜçÁèæÊÄß„ÅåÈ´ò„Åè„ÄÅGit „Å´ÂÑ™„Åó„Åè„ÄÅ„Çπ„ÇØ„É™„Éó„Éà„ÇÑ„Ç¢„Éó„É™„Å®„Åó„Å¶Â±ïÈñã„Åß„Åç„Çã„É™„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™ Python „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„ÄÇ</em>
</p>

<p align="center">
  <a href="https://docs.marimo.io" target="_blank"><strong>„Éâ„Ç≠„É•„É°„É≥„Éà</strong></a> ¬∑
  <a href="https://marimo.io/discord?ref=readme" target="_blank"><strong>Discord</strong></a> ¬∑
  <a href="https://docs.marimo.io/examples/" target="_blank"><strong>„Çµ„É≥„Éó„É´</strong></a> ¬∑
  <a href="https://marimo.io/gallery/" target="_blank"><strong>„ÇÆ„É£„É©„É™„Éº</strong></a> ¬∑
  <a href="https://www.youtube.com/@marimo-team/" target="_blank"><strong>YouTube</strong></a>
</p>

<p align="center">
  <a href="https://github.com/marimo-team/marimo/blob/main/README.md" target="_blank"><b>English</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Traditional_Chinese.md" target="_blank"><b>ÁπÅÈ´î‰∏≠Êñá</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Chinese.md" target="_blank"><b>ÁÆÄ‰Ωì‰∏≠Êñá</b></a>
  <b> | </b>
  <b>Êó•Êú¨Ë™û</b>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Spanish.md" target="_blank"><b>Espa√±ol</b></a>
</p>

<p align="center">
  <a href="https://pypi.org/project/marimo/"><img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/></a>
  <a href="https://anaconda.org/conda-forge/marimo"><img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/></a>
  <a href="https://marimo.io/discord?ref=readme"><img src="https://shields.io/discord/1059888774789730424" alt="discord"/></a>
  <img alt="Pepy Total Downloads" src="https://img.shields.io/pepy/dt/marimo?label=pypi%20%7C%20downloads"/>
  <img alt="Conda Downloads" src="https://img.shields.io/conda/d/conda-forge/marimo"/>
  <a href="https://github.com/marimo-team/marimo/blob/main/LICENSE"><img src="https://img.shields.io/pypi/l/marimo"/></a>
</p>

**marimo** „ÅØ„É™„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™ Python „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„Åß„Åô„ÄÇ„Çª„É´„ÇíÂÆüË°å„Åó„Åü„Çä UI Ë¶ÅÁ¥†„ÇíÊìç‰Ωú„Åô„Çã„Å®„ÄÅmarimo „ÅØ‰æùÂ≠ò„Åô„Çã„Çª„É´„ÇíËá™ÂãïÁöÑ„Å´ÂÆüË°å„Åô„ÇãÔºà„Åæ„Åü„ÅØ<a name="expensive-notebooks"></a><a href="#expensive-notebooks">ÂΩ±Èüø„ÇíÂèó„Åë„Çã„Çª„É´„ÇíÂè§„ÅÑ„ÇÇ„ÅÆ„Å®„Åó„Å¶„Éû„Éº„ÇØ„Åô„Çã</a>Ôºâ„Åì„Å®„Åß„ÄÅ„Ç≥„Éº„Éâ„Å®Âá∫Âäõ„ÅÆ‰∏ÄË≤´ÊÄß„Çí‰øù„Å°„Åæ„Åô„ÄÇmarimo „ÅÆ„Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„ÅØÁ¥îÁ≤ã„Å™ Python „Å®„Åó„Å¶‰øùÂ≠ò„Åï„Çå„ÄÅ„Çπ„ÇØ„É™„Éó„Éà„Å®„Åó„Å¶ÂÆüË°å„Åß„Åç„ÄÅ„Ç¢„Éó„É™„Å®„Åó„Å¶„Éá„Éó„É≠„Ç§„Åß„Åç„Åæ„Åô„ÄÇ

**HighlightsÔºà‰∏ª„Å™ÁâπÂæ¥Ôºâ**

- üöÄ **batteries-included:** `jupyter`„ÄÅ`streamlit`„ÄÅ`jupytext`„ÄÅ`ipywidgets`„ÄÅ`papermill` „Å™„Å©„ÅÆ‰ª£Êõø„ÇíÁõÆÊåá„Åó„Åæ„Åô„ÄÇ
- ‚ö°Ô∏è **reactive:** „Çª„É´„ÇíÂÆüË°å„Åô„Çã„Å® marimo „ÅØ„É™„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å´[„Åô„Åπ„Å¶„ÅÆ‰æùÂ≠ò„Çª„É´„ÇíÂÆüË°å](https://docs.marimo.io/guides/reactivity.html)„Åô„Çã„Åã„ÄÅÂΩ±Èüø„ÇíÂèó„Åë„Çã„Çª„É´„ÇíÂè§„ÅÑ„ÇÇ„ÅÆ„Å®„Åó„Å¶„Éû„Éº„ÇØ„Åó„Åæ„Åô„ÄÇ
- üñêÔ∏è **interactive:** [„Çπ„É©„Ç§„ÉÄ„Éº„ÄÅ„ÉÜ„Éº„Éñ„É´„ÄÅ„Éó„É≠„ÉÉ„Éà„Å™„Å©](https://docs.marimo.io/guides/interactivity.html)„Çí Python „Å´„Éê„Ç§„É≥„Éâ„Åß„Åç„Åæ„ÅôÔºà„Ç≥„Éº„É´„Éê„ÉÉ„ÇØ‰∏çË¶ÅÔºâ„ÄÇ
- üêç **git-friendly:** „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„ÅØ `.py` „Éï„Ç°„Ç§„É´„Å®„Åó„Å¶‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇ
- üõ¢Ô∏è **designed for data:** „Éá„Éº„Çø„Éï„É¨„Éº„É†„ÄÅ„Éá„Éº„Çø„Éô„Éº„Çπ„ÄÅ„Ç¶„Çß„Ç¢„Éè„Ç¶„Çπ„ÄÅ„É¨„Ç§„ÇØ„Éè„Ç¶„Çπ„Çí [SQL „Åß„ÇØ„Ç®„É™](https://docs.marimo.io/guides/working_with_data/sql.html)„Åó„Åü„Çä„ÄÅ[„Éá„Éº„Çø„Éï„É¨„Éº„É†„Çí„Éï„Ç£„É´„Çø„ÉªÊ§úÁ¥¢](https://docs.marimo.io/guides/working_with_data/dataframes.html)„Åß„Åç„Åæ„Åô„ÄÇ
- ü§ñ **AI-native:** „Éá„Éº„Çø‰ΩúÊ•≠„Å´ÁâπÂåñ„Åó„Åü AI „Åß„Çª„É´„Çí[ÁîüÊàê](https://docs.marimo.io/guides/generate_with_ai/)„Åß„Åç„Åæ„Åô„ÄÇ
- üî¨ **reproducible:** [Èö†„Çå„ÅüÁä∂ÊÖã„Å™„Åó](https://docs.marimo.io/guides/reactivity.html#no-hidden-state)„ÄÅÊ±∫ÂÆöË´ñÁöÑ„Å™ÂÆüË°å„ÄÅ[ÁµÑ„ÅøËæº„Åø„Éë„ÉÉ„Ç±„Éº„Ç∏ÁÆ°ÁêÜ](https://docs.marimo.io/guides/package_management/)„ÇíÂÇô„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ
- üèÉ **executable:** „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„Çí [Python „Çπ„ÇØ„É™„Éó„Éà„Å®„Åó„Å¶ÂÆüË°å](https://docs.marimo.io/guides/scripts.html)„Åß„Åç„ÄÅCLI ÂºïÊï∞„Åß„Éë„É©„É°„Éº„ÇøÂåñ„Åß„Åç„Åæ„Åô„ÄÇ
- üõú **shareable:** „Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„Éñ„Å™ Web „Ç¢„Éó„É™„Å®„Åó„Å¶„Éá„Éó„É≠„Ç§„Åó„Åü„Çä„ÄÅ[„Çπ„É©„Ç§„Éâ](https://docs.marimo.io/guides/apps.html#slides-layout)„Å´Â§âÊèõ„Åó„Åü„Çä„ÄÅ[WASM „Åß„Éñ„É©„Ç¶„Ç∂ÂÆüË°å](https://docs.marimo.io/guides/wasm.html)„Åß„Åç„Åæ„Åô„ÄÇ
- üß© **reusable:** „Éé„Éº„Éà„Éñ„ÉÉ„ÇØÈñì„ÅßÈñ¢Êï∞„ÇÑ„ÇØ„É©„Çπ„Çí[„Ç§„É≥„Éù„Éº„Éà„Åó„Å¶ÂÜçÂà©Áî®](https://docs.marimo.io/guides/reusing_functions/)„Åß„Åç„Åæ„Åô„ÄÇ
- üß™ **testable:** „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„Å´ÂØæ„Åó„Å¶ [pytest „ÇíÂÆüË°å](https://docs.marimo.io/guides/testing/)„Åß„Åç„Åæ„Åô„ÄÇ
- ‚å®Ô∏è **a modern editor:** GitHub Copilot„ÄÅAI „Ç¢„Ç∑„Çπ„Çø„É≥„Éà„ÄÅRuff „Å´„Çà„Çã„Ç≥„Éº„ÉâÊï¥ÂΩ¢„ÄÅÈ´òÈÄüË£úÂÆå„ÄÅ[VS Code Êã°Âºµ](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo) „Å™„Å©„ÅÆ„Ç®„Éá„Ç£„ÇøÊ©üËÉΩ„ÇíÂÇô„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ
- üßë‚Äçüíª **use your favorite editor:** VS Code „ÇÑ Cursor„ÄÅneovim„ÄÅZed„ÄÅ„Åù„ÅÆ‰ªñ„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Ç®„Éá„Ç£„Çø„ÅßÁ∑®ÈõÜ„Åß„Åç„Åæ„Åô„ÄÇ

```python
pip install marimo && marimo tutorial intro
```

_„Éñ„É©„Ç¶„Ç∂„ÅÆ„Åø„ÅßÂãï‰Ωú„Åô„Çã„Ç™„É≥„É©„Ç§„É≥„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ„Åß„ÇÇ marimo „ÇíË©¶„Åô„Åì„Å®„Åå„Åß„Åç„Åæ„Åô: https://marimo.app/l/c7h6pz_

_„ÇØ„Ç§„ÉÉ„ÇØ„Çπ„Çø„Éº„Éà„ÅØÊ¨°„ÅÆ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ_

## A reactive programming environment

marimo „ÅØ„Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„ÅÆ„Ç≥„Éº„Éâ„ÄÅÂá∫Âäõ„ÄÅ„Éó„É≠„Ç∞„É©„É†Áä∂ÊÖã„ÅÆ‰∏ÄË≤´ÊÄß„Çí‰øùË®º„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä Jupyter „ÅÆ„Çà„ÅÜ„Å™ÂæìÊù•„ÅÆ„Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„Å´Èñ¢ÈÄ£„Åô„ÇãÂ§ö„Åè„ÅÆÂïèÈ°å„ÅåËß£Ê±∫„Åï„Çå„Åæ„ÅôÔºàË©≥Á¥∞„ÅØ [FAQ](https://docs.marimo.io/faq.html#faq-problems) „ÇíÂèÇÁÖßÔºâ„ÄÇ

**A reactive programming environment.**
„Çª„É´„ÇíÂÆüË°å„Åô„Çã„Å® marimo „ÅØ _ÂèçÂøú_ „Åó„ÄÅ„Åù„ÅÆÂ§âÊï∞„ÇíÂèÇÁÖß„Åô„Çã„Çª„É´„ÇíËá™ÂãïÁöÑ„Å´ÂÜçÂÆüË°å„Åô„Çã„Åì„Å®„Åß„ÄÅÊâãÂãï„Åß„Çª„É´„ÇíÂÜçÂÆüË°å„Åô„Çã„Åì„Å®„Å´Ëµ∑Âõ†„Åô„Çã„Éü„Çπ„ÇíÈò≤„Åé„Åæ„Åô„ÄÇ„Çª„É´„ÇíÂâäÈô§„Åô„Çã„Å®„ÄÅmarimo „ÅØ„Åù„ÅÆÂ§âÊï∞„Çí„É°„É¢„É™„Åã„ÇâÂâäÈô§„Åó„ÄÅÈö†„Çå„ÅüÁä∂ÊÖã„ÇíÊéíÈô§„Åó„Åæ„Åô„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/reactive.gif" width="700px" />

**Compatible with expensive notebooks.** marimo „ÅØ„É©„É≥„Çø„Ç§„É†„ÇíÈÅÖÂª∂Ë©ï‰æ°„Å´Ë®≠ÂÆö„Åß„Åç„ÄÅÂΩ±Èüø„ÇíÂèó„Åë„Çã„Çª„É´„ÇíËá™ÂãïÂÆüË°å„Åô„Çã‰ª£„Çè„Çä„Å´Âè§„ÅÑ„ÇÇ„ÅÆ„Å®„Åó„Å¶„Éû„Éº„ÇØ„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅÈ´ò„Ç≥„Çπ„Éà„Å™„Çª„É´„ÅÆË™§ÂÆüË°å„ÇíÈò≤„Åé„Å§„Å§„Éó„É≠„Ç∞„É©„É†Áä∂ÊÖã„ÅÆ‰øùË®º„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ

**Synchronized UI elements.** [„Çπ„É©„Ç§„ÉÄ„Éº„ÇÑ„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„ÄÅ„Éá„Éº„Çø„Éï„É¨„Éº„É†Â§âÊèõ„ÄÅ„ÉÅ„É£„ÉÉ„Éà„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ„Å™„Å©„ÅÆ UI Ë¶ÅÁ¥†](https://docs.marimo.io/guides/interactivity.html)„ÇíÊìç‰Ωú„Åô„Çã„Å®„ÄÅ„Åù„Çå„Çâ„Çí‰Ωø„ÅÜ„Çª„É´„ÅåËá™ÂãïÁöÑ„Å´ÊúÄÊñ∞„ÅÆÂÄ§„ÅßÂÜçÂÆüË°å„Åï„Çå„Åæ„Åô„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" width="700px" />

**Interactive dataframes.** Êï∞Áôæ‰∏áË°å„ÅÆ„Éá„Éº„Çø„Çí„Ç≥„Éº„Éâ‰∏çË¶Å„Åß„Éö„Éº„Ç∏„É≥„Ç∞„ÄÅÊ§úÁ¥¢„ÄÅ„Éï„Ç£„É´„Çø„ÄÅ„ÇΩ„Éº„Éà„Åß„Åç„Åæ„Åô„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-df.gif" width="700px" />

**Generate cells with data-aware AI.** „Éá„Éº„Çø„Å´ÊñáËÑà„ÇíÊåÅ„Å£„Åü AI „Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Åß„Ç≥„Éº„Éâ„ÇíÁîüÊàê„Åó„Åü„Çä„ÄÅ„Éé„Éº„Éà„Éñ„ÉÉ„ÇØÂÖ®‰Ωì„Çí„Çº„É≠„Ç∑„Éß„ÉÉ„Éà„ÅßÁîüÊàê„Åß„Åç„Åæ„Åô„ÄÇ„Ç∑„Çπ„ÉÜ„É†„Éó„É≠„É≥„Éó„Éà„ÅÆ„Ç´„Çπ„Çø„Éû„Ç§„Ç∫„ÇÑÁã¨Ëá™ API „Ç≠„Éº„ÅÆÂà©Áî®„ÄÅ„É≠„Éº„Ç´„É´„É¢„Éá„É´„ÅÆ‰ΩøÁî®„Å´„ÇÇÂØæÂøú„Åó„Åæ„Åô„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-generate-with-ai.gif" width="700px" />

**Query data with SQL.** Python ÂÄ§„Å´‰æùÂ≠ò„Åô„Çã SQL „ÇØ„Ç®„É™„ÇíÁµÑ„ÅøÁ´ã„Å¶„ÄÅ„Éá„Éº„Çø„Éï„É¨„Éº„É†„ÄÅ„Éá„Éº„Çø„Éô„Éº„Çπ„ÄÅCSV„ÄÅGoogle Sheets „Å™„Å©„Å´ÂØæ„Åó„Å¶ÂÆüË°å„Åß„Åç„Åæ„Åô„ÄÇÁµÑ„ÅøËæº„Åø„ÅÆ SQL „Ç®„É≥„Ç∏„É≥„ÅØÁµêÊûú„Çí Python „ÅÆ„Éá„Éº„Çø„Éï„É¨„Éº„É†„Å®„Åó„Å¶Ëøî„Åó„Åæ„Åô„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-sql-cell.png" width="700px" />

„Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„ÅØ SQL „Çí‰Ωø„Å£„Å¶„ÅÑ„Å¶„ÇÇÁ¥îÁ≤ã„Å™ Python „ÅÆ„Åæ„Åæ„Åß„Åô„ÄÇ

**Dynamic markdown.** Python Â§âÊï∞„Åß„Éë„É©„É°„Çø„É©„Ç§„Ç∫„Åï„Çå„Åü Markdown „Çí‰Ωø„Å£„Å¶ÂãïÁöÑ„Å™„Çπ„Éà„Éº„É™„Éº„Çí‰ΩúÊàê„Åß„Åç„Åæ„Åô„ÄÇ

**Built-in package management.** marimo „ÅØ‰∏ªË¶Å„Å™„Éë„ÉÉ„Ç±„Éº„Ç∏„Éû„Éç„Éº„Ç∏„É£„Çí„Çµ„Éù„Éº„Éà„Åó„ÄÅ„Ç§„É≥„Éù„Éº„ÉàÊôÇ„Å´„Éë„ÉÉ„Ç±„Éº„Ç∏„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åü„Çä„ÄÅ„Éé„Éº„Éà„Éñ„ÉÉ„ÇØÂÜÖ„Å´‰æùÂ≠òÈñ¢‰øÇ„ÇíÂüã„ÇÅËæº„Çì„ÅßÂÜçÁèæÂèØËÉΩ„Å™Áí∞Â¢É„ÇíÊßãÁØâ„Åß„Åç„Åæ„Åô„ÄÇ

**Deterministic execution order.** „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„ÅÆÂÆüË°åÈ†ÜÂ∫è„ÅØ„Çª„É´„ÅÆ„Éö„Éº„Ç∏‰∏ä„ÅÆ‰ΩçÁΩÆ„Åß„ÅØ„Å™„Åè„ÄÅÂ§âÊï∞ÂèÇÁÖß„Å´Âü∫„Å•„ÅÑ„Å¶Ê±∫ÂÆö„Åï„Çå„Åæ„Åô„ÄÇ

**Performant runtime.** ÈùôÁöÑËß£Êûê„Å´„Çà„Çä„ÄÅÂÆüË°å„ÅåÂøÖË¶Å„Å™„Çª„É´„ÅÆ„Åø„ÇíÂäπÁéáÁöÑ„Å´ÂÆüË°å„Åó„Åæ„Åô„ÄÇ

**Batteries-included.** GitHub Copilot„ÄÅAI „Ç¢„Ç∑„Çπ„Çø„É≥„Éà„ÄÅRuff „Å´„Çà„ÇãÊï¥ÂΩ¢„ÄÅHTML Âá∫Âäõ„ÄÅ„Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„Éñ„Å™„Éá„Éº„Çø„Éï„É¨„Éº„É†„Éì„É•„Éº„Ç¢„ÄÅ„Åù„Åó„Å¶ [VS Code Êã°Âºµ](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo) „Å™„Å©„ÄÅÂ§öÊï∞„ÅÆ‰æøÂà©Ê©üËÉΩ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

## Quickstart

_[marimo „ÅÆÂü∫Êú¨ÁöÑ„Å™Ê¶ÇÂøµ„ÇíË™¨Êòé„Åô„Çã„Éó„É¨„Ç§„É™„Çπ„Éà](https://www.youtube.com/watch?v=3N6lInzq5MI&list=PLNJXGo8e1XT9jP7gPbRdm1XwloZVFvLEq) „ÅåÂÖ¨Âºè YouTube „Å´„ÅÇ„Çä„Åæ„Åô„ÄÇ_

**Installation.** „Çø„Éº„Éü„Éä„É´„ÅßÊ¨°„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ

```bash
pip install marimo  # „Åæ„Åü„ÅØ conda install -c conda-forge marimo
marimo tutorial intro
```

SQL „Çª„É´„ÇÑ AI Ë£úÂÆå„Å™„Å©„ÅÆËøΩÂä†Ê©üËÉΩ„ÇíÂê´„ÇÅ„Å¶„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„Çã„Å´„ÅØ„ÄÅÊ¨°„ÇíÂÆüË°å„Åó„Åæ„Åô„ÄÇ

```bash
pip install "marimo[recommended]"
```

**Create notebooks.**

„Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„Çí‰ΩúÊàê„Åæ„Åü„ÅØÁ∑®ÈõÜ„Åô„Çã„Å´„ÅØ:

```bash
marimo edit
```

**Run apps.** „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„Çí Web „Ç¢„Éó„É™„Å®„Åó„Å¶ÂÆüË°å„Åó„ÄÅPython „Ç≥„Éº„Éâ„ÇíÈùûË°®Á§∫„Å´„Åó„Å¶Á∑®ÈõÜ‰∏çÂèØ„Å´„Åß„Åç„Åæ„Åô:

```bash
marimo run your_notebook.py
```

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-model-comparison.gif" style="border-radius: 8px" width="450px" />

**Execute as scripts.** „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„Çí„Çπ„ÇØ„É™„Éó„Éà„Å®„Åó„Å¶„Ç≥„Éû„É≥„Éâ„É©„Ç§„É≥„Åã„ÇâÂÆüË°å„Åß„Åç„Åæ„Åô:

```bash
python your_notebook.py
```

**Automatically convert Jupyter notebooks.** CLI „Åß Jupyter „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„Çí marimo „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„Å´Â§âÊèõ„Åß„Åç„Åæ„Åô:

```bash
marimo convert your_notebook.ipynb > your_notebook.py
```

„Åæ„Åü„ÅØ [„Ç¶„Çß„Éñ„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ](https://marimo.io/convert) „Çí‰Ωø„Åà„Åæ„Åô„ÄÇ

**Tutorials.**

„Åô„Åπ„Å¶„ÅÆ„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´„Çí‰∏ÄË¶ßË°®Á§∫„Åô„Çã„Å´„ÅØ:

```bash
marimo tutorial --help
```

**Share cloud-based notebooks.**

[molab](https://molab.marimo.io/notebooks) „ÅØ marimo „ÅÆ„ÇØ„É©„Ç¶„Éâ„Çµ„Éº„Éì„Çπ„Åß„ÄÅ„Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„ÅÆÂÖ±Êúâ„ÇÑÂÆüË°å„ÅåÂèØËÉΩ„Åß„Åô„ÄÇ

## Questions?

Ë©≥Á¥∞„ÅØ„Éâ„Ç≠„É•„É°„É≥„Éà„ÅÆ [FAQ](https://docs.marimo.io/faq.html) „ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

## Learn more

marimo „ÅØÂ∞éÂÖ•„ÅåÁ∞°Âçò„Åß„ÄÅ„Éë„ÉØ„Éº„É¶„Éº„Ç∂„Éº„Å´„ÇÇÂ§ö„Åè„ÅÆÊ©üËÉΩ„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅmarimo „Åß‰Ωú„Çâ„Çå„ÅüÂüã„ÇÅËæº„ÅøÂèØË¶ñÂåñ„ÉÑ„Éº„É´„ÅÆ‰æã„Åå„ÅÇ„Çä„Åæ„ÅôÔºà[ÂãïÁîª](https://marimo.io/videos/landing/full.mp4)Ôºâ„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/embedding.gif" width="700px" />

Ë©≥Á¥∞„ÅØ [„Éâ„Ç≠„É•„É°„É≥„Éà](https://docs.marimo.io)„ÄÅ[‰ΩøÁî®‰æã](https://docs.marimo.io/examples/) „ÇÑ [„ÇÆ„É£„É©„É™„Éº](https://marimo.io/gallery) „Çí„ÅîË¶ß„Åè„Å†„Åï„ÅÑ„ÄÇ

<table border="0">
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html">
        <img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html"> Tutorial </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html"> Inputs </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html"> Plots </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html"> Layout </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://marimo.app/l/c7h6pz">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/0ue871">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/lxp1jk">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/14ovyr">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
  </tr>
</table>

## Contributing

Ë≤¢ÁåÆ„ÇíÊ≠ìËøé„Åó„Åæ„Åô„ÄÇË©≥„Åó„ÅÑÈñãÂßãÊñπÊ≥ï„ÅØ [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md) „ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

> Ë≥™Âïè„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü[Discord](https://marimo.io/discord?ref=readme) „Åß„ÅäÂïè„ÅÑÂêà„Çè„Åõ„Åè„Å†„Åï„ÅÑ„ÄÇ

## Community

„Ç≥„Éü„É•„Éã„ÉÜ„Ç£„Å´ÂèÇÂä†„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ

- üåü [GitHub „Åß„Çπ„Çø„Éº„Çí„Å§„Åë„Çã](https://github.com/marimo-team/marimo)
- üí¨ [Discord „Åß„ÉÅ„É£„ÉÉ„Éà](https://marimo.io/discord?ref=readme)
- üìß [„Éã„É•„Éº„Çπ„É¨„Çø„Éº„ÇíË≥ºË™≠](https://marimo.io/newsletter)
- ‚òÅÔ∏è [„ÇØ„É©„Ç¶„Éâ„Ç¶„Çß„Ç§„Éà„É™„Çπ„Éà„Å´ÂèÇÂä†](https://marimo.io/cloud)
- ‚úèÔ∏è [GitHub „Åß„Éá„Ç£„Çπ„Ç´„ÉÉ„Ç∑„Éß„É≥„ÇíÈñãÂßã](https://github.com/marimo-team/marimo/discussions)
- ü¶ã [Bluesky „Åß„Éï„Ç©„É≠„Éº](https://bsky.app/profile/marimo.io)
- üê¶ [Twitter „Åß„Éï„Ç©„É≠„Éº](https://twitter.com/marimo_io)
- üé• [YouTube „ÅßË≥ºË™≠](https://www.youtube.com/@marimo-team)
- üï¥Ô∏è [LinkedIn „Åß„Éï„Ç©„É≠„Éº](https://www.linkedin.com/company/marimo-io)

**A NumFOCUS affiliated project.** marimo „ÅØ NumFOCUS „Ç≥„Éü„É•„Éã„ÉÜ„Ç£„Å´ÊâÄÂ±û„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

## „Ç§„É≥„Çπ„Éî„É¨„Éº„Ç∑„Éß„É≥ ‚ú®

marimo „ÅØ„ÄÅ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„ÇÑ„Åô„ÅÑ JSON „ÅÆ„Çπ„ÇØ„É©„ÉÉ„ÉÅ„Éë„ÉÉ„Éâ„Åß„ÅØ„Å™„Åè„ÄÅÂÜçÁèæÊÄß„ÅåÈ´ò„Åè„ÄÅ„Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„Éñ„Åß„ÄÅÂÖ±ÊúâÂèØËÉΩ„Å™ Python „Éó„É≠„Ç∞„É©„É†„Å®„Åó„Å¶„ÅÆ Python „Éé„Éº„Éà„Éñ„ÉÉ„ÇØ„ÅÆ**ÂÜçÁô∫Êòé**„Åß„Åô„ÄÇ

ÁßÅ„Åü„Å°„ÅØ„ÄÅ‰ΩøÁî®„Åô„Çã„ÉÑ„Éº„É´„ÅåÊÄùËÄÉ„ÅÆ„ÅÇ„ÇäÊñπ„ÇíÂΩ¢‰Ωú„Çã„Å®‰ø°„Åò„Å¶„ÅÑ„Åæ„Åô ‚Äî „Çà„ÇäËâØ„ÅÑ„ÉÑ„Éº„É´„ÅØ„ÄÅ„Çà„ÇäËâØ„ÅÑÊÄùËÄÉ„Çí‰øÉ„Åó„Åæ„Åô„ÄÇmarimo „ÇíÈÄö„Åò„Å¶„ÄÅÁ†îÁ©∂„Å®„Åù„ÅÆ‰ºùÈÅî„ÄÅ„Ç≥„Éº„Éâ„ÅÆÂÆüÈ®ì„Å®ÂÖ±Êúâ„ÄÅË®àÁÆóÁßëÂ≠¶„ÅÆÂ≠¶Áøí„Å®ÊïôËÇ≤„Å´ÈÅ©„Åó„Åü„ÄÅ„Çà„ÇäËâØ„ÅÑ„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Áí∞Â¢É„Çí Python „Ç≥„Éü„É•„Éã„ÉÜ„Ç£„Å´Êèê‰æõ„Åó„Åü„ÅÑ„Å®ËÄÉ„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ

ÁßÅ„Åü„Å°„ÅÆ„Ç§„É≥„Çπ„Éî„É¨„Éº„Ç∑„Éß„É≥„ÅØÂ§ö„Åè„ÅÆÂ†¥ÊâÄ„ÇÑ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åã„ÇâÊù•„Å¶„ÅÑ„Åæ„Åô„ÄÇÁâπ„Å´ [Pluto.jl](https://github.com/fonsp/Pluto.jl)„ÄÅ[ObservableHQ](https://observablehq.com/tutorials)„ÄÅ„Åä„Çà„Å≥ [Bret Victor „ÅÆ„Ç®„ÉÉ„Çª„Ç§](http://worrydream.com/) „Åã„ÇâÂ§ö„Åè„ÇíÂ≠¶„Å≥„Åæ„Åó„Åü„ÄÇmarimo „ÅØ„É™„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™„Éá„Éº„Çø„Éï„É≠„Éº„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞„Å∏„ÅÆÂ§ß„Åç„Å™„É†„Éº„Éñ„É°„É≥„Éà„ÅÆ‰∏ÄÈÉ®„Åß„Åô„ÄÇIPyflow„ÄÅstreamlit„ÄÅTensorFlow„ÄÅPyTorch„ÄÅJAX„ÄÅReact „Å®„ÅÑ„Å£„Åü„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åã„Çâ„ÄÅÈñ¢Êï∞Âûã„ÉªÂÆ£Ë®ÄÂûã„Éª„É™„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞„ÅÆËÄÉ„ÅàÊñπ„ÅåÂ§ö„Åè„ÅÆ„ÉÑ„Éº„É´„Çí„Çà„ÇäËâØ„ÅèÂ§â„Åà„Å¶„ÅÑ„Çã„ÅÆ„ÇíË¶ã„Å¶„ÅÑ„Åæ„Åô„ÄÇ

<p align="right">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-horizontal.png" height="200px">
</p>


## Links discovered
- [„Åô„Åπ„Å¶„ÅÆ‰æùÂ≠ò„Çª„É´„ÇíÂÆüË°å](https://docs.marimo.io/guides/reactivity.html)
- [„Çπ„É©„Ç§„ÉÄ„Éº„ÄÅ„ÉÜ„Éº„Éñ„É´„ÄÅ„Éó„É≠„ÉÉ„Éà„Å™„Å©](https://docs.marimo.io/guides/interactivity.html)
- [SQL „Åß„ÇØ„Ç®„É™](https://docs.marimo.io/guides/working_with_data/sql.html)
- [„Éá„Éº„Çø„Éï„É¨„Éº„É†„Çí„Éï„Ç£„É´„Çø„ÉªÊ§úÁ¥¢](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- [ÁîüÊàê](https://docs.marimo.io/guides/generate_with_ai/)
- [Èö†„Çå„ÅüÁä∂ÊÖã„Å™„Åó](https://docs.marimo.io/guides/reactivity.html#no-hidden-state)
- [ÁµÑ„ÅøËæº„Åø„Éë„ÉÉ„Ç±„Éº„Ç∏ÁÆ°ÁêÜ](https://docs.marimo.io/guides/package_management/)
- [Python „Çπ„ÇØ„É™„Éó„Éà„Å®„Åó„Å¶ÂÆüË°å](https://docs.marimo.io/guides/scripts.html)
- [„Çπ„É©„Ç§„Éâ](https://docs.marimo.io/guides/apps.html#slides-layout)
- [WASM „Åß„Éñ„É©„Ç¶„Ç∂ÂÆüË°å](https://docs.marimo.io/guides/wasm.html)
- [„Ç§„É≥„Éù„Éº„Éà„Åó„Å¶ÂÜçÂà©Áî®](https://docs.marimo.io/guides/reusing_functions/)
- [pytest „ÇíÂÆüË°å](https://docs.marimo.io/guides/testing/)
- [VS Code Êã°Âºµ](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)
- [FAQ](https://docs.marimo.io/faq.html#faq-problems)
- [„Çπ„É©„Ç§„ÉÄ„Éº„ÇÑ„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥„ÄÅ„Éá„Éº„Çø„Éï„É¨„Éº„É†Â§âÊèõ„ÄÅ„ÉÅ„É£„ÉÉ„Éà„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ„Å™„Å©„ÅÆ UI Ë¶ÅÁ¥†](https://docs.marimo.io/guides/interactivity.html)
- [marimo „ÅÆÂü∫Êú¨ÁöÑ„Å™Ê¶ÇÂøµ„ÇíË™¨Êòé„Åô„Çã„Éó„É¨„Ç§„É™„Çπ„Éà](https://www.youtube.com/watch?v=3N6lInzq5MI&list=PLNJXGo8e1XT9jP7gPbRdm1XwloZVFvLEq)
- [„Ç¶„Çß„Éñ„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ](https://marimo.io/convert)
- [molab](https://molab.marimo.io/notebooks)
- [FAQ](https://docs.marimo.io/faq.html)
- [ÂãïÁîª](https://marimo.io/videos/landing/full.mp4)
- [„Éâ„Ç≠„É•„É°„É≥„Éà](https://docs.marimo.io)
- [‰ΩøÁî®‰æã](https://docs.marimo.io/examples/)
- [„ÇÆ„É£„É©„É™„Éº](https://marimo.io/gallery)
- [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md)
- [Discord](https://marimo.io/discord?ref=readme)
- [GitHub „Åß„Çπ„Çø„Éº„Çí„Å§„Åë„Çã](https://github.com/marimo-team/marimo)
- [Discord „Åß„ÉÅ„É£„ÉÉ„Éà](https://marimo.io/discord?ref=readme)
- [„Éã„É•„Éº„Çπ„É¨„Çø„Éº„ÇíË≥ºË™≠](https://marimo.io/newsletter)
- [„ÇØ„É©„Ç¶„Éâ„Ç¶„Çß„Ç§„Éà„É™„Çπ„Éà„Å´ÂèÇÂä†](https://marimo.io/cloud)
- [GitHub „Åß„Éá„Ç£„Çπ„Ç´„ÉÉ„Ç∑„Éß„É≥„ÇíÈñãÂßã](https://github.com/marimo-team/marimo/discussions)
- [Bluesky „Åß„Éï„Ç©„É≠„Éº](https://bsky.app/profile/marimo.io)
- [Twitter „Åß„Éï„Ç©„É≠„Éº](https://twitter.com/marimo_io)
- [YouTube „ÅßË≥ºË™≠](https://www.youtube.com/@marimo-team)
- [LinkedIn „Åß„Éï„Ç©„É≠„Éº](https://www.linkedin.com/company/marimo-io)
- [Pluto.jl](https://github.com/fonsp/Pluto.jl)
- [ObservableHQ](https://observablehq.com/tutorials)
- [Bret Victor „ÅÆ„Ç®„ÉÉ„Çª„Ç§](http://worrydream.com/)
- [<strong>„Éâ„Ç≠„É•„É°„É≥„Éà</strong>](https://docs.marimo.io)
- [<strong>Discord</strong>](https://marimo.io/discord?ref=readme)
- [<strong>„Çµ„É≥„Éó„É´</strong>](https://docs.marimo.io/examples/)
- [<strong>„ÇÆ„É£„É©„É™„Éº</strong>](https://marimo.io/gallery/)
- [<strong>YouTube</strong>](https://www.youtube.com/@marimo-team/)
- [<b>English</b>](https://github.com/marimo-team/marimo/blob/main/README.md)
- [<b>ÁπÅÈ´î‰∏≠Êñá</b>](https://github.com/marimo-team/marimo/blob/main/README_Traditional_Chinese.md)
- [<b>ÁÆÄ‰Ωì‰∏≠Êñá</b>](https://github.com/marimo-team/marimo/blob/main/README_Chinese.md)
- [<b>Espa√±ol</b>](https://github.com/marimo-team/marimo/blob/main/README_Spanish.md)
- [<img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/>](https://pypi.org/project/marimo/)
- [<img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/>](https://anaconda.org/conda-forge/marimo)
- [<img src="https://shields.io/discord/1059888774789730424" alt="discord"/>](https://marimo.io/discord?ref=readme)
- [<img src="https://img.shields.io/pypi/l/marimo"/>](https://github.com/marimo-team/marimo/blob/main/LICENSE)
- [<img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/getting_started/key_concepts.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/inputs/index.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/layouts/index.html)
- [Tutorial](https://docs.marimo.io/getting_started/key_concepts.html)
- [Inputs](https://docs.marimo.io/api/inputs/index.html)
- [Plots](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [Layout](https://docs.marimo.io/api/layouts/index.html)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/c7h6pz)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/0ue871)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/lxp1jk)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/14ovyr)

--- README_Spanish.md ---
<p align="center">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-thick.svg">
</p>

<p align="center">
  <em>Un cuaderno (notebook) de Python reactivo que es reproducible, compatible con Git y desplegable como scripts o aplicaciones.</em>
</p>

<p align="center">
  <a href="https://docs.marimo.io" target="_blank"><strong>Documentos</strong></a> ¬∑
  <a href="https://marimo.io/discord?ref=readme" target="_blank"><strong>Discord</strong></a> ¬∑
  <a href="https://docs.marimo.io/examples/" target="_blank"><strong>Ejemplos</strong></a> ¬∑
  <a href="https://marimo.io/gallery/" target="_blank"><strong>Galer√≠a</strong></a> ¬∑
  <a href="https://www.youtube.com/@marimo-team/" target="_blank"><strong>YouTube</strong></a>
</p>

<p align="center">
  <a href="https://github.com/marimo-team/marimo/blob/main/README.md" target="_blank"><b>English</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Traditional_Chinese.md" target="_blank"><b>ÁπÅÈ´î‰∏≠Êñá</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Chinese.md" target="_blank"><b>ÁÆÄ‰Ωì‰∏≠Êñá</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Japanese.md" target="_blank"><b>Êó•Êú¨Ë™û</b></a>
  <b> | </b>
  <b>Espa√±ol</b>
</p>

<p align="center">
  <a href="https://pypi.org/project/marimo/"><img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/></a>
  <a href="https://anaconda.org/conda-forge/marimo"><img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/></a>
  <a href="https://marimo.io/discord?ref=readme"><img src="https://shields.io/discord/1059888774789730424" alt="discord"/></a>
  <img alt="Pepy Total Downloads" src="https://img.shields.io/pepy/dt/marimo?label=pypi%20%7C%20downloads"/>
  <img alt="Conda Downloads" src="https://img.shields.io/conda/d/conda-forge/marimo"/>
  <a href="https://github.com/marimo-team/marimo/blob/main/LICENSE"><img src="https://img.shields.io/pypi/l/marimo"/></a>
</p>

**marimo** es un cuaderno (notebook) de Python: ejecuta una celda o interact√∫a con un elemento de la interfaz de usuario y marimo ejecuta autom√°ticamente las celdas dependientes (o <a href="#expensive-notebooks">las marca como desactualizadas</a>), manteniendo el c√≥digo y los resultados consistentes. Los cuadernos (notebooks) de marimo se almacenan como c√≥digo Python puro, ejecutables como scripts y desplegables como aplicaciones.

**Puntos Destacados**.

- üöÄ **bater√≠as incluidas:** reemplaza `jupyter`, `streamlit`, `jupytext`, `ipywidgets`, `papermill` y m√°s
- ‚ö°Ô∏è **reactive**: ejecuta una celda y marimo reactivamente [ejecuta las celdas dependientes](https://docs.marimo.io/guides/reactivity.html) o <a href="#expensive-notebooks">las marca como desactualizadas</a>
- üñêÔ∏è **interaction:** [vincula deslizadores, tablas, gr√°ficas y m√°s](https://docs.marimo.io/guides/interactivity.html) a Python ‚Äî sin "callbacks" requeridos
- üî¨ **reproducible:** [sin estado oculto](https://docs.marimo.io/guides/reactivity.html#no-hidden-state), ejecuci√≥n determin√≠stica, [gesti√≥n de paquetes integrada](https://docs.marimo.io/guides/editor_features/package_management.html)
- üèÉ **ejecutable:** [se ejecuta como script de Python](https://docs.marimo.io/guides/scripts.html), parametrizable mediante arguments de la l√≠nea de commandos (CLI)
- üõú **compartible**: [se despliega como una aplicaci√≥n web interactiva](https://docs.marimo.io/guides/apps.html) o [diapositivas](https://docs.marimo.io/guides/apps.html#slides-layout), [ejecutar en navegador via WASM](https://docs.marimo.io/guides/wasm.html)
- üõ¢Ô∏è **dise√±ado para datos**: consulta marcos de datos y bases de datos [con SQL](https://docs.marimo.io/guides/working_with_data/sql.html), filtrar y buscar [marcos de datos](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- üêç **compatible con git:** cuadernos (notebooks) son almacenados como archivos `.py`
- ‚å®Ô∏è **un editor moderno**: [GitHub Copilot](https://docs.marimo.io/guides/editor_features/ai_completion.html#github-copilot), [asistentes IA](https://docs.marimo.io/guides/editor_features/ai_completion.html#using-ollama), atajos de teclado de vim, explorador de variables y [m√°s](https://docs.marimo.io/guides/editor_features/index.html)

```python
pip install marimo && marimo tutorial intro
```

_¬°Prueba marimo en [nuestro entorno de pruebas](https://marimo.app/l/c7h6pz), se ejecuta completamente en el navegador!_

_[Inicia r√°pido](#quickstart) para una introducci√≥n sobre nuestro CLI._

## Un entorno de programaci√≥n reactivo

marimo garantiza que el c√≥digo de tu notebook, los resultados y el estado del program sean consistentes. Esto [resuelve muchos problems](https://docs.marimo.io/faq.html#faq-problems) asociados con notebooks tradicionales como Jupyter.

**Un entorno de programaci√≥n reactivo.**
Ejecuta una celda y marimo reacciona ejecutando autom√°ticamente las celdas que referencian sus variables, eliminando la tarea propensa a errores de volver a ejecutar celdas manualmente. Elimina una celda y marimo borra sus variables de la memoria del program, eliminando el estado oculto.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/reactive.gif" width="700px" />

<a name="expensive-notebooks"></a>

**Compatible con cuadernos (notebooks) pesados.** marimo te permite [configurar el runtime
para que sea
lazy](https://docs.marimo.io/guides/configuration/runtime_configuration.html),
marcando las celdas afectadas como obsoletas en lugar de ejecutarlas autom√°ticamente. Esto te da garant√≠as sobre el estado del program mientras previene la ejecuci√≥n accidental de celdas costosas.

**Elementos UI sincronizados.** Interact√∫a con [
elementos UI](https://docs.marimo.io/guides/interactivity.html) como [sliders](https://docs.marimo.io/api/inputs/slider.html#slider),
[dropdowns](https://docs.marimo.io/api/inputs/dropdown.html), [transformadores de dataframes](https://docs.marimo.io/api/inputs/dataframe.html), e [
interfaces de chat](https://docs.marimo.io/api/inputs/chat.html), y las celdas que los usan se vuelven a ejecutar autom√°ticamente con sus valores m√°s recientes.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" width="700px" />

**Marcos de datos interactivos.** [Navega, busca, filtra, y 
ordena](https://docs.marimo.io/guides/working_with_data/dataframes.html)
millones de filas incre√≠blemente r√°pido, sin necesidad de codigo.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-df.gif" width="700px" />

**Tiempo de ejecuci√≥n eficiente.** marimo ejecuta solo las celdas que necesitan set ejecutadas analizando est√°ticamente tu c√≥digo.

**Markdown din√°mico y SQL.** Usa markdown para contar historias din√°micas que dependen de
datos de Python. O construye consultas [SQL](https://docs.marimo.io/guides/working_with_data/sql.html) 
que dependen de valores de Python y ejec√∫talas contra dataframes, bases de datos, CSVs, Google Sheets, o cualquier otra cosa usando nuestro motor SQL integrado, que devuelve el resultado como un dataframe de Python.

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-sql-cell.png" width="700px" />

Tus notebooks siguen siendo Python puro, incluso si usan markdown o SQL.

**Orden de ejecuci√≥n determin√≠stico.** Los notebooks se ejecutan en un orden determin√≠stico, basado en referencias de variables en lugar de las posiciones de las celdas en la p√°gina.
Organiza tus notebooks para que se ajusten mejor a las historias que quieres contar.

**Gesti√≥n de paquetes integrada.** marimo tiene soporte integrado para todos los gestores de paquetes principles, permiti√©ndote [instalar paquetes al importarlos](https://docs.marimo.io/guides/editor_features/package_management.html). marimo puede incluso 
[serializar los requisitos de paquetes](https://docs.marimo.io/guides/package_management/inlining_dependencies/)
en archivos de notebook, e instalarlos autom√°ticamente en sandboxes venv aislados.

**Bater√≠as incluidas.** marimo viene con GitHub Copilot, asistentes de IA, formateo de c√≥digo con Ruff, exportaci√≥n HTML, autocompletado r√°pido, una [extensi√≥n de VS Code](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo),
un visor interaction de dataframes, y [muchas m√°s](https://docs.marimo.io/guides/editor_features/index.html)
caracter√≠sticas de calidad de vida.

## Inicio r√°pido

**Instalaci√≥n.** En una terminal, ejecuta

```bash
pip install marimo  # or conda install -c conda-forge marimo
marimo tutorial intro
```

Para instalar con dependencies adicionales que desbloquean celdas SQL, completado con IA y m√°s, ejecuta

```bash
pip install marimo[recommended]
```

**Crear cuadernos (notebooks).**

Crea o edita notebooks con

```bash
marimo edit
```

**Ejecutar aplicaciones.**  Ejecuta tu notebook como una aplicaci√≥n web, con el c√≥digo Python oculto y no editable:

```bash
marimo run your_notebook.py
```

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-model-comparison.gif" style="border-radius: 8px" width="450px" />

**Ejecutar como scripts.** Ejecuta un notebook como un script en la l√≠nea de commandos:

```bash
python your_notebook.py
```

**Convertir cuadernos (notebooks) de Jupyter autom√°ticamente.** Convierte autom√°ticamente notebooks de Jupyter a notebooks de marimo con el CLI:

```bash
marimo convert your_notebook.ipynb > your_notebook.py
```

o usa nuestra [interfaz web](https://marimo.io/convert).

**Tutorials.**
Lista de todos los tutorials:

```bash
marimo tutorial --help
```

## ¬øPreguntas?

Consulta las [FAQ](https://docs.marimo.io/faq.html) en nuestra documentation.

## Aprende m√°s

marimo es f√°cil para empezar, con mucho espacio para usuarios avanzados. Por ejemplo, aqu√≠ hay un visualizador de embeddings hecho en marimo
([video](https://marimo.io/videos/landing/full.mp4)):

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/embedding.gif" width="700px" />

Revisa nuestra [documentation](https://docs.marimo.io),
la carpeta [`examples/`](examples/), y nuestra [galeria](https://marimo.io/gallery) para aprender mas.

<table border="0">
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html">
        <img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html"> Tutorial </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html"> Inputs </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html"> Plots </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html"> Layout </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://marimo.app/l/c7h6pz">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/0ue871">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/lxp1jk">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/14ovyr">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
  </tr>
</table>

## Contribuir

¬°Apreciamos todas las contribuciones! No necesitas set un experto para ayudar. Por favor consulta [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md) para m√°s detalles sobre c√≥mo empezar.

> Dudas? Ac√©rcate a nosotros [en Discord](https://marimo.io/discord?ref=readme).

## Comunidad

Estamos construyendo una comunidad. ¬°Ven a pasar el rato con nosotros!

- üåü [Star us on GitHub](https://github.com/marimo-team/marimo)
- üí¨ [Chat with us on Discord](https://marimo.io/discord?ref=readme)
- üìß [Subscribe to our Newsletter](https://marimo.io/newsletter)
- ‚òÅÔ∏è [Join our Cloud Waitlist](https://marimo.io/cloud)
- ‚úèÔ∏è [Start a GitHub Discussion](https://github.com/marimo-team/marimo/discussions)
- ü¶ã [Follow us on Bluesky](https://bsky.app/profile/marimo.io)
- üê¶ [Follow us on Twitter](https://twitter.com/marimo_io)
- üé• [Subscribe on YouTube](https://www.youtube.com/@marimo-team)
- üï¥Ô∏è [Follow us on LinkedIn](https://www.linkedin.com/company/marimo-io)

## Inspiraci√≥n ‚ú®

marimo es una **reinvenci√≥n** de Python como un program Python reproducible, interaction y compartible, en lugar de un bloc de notas JSON propenso a errores.

Creemos que las herramientas que usamos dan forma a nuestra manera de pensar ‚Äî mejores herramientas, para mentes mejores. Con marimo, esperamos proporcionar a la comunidad de Python un mejor entorno de programaci√≥n para hacer investigaci√≥n y comunicarla; para experimentar con c√≥digo y compartirlo; para aprender ciencia computational y ense√±arla.

Nuestra inspiraci√≥n viene de muchos lugares y proyectos, especialmente
[Pluto.jl](https://github.com/fonsp/Pluto.jl),
[ObservableHQ](https://observablehq.com/tutorials), y
[los ensayos de Bret Victor](http://worrydream.com/). marimo es parte de
un movimiento mayor hacia la programaci√≥n reactiva de flujo de datos. Desde
[IPyflow](https://github.com/ipyflow/ipyflow), [streamlit](https://github.com/streamlit/streamlit),
[TensorFlow](https://github.com/tensorflow/tensorflow),
[PyTorch](https://github.com/pytorch/pytorch/tree/main),
[JAX](https://github.com/google/jax), y
[React](https://github.com/facebook/react), las ideas de programaci√≥n functional, declarativa y reactiva est√°n transformando una amplia gama de herramientas para mejor.

<p align="right">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-horizontal.png" height="200px">
</p>


## Links discovered
- [ejecuta las celdas dependientes](https://docs.marimo.io/guides/reactivity.html)
- [vincula deslizadores, tablas, gr√°ficas y m√°s](https://docs.marimo.io/guides/interactivity.html)
- [sin estado oculto](https://docs.marimo.io/guides/reactivity.html#no-hidden-state)
- [gesti√≥n de paquetes integrada](https://docs.marimo.io/guides/editor_features/package_management.html)
- [se ejecuta como script de Python](https://docs.marimo.io/guides/scripts.html)
- [se despliega como una aplicaci√≥n web interactiva](https://docs.marimo.io/guides/apps.html)
- [diapositivas](https://docs.marimo.io/guides/apps.html#slides-layout)
- [ejecutar en navegador via WASM](https://docs.marimo.io/guides/wasm.html)
- [con SQL](https://docs.marimo.io/guides/working_with_data/sql.html)
- [marcos de datos](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- [GitHub Copilot](https://docs.marimo.io/guides/editor_features/ai_completion.html#github-copilot)
- [asistentes IA](https://docs.marimo.io/guides/editor_features/ai_completion.html#using-ollama)
- [m√°s](https://docs.marimo.io/guides/editor_features/index.html)
- [nuestro entorno de pruebas](https://marimo.app/l/c7h6pz)
- [resuelve muchos problems](https://docs.marimo.io/faq.html#faq-problems)
- [configurar el runtime
para que sea
lazy](https://docs.marimo.io/guides/configuration/runtime_configuration.html)
- [elementos UI](https://docs.marimo.io/guides/interactivity.html)
- [sliders](https://docs.marimo.io/api/inputs/slider.html#slider)
- [dropdowns](https://docs.marimo.io/api/inputs/dropdown.html)
- [transformadores de dataframes](https://docs.marimo.io/api/inputs/dataframe.html)
- [interfaces de chat](https://docs.marimo.io/api/inputs/chat.html)
- [Navega, busca, filtra, y 
ordena](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- [SQL](https://docs.marimo.io/guides/working_with_data/sql.html)
- [instalar paquetes al importarlos](https://docs.marimo.io/guides/editor_features/package_management.html)
- [serializar los requisitos de paquetes](https://docs.marimo.io/guides/package_management/inlining_dependencies/)
- [extensi√≥n de VS Code](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)
- [muchas m√°s](https://docs.marimo.io/guides/editor_features/index.html)
- [interfaz web](https://marimo.io/convert)
- [FAQ](https://docs.marimo.io/faq.html)
- [video](https://marimo.io/videos/landing/full.mp4)
- [documentation](https://docs.marimo.io)
- [`examples/`](https://github.com/marimo-team/marimo/blob/main/examples.md)
- [galeria](https://marimo.io/gallery)
- [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md)
- [en Discord](https://marimo.io/discord?ref=readme)
- [Star us on GitHub](https://github.com/marimo-team/marimo)
- [Chat with us on Discord](https://marimo.io/discord?ref=readme)
- [Subscribe to our Newsletter](https://marimo.io/newsletter)
- [Join our Cloud Waitlist](https://marimo.io/cloud)
- [Start a GitHub Discussion](https://github.com/marimo-team/marimo/discussions)
- [Follow us on Bluesky](https://bsky.app/profile/marimo.io)
- [Follow us on Twitter](https://twitter.com/marimo_io)
- [Subscribe on YouTube](https://www.youtube.com/@marimo-team)
- [Follow us on LinkedIn](https://www.linkedin.com/company/marimo-io)
- [Pluto.jl](https://github.com/fonsp/Pluto.jl)
- [ObservableHQ](https://observablehq.com/tutorials)
- [los ensayos de Bret Victor](http://worrydream.com/)
- [IPyflow](https://github.com/ipyflow/ipyflow)
- [streamlit](https://github.com/streamlit/streamlit)
- [TensorFlow](https://github.com/tensorflow/tensorflow)
- [PyTorch](https://github.com/pytorch/pytorch/tree/main)
- [JAX](https://github.com/google/jax)
- [React](https://github.com/facebook/react)
- [<strong>Documentos</strong>](https://docs.marimo.io)
- [<strong>Discord</strong>](https://marimo.io/discord?ref=readme)
- [<strong>Ejemplos</strong>](https://docs.marimo.io/examples/)
- [<strong>Galer√≠a</strong>](https://marimo.io/gallery/)
- [<strong>YouTube</strong>](https://www.youtube.com/@marimo-team/)
- [<b>English</b>](https://github.com/marimo-team/marimo/blob/main/README.md)
- [<b>ÁπÅÈ´î‰∏≠Êñá</b>](https://github.com/marimo-team/marimo/blob/main/README_Traditional_Chinese.md)
- [<b>ÁÆÄ‰Ωì‰∏≠Êñá</b>](https://github.com/marimo-team/marimo/blob/main/README_Chinese.md)
- [<b>Êó•Êú¨Ë™û</b>](https://github.com/marimo-team/marimo/blob/main/README_Japanese.md)
- [<img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/>](https://pypi.org/project/marimo/)
- [<img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/>](https://anaconda.org/conda-forge/marimo)
- [<img src="https://shields.io/discord/1059888774789730424" alt="discord"/>](https://marimo.io/discord?ref=readme)
- [<img src="https://img.shields.io/pypi/l/marimo"/>](https://github.com/marimo-team/marimo/blob/main/LICENSE)
- [<img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/getting_started/key_concepts.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/inputs/index.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/layouts/index.html)
- [Tutorial](https://docs.marimo.io/getting_started/key_concepts.html)
- [Inputs](https://docs.marimo.io/api/inputs/index.html)
- [Plots](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [Layout](https://docs.marimo.io/api/layouts/index.html)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/c7h6pz)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/0ue871)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/lxp1jk)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/14ovyr)

--- README_Traditional_Chinese.md ---
<p align="center">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-thick.svg">
</p>

<p align="center">
  <em>‰∏ÄÂÄãÈüøÊáâÂºèÁöÑ Python Á≠ÜË®òÊú¨ÔºåÂèØÈáçÁèæ„ÄÅÊîØÊè¥ Git ÁâàÊú¨ÊéßÂà∂Ôºå‰∏¶ÂèØÈÉ®ÁΩ≤ÁÇ∫ËÖ≥Êú¨ÊàñÊáâÁî®Á®ãÂºè„ÄÇ</em>
</p>

<p align="center">
  <a href="https://docs.marimo.io" target="_blank"><strong>Êñá‰ª∂</strong></a> ¬∑
  <a href="https://marimo.io/discord?ref=readme" target="_blank"><strong>Discord</strong></a> ¬∑
  <a href="https://docs.marimo.io/examples/" target="_blank"><strong>ÁØÑ‰æã</strong></a> ¬∑
  <a href="https://marimo.io/gallery/" target="_blank"><strong>Â±ïÁ§∫Âªä</strong></a> ¬∑
  <a href="https://www.youtube.com/@marimo-team/" target="_blank"><strong>YouTube</strong></a>
</p>

<p align="center">
  <a href="https://github.com/marimo-team/marimo/blob/main/README.md" target="_blank"><b>English</b></a>
  <b> | </b>
  <b>ÁπÅÈ´î‰∏≠Êñá</b>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Chinese.md" target="_blank"><b>ÁÆÄ‰Ωì‰∏≠Êñá</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Japanese.md" target="_blank"><b>Êó•Êú¨Ë™û</b></a>
  <b> | </b>
  <a href="https://github.com/marimo-team/marimo/blob/main/README_Spanish.md" target="_blank"><b>Espa√±ol</b></a>
</p>

<p align="center">
  <a href="https://pypi.org/project/marimo/"><img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/></a>
  <a href="https://anaconda.org/conda-forge/marimo"><img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/></a>
  <a href="https://marimo.io/discord?ref=readme"><img src="https://shields.io/discord/1059888774789730424" alt="discord"/></a>
  <img alt="Pepy Total Downloads" src="https://img.shields.io/pepy/dt/marimo?label=pypi%20%7C%20downloads"/>
  <img alt="Conda Downloads" src="https://img.shields.io/conda/d/conda-forge/marimo"/>
  <a href="https://github.com/marimo-team/marimo/blob/main/LICENSE"><img src="https://img.shields.io/pypi/l/marimo"/></a>
</p>

**marimo** ÊòØ‰∏ÄÂÄãÈüøÊáâÂºèÁöÑ Python Á≠ÜË®òÊú¨ÔºöÂü∑Ë°åÂñÆÂÖÉÊ†ºÊàñËàá UI ÂÖÉÁ¥†‰∫íÂãïÊôÇÔºåmarimo ÊúÉËá™ÂãïÂü∑Ë°åÁõ∏‰æùÁöÑÂñÆÂÖÉÊ†ºÔºàÊàñ<a href="#expensive-notebooks">Â∞áÂÖ∂Ê®ôË®òÁÇ∫ÈÅéÊôÇ</a>ÔºâÔºå‰øùÊåÅÁ®ãÂºèÁ¢ºÂíåËº∏Âá∫ÁöÑ‰∏ÄËá¥ÊÄß„ÄÇmarimo Á≠ÜË®òÊú¨‰ª•Á¥î Python Ê†ºÂºèÂÑ≤Â≠òÔºàÂÖ∑Êúâ‰∏ÄÊµÅÁöÑ SQL ÊîØÊè¥ÔºâÔºåÂèØ‰ΩúÁÇ∫ËÖ≥Êú¨Âü∑Ë°åÔºå‰∏¶ÂèØÈÉ®ÁΩ≤ÁÇ∫ÊáâÁî®Á®ãÂºè„ÄÇ

**‰∫ÆÈªû**

- üöÄ **ÂäüËÉΩÈΩäÂÖ®Ôºö** ÂèØÂèñ‰ª£ `jupyter`„ÄÅ`streamlit`„ÄÅ`jupytext`„ÄÅ`ipywidgets`„ÄÅ`papermill` Á≠âÂ∑•ÂÖ∑
- ‚ö°Ô∏è **ÈüøÊáâÂºèÔºö** Âü∑Ë°å‰∏ÄÂÄãÂñÆÂÖÉÊ†ºÔºåmarimo ÊúÉÈüøÊáâÂºèÂú∞[Âü∑Ë°åÊâÄÊúâÁõ∏‰æùÂñÆÂÖÉÊ†º](https://docs.marimo.io/guides/reactivity.html)Êàñ<a href="#expensive-notebooks">Â∞áÂÖ∂Ê®ôË®òÁÇ∫ÈÅéÊôÇ</a>
- üñêÔ∏è **‰∫íÂãïÊÄßÔºö** [Á∂ÅÂÆöÊªëÊ°ø„ÄÅË°®Ê†º„ÄÅÂúñË°®Á≠â](https://docs.marimo.io/guides/interactivity.html)Ëá≥ Python ‚Äî ÁÑ°ÈúÄÂõûÂëºÂáΩÂºè
- üêç **ÊîØÊè¥ Git ÁâàÊú¨ÊéßÂà∂Ôºö** ‰ª• `.py` Ê™îÊ°àÊ†ºÂºèÂÑ≤Â≠ò
- üõ¢Ô∏è **ÁÇ∫Ë≥áÊñôË®≠Ë®àÔºö** ‰ΩøÁî® SQL Êü•Ë©¢[Ë≥áÊñôÊ°ÜÂíåË≥áÊñôÂ∫´](https://docs.marimo.io/guides/working_with_data/sql.html)ÔºåÈÅéÊøæÂíåÊêúÂ∞ã[Ë≥áÊñôÊ°Ü](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- ü§ñ **AI ÂéüÁîüÔºö** ‰ΩøÁî® AI ÁîüÊàêË≥áÊñôÂ∑•‰ΩúÁöÑÂñÆÂÖÉÊ†º
- üî¨ **ÂèØÈáçÁèæÔºö** [ÁÑ°Èö±ËóèÁãÄÊÖã](https://docs.marimo.io/guides/reactivity.html#no-hidden-state)„ÄÅÁ¢∫ÂÆöÊÄßÂü∑Ë°å„ÄÅ[ÂÖßÂª∫Â•ó‰ª∂ÁÆ°ÁêÜ](https://docs.marimo.io/guides/editor_features/package_management.html)
- üèÉ **ÂèØÂü∑Ë°åÔºö** [‰ΩúÁÇ∫ Python ËÖ≥Êú¨Âü∑Ë°å](https://docs.marimo.io/guides/scripts.html)ÔºåÈÄèÈÅé CLI ÂèÉÊï∏Âåñ
- üõú **ÂèØÂàÜ‰∫´Ôºö** [ÈÉ®ÁΩ≤ÁÇ∫‰∫íÂãïÂºèÁ∂≤È†ÅÊáâÁî®Á®ãÂºè](https://docs.marimo.io/guides/apps.html)Êàñ[Á∞°Â†±](https://docs.marimo.io/guides/apps.html#slides-layout)Ôºå[ÈÄèÈÅé WASM Âú®ÁÄèË¶ΩÂô®‰∏≠Âü∑Ë°å](https://docs.marimo.io/guides/wasm.html)
- üß© **ÂèØÈáçÁî®Ôºö** [ÂåØÂÖ•ÂáΩÂºèÂíåÈ°ûÂà•](https://docs.marimo.io/guides/reusing_functions/)Âæû‰∏ÄÂÄãÁ≠ÜË®òÊú¨Âà∞Âè¶‰∏ÄÂÄãÁ≠ÜË®òÊú¨
- üß™ **ÂèØÊ∏¨Ë©¶Ôºö** Âú®Á≠ÜË®òÊú¨‰∏ä[Âü∑Ë°å pytest](https://docs.marimo.io/guides/testing/)
- ‚å®Ô∏è **Áèæ‰ª£ÂåñÁ∑®ËºØÂô®Ôºö** [GitHub Copilot](https://docs.marimo.io/guides/editor_features/ai_completion.html#github-copilot)„ÄÅ[AI Âä©Êâã](https://docs.marimo.io/guides/editor_features/ai_completion.html#using-ollama)„ÄÅvim ÈçµÁõ§Á∂ÅÂÆö„ÄÅËÆäÊï∏ÁÄèË¶ΩÂô®Ôºå‰ª•Âèä[Êõ¥Â§öÂäüËÉΩ](https://docs.marimo.io/guides/editor_features/index.html)
- üßë‚Äçüíª **‰ΩøÁî®ÊÇ®ÂñúÊÑõÁöÑÁ∑®ËºØÂô®**ÔºöÂú® [VS Code Êàñ Cursor](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo) ‰∏≠Âü∑Ë°åÔºåÊàñÂú® neovim„ÄÅZed [Êàñ‰ªª‰ΩïÂÖ∂‰ªñÊñáÂ≠óÁ∑®ËºØÂô®](https://docs.marimo.io/guides/editor_features/watching/)‰∏≠Á∑®ËºØ

```python
pip install marimo && marimo tutorial intro
```

_Âú®ÊàëÂÄëÁöÑ[Á∑ö‰∏äÈ´îÈ©óÂπ≥Âè∞](https://marimo.app/l/c7h6pz)‰æÜË©¶Áî® marimoÔºåÂÆåÂÖ®Âú®ÁÄèË¶ΩÂô®‰∏≠Âü∑Ë°åÔºÅ_

_Ë∑≥Âà∞[Âø´ÈÄüÈñãÂßã](#Âø´ÈÄüÈñãÂßã)‰∫ÜËß£ÊàëÂÄëÁöÑ CLI Â∑•ÂÖ∑„ÄÇ_

## ÈüøÊáâÂºèÁ®ãÂºèË®≠Ë®àÁí∞Â¢É

marimo ‰øùË≠âÊÇ®ÁöÑÁ≠ÜË®òÊú¨Á®ãÂºèÁ¢º„ÄÅËº∏Âá∫ÂíåÁ®ãÂºèÁãÄÊÖã‰øùÊåÅ‰∏ÄËá¥„ÄÇÈÄô[Ëß£Ê±∫‰∫ÜË®±Â§öÂïèÈ°å](https://docs.marimo.io/faq.html#faq-problems)ÔºåÈÄô‰∫õÂïèÈ°åËàáÂÇ≥Áµ±Á≠ÜË®òÊú¨ÔºàÂ¶Ç JupyterÔºâÁõ∏Èóú„ÄÇ

**ÈüøÊáâÂºèÁ®ãÂºèË®≠Ë®àÁí∞Â¢É„ÄÇ**
Âü∑Ë°å‰∏ÄÂÄãÂñÆÂÖÉÊ†ºÔºåmarimo ÊúÉ_ÈüøÊáâÂºèÂú∞_Ëá™ÂãïÂü∑Ë°åÊâÄÊúâÂºïÁî®ÂÖ∂ËÆäÊï∏ÁöÑÂñÆÂÖÉÊ†ºÔºåÁúÅÂéªÊâãÂãïÈáçÊñ∞Âü∑Ë°åÂñÆÂÖÉÊ†ºÈÄôÁ®ÆÂÆπÊòìÂá∫ÈåØÁöÑÊ≠•È©ü„ÄÇÂà™Èô§‰∏ÄÂÄãÂñÆÂÖÉÊ†ºÔºåmarimo ÊúÉÂæûÁ®ãÂºèË®òÊÜ∂È´î‰∏≠Ê∏ÖÈô§ÂÖ∂ËÆäÊï∏ÔºåÊ∂àÈô§Èö±ËóèÁãÄÊÖã„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/reactive.gif" width="700px" />

<a name="expensive-notebooks"></a>

**ËàáÈ´òÊàêÊú¨Á≠ÜË®òÊú¨Áõ∏ÂÆπ„ÄÇ** marimo ËÆìÊÇ®[ÈÖçÁΩÆÂü∑Ë°åÁí∞Â¢ÉÁÇ∫ÊÉ∞ÊÄßÊ®°Âºè](https://docs.marimo.io/guides/configuration/runtime_configuration.html)ÔºåÂ∞áÂèóÂΩ±ÈüøÁöÑÂñÆÂÖÉÊ†ºÊ®ôË®òÁÇ∫ÈÅéÊôÇÔºåËÄå‰∏çÊòØËá™ÂãïÂü∑Ë°åÂÆÉÂÄë„ÄÇÈÄôÁÇ∫ÊÇ®Êèê‰æõ‰∫ÜÁ®ãÂºèÁãÄÊÖãÁöÑ‰øùË≠âÔºåÂêåÊôÇÈò≤Ê≠¢ÊÑèÂ§ñÂü∑Ë°åÈ´òÊàêÊú¨ÁöÑÂñÆÂÖÉÊ†º„ÄÇ

**ÂêåÊ≠•ÁöÑ UI ÂÖÉÁ¥†„ÄÇ** Ëàá [UI ÂÖÉÁ¥†](https://docs.marimo.io/guides/interactivity.html)‰∫íÂãïÔºåÂ¶Ç[ÊªëÊ°ø](https://docs.marimo.io/api/inputs/slider.html#slider)„ÄÅ[‰∏ãÊãâÈÅ∏ÂñÆ](https://docs.marimo.io/api/inputs/dropdown.html)„ÄÅ[Ë≥áÊñôÊ°ÜËΩâÊèõÂô®](https://docs.marimo.io/api/inputs/dataframe.html)Âíå[ËÅäÂ§©‰ªãÈù¢](https://docs.marimo.io/api/inputs/chat.html)Ôºå‰ΩøÁî®ÂÆÉÂÄëÁöÑÂñÆÂÖÉÊ†ºÊúÉËá™Âãï‰ª•ÊúÄÊñ∞ÂÄºÈáçÊñ∞Âü∑Ë°å„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" width="700px" />

**‰∫íÂãïÂºèË≥áÊñôÊ°Ü„ÄÇ** [ÁøªÈ†ÅÁÄèË¶Ω„ÄÅÊêúÂ∞ã„ÄÅÁØ©ÈÅ∏ÂíåÊéíÂ∫è](https://docs.marimo.io/guides/working_with_data/dataframes.html)Êï∏ÁôæËê¨Ë°åË≥áÊñôÔºåÈÄüÂ∫¶Ê•µÂø´ÔºåÁÑ°ÈúÄÁ∑®ÂØ´Á®ãÂºèÁ¢º„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-df.gif" width="700px" />

**‰ΩøÁî®Ë≥áÊñôÊÑüÁü• AI ÁîüÊàêÂñÆÂÖÉÊ†º„ÄÇ** ‰ΩøÁî®[AI Âä©ÊâãÁîüÊàêÁ®ãÂºèÁ¢º](https://docs.marimo.io/guides/editor_features/ai_completion/)ÔºåË©≤Âä©ÊâãÂ∞àÈñÄÁÇ∫Ë≥áÊñôËôïÁêÜËÄåË®≠Ë®àÔºåÂÖ∑ÊúâË®òÊÜ∂È´î‰∏≠ËÆäÊï∏ÁöÑ‰∏ä‰∏ãÊñáÔºõ[Èõ∂Ê®£Êú¨ÁîüÊàêÊï¥ÂÄãÁ≠ÜË®òÊú¨](https://docs.marimo.io/guides/generate_with_ai/text_to_notebook/)„ÄÇËá™Ë®ÇÁ≥ªÁµ±ÊèêÁ§∫Ôºå‰ΩøÁî®ÊÇ®Ëá™Â∑±ÁöÑ API ÈáëÈë∞ÔºåÊàñ‰ΩøÁî®Êú¨Âú∞Ê®°Âûã„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-generate-with-ai.gif" width="700px" />

**‰ΩøÁî® SQL Êü•Ë©¢Ë≥áÊñô„ÄÇ** Âª∫Êßã‰æùË≥¥Êñº Python ÂÄºÁöÑ [SQL](https://docs.marimo.io/guides/working_with_data/sql.html) Êü•Ë©¢Ôºå‰∏¶‰ΩøÁî®ÊàëÂÄëÂÖßÂª∫ÁöÑ SQL ÂºïÊìéÂ∞çË≥áÊñôÊ°Ü„ÄÅË≥áÊñôÂ∫´„ÄÅË≥áÊñôÊπñ„ÄÅCSV„ÄÅGoogle Ë©¶ÁÆóË°®Êàñ‰ªª‰ΩïÂÖ∂‰ªñË≥áÊñô‰æÜÊ∫êÂü∑Ë°åÊü•Ë©¢ÔºåÁµêÊûúÊúÉ‰ª• Python Ë≥áÊñôÊ°ÜËøîÂõû„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-sql-cell.png" width="700px" />

ÊÇ®ÁöÑÁ≠ÜË®òÊú¨‰ªçÁÑ∂ÊòØÁ¥î PythonÔºåÂç≥‰Ωø‰ΩøÁî®‰∫Ü SQL„ÄÇ

**ÂãïÊÖã Markdown„ÄÇ** ‰ΩøÁî®Áî± Python ËÆäÊï∏ÂèÉÊï∏ÂåñÁöÑ MarkdownÔºåË¨õËø∞‰æùË≥¥Êñº Python Ë≥áÊñôÁöÑÂãïÊÖãÊïÖ‰∫ã„ÄÇ

**ÂÖßÂª∫Â•ó‰ª∂ÁÆ°ÁêÜ„ÄÇ** marimo ÂÖßÂª∫ÊîØÊè¥ÊâÄÊúâ‰∏ªË¶ÅÁöÑÂ•ó‰ª∂ÁÆ°ÁêÜÂô®ÔºåËÆìÊÇ®[Âú®ÂåØÂÖ•ÊôÇÂÆâË£ùÂ•ó‰ª∂](https://docs.marimo.io/guides/editor_features/package_management.html)„ÄÇmarimo ÁîöËá≥ÂèØ‰ª•Âú®Á≠ÜË®òÊú¨Ê™îÊ°à‰∏≠[Â∫èÂàóÂåñÂ•ó‰ª∂ÈúÄÊ±Ç](https://docs.marimo.io/guides/package_management/inlining_dependencies/)Ôºå‰∏¶Âú®ÈöîÈõ¢ÁöÑ venv Ê≤ôÁõí‰∏≠Ëá™ÂãïÂÆâË£ùÂÆÉÂÄë„ÄÇ

**Á¢∫ÂÆöÊÄßÂü∑Ë°åÈ†ÜÂ∫è„ÄÇ** Á≠ÜË®òÊú¨‰ª•Á¢∫ÂÆöÊÄßÈ†ÜÂ∫èÂü∑Ë°åÔºåÂü∫ÊñºËÆäÊï∏ÂºïÁî®ËÄå‰∏çÊòØÂñÆÂÖÉÊ†ºÂú®È†ÅÈù¢‰∏äÁöÑ‰ΩçÁΩÆ„ÄÇÁµÑÁπîÊÇ®ÁöÑÁ≠ÜË®òÊú¨‰ª•ÊúÄ‰Ω≥ÊñπÂºèË¨õËø∞ÊÇ®ÊÉ≥Ë¶ÅÁöÑÊïÖ‰∫ã„ÄÇ

**È´òÊïàËÉΩÂü∑Ë°åÁí∞Â¢É„ÄÇ** marimo ÈÄèÈÅéÈùúÊÖãÂàÜÊûêÊÇ®ÁöÑÁ®ãÂºèÁ¢ºÔºåÂè™Âü∑Ë°åÈúÄË¶ÅÂü∑Ë°åÁöÑÂñÆÂÖÉÊ†º„ÄÇ

**ÂäüËÉΩÈΩäÂÖ®„ÄÇ** marimo ÈôÑÂ∏∂ GitHub Copilot„ÄÅAI Âä©Êâã„ÄÅRuff Á®ãÂºèÁ¢ºÊ†ºÂºèÂåñ„ÄÅHTML ÂåØÂá∫„ÄÅÂø´ÈÄüÁ®ãÂºèÁ¢ºËá™ÂãïÂÆåÊàê„ÄÅ[VS Code Êì¥ÂÖÖÂ•ó‰ª∂](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)„ÄÅ‰∫íÂãïÂºèË≥áÊñôÊ°ÜÊ™¢Ë¶ñÂô®Ôºå‰ª•Âèä[Êõ¥Â§ö](https://docs.marimo.io/guides/editor_features/index.html)‰æøÂà©ÂäüËÉΩ„ÄÇ

## Âø´ÈÄüÈñãÂßã

_ÊàëÂÄë [YouTube È†ªÈÅì](https://www.youtube.com/@marimo-team)‰∏äÁöÑ [marimo Ê¶ÇÂøµÊí≠ÊîæÊ∏ÖÂñÆ](https://www.youtube.com/watch?v=3N6lInzq5MI&list=PLNJXGo8e1XT9jP7gPbRdm1XwloZVFvLEq)Êèê‰æõ‰∫ÜË®±Â§öÂäüËÉΩÁöÑÊ¶ÇË¶Ω„ÄÇ_

**ÂÆâË£ù**

Âú®ÁµÇÁ´ØÊ©ü‰∏≠Âü∑Ë°å

```bash
pip install marimo  # Êàñ conda install -c conda-forge marimo
marimo tutorial intro
```

Ëã•Ë¶ÅÂÆâË£ùÂåÖÂê´È°çÂ§ñÁõ∏‰æùÂ•ó‰ª∂‰ª•Ëß£Èéñ SQL ÂñÆÂÖÉÊ†º„ÄÅAI Ëá™ÂãïÂÆåÊàêÁ≠âÂäüËÉΩÔºåË´ãÂü∑Ë°å

```bash
pip install marimo[recommended]
```

**Âª∫Á´ãÊñ∞Á≠ÜË®òÊú¨**

‰ΩøÁî®‰ª•‰∏ãÊåá‰ª§Âª∫Á´ãÊàñÁ∑®ËºØÁ≠ÜË®òÊú¨

```bash
marimo edit
```

**‰ΩúÁÇ∫ÊáâÁî®Á®ãÂºèÂü∑Ë°å**

Â∞áÊÇ®ÁöÑÁ≠ÜË®òÊú¨‰ΩúÁÇ∫Á∂≤È†ÅÊáâÁî®Á®ãÂºèÈÅãË°åÔºåPython Á®ãÂºèÁ¢ºÂ∞áË¢´Èö±Ëóè‰∏î‰∏çÂèØÁ∑®ËºØÔºö

```bash
marimo run your_notebook.py
```

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-model-comparison.gif" style="border-radius: 8px" width="450px" />

**‰ΩúÁÇ∫ËÖ≥Êú¨Âü∑Ë°å**

Âú®ÂëΩ‰ª§Âàó‰∏≠Â∞áÁ≠ÜË®òÊú¨‰ΩúÁÇ∫ËÖ≥Êú¨Âü∑Ë°å

```bash
python your_notebook.py
```

**Ëá™ÂãïËΩâÊèõ Jupyter Á≠ÜË®òÊú¨**

‰ΩøÁî® CLI Ëá™ÂãïÂ∞á Jupyter Á≠ÜË®òÊú¨ËΩâÊèõÁÇ∫ marimo Á≠ÜË®òÊú¨

```bash
marimo convert your_notebook.ipynb > your_notebook.py
```

Êàñ‰ΩøÁî®ÊàëÂÄëÁöÑ[Á∂≤È†Å‰ªãÈù¢](https://marimo.io/convert)„ÄÇ

**ÊïôÂ≠∏**

ÂàóÂá∫ÊâÄÊúâÊïôÂ≠∏Ôºö

```bash
marimo tutorial --help
```

**ÂàÜ‰∫´Èõ≤Á´ØÁ≠ÜË®òÊú¨„ÄÇ**

‰ΩøÁî® [molab](https://molab.marimo.io/notebooks)Ôºå‰∏ÄÂÄãÈ°û‰ººÊñº Google Colab ÁöÑÈõ≤Á´Ø marimo Á≠ÜË®òÊú¨ÊúçÂãôÔºå
‰æÜÂâµÂª∫ÂíåÂàÜ‰∫´Á≠ÜË®òÊú¨ÈÄ£Áµê„ÄÇ

## ÊúâÂïèÈ°åÂóéÔºü

Ë´ãÂèÉÈñ±ÊàëÂÄëÊñá‰ª∂‰∏≠ÁöÑ[Â∏∏Ë¶ãÂïèÈ°å](https://docs.marimo.io/faq.html)„ÄÇ

## ‰∫ÜËß£Êõ¥Â§ö

marimo ÂÆπÊòì‰∏äÊâãÔºå‰∏¶ÁÇ∫ÈÄ≤Èöé‰ΩøÁî®ËÄÖÊèê‰æõ‰∫ÜË®±Â§öÂº∑Â§ßÂäüËÉΩ„ÄÇ
‰æãÂ¶ÇÔºåÈÄôÊòØ‰∏ÄÂÄã‰ΩøÁî® marimo Ë£Ω‰ΩúÁöÑÂµåÂÖ•Ë¶ñË¶∫ÂåñÂ∑•ÂÖ∑
Ôºà[ÂΩ±Áâá](https://marimo.io/videos/landing/full.mp4)ÔºâÔºö

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/embedding.gif" width="700px" />

Êü•ÁúãÊàëÂÄëÁöÑ[Êñá‰ª∂](https://docs.marimo.io)„ÄÅ
[‰ΩøÁî®ÁØÑ‰æã](https://docs.marimo.io/examples/)Ôºå‰ª•ÂèäÊàëÂÄëÁöÑ[Â±ïÁ§∫Âªä](https://marimo.io/gallery)‰ª•‰∫ÜËß£Êõ¥Â§ö„ÄÇ

<table border="0">
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html">
        <img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html">
        <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />
      </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://docs.marimo.io/getting_started/key_concepts.html"> ÊïôÂ≠∏ </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/inputs/index.html"> Ëº∏ÂÖ• </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/guides/working_with_data/plotting.html"> Áπ™Âúñ </a>
    </td>
    <td>
      <a target="_blank" href="https://docs.marimo.io/api/layouts/index.html"> ‰ΩàÂ±Ä </a>
    </td>
  </tr>
  <tr>
    <td>
      <a target="_blank" href="https://marimo.app/l/c7h6pz">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/0ue871">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/lxp1jk">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
    <td>
      <a target="_blank" href="https://marimo.app/l/14ovyr">
        <img src="https://marimo.io/shield.svg"/>
      </a>
    </td>
  </tr>
</table>

## Ë≤¢Áçª

ÊàëÂÄëÊÑüË¨ùÊâÄÊúâÁöÑË≤¢ÁçªÔºÅÊÇ®‰∏çÈúÄË¶ÅÊòØÂ∞àÂÆ∂Âç≥ÂèØÊèê‰æõÂçîÂä©„ÄÇ
Ë´ãÂèÉÈñ± [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md) ‰ª•Áç≤ÂèñÊõ¥Â§öÈóúÊñºÂ¶Ç‰ΩïÈñãÂßãÁöÑË©≥Á¥∞Ë≥áË®ä„ÄÇ

> ÊúâÂïèÈ°åÂóéÔºüË´ãÂú® [Discord](https://marimo.io/discord?ref=readme) ‰∏äËàáÊàëÂÄëËÅØÁπ´„ÄÇ

ÊàëÂÄëÁÜ±ÁÉàÊ≠°ËøéË≤¢ÁçªÔºÅÊÇ®ÂèØ‰ª•Âπ´Âä© marimoÔºö

- üêõ [ÂõûÂ†±ÈåØË™§](https://github.com/marimo-team/marimo/issues/new)
- üí° [ÊèêÂá∫ÂäüËÉΩË´ãÊ±Ç](https://github.com/marimo-team/marimo/issues/new)
- üìà [upvote ÂäüËÉΩË´ãÊ±Ç](https://github.com/marimo-team/marimo/issues?q=is%3Aissue+is%3Aopen+sort%3Areactions-%2B1-desc)
- üî® [Êèê‰∫§ pull requests](https://github.com/marimo-team/marimo/pulls)
- üå∏ [ÂàÜ‰∫´ÊÇ®Âú® marimo ‰∏≠Ë£Ω‰ΩúÁöÑÁ≠ÜË®òÊú¨](https://github.com/marimo-team/marimo/discussions/categories/show-and-tell)
- üåü [Âú® GitHub ‰∏äÁÇ∫ÊàëÂÄëÂä†Êòü](https://github.com/marimo-team/marimo)

ÊúâÈóúÂ¶Ç‰ΩïË≤¢ÁçªÁöÑÊõ¥Â§öË≥áË®äÔºåË´ãÂèÉË¶ã[Ë≤¢ÁçªÊåáÂçó](https://docs.marimo.io/guides/contributing.html)„ÄÇ

## Á§æÁæ§

ÊàëÂÄëÊ≠£Âú®Âª∫Á´ã‰∏ÄÂÄãÁ§æÁæ§„ÄÇÊ≠°Ëøé‰æÜËàáÊàëÂÄë‰∫§ÊµÅÔºÅ

- üåü [Âú® GitHub ‰∏äÁÇ∫ÊàëÂÄëÂä†Êòü](https://github.com/marimo-team/marimo)
- üí¨ [Âú® Discord ‰∏äËàáÊàëÂÄëËÅäÂ§©](https://marimo.io/discord?ref=readme)
- üìß [Ë®ÇÈñ±ÊàëÂÄëÁöÑÈõªÂ≠êÂ†±](https://marimo.io/newsletter)
- ‚òÅÔ∏è [Âä†ÂÖ•ÊàëÂÄëÁöÑÈõ≤Á´ØÊúçÂãôÂÄôË£úÂêçÂñÆ](https://marimo.io/cloud)
- ‚úèÔ∏è [Âú® GitHub ‰∏äÁôºËµ∑Ë®éË´ñ](https://github.com/marimo-team/marimo/discussions)
- ü¶ã [Âú® Bluesky ‰∏äËøΩËπ§ÊàëÂÄë](https://bsky.app/profile/marimo.io)
- üê¶ [Âú® Twitter ‰∏äËøΩËπ§ÊàëÂÄë](https://twitter.com/marimo_io)
- üé• [Âú® YouTube ‰∏äË®ÇÈñ±](https://www.youtube.com/@marimo-team)
- üï¥Ô∏è [Âú® LinkedIn ‰∏äËøΩËπ§ÊàëÂÄë](https://www.linkedin.com/company/marimo-io)

**NumFOCUS ÈôÑÂ±¨Â∞àÊ°à„ÄÇ** marimo ÊòØÊõ¥Âª£Ê≥õ Python ÁîüÊÖãÁ≥ªÁµ±ÁöÑÊ†∏ÂøÉÈÉ®ÂàÜÔºå‰πüÊòØ NumFOCUS Á§æÁæ§ÁöÑÊàêÂì°ÔºåË©≤Á§æÁæ§ÂåÖÊã¨ NumPy„ÄÅSciPy Âíå Matplotlib Á≠âÂ∞àÊ°à„ÄÇ

<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/numfocus_affiliated_project.png" height="40px" />

## ÈùàÊÑü ‚ú®

marimo ÊòØ Python Á≠ÜË®òÊú¨ÁöÑ**ÈáçÊñ∞ÁôºÊòé**Ôºå‰ΩúÁÇ∫‰∏ÄÂÄãÂèØÈáçÁèæ„ÄÅ‰∫íÂãï‰∏îÂèØÂàÜ‰∫´ÁöÑ Python Á®ãÂºèÔºåËÄåÈùûÂÆπÊòìÂá∫ÈåØÁöÑ JSON ËçâÁ®øÊú¨„ÄÇ

ÊàëÂÄëÁõ∏‰ø°Â∑•ÂÖ∑ÊúÉÂΩ±ÈüøÊàëÂÄëÁöÑÊÄùËÄÉÊñπÂºè‚Äî‚ÄîÊõ¥Â•ΩÁöÑÂ∑•ÂÖ∑ÔºåÈÄ†Â∞±Êõ¥Â•ΩÁöÑÊÄùÁ∂≠„ÄÇÈÄèÈÅé marimoÔºåÊàëÂÄëÂ∏åÊúõÁÇ∫ Python Á§æÁæ§Êèê‰æõ‰∏ÄÂÄãÊõ¥Â•ΩÁöÑÁ®ãÂºèË®≠Ë®àÁí∞Â¢ÉÔºåÁî®‰ª•ÈÄ≤Ë°åÁ†îÁ©∂‰∏¶ÂÇ≥ÈÅîÊàêÊûúÔºõÂØ¶È©óÁ®ãÂºèÁ¢º‰∏¶ÂàÜ‰∫´ÂÆÉÔºõÂ≠∏ÁøíË®àÁÆóÁßëÂ≠∏‰∏¶ÊïôÊéàÂÆÉ„ÄÇ

ÊàëÂÄëÁöÑÈùàÊÑü‰æÜËá™Ë®±Â§öÂú∞ÊñπÂíåÂ∞àÊ°àÔºåÁâπÂà•ÊòØ [Pluto.jl](https://github.com/fonsp/Pluto.jl)„ÄÅ[ObservableHQ](https://observablehq.com/tutorials) Âíå [Bret Victor ÁöÑÊñáÁ´†](http://worrydream.com/)„ÄÇmarimo ÊòØÊúùÂêëÈüøÊáâÂºèË≥áÊñôÊµÅÁ®ãÂºèË®≠Ë®àÊõ¥Â§ßÈÅãÂãïÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÂæû [IPyflow](https://github.com/ipyflow/ipyflow)„ÄÅ[streamlit](https://github.com/streamlit/streamlit)„ÄÅ[TensorFlow](https://github.com/tensorflow/tensorflow)„ÄÅ[PyTorch](https://github.com/pytorch/pytorch/tree/main)„ÄÅ[JAX](https://github.com/google/jax) Âà∞ [React](https://github.com/facebook/react)ÔºåÂáΩÊï∏Âºè„ÄÅËÅ≤ÊòéÂºèÂíåÈüøÊáâÂºèÁ®ãÂºèË®≠Ë®àÁöÑÁêÜÂøµÊ≠£Âú®ÊîπÂñÑÂª£Ê≥õÁöÑÂ∑•ÂÖ∑„ÄÇ

<p align="right">
  <img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/marimo-logotype-horizontal.png" height="200px">
</p>

---

> **Note**: This is a community-contributed translation. The [English README](README.md) is the authoritative and most up-to-date version.

> **Ê≥®ÊÑè**ÔºöÈÄôÊòØÁ§æÁæ§Ë≤¢ÁçªÁöÑÁøªË≠Ø„ÄÇ[Ëã±Êñá README](README.md) ÊòØÊúÄÊ¨äÂ®Å‰∏îÊúÄÊñ∞ÁöÑÁâàÊú¨„ÄÇ


## Links discovered
- [Âü∑Ë°åÊâÄÊúâÁõ∏‰æùÂñÆÂÖÉÊ†º](https://docs.marimo.io/guides/reactivity.html)
- [Á∂ÅÂÆöÊªëÊ°ø„ÄÅË°®Ê†º„ÄÅÂúñË°®Á≠â](https://docs.marimo.io/guides/interactivity.html)
- [Ë≥áÊñôÊ°ÜÂíåË≥áÊñôÂ∫´](https://docs.marimo.io/guides/working_with_data/sql.html)
- [Ë≥áÊñôÊ°Ü](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- [ÁÑ°Èö±ËóèÁãÄÊÖã](https://docs.marimo.io/guides/reactivity.html#no-hidden-state)
- [ÂÖßÂª∫Â•ó‰ª∂ÁÆ°ÁêÜ](https://docs.marimo.io/guides/editor_features/package_management.html)
- [‰ΩúÁÇ∫ Python ËÖ≥Êú¨Âü∑Ë°å](https://docs.marimo.io/guides/scripts.html)
- [ÈÉ®ÁΩ≤ÁÇ∫‰∫íÂãïÂºèÁ∂≤È†ÅÊáâÁî®Á®ãÂºè](https://docs.marimo.io/guides/apps.html)
- [Á∞°Â†±](https://docs.marimo.io/guides/apps.html#slides-layout)
- [ÈÄèÈÅé WASM Âú®ÁÄèË¶ΩÂô®‰∏≠Âü∑Ë°å](https://docs.marimo.io/guides/wasm.html)
- [ÂåØÂÖ•ÂáΩÂºèÂíåÈ°ûÂà•](https://docs.marimo.io/guides/reusing_functions/)
- [Âü∑Ë°å pytest](https://docs.marimo.io/guides/testing/)
- [GitHub Copilot](https://docs.marimo.io/guides/editor_features/ai_completion.html#github-copilot)
- [AI Âä©Êâã](https://docs.marimo.io/guides/editor_features/ai_completion.html#using-ollama)
- [Êõ¥Â§öÂäüËÉΩ](https://docs.marimo.io/guides/editor_features/index.html)
- [VS Code Êàñ Cursor](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)
- [Êàñ‰ªª‰ΩïÂÖ∂‰ªñÊñáÂ≠óÁ∑®ËºØÂô®](https://docs.marimo.io/guides/editor_features/watching/)
- [Á∑ö‰∏äÈ´îÈ©óÂπ≥Âè∞](https://marimo.app/l/c7h6pz)
- [Ëß£Ê±∫‰∫ÜË®±Â§öÂïèÈ°å](https://docs.marimo.io/faq.html#faq-problems)
- [ÈÖçÁΩÆÂü∑Ë°åÁí∞Â¢ÉÁÇ∫ÊÉ∞ÊÄßÊ®°Âºè](https://docs.marimo.io/guides/configuration/runtime_configuration.html)
- [UI ÂÖÉÁ¥†](https://docs.marimo.io/guides/interactivity.html)
- [ÊªëÊ°ø](https://docs.marimo.io/api/inputs/slider.html#slider)
- [‰∏ãÊãâÈÅ∏ÂñÆ](https://docs.marimo.io/api/inputs/dropdown.html)
- [Ë≥áÊñôÊ°ÜËΩâÊèõÂô®](https://docs.marimo.io/api/inputs/dataframe.html)
- [ËÅäÂ§©‰ªãÈù¢](https://docs.marimo.io/api/inputs/chat.html)
- [ÁøªÈ†ÅÁÄèË¶Ω„ÄÅÊêúÂ∞ã„ÄÅÁØ©ÈÅ∏ÂíåÊéíÂ∫è](https://docs.marimo.io/guides/working_with_data/dataframes.html)
- [AI Âä©ÊâãÁîüÊàêÁ®ãÂºèÁ¢º](https://docs.marimo.io/guides/editor_features/ai_completion/)
- [Èõ∂Ê®£Êú¨ÁîüÊàêÊï¥ÂÄãÁ≠ÜË®òÊú¨](https://docs.marimo.io/guides/generate_with_ai/text_to_notebook/)
- [SQL](https://docs.marimo.io/guides/working_with_data/sql.html)
- [Âú®ÂåØÂÖ•ÊôÇÂÆâË£ùÂ•ó‰ª∂](https://docs.marimo.io/guides/editor_features/package_management.html)
- [Â∫èÂàóÂåñÂ•ó‰ª∂ÈúÄÊ±Ç](https://docs.marimo.io/guides/package_management/inlining_dependencies/)
- [VS Code Êì¥ÂÖÖÂ•ó‰ª∂](https://marketplace.visualstudio.com/items?itemName=marimo-team.vscode-marimo)
- [Êõ¥Â§ö](https://docs.marimo.io/guides/editor_features/index.html)
- [YouTube È†ªÈÅì](https://www.youtube.com/@marimo-team)
- [marimo Ê¶ÇÂøµÊí≠ÊîæÊ∏ÖÂñÆ](https://www.youtube.com/watch?v=3N6lInzq5MI&list=PLNJXGo8e1XT9jP7gPbRdm1XwloZVFvLEq)
- [Á∂≤È†Å‰ªãÈù¢](https://marimo.io/convert)
- [molab](https://molab.marimo.io/notebooks)
- [Â∏∏Ë¶ãÂïèÈ°å](https://docs.marimo.io/faq.html)
- [ÂΩ±Áâá](https://marimo.io/videos/landing/full.mp4)
- [Êñá‰ª∂](https://docs.marimo.io)
- [‰ΩøÁî®ÁØÑ‰æã](https://docs.marimo.io/examples/)
- [Â±ïÁ§∫Âªä](https://marimo.io/gallery)
- [CONTRIBUTING.md](https://github.com/marimo-team/marimo/blob/main/CONTRIBUTING.md)
- [Discord](https://marimo.io/discord?ref=readme)
- [ÂõûÂ†±ÈåØË™§](https://github.com/marimo-team/marimo/issues/new)
- [ÊèêÂá∫ÂäüËÉΩË´ãÊ±Ç](https://github.com/marimo-team/marimo/issues/new)
- [upvote ÂäüËÉΩË´ãÊ±Ç](https://github.com/marimo-team/marimo/issues?q=is%3Aissue+is%3Aopen+sort%3Areactions-%2B1-desc)
- [Êèê‰∫§ pull requests](https://github.com/marimo-team/marimo/pulls)
- [ÂàÜ‰∫´ÊÇ®Âú® marimo ‰∏≠Ë£Ω‰ΩúÁöÑÁ≠ÜË®òÊú¨](https://github.com/marimo-team/marimo/discussions/categories/show-and-tell)
- [Âú® GitHub ‰∏äÁÇ∫ÊàëÂÄëÂä†Êòü](https://github.com/marimo-team/marimo)
- [Ë≤¢ÁçªÊåáÂçó](https://docs.marimo.io/guides/contributing.html)
- [Âú® Discord ‰∏äËàáÊàëÂÄëËÅäÂ§©](https://marimo.io/discord?ref=readme)
- [Ë®ÇÈñ±ÊàëÂÄëÁöÑÈõªÂ≠êÂ†±](https://marimo.io/newsletter)
- [Âä†ÂÖ•ÊàëÂÄëÁöÑÈõ≤Á´ØÊúçÂãôÂÄôË£úÂêçÂñÆ](https://marimo.io/cloud)
- [Âú® GitHub ‰∏äÁôºËµ∑Ë®éË´ñ](https://github.com/marimo-team/marimo/discussions)
- [Âú® Bluesky ‰∏äËøΩËπ§ÊàëÂÄë](https://bsky.app/profile/marimo.io)
- [Âú® Twitter ‰∏äËøΩËπ§ÊàëÂÄë](https://twitter.com/marimo_io)
- [Âú® YouTube ‰∏äË®ÇÈñ±](https://www.youtube.com/@marimo-team)
- [Âú® LinkedIn ‰∏äËøΩËπ§ÊàëÂÄë](https://www.linkedin.com/company/marimo-io)
- [Pluto.jl](https://github.com/fonsp/Pluto.jl)
- [ObservableHQ](https://observablehq.com/tutorials)
- [Bret Victor ÁöÑÊñáÁ´†](http://worrydream.com/)
- [IPyflow](https://github.com/ipyflow/ipyflow)
- [streamlit](https://github.com/streamlit/streamlit)
- [TensorFlow](https://github.com/tensorflow/tensorflow)
- [PyTorch](https://github.com/pytorch/pytorch/tree/main)
- [JAX](https://github.com/google/jax)
- [React](https://github.com/facebook/react)
- [English README](https://github.com/marimo-team/marimo/blob/main/README.md)
- [Ëã±Êñá README](https://github.com/marimo-team/marimo/blob/main/README.md)
- [<strong>Êñá‰ª∂</strong>](https://docs.marimo.io)
- [<strong>Discord</strong>](https://marimo.io/discord?ref=readme)
- [<strong>ÁØÑ‰æã</strong>](https://docs.marimo.io/examples/)
- [<strong>Â±ïÁ§∫Âªä</strong>](https://marimo.io/gallery/)
- [<strong>YouTube</strong>](https://www.youtube.com/@marimo-team/)
- [<b>English</b>](https://github.com/marimo-team/marimo/blob/main/README.md)
- [<b>ÁÆÄ‰Ωì‰∏≠Êñá</b>](https://github.com/marimo-team/marimo/blob/main/README_Chinese.md)
- [<b>Êó•Êú¨Ë™û</b>](https://github.com/marimo-team/marimo/blob/main/README_Japanese.md)
- [<b>Espa√±ol</b>](https://github.com/marimo-team/marimo/blob/main/README_Spanish.md)
- [<img src="https://img.shields.io/pypi/v/marimo?color=%2334D058&label=pypi"/>](https://pypi.org/project/marimo/)
- [<img src="https://img.shields.io/conda/vn/conda-forge/marimo.svg"/>](https://anaconda.org/conda-forge/marimo)
- [<img src="https://shields.io/discord/1059888774789730424" alt="discord"/>](https://marimo.io/discord?ref=readme)
- [<img src="https://img.shields.io/pypi/l/marimo"/>](https://github.com/marimo-team/marimo/blob/main/LICENSE)
- [<img src="https://docs.marimo.io/_static/reactive.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/getting_started/key_concepts.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/readme-ui.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/inputs/index.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/docs-intro.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [<img src="https://raw.githubusercontent.com/marimo-team/marimo/main/docs/_static/outputs.gif" style="max-height: 150px; width: auto; display: block" />](https://docs.marimo.io/api/layouts/index.html)
- [ÊïôÂ≠∏](https://docs.marimo.io/getting_started/key_concepts.html)
- [Ëº∏ÂÖ•](https://docs.marimo.io/api/inputs/index.html)
- [Áπ™Âúñ](https://docs.marimo.io/guides/working_with_data/plotting.html)
- [‰ΩàÂ±Ä](https://docs.marimo.io/api/layouts/index.html)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/c7h6pz)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/0ue871)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/lxp1jk)
- [<img src="https://marimo.io/shield.svg"/>](https://marimo.app/l/14ovyr)

--- docker/README.md ---
# Docker Images

This directory contains the Dockerfile for building marimo Docker images.

## Available Images

- `marimo-slim`: Minimal image with just marimo installed
- `marimo-data`: Includes marimo plus data science packages (pandas, numpy, altair) and marimo[recommended,lsp]
- `marimo-sql`: Extends the data image with SQL support (marimo[recommended,lsp,sql])

## Testing locally

To build all images, from the root

```bash
# Build your image, and tag it as my_app
docker build -t my_app . -f docker/Dockerfile

# Start your container, mapping port 8080
docker run -p 8080:8080 -it my_app

# Visit http://localhost:8080
```


--- pyodide/build_and_serve.py ---
# /// script
# requires-python = ">=3.12"
# dependencies = [
#     "watchdog",
# ]
# ///
from __future__ import annotations

import http.server
import os
import socketserver
import subprocess
import threading
from posixpath import join

from watchdog.events import PatternMatchingEventHandler
from watchdog.observers import Observer


class CORSHTTPRequestHandler(http.server.SimpleHTTPRequestHandler):
    def end_headers(self) -> None:
        self.send_header("Access-Control-Allow-Origin", "*")
        self.send_header("Access-Control-Allow-Methods", "GET, POST, OPTIONS")
        self.send_header(
            "Access-Control-Allow-Headers", "X-Requested-With, Content-Type"
        )
        super().end_headers()

    def do_OPTIONS(self) -> None:
        self.send_response(200, "ok")
        self.end_headers()


class WheelBuilderHandler(PatternMatchingEventHandler):
    patterns = ["*.py"]  # Watch for changes in Python files

    def on_any_event(self, event) -> None:
        print(f"Change detected: {event.src_path}")  # noqa: T201
        print("Building wheel...")  # noqa: T201
        subprocess.run(["hatch", "build"])
        print("Wheel built successfully.")  # noqa: T201


def serve() -> None:
    with socketserver.TCPServer(("", 8000), CORSHTTPRequestHandler) as httpd:
        httpd.allow_reuse_address = True
        print("Serving at http://localhost:8000")  # noqa: T201
        try:
            httpd.serve_forever()
        except KeyboardInterrupt:
            pass
        httpd.server_close()
        print("Server stopped.")  # noqa: T201


cwd = os.getcwd()

if __name__ == "__main__":
    # Start the HTTP server in a separate thread
    threading.Thread(target=serve, daemon=True).start()

    # Set up the watchdog observer to watch the current directory
    observer = Observer()
    path = join(cwd, "marimo")
    observer.schedule(WheelBuilderHandler(), path=path, recursive=True)
    observer.start()

    print("Watching for changes. Press Ctrl+C to stop.")  # noqa: T201
    print(f"Watching directory: {path}")  # noqa: T201
    try:
        while True:
            observer.join(1)
    except KeyboardInterrupt:
        observer.stop()
    observer.join()


--- dagger/README.md ---
# Dagger

This directory contains Dagger scripts for building and testing marimo in a
containerized environment. This allows for running tests and builds in an
environment that is similar to CI.

To run a Dagger script, you need to have the Dagger CLI installed. You can install
it by following the instructions [here](https://docs.dagger.io/install).

To run a Dagger script, you can use the following command:

```bash
dagger functions                           # see what functions are available in the module
dagger call make <any make task>           # run make task in a dev environment
dagger call frontend test                  # run frontend tests
dagger call backend test                   # run backend tests
# run frontend tests on a remote pull request
dagger call --src https://github.com/marimo-team/marimo\#pull/2542/head frontend test
```


## Links discovered
- [here](https://docs.dagger.io/install)

--- dagger/src/main/backend.py ---
from typing import Annotated

import dagger
from dagger import Doc, field, function, object_type

from .env import Env


@object_type
class Backend:
    src: Annotated[dagger.Directory, Doc("The marimo source tree to use")] = (
        field()
    )

    @function
    async def test(self) -> dagger.Container:
        env = (
            Env()
            .py()
            .with_directory("/src", self.src, owner="nonroot")
            .with_workdir("/src")
            # from GHA: This step is needed since some of our tests rely on the index.html file
            .with_exec(["mkdir", "-p", "marimo/_static/assets"])
            .with_exec(
                ["cp", "frontend/index.html", "marimo/_static/index.html"]
            )
            .with_exec(
                [
                    "cp",
                    "frontend/public/favicon.ico",
                    "marimo/_static/favicon.ico",
                ]
            )
            .with_exec(["make", "py"])
            .with_exec(["hatch", "run", "lint"])
            .with_exec(["hatch", "run", "typecheck:check"])
        )

        await env.sync()

        # test:test
        await env.with_exec(
            [
                "hatch",
                "run",
                "+py=3.12",
                "test:test",
                "-v",
                "tests/",
                "-k",
                "not test_cli",
            ]
        ).sync()

        # test-optional:test
        return env.with_exec(
            [
                "hatch",
                "run",
                "+py=3.12",
                "test-optional:test",
                "-v",
                "tests/",
                "-k",
                "not test_cli",
            ]
        )


--- dagger/src/main/cli.py ---
from typing import Annotated

import dagger
from dagger import DefaultPath, Doc, Ignore, dag, field, function, object_type


@object_type
class Cli:
    src: Annotated[
        dagger.Directory,
        Doc("The marimo source tree to use"),
        DefaultPath("/"),
        Ignore(["/dagger", ".venv"]),
    ] = field()

    @function
    def test(self) -> dagger.Container:
        return (
            # python base
            dag.container().from_("python:3-bookworm")
        )


--- dagger/src/main/env.py ---
import dagger
from dagger import dag, function, object_type


@object_type
class Env:
    @function
    def dev(self) -> dagger.Container:
        """Dev container with dependencies for the full stack"""
        return (
            # python base
            self.py()
            .with_mounted_cache(
                "/root/.local/share/pnpm", dag.cache_volume("pnpm")
            )
            # package deps
            .with_exec(["apt", "update"])
            .with_exec(["apt", "install", "-y", "curl"])
            # install node 20+
            .with_exec(
                [
                    "sh",
                    "-c",
                    "curl -fsSL https://deb.nodesource.com/setup_20.x | bash -",  # noqa: E501
                ]
            )
            .with_exec(["apt", "install", "-y", "nodejs"])
            # install pnpm@9
            .with_exec(["npm", "install", "-g", "pnpm@9"])
        )

    @function
    def py(self) -> dagger.Container:
        """Python container with dependencies for the backend"""
        return (
            # python base
            dag.container()
            .from_("python:3.12-bookworm")
            .with_exec(["apt-get", "update"])
            .with_exec(
                [
                    "apt-get",
                    "install",
                    "-y",
                    "make",
                    "libgdal-dev",
                    "python3-gdal",
                ]
            )
            .with_exec(["adduser", "nonroot"])
            .with_mounted_cache(
                "/home/nonroot/.cache/pip",
                dag.cache_volume("python-312"),
                owner="nonroot",
            )
            .with_mounted_cache(
                "/home/nonroot/.cache/uv",
                dag.cache_volume("uv-python-312"),
                owner="nonroot",
            )
            .with_exec(["pip", "install", "hatch", "typos"])
            .with_user("nonroot")
        )

    @function
    def pnpm(self) -> dagger.Container:
        """A pnpm container with dependencies for the frontend"""
        return (
            dag.container()
            .from_("node:20-slim")
            .with_env_variable("CI", "true")
            .with_mounted_cache(
                "/root/.local/share/pnpm", dag.cache_volume("pnpm")
            )
            .with_exec(["corepack", "enable"])  # this enables pnpm
        )


--- dagger/src/main/frontend.py ---
from typing import Annotated

import dagger
from dagger import Doc, dag, field, function, object_type

from .env import Env


@object_type
class Frontend:
    src: Annotated[dagger.Directory, Doc("The marimo source tree to use")] = (
        field()
    )

    @function
    def test(
        self,
        turbo_token: dagger.Secret = dag.set_secret("DEFAULT", ""),  # noqa: B008
    ) -> dagger.Container:
        """
        Replace .github/workflows/test_fe.yaml
        """
        return (
            Env()
            .pnpm()
            .with_env_variable("MARIMO_SKIP_UPDATE_CHECK", "true")
            .with_secret_variable("TURBO_TOKEN", turbo_token)
            .with_env_variable("TURBO_TEAM", "marimo")
            .with_workdir("/src/frontend")
            .with_directory("/src", self.src)
            .with_exec(["pnpm", "install"])
            .with_exec(["pnpm", "dedupe", "--check"])
            .with_exec(["pnpm", "turbo", "lint"])
            .with_exec(["pnpm", "turbo", "typecheck"])
            .with_exec(["pnpm", "test"])
            .with_env_variable("NODE_ENV", "production")
            .with_exec(["pnpm", "turbo", "build"])
            .with_env_variable("VITE_MARIMO_ISLANDS", "true")
            .with_env_variable("VITE_MARIMO_VERSION", "0.0.0")
            .with_exec(["npm", "version", "0.0.0", "--no-git-tag-version"])
            .with_exec(["pnpm", "turbo", "build:islands"])
            .with_exec(["./islands/validate.sh"])
        )


--- dagger/src/main/__init__.py ---
"""A module for Marimo functions"""

from .main import Marimo

__all__ = ["Marimo"]


--- dagger/src/main/main.py ---
from typing import Annotated

import dagger
from dagger import DefaultPath, Doc, Ignore, field, function, object_type

from .backend import Backend
from .cli import Cli
from .env import Env
from .frontend import Frontend


@object_type
class Marimo:
    """A collection of tasks for the Marimo project."""

    src: Annotated[dagger.Directory, Doc("The marimo source tree to use")] = (
        field()
    )
    frontend: Annotated[Frontend, Doc("Frontend components")] = field()
    backend: Annotated[Backend, Doc("Backend components")] = field()
    cli: Annotated[Cli, Doc("CLI components")] = field()
    env: Annotated[Env, Doc("Test and Build environments")] = field()

    @classmethod
    def create(
        cls,
        src: Annotated[
            dagger.Directory,
            Doc("The marimo source tree to use"),
            DefaultPath("/"),
            Ignore(["**/dagger", "**/.venv"]),
        ],
    ) -> "Marimo":
        return cls(
            src=src,
            frontend=Frontend(src=src),
            backend=Backend(src=src),
            cli=Cli(src=src),
            env=Env(),
        )

    @function
    def make(
        self,
        task: Annotated[str, Doc("The make task to run")],
    ) -> dagger.Container:
        """A container that runs a make task."""
        return (
            self.env.dev()
            .with_directory("/src", self.src)
            .with_workdir("/src")
            .with_exec(["make", "install-all"])
            .with_exec(["make", task])
        )


--- frontend/e2e-tests/README.md ---
# E2E Tests

E2E tests use Playwright.

## Running Tests

```bash
pnpm playwright test                           # Run all e2e tests
pnpm playwright test e2e-tests/slides.spec.ts  # Run specific test
pnpm playwright test --ui                      # Interactive UI mode
```

## Rebuild Before Taking Screenshots

Rebuild the frontend for tests that take screenshots to view the latest changes.

```bash
make fe
pnpm playwright test
```


--- frontend/src/README.md ---
# File Structure

```
‚î£ üìÇassets - contains images assets
‚î£ üìÇcomponents - contains "connected" components (i.e connected to state/store), split up by domain
‚î£ üìÇcomponents/ui - re-usable "dumb" components
‚î£ üìÇcore - core logic of the app, split up by domain
‚î£ üìÇcss - various global css files
‚î£ üìÇfonts - app fonts
‚î£ üìÇhooks - shared, re-usable hooks
‚î£ üìÇmocks - shared mocks
‚î£ üìÇplugins - plugin logic
‚î£ üìÇplugins/impl - individual plugin implementations
‚î£ üìÇplugins/layout - individual "stateless" plugin implementations
‚î£ üìÇstories - storybook stories
‚î£ üìÇtheme - app theme
‚î£ üìÇutils - shared utils
```


--- frontend/src/components/data-table/charts/README.md ---
# Charts

In order to maintain a consistent look and feel across all charts, we have a few components that are used to build the charts.

## Components

#### layouts
Thin wrappers around @ui components that provide consistent styling and behavior.

#### form-fields
Form fields that are used for chart forms. Wraps react-hook-form components

#### chart-items
Components that are used to build the charts. Groups together common form fields and layouts.

## Context

To keep each component light and avoid prop drilling, we can either use react-hook-form's `useFormContext` or `use` to access shared state (`context.ts`).


Layouts:
 - TabContainer
 - AccordionConfigs
 

Chart Components:
 - ChartTypeSelect
 - XAxis
 - YAxis
 - ColorByAxis
 - Facet

Forms:
 - CommonChartForm
 - PieForm
 - BarForm
 - LineForm
 - ScatterForm
 - AreaForm
 - HeatmapForm
 - Style Form

Field Components:
 - ColumnSelector
 - DataTypeSelect
 - AggregationSelect
 - TooltipSelect
 - BooleanField
 - NumberField
 - SliderField
 - ColorArrayField
 - TimeUnitSelect
 - SelectField

<TabContainer>
    <TabsContent value="data">
        <FormSection>
            <FieldSection>
            </FieldSection>
        </FormSection>
    </TabsContent>
    <TabsContent value="style">
        <StyleForm />
    </TabsContent>
</TabContainer>

--- frontend/index.html ---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" href="/src/assets/gradient.png" as="image" />
    <link rel="preload" href="/src/assets/noise.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" href="/src/fonts/Lora/Lora-VariableFont_wght.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="/src/fonts/PT_Sans/PTSans-Regular.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="/src/fonts/PT_Sans/PTSans-Bold.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="/src/fonts/Fira_Mono/FiraMono-Regular.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="/src/fonts/Fira_Mono/FiraMono-Medium.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="/src/fonts/Fira_Mono/FiraMono-Bold.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        const scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          const element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          const hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          const newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((_entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>{{ filename }}</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title>{{ title }}</title>
  </head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = '{{ mount_config }}';
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>


--- frontend/AGENTS.md ---
# Frontend Guidelines

You are an expert in React, TypeScript, TailwindCSS, Jotai, Radix UI, Zod, React Hook Form, and modern UX design.

## Key Principles

- Write clear, maintainable code over clever/short syntax
- Use TypeScript with proper typing for all code
- Use functional programming patterns; avoid classes
- Favor composition over inheritance

## Naming Conventions

- **Directories**: lowercase with dashes (`components/auth-wizard/`)
- **Components**: PascalCase (`DashboardMenu.tsx`)
- **Variables**: descriptive with auxiliary verbs (`isLoading`, `hasError`, `canSubmit`)

## Path Aliases

```typescript
import { Button } from "@/components/ui/button";
import { cn } from "@/utils/cn";
```

## Lazy Loading

Use lazy loading for components that require heavy dependencies.

```typescript
import { lazy } from "react";
const LazyComponent = lazy(() => import("@/components/LazyComponent"));
```

## State Management with Jotai

While React hooks are preferred, Jotai is useful when you need to persist state outside of the React component tree or store in local storage.

Use `createReducerAndAtoms` for complex state, `atomFamily` for per-item atoms:

```typescript
import { atom, useAtomValue } from "jotai";
import { atomFamily } from "jotai/utils";
import { createReducerAndAtoms } from "@/utils/createReducer";

// Complex state with reducer pattern
const { useActions, valueAtom: notebookAtom } = createReducerAndAtoms(initialState, {
  createNewCell: (state, action: CreateNewCellAction) => ({ ...state, /* changes */ }),
});

// Derived atoms
export const cellIdsAtom = atom((get) => get(notebookAtom).cellIds);

// Per-item atoms (clean up with .remove() to prevent memory leaks)
export const cellDataAtom = atomFamily((cellId: CellId) =>
  atom((get) => get(notebookAtom).cellData[cellId])
);

// Imperative access outside React
import { store } from "@/core/state/jotai";
export const getNotebook = () => store.get(notebookAtom);

// Local storage
const sessionAtom = atomWithStorage<SessionState>("marimo:session", initialState, jotaiJsonStorage);
```

## UI and Styling

Use Tailwind with the `cn` utility. Custom UI components wrap Radix primitives in `@/components/ui/`:

```typescript
import { cn } from "@/utils/cn";

<div className={cn(
  "inline-flex items-center justify-center rounded-md",
  isActive && "bg-primary text-primary-foreground"
)} />
```

## Forms

Use React Hook Form with Zod validation:

```typescript
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";

const schema = z.object({ name: z.string().min(1), email: z.string().email() });
const form = useForm<z.infer<typeof schema>>({ resolver: zodResolver(schema) });
```

## Testing

### Unit Tests

Tests live alongside source files or in `__tests__` directories.

```bash
pnpm --filter @marimo-team/frontend test                            # All tests
pnpm --filter @marimo-team/frontend test src/__tests__/lru.test.ts  # Specific file
```

Best practices:
- test edge cases
- use descriptive names
- group with `describe`
- prefer complete assertions over individual property checks (e.g., `expect(result).toEqual(expected)` rather than checking each property separately)

### E2E Tests

E2E tests use Playwright. See [e2e-tests/README.md](e2e-tests/README.md) for details.

## Type Patterns

```typescript
// Pick/Omit for derived types
type CellBasics = Pick<CellRuntimeState, "status" | "output">;
interface ButtonProps extends Omit<VariantProps<typeof buttonVariants>, "disabled"> {}

// Record for object types
type Variables = Record<CellId, CellData>;

// Type guards
function isErrorMime(mimetype?: string): boolean {
  return mimetype === "application/vnd.marimo+error";
}
```

## Code Quality

```typescript
import { logNever } from "@/utils/logNever";
import { Logger } from "@/utils/Logger";

// Exhaustive switch handling
logNever(value);

// Logging
Logger.warn(`Cell ${cellId} not found`);
Logger.error(`Error in reducer:`, error);
```

Keep comments minimal. Comments should only explain "why", not "what".


## Links discovered
- [e2e-tests/README.md](https://github.com/marimo-team/marimo/blob/main/frontend/e2e-tests/README.md)

--- frontend/df-conversion.py ---
import marimo

__generated_with = "0.8.4"
app = marimo.App(width="medium")


@app.cell(hide_code=True)
def __():
    data = [
        {
            "block_number": 8021365,
            "blockNumber": 2216021,
            "txnHash": "0x991923a4d6979630dd6be2f81e8adda2cb5ed1c7be8912c6c8636c48be40b990",
            "bid": 250000000000000,
            "committer": "0x8280f34750068c67acf5366a5c7caea554c36fb5",
        }
    ]
    return data,


@app.cell(hide_code=True)
def __():
    import pandas as pd
    import marimo as mo
    return mo, pd


@app.cell
def __(data, mo, pd):
    mo.ui.table(pd.DataFrame(data))
    return


@app.cell
def __(data, mo, pd):
    mo.ui.dataframe(pd.DataFrame(data))
    return


if __name__ == "__main__":
    app.run()


--- frontend/playwright.config.ts ---
/* Copyright 2026 Marimo. All rights reserved. */

import { exec } from "node:child_process";
import path from "node:path";
import type { PlaywrightTestConfig } from "@playwright/test";
import { devices } from "@playwright/test";

export type ServerOptions =
  | {
      readonly command: "run";
      readonly port: number;
      readonly baseUrl?: string | undefined;
    }
  | {
      readonly command: "edit";
      /**
       * @default EDIT_PORT (2718)
       */
      readonly port?: number;
    };

// Location of python files needed for testing
const pydir = path.join("e2e-tests", "py");

// Each app is served by a different server.
const EDIT_PORT = 2718;
let _port = 2719;
function port(): number {
  return _port++;
}

// Configuration for each app
const appToOptions = {
  // Edit
  "title.py": { command: "edit" },
  "streams.py": { command: "edit" },
  "bad_button.py": { command: "edit" },
  "bugs.py": { command: "edit" },
  "cells.py": { command: "edit" },
  "disabled_cells.py": { command: "edit" },
  "kitchen_sink.py": { command: "edit" },
  "layout_grid.py": { command: "edit" },
  "stdin.py": { command: "edit" },
  "layout_grid_with_sidebar.py": { command: "edit" },
  "slides.py": { command: "edit" },
  // Custom server for shutdown
  "shutdown.py": { command: "edit", port: port() },
  // Run
  "components.py": { port: port(), command: "run" },
  "layout_grid.py//run": { port: port(), command: "run" },
  "layout_grid_max_width.py//run": { port: port(), command: "run" },
  "layout_grid_with_sidebar.py//run": { port: port(), command: "run" },
  "output.py//run": {
    port: port(),
    command: "run",
    baseUrl: "/foo",
  },
} satisfies Record<string, ServerOptions>;

export type ApplicationNames = keyof typeof appToOptions;

function getUrl(port: number, baseUrl = "", queryParams = ""): string {
  return `http://127.0.0.1:${port}${baseUrl}${queryParams}`;
}

// For tests to lookup their url/server
export function getAppUrl(app: ApplicationNames): string {
  const options: ServerOptions = appToOptions[app];
  if (!options) {
    throw new Error(`No server options for app: ${app}`);
  }
  if (options.command === "edit") {
    const pathToApp = path.join(pydir, app);
    return getUrl(EDIT_PORT, "", `?file=${pathToApp}`);
  }
  return getUrl(options.port, options.baseUrl);
}
export function getAppMode(app: ApplicationNames): "edit" | "run" {
  const options: ServerOptions = appToOptions[app];
  if (!options) {
    throw new Error(`No server options for app: ${app}`);
  }
  return options.command;
}

// Reset file via git checkout
export async function resetFile(app: ApplicationNames): Promise<void> {
  const pathToApp = path.join(pydir, app);
  const cmd = `git checkout -- ${pathToApp}`;
  await new Promise((resolve, reject) => {
    exec(cmd, (error) => {
      if (error) {
        reject(error);
      } else {
        resolve(undefined);
      }
    });
  });
  return;
}

// Start marimo server for the given app
export function startServer(app: ApplicationNames): void {
  const options: ServerOptions = appToOptions[app];
  if (!options) {
    throw new Error(`No server options for app: ${app}`);
  }
  const port = options.port ?? EDIT_PORT;
  const pathToApp = path.join(pydir, app);
  const marimoCmd = `uv run marimo -q ${options.command} ${pathToApp} -p ${port} --headless`;
  exec(marimoCmd);
}

// const WASM_SERVER = {
//   command: "PYODIDE=true vite --port 3000",
//   url: "http://localhost:3000",
//   reuseExistingServer: !!process.env.CI,
// };

// See https://playwright.dev/docs/test-configuration.
const config: PlaywrightTestConfig = {
  testDir: "./e2e-tests",
  // Maximum time one test can run for
  timeout: 30 * 1000, // 30s
  expect: {
    // Maximum time expect() should wait for the condition to be met.
    // For example in `await expect(locator).toHaveText();`
    timeout: 5 * 1000, // 5s
  },
  // Run tests in files in parallel
  fullyParallel: false,
  // Fail the build on CI if you accidentally left test.only in the source
  forbidOnly: !!process.env.CI,
  // Retry on CI only
  retries: process.env.CI ? 2 : 0,
  // Number of workers to use. Defaults to 1.
  workers: 1,
  // Reporter to use. See https://playwright.dev/docs/test-reporters
  reporter: "html",
  // Enable stdout/stderr for better debugging
  quiet: false,
  // Shared settings for all the projects below. See
  // https://playwright.dev/docs/api/class-testoptions.
  use: {
    // Max time each action can take
    actionTimeout: 5 * 1000, // 5s
    // Navigation timeout
    navigationTimeout: 10 * 1000, // 10s
    // Collect trace when retrying the failed test
    trace: "on-first-retry",
    // Take screenshot on failure
    screenshot: "only-on-failure",
  },

  // Global setup for better test isolation
  globalSetup: "./e2e-tests/global-setup.ts",
  globalTeardown: "./e2e-tests/global-teardown.ts",

  // TODO(akshayka): Consider testing on firefox
  projects: [
    {
      name: "chromium",
      use: {
        ...devices["Desktop Chrome"],
        // Add viewport for consistency
        viewport: { width: 1280, height: 720 },
      },
      testIgnore: ["**/cells.spec.ts", "**/disabled.spec.ts"],
    },
    //    Re-enable later ...
    //    {
    //      name: "webkit",
    //      use: { ...devices["Desktop Safari"] },
    //      testIgnore: [
    //        // This test uses keyboard shortcuts which seem to work locally with webkit, but not on CI
    //        // Disable this test until we can figure out why
    //        "**/cells.spec.ts",
    //      ],
    //    },
    //    {
    //      name: "ios",
    //      use: { ...devices["iPhone 13"] },
    //      // Just run the cells tests for read-only apps
    //      testMatch: ["**/components.spec.ts", "**/mode.spec.ts"],
    //    },
  ],

  // Run marimo servers before starting the tests, one for each app/test
  webServer: [
    ...Object.entries(appToOptions).flatMap(([app, opts]) => {
      const options = opts as ServerOptions;
      app = app.replace("//edit", "").replace("//run", "");

      const { command, port } = options;
      if (!port) {
        return [];
      }

      const baseUrl = command === "run" ? options.baseUrl : undefined;

      const pathToApp = path.join(pydir, app);
      let marimoCmd = `uv run marimo -q ${command} ${pathToApp} -p ${port} --headless --no-token`;
      if (baseUrl) {
        marimoCmd += ` --base-url=${baseUrl}`;
      }

      return {
        command: marimoCmd,
        url: getUrl(port, baseUrl),
        reuseExistingServer: true,
        timeout: 30 * 1000,
        ignoreHTTPSErrors: true,
        // Add stdout/stderr for debugging
        stdout: "pipe" as const,
        stderr: "pipe" as const,
      };
    }),
    {
      command: `uv run marimo -q edit -p ${EDIT_PORT} --headless --no-token`,
      url: getUrl(EDIT_PORT),
      reuseExistingServer: true,
      timeout: 30 * 1000,
      ignoreHTTPSErrors: true,
      // Add stdout/stderr for debugging
      stdout: "pipe" as const,
      stderr: "pipe" as const,
    },
    // WASM_SERVER,
  ],
};

export default config;


--- frontend/technology-decisions.md ---
# Technology Decisions

Quick-hit list of technologies used and why, for the frontend.

- [Vite](https://vitejs.dev/) - Fast dev server, great devX, and a good fit for our needs. Marimo is Javascript heavy so using any SSR framework is not necessary at the moment (although Vite does support SSR frameworks that can be added as plugins).
- [TailwindCSS](https://tailwindcss.com/) - Utility-first CSS framework. It has a great API for theming to enforce design system consistency. Large community and ecosystem.
- [Radix UI](https://www.radix-ui.com/) - Unstyled Component Library that's accessible and has a good API.
- [Radix Colors](https://www.radix-ui.com/colors) - Color palette. It's a great color palette that's accessible and has a good range of colors, supporting light and dark modes.
- [ESLint](https://eslint.org/) - Linter for Typescript. Pretty much the standard for linting.
- [Biome](https://biomejs.dev/) - Fast code formatter
- [MSW](https://mswjs.io/) - Mocking library for API calls. Great for testing and development.
- [Playwright](https://playwright.dev/) - E2E testing library. Great for testing and development. It's faster than Cypress and has a better API.
- [jotai](https://jotai.org/) - State management library to avoid re-renders. Great for simple state management. It's a lot simpler than Redux and has a better API.


## Links discovered
- [Vite](https://vitejs.dev/)
- [TailwindCSS](https://tailwindcss.com/)
- [Radix UI](https://www.radix-ui.com/)
- [Radix Colors](https://www.radix-ui.com/colors)
- [ESLint](https://eslint.org/)
- [Biome](https://biomejs.dev/)
- [MSW](https://mswjs.io/)
- [Playwright](https://playwright.dev/)
- [jotai](https://jotai.org/)

--- frontend/test_retina.py ---
import marimo

__generated_with = "0.17.7"
app = marimo.App(width="medium")


@app.cell
def _():
    return


@app.cell
def _():
    import marimo as mo
    import matplotlib.pyplot as plt
    import numpy as np
    return np, plt


@app.cell
def _(np, plt):
    # Test from the original issue
    x = np.random.rand(27)
    y = 20 - np.linspace(2, 20, 27) * x

    plt.figure(figsize=(6, 4))
    plt.scatter(x, y)
    plt.title("Retina Test - Should be crisp!")
    plt.xlabel("X values")
    plt.ylabel("Y values")
    plt.gca()
    return


@app.cell
def _(plt):
    # Another test with a line plot
    fig, ax = plt.subplots(figsize=(8, 6))
    ax.plot([1, 2, 3, 4], [1, 4, 2, 3], marker="o", linestyle="-", linewidth=2)
    ax.set_title("Line Plot - Retina Test")
    ax.grid(True)
    fig
    return


if __name__ == "__main__":
    app.run()


--- frontend/vitest.config.ts ---
/* Copyright 2026 Marimo. All rights reserved. */

import react from "@vitejs/plugin-react";
import { defineConfig } from "vitest/config";

export default defineConfig({
  test: {
    environment: "jsdom",
    include: ["src/**/*.test.ts", "src/**/*.test.tsx"],
    setupFiles: ["src/__tests__/setup.ts"],
    sequence: {
      hooks: "parallel", // Maintain parallel hook execution from Vitest 1.x
    },
    watch: false,
    server: {
      deps: {
        // Inline streamdown so it gets processed by Vite's transform pipeline.
        // This allows CSS imports from streamdown's dependencies (e.g., katex CSS) to be processed.
        inline: [/streamdown/],
      },
    },
  },
  resolve: {
    tsconfigPaths: true,
  },
  plugins: [react()],
});


--- marimo/_schemas/README.md ---
# Schemas

This directory contains the schemas for the notebook, session, and kernel messages.

## Available Schemas

- **notebook.py**: Schema for the notebook file format
- **session.py**: Schema for the notebook session (outputs, console, etc.)
- **notifications** (from `marimo/_messaging/notification.py`): Schema for kernel notifications sent to the client

## How to update the schemas

1. Run `python scripts/generate_schemas.py` to generate the OpenAPI schema.
2. Run `make fe-codegen` to generate the frontend types.

## Schema backwards compatibility

We check for backwards compatibility using a GitHub action: `.github/workflows/test_schemas.yaml`

This will check that the OpenAPI schema is backwards compatible.

## Adding a new schema

1. Add the new schema to the `marimo/_schemas` directory.
2. Run `marimo edit scripts/generate_schemas.py` and add the schema (should be analogous to others).
3. Run `make fe-codegen` to generate the frontend types.
4. Add the new schema GitHub action to `.github/workflows/test_schemas.yaml`


--- marimo/AGENTS.md ---
# Python Backend Guidelines

You are an expert in Python, websockets protocol, and Starlette/ASGI web frameworks.

## Key Principles

- Prioritize readability and maintainability; follow PEP 8 (79 char line limit)
- Use type hints consistently throughout the codebase
- Use descriptive variable and function names (lowercase with underscores)
- Use `Final` for constants: `_name: Final[str] = "marimo-tabs"`
- Private modules use `_` prefix (e.g., `_plugins`, `_server`, `_utils`)

## Type Hints

- Use modern typing syntax (`list[str]` not `List[str]`, `str | None` not `Optional[str]`)

## Error Handling

- Raise specific exceptions, never bare `raise Exception`
- Use `HTTPException` with appropriate status codes for API errors:

```python
from marimo._utils.http import HTTPStatus
raise HTTPException(status_code=HTTPStatus.BAD_REQUEST, detail="AI is not configured.")
```

## Logging

```python
from marimo import _loggers
LOGGER = _loggers.marimo_logger()

LOGGER.debug("Diagnostic info: %s", value)      # troubleshooting
LOGGER.info("Standard operation: %s", value)    # normal events
LOGGER.warning("Unexpected but handled: %s", value)  # recoverable issues
LOGGER.error("Functionality broken: %s", value) # critical errors
```

Use `%s` formatting (not f-strings) for lazy evaluation. Never log sensitive data.

## Dataclasses vs msgspec

Use **msgspec.Struct** for API models (everything in `_server/models/`), commands, and fast JSON serialization:

```python
import msgspec

class SaveNotebookRequest(msgspec.Struct, rename="camel"):
    cell_ids: list[CellId_t]
    codes: list[str]
    filename: str
    persist: bool = True
```

Use **dataclasses** for internal structures, test fixtures, and complex initialization.

## Import handling

Heavy dependencies must be imported lazily (banned at module level by ruff):

```python
def get_dataframe():
    import pandas as pd  # altair, duckdb, numpy, polars, pyarrow, sqlglot, etc.
    return pd.DataFrame()
```

Besides heavy dependencies, always import at the top of the file. If there are circular imports, it means the file structure is not optimal. Refactor code to remove circular dependencies.

## Testing

Tests live in `tests/` folder, mirroring `marimo/` structure.

```bash
uvx hatch run +py=3.12 test:test tests/path/to/test.py
uvx hatch run +py=3.12 test-optional:test tests/path/to/test.py  # with optional deps
```

### Best Practices

```python
# Focus on single use-case per test
def test_number_init() -> None:
    number = ui.number(1, 10)
    assert number.start == 1 and number.stop == 10

# Test error cases with context managers
def test_number_out_of_bounds() -> None:
    with pytest.raises(ValueError) as e:
        ui.number(1, 10, value=11)
    assert "must be less than or equal" in str(e.value)

# Use parametrize to create exhaustive test cases
@pytest.mark.parametrize(("a", "b"), [(1, 2), (2, 3)])
def test_add(a, b):
    assert a + b == 3

# Group test cases by class or in different files
class TestDecimals:
    def test_decimal_init(self) -> None:
        ...

    def test_decimal_out_of_bounds(self) -> None:
        ...

# Use fixtures for setup and teardown
@pytest.fixture
def k() -> Generator[Kernel, None, None]:
    mocked = MockedKernel()
    yield mocked.k
    mocked.teardown()

# Prefer complete assertions over individual attribute checks
# This catches unexpected changes and makes test failures more informative
assert obj == expected  # GOOD: validates entire object state
# assert obj.attr == expected.attr  # AVOID: misses other attributes that may have changed

# Snapshot testing for complex outputs
from tests.mocks import snapshotter
snapshot = snapshotter(__file__)
snapshot(filename, output)
```

### Debugging Issues

1. Create a test case that reproduces the issue.
2. Run the test case and inspect the issue.
2. Add debug prints if root cause unclear.

## Code Style

- Google-style docstrings
- Explicit encoding in `open()`
- Typecheck and lint with `make py-check`
- Use `log_never` to ensure exhaustive handling
- Comments explain "why", not "what" - keep minimal


--- marimo/__init__.py ---
# Copyright 2026 Marimo. All rights reserved.
"""The marimo library.

The marimo library brings marimo notebooks to life with powerful
UI elements to interact with and transform data, dynamic markdown,
and more.

marimo is designed to be:

    1. simple
    2. immersive
    3. interactive
    4. seamless
    5. fun
"""

__all__ = [
    # Core API
    "App",
    "Cell",
    "AppMeta",
    "create_asgi_app",
    "MarimoIslandGenerator",
    "MarimoStopError",
    "Thread",
    "current_thread",
    # Other namespaces
    "ai",
    "ui",
    "islands",
    # Application elements
    "accordion",
    "app_meta",
    "as_html",
    "audio",
    "cache",
    "callout",
    "capture_stderr",
    "capture_stdout",
    "carousel",
    "center",
    "cli_args",
    "defs",
    "doc",
    "download",
    "hstack",
    "Html",
    "icon",
    "iframe",
    "image",
    "image_compare",
    "inspect",
    "json",
    "latex",
    "lazy",
    "left",
    "lru_cache",
    "md",
    "mermaid",
    "mpl",
    "nav_menu",
    "notebook_dir",
    "notebook_location",
    "outline",
    "output",
    "pdf",
    "persistent_cache",
    "plain",
    "plain_text",
    "query_params",
    "redirect_stderr",
    "redirect_stdout",
    "refs",
    "right",
    "routes",
    "running_in_notebook",
    "show_code",
    "sidebar",
    "sql",
    "stat",
    "state",
    "status",
    "stop",
    "style",
    "tabs",
    "tree",
    "video",
    "vstack",
    "watch",
    "__version__",
]
import marimo._ai as ai
import marimo._islands as islands
import marimo._runtime.watch as watch
from marimo._ast.app import App
from marimo._ast.cell import Cell
from marimo._islands._island_generator import MarimoIslandGenerator
from marimo._output.doc import doc
from marimo._output.formatting import as_html, iframe, plain
from marimo._output.hypertext import Html
from marimo._output.justify import center, left, right
from marimo._output.md import latex, md
from marimo._output.outline import outline
from marimo._output.show_code import show_code
from marimo._plugins import ui
from marimo._plugins.stateless import mpl, status
from marimo._plugins.stateless.accordion import accordion
from marimo._plugins.stateless.audio import audio
from marimo._plugins.stateless.callout import callout
from marimo._plugins.stateless.carousel import carousel
from marimo._plugins.stateless.download import download
from marimo._plugins.stateless.flex import hstack, vstack
from marimo._plugins.stateless.icon import icon
from marimo._plugins.stateless.image import image
from marimo._plugins.stateless.image_compare import image_compare
from marimo._plugins.stateless.inspect import inspect
from marimo._plugins.stateless.json_component import json
from marimo._plugins.stateless.lazy import lazy
from marimo._plugins.stateless.mermaid import mermaid
from marimo._plugins.stateless.nav_menu import nav_menu
from marimo._plugins.stateless.pdf import pdf
from marimo._plugins.stateless.plain_text import plain_text
from marimo._plugins.stateless.routes import routes
from marimo._plugins.stateless.sidebar import sidebar
from marimo._plugins.stateless.stat import stat
from marimo._plugins.stateless.style import style
from marimo._plugins.stateless.tabs import tabs
from marimo._plugins.stateless.tree import tree
from marimo._plugins.stateless.video import video
from marimo._runtime import output
from marimo._runtime.app_meta import AppMeta
from marimo._runtime.capture import (
    capture_stderr,
    capture_stdout,
    redirect_stderr,
    redirect_stdout,
)
from marimo._runtime.context.utils import running_in_notebook
from marimo._runtime.control_flow import MarimoStopError, stop
from marimo._runtime.runtime import (
    app_meta,
    cli_args,
    defs,
    notebook_dir,
    notebook_location,
    query_params,
    refs,
)
from marimo._runtime.state import state
from marimo._runtime.threads import Thread, current_thread
from marimo._save.save import cache, lru_cache, persistent_cache
from marimo._server.asgi import create_asgi_app
from marimo._sql.sql import sql
from marimo._version import __version__


--- marimo/_loggers.py ---
# Copyright 2026 Marimo. All rights reserved.
from __future__ import annotations

import io
import logging
from contextlib import contextmanager
from logging.handlers import TimedRotatingFileHandler
from typing import TYPE_CHECKING, Optional

from marimo._utils.log_formatter import LogFormatter

if TYPE_CHECKING:
    from collections.abc import Generator, Iterator
    from pathlib import Path

# This file manages and creates loggers used throughout marimo.
#
# It contains a global log level, which can be updated and all handlers
# will be updated to use the new level.
#
# Our loggers contain two handlers:
# - A StreamHandler to stdout
# - A FileHandler to a rotating log file
#
# The stream handler is set to the global log level, but the file handler
# is set to either INFO or DEBUG, depending on the global log level.
#
# NB: As is best practice for Python libraries, we do not configure the
# root logger, and in particular we don't call basicConfig() (which would
# preclude client of our library from configuring the root logger to their
# own end).
# See https://docs.python.org/3/howto/logging.html#configuring-logging-for-a-library

# Global log level for loggers
_LOG_LEVEL: int = logging.WARNING

# Custom log formatter
_LOG_FORMATTER = LogFormatter()

# Cache of initialized loggers
_LOGGERS: dict[str, logging.Logger] = {}


class WindowsSafeRotatingFileHandler(TimedRotatingFileHandler):
    """
    A Windows-compatible rotating file handler that closes the file
    before rotation to avoid PermissionError on Windows.

    On Windows, TimedRotatingFileHandler.doRollover() can fail with
    PermissionError when attempting to rename a file that's still open
    by another process or handler.
    """

    def doRollover(self) -> None:
        """
        Override doRollover to close the stream before rotation on Windows.
        """
        if self.stream:
            self.stream.close()
            self.stream = None  # type: ignore[assignment]
        try:
            super().doRollover()
        except PermissionError:
            # If rotation fails, log the error but don't crash
            # The log file will continue to grow until the lock is released
            pass
        finally:
            # Reopen the stream
            if self.stream is None:
                self.stream = self._open()


def log_level_string_to_int(level: str) -> int:
    level = level.upper()
    if level == "DEBUG":
        return logging.DEBUG
    elif level == "INFO":
        return logging.INFO
    elif level == "WARN":
        return logging.WARNING
    elif level == "WARNING":
        return logging.WARNING
    elif level == "ERROR":
        return logging.ERROR
    elif level == "CRITICAL":
        return logging.CRITICAL
    else:
        raise ValueError(f"Unrecognized log level {level}")


def set_level(level: str | int = logging.WARNING) -> None:
    """Globally set the log level for all loggers."""

    global _LOG_LEVEL
    if isinstance(level, str):
        _LOG_LEVEL = log_level_string_to_int(level)
    elif level not in [
        logging.DEBUG,
        logging.INFO,
        logging.WARNING,
        logging.ERROR,
        logging.CRITICAL,
    ]:
        raise ValueError(f"Unrecognized log level {level}")
    else:
        _LOG_LEVEL = level

    for logger in _LOGGERS.values():
        # We have to set update the logger's level in order
        # for its handlers level's to be respected.
        # but it needs to be set to the minimum LOG_LEVEL and INFO
        # so the file handler can still pick it up
        logger.setLevel(min(_LOG_LEVEL, logging.INFO))
        for handler in logger.handlers:
            if isinstance(handler, logging.FileHandler):
                # Don't increase the log level of a file handler
                handler.setLevel(min(_LOG_LEVEL, handler.level))
            elif isinstance(handler, logging.StreamHandler):
                handler.setLevel(_LOG_LEVEL)


def get_logger(name: str, level: Optional[int] = None) -> logging.Logger:
    """
    Get a logger with a given name and level.
    If the logger is already created, we return the cached logger.
    Otherwise, we create a new logger and cache it.
    """

    # Cache loggers
    if name in _LOGGERS:
        return _LOGGERS[name]

    # Create logger
    logger = logging.getLogger(name)

    # Stream to stdout
    # We set the level on the StreamHandler, instead of the Logger,
    # because the FileHandler may have a different level
    stream_handler = logging.StreamHandler()
    stream_handler.setFormatter(_LOG_FORMATTER)
    if level is None:
        stream_handler.setLevel(_LOG_LEVEL)
        logger.setLevel(_LOG_LEVEL)
    else:
        stream_handler.setLevel(level)
        logger.setLevel(level)

    logger.addHandler(stream_handler)

    # Cache logger
    _LOGGERS[name] = logger

    # Don't propagate to parent loggers
    logger.propagate = False
    return logger


has_added_handler = False


def marimo_logger() -> logging.Logger:
    """Get a logger for marimo."""
    logger = get_logger("marimo")

    # Add file handler to log to file
    global has_added_handler
    if not has_added_handler:
        has_added_handler = True
        try:
            logger.addHandler(_file_handler())
        except Exception as e:
            logger.debug(f"Failed to add file handler: {e}")

    return logger


def get_log_directory() -> Path:
    from marimo._utils.xdg import marimo_log_dir

    return marimo_log_dir()


def make_log_directory() -> None:
    try:
        log_dir = get_log_directory()
        log_dir.mkdir(parents=True, exist_ok=True)
    except Exception as e:
        marimo_logger().debug(f"Failed to create log directory: {e}")


def _file_handler() -> logging.FileHandler:
    from marimo._utils.platform import is_windows

    make_log_directory()

    # Use Windows-safe handler on Windows to avoid PermissionError during rotation
    handler_class = (
        WindowsSafeRotatingFileHandler
        if is_windows()
        else TimedRotatingFileHandler
    )

    # We log to the same file daily, and keep the last 7 days of logs
    file_handler = handler_class(
        get_log_directory() / "marimo.log",
        when="D",
        interval=1,
        backupCount=7,
        encoding="utf-8",
    )
    file_log_formatter = LogFormatter(
        fmt="[%(asctime)s] %(levelname)-8s %(name)s:%(lineno)d - %(message)s",
        datefmt="%Y-%m-%d %H:%M:%S",
        color=False,
    )
    file_handler.setFormatter(file_log_formatter)

    # We set this to either INFO or DEBUG, depending on the global log level
    file_handler.setLevel(min(_LOG_LEVEL, logging.INFO))

    return file_handler


class ListHandler(logging.Handler):
    """Log handler that captures records in a list for processing."""

    def __init__(self, level: int = logging.NOTSET) -> None:
        super().__init__(level)
        self.records: list[logging.LogRecord] = []

    def emit(self, record: logging.LogRecord) -> None:
        self.records.append(record)


@contextmanager
def capture_output(
    *, log_level: int = logging.DEBUG
) -> Iterator[tuple[io.StringIO, io.StringIO, list[logging.LogRecord]]]:
    """
    Capture stdout, stderr, and log records during execution.

    Yields: (stdout_buf, stderr_buf, log_records)
    - log_records are raw LogRecord objects with full metadata (name, level, pathname, lineno, created, etc.).
    - Log emission to existing handlers is silenced inside the context.
    """
    import contextlib

    logger = marimo_logger()
    out, err = io.StringIO(), io.StringIO()
    h: ListHandler = ListHandler(log_level)

    # Snapshot and suppress existing handlers
    old_handlers, old_propagate = logger.handlers[:], logger.propagate
    logger.addHandler(h)
    logger.handlers = [h]
    logger.propagate = False

    try:
        with contextlib.redirect_stdout(out), contextlib.redirect_stderr(err):
            yield out, err, h.records
    finally:
        logger.removeHandler(h)
        logger.handlers = old_handlers
        logger.propagate = old_propagate


@contextmanager
def suppress_warnings_logs(name: str) -> Generator[None, None, None]:
    """Suppress logs for a given logger."""
    logger = get_logger(name)
    original_level = logger.level
    logger.setLevel(logging.ERROR)
    try:
        yield
    finally:
        logger.setLevel(original_level)


--- marimo/__main__.py ---
# Copyright 2026 Marimo. All rights reserved.
from __future__ import annotations

from marimo._cli.cli import main

if __name__ == "__main__":
    main(prog_name="marimo")


--- marimo/third_party.txt ---
The contents below were generated with 'make license-snapshot', using the nlf node package.
See third_party_licenses.txt for license texts.

@ai-sdk/react@1.2.12 [license(s): Apache-2.0]
‚îî‚îÄ‚îÄ package.json:  Apache-2.0

@anywidget/types@0.2.0 [license(s): MIT]
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

@cloudflare/workers-types@4.20250528.0 [license(s): MIT OR Apache-2.0]
‚îî‚îÄ‚îÄ package.json:  MIT OR Apache-2.0

@codemirror/autocomplete@6.18.6 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/commands@6.8.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/lang-markdown@6.3.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/lang-python@6.2.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/lang-sql@6.8.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/language@6.11.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/language-data@6.5.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/legacy-modes@6.5.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/lint@6.8.5 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/search@6.5.10 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/state@6.5.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/theme-one-dark@6.1.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@codemirror/view@6.36.6 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@dagrejs/dagre@1.1.4 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ readme files: MIT

@date-fns/tz@1.2.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@dnd-kit/core@6.3.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@dnd-kit/modifiers@9.0.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@dnd-kit/sortable@10.0.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@dnd-kit/utilities@3.2.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@emotion/cache@11.14.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@emotion/react@11.14.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@hookform/resolvers@3.10.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@internationalized/date@3.8.0 [license(s): Apache, Apache-2.0]
‚îú‚îÄ‚îÄ package.json:  Apache-2.0
‚îî‚îÄ‚îÄ license files: Apache

@lezer/common@1.2.3 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

@lezer/highlight@1.2.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

@lezer/lr@1.4.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

@lezer/markdown@1.4.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

@lezer/python@1.1.17 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

@marimo-team/codemirror-ai@0.1.11 [license(s): Apache, Apache-2.0]
‚îú‚îÄ‚îÄ package.json:  Apache-2.0
‚îî‚îÄ‚îÄ license files: Apache

@marimo-team/codemirror-languageserver@1.15.14 [license(s): BSD, BSD-3-Clause]
‚îú‚îÄ‚îÄ package.json:  BSD-3-Clause
‚îî‚îÄ‚îÄ readme files: BSD

@marimo-team/frontend@0.0.0-placeholder [license(s): Apache-2.0]
‚îî‚îÄ‚îÄ package.json:  Apache-2.0

@marimo-team/marimo-api@0.1.0 [license(s): Apache-2.0]
‚îî‚îÄ‚îÄ package.json:  Apache-2.0

@marimo-team/react-slotz@0.1.10 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

@mui/material@6.4.11 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@open-rpc/client-js@1.8.1 [license(s): Apache, Apache-2.0]
‚îú‚îÄ‚îÄ package.json:  Apache-2.0
‚îî‚îÄ‚îÄ license files: Apache

@paralleldrive/cuid2@2.2.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/colors@3.0.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/primitive@1.1.2 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

@radix-ui/react-accordion@1.2.8 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-alert-dialog@1.1.11 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-checkbox@1.2.3 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-compose-refs@1.1.2 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

@radix-ui/react-context-menu@2.2.12 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-dialog@1.1.11 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-dropdown-menu@2.1.12 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-icons@1.3.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

@radix-ui/react-label@2.1.4 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-navigation-menu@1.2.10 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-popover@1.1.11 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-progress@1.1.4 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-radio-group@1.3.4 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-scroll-area@1.2.6 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-select@2.2.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-slider@1.3.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-slot@1.2.0 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

@radix-ui/react-switch@1.2.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-tabs@1.1.9 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-toast@1.2.11 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-toggle@1.1.6 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-tooltip@1.2.4 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@radix-ui/react-use-callback-ref@1.1.1 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

@radix-ui/react-use-controllable-state@1.2.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@react-aria/focus@3.20.2 [license(s): Apache, Apache-2.0]
‚îú‚îÄ‚îÄ package.json:  Apache-2.0
‚îî‚îÄ‚îÄ license files: Apache

@replit/codemirror-vim@6.3.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@tailwindcss/typography@0.5.16 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@tanstack/react-table@8.21.3 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@textea/json-viewer@4.0.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@types/eslint@9.6.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@types/eslint-scope@3.7.7 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@types/humanize-duration@3.27.4 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@types/js-cookie@3.0.6 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@types/jsdom@21.1.7 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@types/node@20.17.32 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@types/react@18.3.20 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@types/react-grid-layout@1.3.5 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@uidotdev/usehooks@2.4.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

@uiw/codemirror-extensions-langs@4.23.11 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ readme files: MIT

@uiw/react-codemirror@4.23.10 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ readme files: MIT

@uwdata/flechette@1.1.2 [license(s): BSD, BSD-3-Clause]
‚îú‚îÄ‚îÄ package.json:  BSD-3-Clause
‚îî‚îÄ‚îÄ license files: BSD

@valtown/codemirror-codeium@1.1.1 [license(s): ISC, MIT]
‚îú‚îÄ‚îÄ package.json:  ISC
‚îî‚îÄ‚îÄ license files: ISC, MIT

@xterm/addon-attach@0.11.0 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

@xterm/addon-fit@0.10.0 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

@xterm/xterm@5.5.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ readme files: MIT

ag-grid-community@32.3.7 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

ag-grid-react@32.3.7 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

ai@4.3.13 [license(s): Apache-2.0]
‚îî‚îÄ‚îÄ package.json:  Apache-2.0

ansi_up@6.0.5 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

class-variance-authority@0.7.1 [license(s): Apache, Apache-2.0]
‚îú‚îÄ‚îÄ package.json:  Apache-2.0
‚îî‚îÄ‚îÄ license files: Apache

clsx@2.1.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

cmdk@1.1.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

compassql@0.21.2 [license(s): BSD-3-Clause]
‚îî‚îÄ‚îÄ package.json:  BSD-3-Clause

cssnano@7.0.6 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

date-fns@4.1.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

dequal@2.0.3 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

eslint-plugin-header@3.1.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ readme files: MIT

htm@3.1.1 [license(s): Apache, Apache-2.0]
‚îú‚îÄ‚îÄ package.json:  Apache-2.0
‚îî‚îÄ‚îÄ license files: Apache

html-react-parser@5.2.3 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

html-to-image@1.11.13 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

humanize-duration@3.32.1 [license(s): Unlicense]
‚îî‚îÄ‚îÄ package.json:  Unlicense

iconify-icon@2.3.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

jotai@2.12.3 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

js-cookie@3.0.5 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

katex@0.16.22 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

lodash-es@4.17.21 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

loro-codemirror@0.1.6 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

loro-crdt@1.5.4 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

lucide-react@0.503.0 [license(s): ISC]
‚îú‚îÄ‚îÄ package.json:  ISC
‚îú‚îÄ‚îÄ license files: ISC
‚îî‚îÄ‚îÄ readme files: ISC

lz-string@1.5.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

marked@15.0.11 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

mermaid@11.6.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

partysocket@1.1.3 [license(s): ISC, MIT]
‚îú‚îÄ‚îÄ package.json:  ISC
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

path-to-regexp@8.2.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

plotly.js@2.35.3 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

pyodide@0.27.5 [license(s): Apache-2.0]
‚îî‚îÄ‚îÄ package.json:  Apache-2.0

react-arborist@3.4.3 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

react-aria-components@1.8.0 [license(s): Apache, Apache-2.0]
‚îú‚îÄ‚îÄ package.json:  Apache-2.0
‚îî‚îÄ‚îÄ license files: Apache

react-codemirror-merge@4.23.10 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ readme files: MIT

react-dropzone@14.3.8 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

react-error-boundary@5.0.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

react-grid-layout@1.5.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

react-hook-form@7.54.2 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

react-markdown@9.1.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

react-plotly.js@2.6.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

react-resizable-panels@2.1.9 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

react-use-event-hook@0.9.6 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

react-vega@7.6.0 [license(s): Apache-2.0]
‚îî‚îÄ‚îÄ package.json:  Apache-2.0

react-virtuoso@4.12.6 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

reactflow@11.11.4 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

rpc-anywhere@1.7.0 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

sql-formatter@15.6.1 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

string-dedent@3.0.1 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

swiper@11.2.6 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

tailwind-merge@2.6.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

tailwindcss-animate@1.0.7 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

thememirror@2.0.1 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

timestring@7.0.0 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

typescript-memoize@1.1.1 [license(s): MIT]
‚îî‚îÄ‚îÄ package.json:  MIT

use-resize-observer@9.1.0 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îú‚îÄ‚îÄ license files: MIT
‚îî‚îÄ‚îÄ readme files: MIT

vega@5.33.0 [license(s): BSD-3-Clause]
‚îî‚îÄ‚îÄ package.json:  BSD-3-Clause

vega-lite@5.23.0 [license(s): BSD-3-Clause]
‚îî‚îÄ‚îÄ package.json:  BSD-3-Clause

vega-loader@4.5.3 [license(s): BSD-3-Clause]
‚îî‚îÄ‚îÄ package.json:  BSD-3-Clause

vscode-languageserver-protocol@3.17.5 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

web-vitals@4.2.4 [license(s): Apache, Apache-2.0]
‚îú‚îÄ‚îÄ package.json:  Apache-2.0
‚îî‚îÄ‚îÄ license files: Apache

zod@3.24.3 [license(s): MIT]
‚îú‚îÄ‚îÄ package.json:  MIT
‚îî‚îÄ‚îÄ license files: MIT

LICENSES: Apache, Apache-2.0, BSD, BSD-3-Clause, ISC, MIT, MIT OR Apache-2.0, Unlicense

@github/copilot-language-server@1.322.0 [license(s): https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features]
‚îî‚îÄ‚îÄ package.json:  https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features

lsp@0.0.0 [license(s): Apache-2.0]
‚îî‚îÄ‚îÄ package.json:  Apache-2.0

LICENSES: Apache-2.0, https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features



--- marimo/this.py ---
# Copyright 2026 Marimo. All rights reserved.
print("""The marimo contract

To use marimo means entering into a social contract.
In this contract you agree
to define each variable just once,
to reference variables without cycles,
to mutate variables sparingly,
to bind variables to UI elements.

In return marimo assembles from your variables
something greater than the sum of their cells.
A reactive notebook,
a Python program,
a data app, three turns on the same perspective of
a dataflow graph.

With this dataflow graph come two simple rules,
when a cell is run all others that reference its variables run too,
when a UI element is touched, all cells that reference it run too.

From these two rules marimo is built,
reactive execution yields reproducible execution,
interactions flow from you through your code,
data and models become tangible in a meticulous construction
that's Python all the way down.

In this construction we hope you will find
simplicity
clarity
immersion
interactivity
dualities
beauty
joy.""")  # noqa: T201, W293


--- marimo/_tracer.py ---
# Copyright 2026 Marimo. All rights reserved.
from __future__ import annotations

import os
from contextlib import contextmanager
from typing import TYPE_CHECKING, Any, cast

from marimo import _loggers
from marimo._config.settings import GLOBAL_SETTINGS
from marimo._dependencies.dependencies import DependencyManager
from marimo._utils.config.config import ConfigReader
from marimo._utils.platform import is_pyodide

LOGGER = _loggers.marimo_logger()

if TYPE_CHECKING:
    from collections.abc import Sequence
    from pathlib import Path

    from opentelemetry import trace


class MockSpan:
    @contextmanager
    def as_current_span(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield self

    @contextmanager
    def set_attribute(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield

    @contextmanager
    def set_status(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield

    @contextmanager
    def update_name(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield

    @contextmanager
    def end(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield

    @contextmanager
    def add_event(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield

    @contextmanager
    def add_link(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield

    @contextmanager
    def set_attributes(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield

    @contextmanager
    def record_exception(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield


class MockTracer:
    @contextmanager
    def start_span(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs

        return MockSpan()

    @contextmanager
    def start_as_current_span(self, *args: Any, **kwargs: Any) -> Any:
        del args, kwargs
        yield MockSpan()


TRACE_FILENAME = os.path.join("traces", "spans.jsonl")


def _set_tracer_provider() -> None:
    if is_pyodide() or GLOBAL_SETTINGS.TRACING is False:
        return

    DependencyManager.opentelemetry.require("for tracing.")

    from opentelemetry import trace
    from opentelemetry.sdk.trace import ReadableSpan, TracerProvider
    from opentelemetry.sdk.trace.export import (
        BatchSpanProcessor,
        SpanExporter,
        SpanExportResult,
    )

    # If one already exists, return
    try:
        trace.get_tracer_provider()
    except Exception:
        return

    class FileExporter(SpanExporter):
        def __init__(self, file_path: Path) -> None:
            self.file_path = file_path
            # Clear file
            self.file_path.write_bytes(b"")

        def export(self, spans: Sequence[ReadableSpan]) -> SpanExportResult:
            try:
                with self.file_path.open("a", encoding="utf-8") as f:
                    for span in spans:
                        f.write(span.to_json(cast(Any, None)))
                        f.write("\n")
                return SpanExportResult.SUCCESS
            except Exception as e:
                LOGGER.exception(e)
                return SpanExportResult.FAILURE

        def shutdown(self) -> None:
            pass

    # Create a directory for logs if it doesn't exist
    config_ready = ConfigReader.for_filename(TRACE_FILENAME)
    filepath = config_ready.filepath
    filepath.parent.mkdir(parents=True, exist_ok=True)

    # Create a file exporter
    file_exporter: FileExporter = FileExporter(filepath)

    provider = TracerProvider()
    processor = BatchSpanProcessor(file_exporter)
    provider.add_span_processor(processor)

    # Sets the global default tracer provider
    trace.set_tracer_provider(provider)


def create_tracer(trace_name: str) -> trace.Tracer:
    """
    Creates a tracer that logs to a file.

    This lazily loads opentelemetry.
    """

    # Don't load opentelemetry if we're in a Pyodide environment.
    if is_pyodide() or GLOBAL_SETTINGS.TRACING is False:
        return cast(Any, MockTracer())  # type: ignore[no-any-return]

    DependencyManager.opentelemetry.require("for tracing.")

    try:
        from opentelemetry import trace

        return trace.get_tracer(
            trace_name,
            attributes={
                "service.name": trace_name,
            },
        )

    except Exception as e:
        LOGGER.debug("Failed to create tracer: %s", e)

    return cast(Any, MockTracer())  # type: ignore[no-any-return]


try:
    _set_tracer_provider()
except Exception as e:
    LOGGER.debug("Failed to set tracer provider", exc_info=e)

server_tracer = create_tracer("marimo.server")
kernel_tracer = create_tracer("marimo.kernel")


--- marimo/_version.py ---
# Copyright 2026 Marimo. All rights reserved.
from __future__ import annotations

from importlib.metadata import PackageNotFoundError, version

try:
    __version__ = version("marimo")
except PackageNotFoundError:
    # package is not installed
    __version__ = "unknown"


--- marimo/_smoke_tests/2d-cells.py ---
import marimo

__generated_with = "0.15.5"
app = marimo.App(width="columns")


@app.cell(column=0)
def _():
    import marimo as mo
    import altair as alt
    from vega_datasets import data
    return alt, data, mo


@app.cell
def _(dataset, mo, plot, x, y):
    mo.vstack([dataset, x, y, plot])
    return


@app.cell
def _(selected_dataset):
    df = selected_dataset()
    df
    return (df,)


@app.cell(column=1)
def _(plot_type, x, y):
    plot_type().encode(
        x=x.value,
        y=y.value,
    ).interactive().properties(width="container")
    return


@app.cell
def _(data, mo):
    dataset = mo.ui.dropdown(
        label="Choose dataset", options=data.list_datasets(), value="iris"
    )
    return (dataset,)


@app.cell
def _(df, mo):
    x = mo.ui.dropdown(
        label="Choose X value", options=df.columns.to_list(), value=df.columns[0]
    )
    y = mo.ui.dropdown(
        label="Choose Y value", options=df.columns.to_list(), value=df.columns[1]
    )
    plot = mo.ui.dropdown(
        label="Choose plot type",
        options=["mark_bar", "mark_circle"],
        value="mark_bar",
    )
    return plot, x, y


@app.cell
def _(data, dataset):
    selected_dataset = getattr(data, dataset.value)
    return (selected_dataset,)


@app.cell
def _(alt, df, plot):
    plot_type = getattr(alt.Chart(df), plot.value)
    return (plot_type,)


@app.cell(column=2)
def _():
    return


if __name__ == "__main__":
    app.run()


--- packages/llm-info/README.md ---
# LLM Info

This package contains data for the LLM info.

## Data

Models and providers are stored in the `data` directory.

## Adding a New LLM Model

If you want to add a new LLM model or provider, you can do so by editing the YAML files in the `data` directory (`models.yaml` or `providers.yaml`) and running `pnpm codegen`.

--- packages/pytest_changed/README.md ---
# pytest-changed Plugin

A pytest plugin that uses `ruff analyze graph` to intelligently discover and run only the tests affected by code changes.

## Overview

This plugin analyzes your git changes and uses Ruff's dependency graph analysis to determine which tests need to be run. It performs a search through the dependency graph to find all files affected by your changes, then runs only the tests that could be impacted.

## Usage

**Run only tests affected by changes from main branch:**

```bash
pytest -p packages.pytest_changed --changed-from=main
```

**Using Hatch:**

```bash
hatch run +py=3.12 test:test -p packages.pytest_changed --changed-from=main tests/
```

### Compare Against Different References

```bash
# Compare against HEAD (staged changes)
pytest -p packages.pytest_changed --changed-from=HEAD

# Compare against origin/main
pytest -p packages.pytest_changed --changed-from=origin/main
```

### Preview What Would Be Run

Use `--collect-only` to see which tests would be selected without running them:

```bash
pytest -p packages.pytest_changed --changed-from=main --collect-only tests/
```

### Include Unchanged Tests

Run affected tests plus all other tests:

```bash
pytest -p packages.pytest_changed --changed-from=main --include-unchanged tests/
```

### Run Specific Test Directories

The plugin respects pytest's normal path filtering:

```bash
pytest -p packages.pytest_changed --changed-from=main tests/_runtime/
```

## How It Works

1. **Find Changes**: Uses `git diff --name-only <ref>` to find Python files that have changed
2. **Build Graph**: Runs `ruff analyze graph --direction dependents` to build a dependency graph
3. **Graph Traversal**: Performs BFS from changed files to find all affected files
4. **Filter Tests**: Identifies which affected files are test files
5. **Run Tests**: Only runs pytest on the affected test files

## Configuration Options

### Command Line Options

- `--changed-from=<ref>`: Git reference to compare against (required to activate plugin)
- `--include-unchanged`: Also run tests that haven't changed (optional)


--- packages/smart-cells/README.md ---
# @marimo-team/smart-cells

Parse "smart cells" (markdown, SQL) to-and-from Python code.


--- packages/ts-config/README.md ---
# `@marimo-team/tsconfig`

Shared `tsconfig.json`s.


--- packages/lsp/index.ts ---
import { appendFile, mkdir, writeFile } from "node:fs/promises";
import type { IncomingMessage } from "node:http";
import { dirname } from "node:path";
import parseArgs from "minimist";
import type { IWebSocket } from "vscode-ws-jsonrpc";
import {
  createServerProcess,
  createWebSocketConnection,
  forward,
} from "vscode-ws-jsonrpc/server";
import type { CloseEvent, Data, ErrorEvent, MessageEvent, WebSocket } from "ws";
import { WebSocketServer } from "ws";

class Logger {
  private constructor(private readonly logFilePath: string) {
    this.logFilePath = logFilePath;
  }

  static async create(logFilePath: string): Promise<Logger> {
    await mkdir(dirname(logFilePath), { recursive: true });
    await writeFile(logFilePath, "");

    return new Logger(logFilePath);
  }

  private async appendToLogFile(...args: unknown[]): Promise<void> {
    const log = args.join(" ");

    try {
      await appendFile(this.logFilePath, `${log}\n`);
    } catch (error) {
      // biome-ignore lint/suspicious/noConsole: For printing to the console
      console.error("Failed to write to log file:", error);
    }
  }

  debug(...args: Parameters<typeof console.log>): void {
    // biome-ignore lint/suspicious/noConsole: For printing to the console
    console.log(...args);
    void this.appendToLogFile("[DEBUG]", ...args);
  }

  log(...args: Parameters<typeof console.log>): void {
    // biome-ignore lint/suspicious/noConsole: For printing to the console
    console.log(...args);
    void this.appendToLogFile("[INFO]", ...args);
  }

  error(...args: Parameters<typeof console.error>): void {
    // biome-ignore lint/suspicious/noConsole: For printing to the console
    console.error(...args);
    void this.appendToLogFile("[ERROR]", ...args);
  }
}

class WebSocketAdapter implements IWebSocket {
  constructor(
    private readonly webSocket: WebSocket,
    private readonly logger: Logger,
  ) {
    this.webSocket = webSocket;
    this.logger = logger;
  }

  send(content: string): void {
    try {
      this.webSocket.send(content);
      this.logger.debug("Sent message:", content);
    } catch (error) {
      this.logger.error("Failed to send message:", error);
    }
  }

  onMessage(callback: (data: Data) => void): void {
    this.webSocket.onmessage = (event: MessageEvent) => {
      try {
        callback(event.data);
        this.logger.debug("Received message:", event.data);
      } catch (error) {
        this.logger.error("Error handling message:", error);
      }
    };
  }

  onError(callback: (message: string) => void): void {
    this.webSocket.onerror = (event: ErrorEvent) => {
      this.logger.error("WebSocket error:", event);
      if ("message" in event) {
        callback(event.message);
      }
    };
  }

  onClose(callback: (code: number, reason: string) => void): void {
    this.webSocket.onclose = (event: CloseEvent) => {
      this.logger.log(
        `WebSocket closed with code ${event.code}: ${event.reason}`,
      );

      callback(event.code, event.reason);
    };
  }

  dispose(): void {
    this.webSocket.close();
  }
}

export function parseTypedCommand(typedCommand: string): string[] {
  if (!typedCommand.includes(":")) {
    // Fallback for old format - simple split by spaces
    return typedCommand.split(" ");
  }

  const colonIndex = typedCommand.indexOf(":");
  const serverType = typedCommand.substring(0, colonIndex);
  const binaryPath = typedCommand.substring(colonIndex + 1);

  switch (serverType) {
    case "copilot":
      return ["node", binaryPath, "--stdio"];
    case "basedpyright":
      return [binaryPath, "--stdio"];
    case "pyrefly":
      return [binaryPath, "lsp"];
    case "ty":
      return [binaryPath, "server"];
    default:
      throw new Error(`Unknown LSP server type: ${serverType}`);
  }
}

function handleWebSocketConnection(
  languageServerCommand: string[],
  logger: Logger,
  webSocket: WebSocket,
  _: IncomingMessage,
): void {
  if (!languageServerCommand) {
    webSocket.close();
    return;
  }

  const jsonRpcConnection = createServerProcess(
    languageServerCommand.join(" "),
    languageServerCommand[0],
    languageServerCommand.slice(1),
  );

  if (!jsonRpcConnection) {
    throw new Error("Not able to create json-rpc connection.");
  }

  const socket = new WebSocketAdapter(webSocket, logger);
  const connection = createWebSocketConnection(socket);
  forward(connection, jsonRpcConnection);

  socket.onClose(() => {
    jsonRpcConnection.dispose();
    connection.dispose();
  });

  connection.onClose(() => {
    jsonRpcConnection.dispose();
    socket.dispose();
  });
}

function startWebSocketServer(
  port: number,
  languageServerCommand: string[],
  logger: Logger,
): void {
  const webSocketServer = new WebSocketServer({
    port,
    perMessageDeflate: false,
  });

  webSocketServer.on("error", (error) => {
    logger.error("WebSocket server error:", error);
  });

  webSocketServer.on("connection", (webSocket, request) => {
    logger.log(`New connection from ${request.socket.remoteAddress}`);
    try {
      handleWebSocketConnection(
        languageServerCommand,
        logger,
        webSocket,
        request,
      );
    } catch (error) {
      logger.error("Failed to start WebSocket bridge:", error);
      webSocket.close();
    }
  });
}

async function main(): Promise<void> {
  const argv = parseArgs(process.argv);

  if (argv.help) {
    // biome-ignore lint/suspicious/noConsole: For printing to the console
    console.log(
      'Usage: node index.cjs --log-file <path> --lsp "<command>" [--port <port>]',
    );

    return;
  }

  const logFile = argv["log-file"] || "/tmp/lsp-server.log";
  const logger = await Logger.create(logFile);
  const serverPort = Number.parseInt(argv.port, 10) || 3000;
  const languageServerCommand = parseTypedCommand(argv.lsp || "echo test");

  logger.log(`Parsed LSP command: ${languageServerCommand.join(" ")}`);
  startWebSocketServer(serverPort, languageServerCommand, logger);
}

void main();


--- packages/lsp/index.test.ts ---
import * as childProcess from "node:child_process";
import * as os from "node:os";
import * as path from "node:path";

import { describe, expect, it } from "vitest";

// Import the parseTypedCommand function - we need to export it first
import { parseTypedCommand } from "./index";

describe("parseTypedCommand", () => {
  it("should parse copilot commands correctly", () => {
    const result = parseTypedCommand(
      "copilot:/path/to/copilot/language-server.js",
    );
    expect(result).toEqual([
      "node",
      "/path/to/copilot/language-server.js",
      "--stdio",
    ]);
  });

  it("should parse copilot commands with spaces in path", () => {
    const result = parseTypedCommand(
      "copilot:/path/with spaces/copilot/language-server.js",
    );
    expect(result).toEqual([
      "node",
      "/path/with spaces/copilot/language-server.js",
      "--stdio",
    ]);
  });

  it("should parse basedpyright commands correctly", () => {
    const result = parseTypedCommand("basedpyright:basedpyright-langserver");
    expect(result).toEqual(["basedpyright-langserver", "--stdio"]);
  });

  it("should parse ty commands correctly", () => {
    const result = parseTypedCommand("ty:/path/to/ty");
    expect(result).toEqual(["/path/to/ty", "server"]);
  });

  it("should parse ty commands with spaces in path", () => {
    const result = parseTypedCommand("ty:/path/with spaces/ty");
    expect(result).toEqual(["/path/with spaces/ty", "server"]);
  });

  it("should fallback to old format for commands without colon", () => {
    const result = parseTypedCommand("node /path/to/binary --stdio");
    expect(result).toEqual(["node", "/path/to/binary", "--stdio"]);
  });

  it("should throw error for unknown server types", () => {
    expect(() => parseTypedCommand("unknown:/path/to/binary")).toThrow(
      "Unknown LSP server type: unknown",
    );
  });

  it("should handle edge cases with multiple colons", () => {
    const result = parseTypedCommand(
      "copilot:C:/Program Files/Node.js/language-server.js",
    );
    expect(result).toEqual([
      "node",
      "C:/Program Files/Node.js/language-server.js",
      "--stdio",
    ]);
  });
});

describe("LSP Server Integration", () => {
  it("should start and be killable", async () => {
    const process = childProcess.spawn("node", [
      "./dist/index.cjs",
      "--lsp",
      "echo hello",
      "--log-file",
      path.join(os.tmpdir(), "lsp-server-test.log"),
    ]);

    // Give it a moment to start
    await new Promise((resolve) => setTimeout(resolve, 1000));

    // Kill the process
    process.kill();

    // Wait for process to die
    await new Promise<void>((resolve) => {
      process.on("exit", () => resolve());
    });

    expect(process.killed).toBe(true);
  });

  it("should start with typed copilot command", async () => {
    const process = childProcess.spawn("node", [
      "./dist/index.cjs",
      "--lsp",
      "copilot:echo copilot-test",
      "--log-file",
      path.join(os.tmpdir(), "lsp-server-copilot-test.log"),
    ]);

    // Give it a moment to start
    await new Promise((resolve) => setTimeout(resolve, 1000));

    // Kill the process
    process.kill();

    // Wait for process to die
    await new Promise<void>((resolve) => {
      process.on("exit", () => resolve());
    });

    expect(process.killed).toBe(true);
  });
});


--- packages/pytest_changed/__init__.py ---
"""
Pytest plugin that uses `ruff analyze graph` to discover and run tests
affected by changes from a git reference.

Usage:
    pytest --changed-from=HEAD
    pytest --changed-from=main
    pytest --changed-from=origin/main
"""

from __future__ import annotations

import json
import subprocess
from pathlib import Path

import pytest

print_ = print


class UnreachableError(Exception):
    pass


def pytest_addoption(parser: pytest.Parser) -> None:
    """Add command-line options for the plugin."""
    group = parser.getgroup(
        "ruff-graph", "Run tests based on dependency graph"
    )
    group.addoption(
        "--changed-from",
        action="store",
        dest="changed_from",
        default=None,
        help="Git reference to compare against (e.g., HEAD, main, origin/main)",
    )
    group.addoption(
        "--include-unchanged",
        action="store",
        dest="include_unchanged",
        default=False,
        type=lambda x: x.lower() in ("true", "1", "yes"),
        help="Also run tests that haven't changed (in addition to affected tests)",
    )


def get_changed_files(ref: str, repo_root: Path) -> tuple[set[Path], bool]:
    """
    Get list of changed Python files from git diff.

    Args:
        ref: Git reference to compare against
        repo_root: Root of the git repository

    Returns:
        Tuple of (set of changed Python files, bool indicating if critical files changed)
        Critical files are configuration files that affect all tests (e.g., pyproject.toml)
    """
    # Files that, if changed, should trigger all tests
    critical_files = {"pyproject.toml"}

    try:
        result = subprocess.run(
            ["git", "diff", "--name-only", ref],
            cwd=repo_root,
            capture_output=True,
            text=True,
            check=True,
        )

        changed_files: set[Path] = set()
        critical_changed = False

        for line in result.stdout.strip().split("\n"):
            if not line:
                continue
            file_path = repo_root / line

            # Check for critical configuration files
            if file_path.name in critical_files:
                critical_changed = True

            if file_path.suffix == ".py" and file_path.exists():
                changed_files.add(file_path)

        return changed_files, critical_changed
    except subprocess.CalledProcessError as e:
        error_msg = f"Failed to get git diff from '{ref}': {e}"
        if e.stderr:
            error_msg += f"\nStderr: {e.stderr}"
        error_msg += (
            "\n\nTip: Make sure the reference exists. "
            "In CI, you may need to fetch history with 'fetch-depth: 0' "
            "in actions/checkout."
        )
        pytest.exit(error_msg, returncode=1)


def get_dependency_graph(
    repo_root: Path, direction: str = "dependents"
) -> dict[str, list[str]]:
    """
    Get dependency graph from ruff analyze graph.

    Args:
        repo_root: Root of the repository
        direction: Either "dependencies" or "dependents"

    Returns:
        Dictionary mapping file paths to list of related file paths
    """
    try:
        result = subprocess.run(
            [
                "uvx",
                # uv notes `analyze graph` is experimental,
                # so we fix the ruff version for now
                "ruff@0.13.2",
                "analyze",
                "graph",
                "--detect-string-imports",
                "--direction",
                direction,
                ".",
            ],
            cwd=repo_root,
            capture_output=True,
            text=True,
            check=True,
        )

        # Parse JSON output
        graph: dict[str, list[str]] = json.loads(result.stdout)

        # Convert to absolute paths
        absolute_graph = {}
        for file_path, dependencies in graph.items():
            abs_path = str(repo_root / file_path)
            abs_deps = [str(repo_root / dep) for dep in dependencies]
            absolute_graph[abs_path] = abs_deps

        return absolute_graph
    except subprocess.CalledProcessError as e:
        pytest.exit(f"Failed to run ruff analyze graph: {e}", returncode=1)
    except json.JSONDecodeError as e:
        pytest.exit(f"Failed to parse ruff output: {e}", returncode=1)

    raise UnreachableError("Failed to run ruff analyze graph")


def find_affected_files(
    changed_files: set[Path],
    dependency_graph: dict[str, list[str]],
) -> set[Path]:
    """
    Find all files affected by changes using BFS graph traversal.
    Handles cycles and deduplication.

    Args:
        changed_files: Set of files that have changed
        dependency_graph: Map of file -> files that depend on it

    Returns:
        Set of all affected file paths (including changed files)
    """
    affected: set[Path] = set(changed_files)
    visited: set[str] = set()
    queue: list[Path] = list(changed_files)

    while queue:
        current = queue.pop(0)
        current_str = str(current)

        if current_str in visited:
            continue
        visited.add(current_str)

        # Find all files that depend on this file
        dependents = dependency_graph.get(current_str, [])
        for dependent in dependents:
            dependent_path = Path(dependent)
            if dependent_path not in affected:
                affected.add(dependent_path)
                queue.append(dependent_path)

    return affected


def get_test_base(config: pytest.Config, repo_root: Path) -> Path:
    """
    Get the test base directory from pytest invocation args.

    Args:
        config: Pytest configuration object
        repo_root: Repository root to use as fallback

    Returns:
        Path to test base directory
    """
    for arg in config.invocation_params.args:
        path = Path(arg)
        if path.exists() and path.is_dir():
            return path.resolve()
    return repo_root


def find_test_files(affected_files: set[Path], test_base: Path) -> set[Path]:
    """
    Filter affected files to only include test files.

    Args:
        affected_files: Set of all affected files
        test_base: Root of the repository

    Returns:
        Set of test file paths
    """
    test_files: set[Path] = set()

    for file_path in affected_files:
        # Check if it's a test file, and relative to the test base
        # N.B Our test naming convention is test_*.py
        if (
            file_path.exists()
            and file_path.name.startswith("test_")
            and test_base in file_path.parents
        ):
            test_files.add(file_path)

    return test_files


def pytest_configure(config: pytest.Config) -> None:
    """Configure pytest with our plugin."""
    changed_from: str | None = config.getoption("changed_from")

    if changed_from is None:
        return

    # Get the repository root
    repo_root: Path
    try:
        result = subprocess.run(
            ["git", "rev-parse", "--show-toplevel"],
            capture_output=True,
            text=True,
            check=True,
        )
        repo_root = Path(result.stdout.strip())
    except subprocess.CalledProcessError as e:
        pytest.exit("Not in a git repository", returncode=1)
        raise UnreachableError("Not in a git repository") from e

    # Get test base directory from args or fall back to repo root
    test_base = get_test_base(config, repo_root)

    # Step 1: Find changed files
    changed_files, critical_changed = get_changed_files(
        changed_from, repo_root
    )

    # If critical files changed, run all tests
    if critical_changed:
        print_(
            "\nCritical configuration files changed (e.g., pyproject.toml) - "
            "running all tests"
        )
        config.option.changed_test_files = None  # None means run all tests
        return

    if not changed_files:
        print_(f"No Python files changed from {changed_from}")
        config.option.changed_test_files = set()
        return

    print_(
        f"Found {len(changed_files)} changed Python files from {changed_from}"
    )
    for f in sorted(changed_files):
        print_(f"  - {f.relative_to(repo_root)}")

    # Step 2: Get dependency graph (dependents direction)
    print_("\nBuilding dependency graph...")
    dependency_graph = get_dependency_graph(repo_root, direction="dependents")

    # Step 3: Find all affected files (BFS with cycle detection)
    print_("Finding affected files...")
    affected_files = find_affected_files(changed_files, dependency_graph)
    print_(f"Found {len(affected_files)} affected files")

    # Step 4: Filter to test files
    test_files = find_test_files(affected_files, test_base)

    if not test_files:
        print_(f"\nNo tests affected by changes from {changed_from}")
        config.option.changed_test_files = set()
        return

    print_(f"\nFound {len(test_files)} affected test files:")
    for test_file in sorted(test_files):
        print_(f"  - {test_file.relative_to(repo_root)}")

    # Store the test files in config for collection hook
    config.option.changed_test_files = test_files

    include_unchanged: bool = config.getoption("include_unchanged")
    if test_files and not include_unchanged:
        # Convert to relative paths for cleaner output
        test_paths = [
            str(f.relative_to(repo_root)) for f in sorted(test_files)
        ]
        config.args[:] = test_paths


def pytest_collection_modifyitems(
    config: pytest.Config, items: list[pytest.Item]
) -> None:
    """Modify test collection to only include affected tests."""
    changed_from: str | None = config.getoption("changed_from")

    if changed_from is None:
        return

    changed_test_files: set[Path] | None = getattr(
        config.option, "changed_test_files", set()
    )

    # None means run all tests (critical files changed)
    if changed_test_files is None:
        print_(f"\nRunning all {len(items)} tests")
        return

    if not changed_test_files:
        # No affected tests, skip all
        for item in items:
            item.add_marker(
                pytest.mark.skip(
                    reason=f"Not affected by changes from {changed_from}"
                )
            )
        return

    include_unchanged: bool = config.getoption("include_unchanged")

    # Filter items to only those in affected test files
    selected: list[pytest.Item] = []
    deselected: list[pytest.Item] = []

    for item in items:
        test_file = Path(item.fspath)

        if test_file in changed_test_files:
            selected.append(item)
        elif include_unchanged:
            # Run all tests if include_unchanged is set
            selected.append(item)
        else:
            deselected.append(item)

    if deselected:
        config.hook.pytest_deselected(items=deselected)
        items[:] = selected

    print_(f"\nRunning {len(selected)} tests from affected files")
    if deselected:
        print_(f"Skipped {len(deselected)} tests from unaffected files")


--- packages/lsp/move.js ---
#!/usr/bin/env node

const fs = require("node:fs");
const path = require("node:path");

// Copy node_modules/@github/copilot-language-server/dist/ to dist/
const srcDir = path.join(
  __dirname,
  "node_modules/@github/copilot-language-server/dist",
);
const destDir = path.join(__dirname, "dist");

// Recursively copy directory
fs.cpSync(srcDir, destDir, { recursive: true, dereference: true });

// Rename language-server.js to language-server.cjs
const oldPath = path.join(destDir, "language-server.js");
const newPath = path.join(destDir, "language-server.cjs");
fs.renameSync(oldPath, newPath);

// biome-ignore lint/suspicious/noConsole: build script
console.log("Successfully copied and renamed language-server files");


--- packages/ts-config/ts-reset.d.ts ---
interface Body {
  json<T = unknown>(): Promise<T>;
}

interface JSON {
  parse(
    text: string,
    reviver?: (this: any, key: string, value: any) => any,
  ): unknown;
}

interface Array<T> {
  filter(predicate: BooleanConstructor): Array<NonNullable<T>>;
}

interface String {
  /**
   * Split a string into substrings using the specified separator and return them as an array.
   * @param splitter An object that can split a string.
   * @param limit A value used to limit the number of elements returned in the array.
   */
  split<T extends string | undefined = string | undefined>(
    splitter: { [Symbol.split](string: string, limit?: number): string[] },
    limit?: number,
  ): T[];
  split<T extends string | undefined = string | undefined>(
    splitter: string,
    limit?: number,
  ): T[];
}


--- packages/lsp/tsup.config.ts ---
import { defineConfig } from "tsup";

export default defineConfig({
  outExtension({ format }) {
    return {
      js: `.${format}`,
    };
  },
});


--- scripts/README.md ---
Development utilities. Should be run from the root directory of the project.


--- scripts/analyze_traces.py ---
import marimo

__generated_with = "0.8.0"
app = marimo.App(width="medium")


@app.cell
def __():
    from opentelemetry import trace
    import altair as alt
    import json
    import marimo as mo
    import os
    import numpy as np

    import dataclasses
    import matplotlib.pyplot as plt
    import pandas as pd
    return alt, dataclasses, json, mo, np, os, pd, plt, trace


@app.cell(hide_code=True)
def __():
    from pydantic import BaseModel, Field, computed_field
    from typing import List, Dict, Optional, Any
    from datetime import datetime


    class Context(BaseModel):
        trace_id: str
        span_id: str
        trace_state: str


    class Status(BaseModel):
        status_code: str


    class ResourceAttributes(BaseModel):
        telemetry_sdk_language: str = Field(alias="telemetry.sdk.language")
        telemetry_sdk_name: str = Field(alias="telemetry.sdk.name")
        telemetry_sdk_version: str = Field(alias="telemetry.sdk.version")
        service_name: str = Field(alias="service.name")


    class Resource(BaseModel):
        attributes: ResourceAttributes
        schema_url: str


    class Span(BaseModel):
        name: str
        context: Context
        kind: str
        parent_id: Optional[str]
        start_time: datetime
        end_time: datetime
        status: Status
        attributes: Dict[str, Any]
        events: List = []
        links: List = []
        resource: Resource
        relative_start: Optional[datetime] = None
        depth: Optional[int] = 0

        @computed_field
        @property
        def duration_ms(self) -> float:
            return (self.end_time - self.start_time).microseconds / 1000

        @classmethod
        def parse(cls, data: Dict) -> "Span":
            # Convert string timestamps to datetime objects
            data["start_time"] = datetime.fromisoformat(
                data["start_time"].rstrip("Z")
            )
            data["end_time"] = datetime.fromisoformat(data["end_time"].rstrip("Z"))

            # Parse the nested Resource structure
            resource_data = data["resource"]
            resource_data["attributes"] = ResourceAttributes(
                **resource_data["attributes"]
            )
            data["resource"] = Resource(**resource_data)

            # Handle the trace_state as a string
            if isinstance(data["context"]["trace_state"], list):
                data["context"]["trace_state"] = str(
                    data["context"]["trace_state"]
                )

            return cls(**data)
    return (
        Any,
        BaseModel,
        Context,
        Dict,
        Field,
        List,
        Optional,
        Resource,
        ResourceAttributes,
        Span,
        Status,
        computed_field,
        datetime,
    )


@app.cell
def __(Dict, List, Span, json):
    def parse_jsonl(file_path):
        spans = []
        with open(file_path, "r", encoding="utf-8") as file:
            for line in file:
                spans.append(Span.parse(json.loads(line)))
        return spans


    def populate_depth(spans: List[Span]) -> List[Span]:
        # Sort spans by start_time
        sorted_spans = sorted(spans, key=lambda span: span.start_time)

        # Create a dictionary to store spans by their ID
        span_dict: Dict[str, Span] = {
            span.context.span_id: span for span in sorted_spans
        }

        # Function to recursively calculate depth
        def calculate_depth(span: Span, current_depth: int = 0) -> int:
            if span.depth is not None:
                return span.depth

            span.depth = current_depth

            # If this span has a parent, calculate the parent's depth first
            if span.parent_id and span.parent_id in span_dict:
                parent_span = span_dict[span.parent_id]
                parent_depth = calculate_depth(parent_span, current_depth)
                span.depth = parent_depth + 1

            return span.depth

        # Calculate depth for all spans
        for span in sorted_spans:
            calculate_depth(span)
        return sorted_spans
    return parse_jsonl, populate_depth


@app.cell
def __(mo):
    refresh = mo.ui.refresh(options=[2, 5, 10], default_interval=5)
    refresh
    return refresh,


@app.cell
def __(os, parse_jsonl, populate_depth, refresh):
    refresh
    file_path = "~/.marimo/traces/spans.jsonl"
    spans = parse_jsonl(os.path.expanduser(file_path))
    spans = populate_depth(spans)
    len(spans)
    return file_path, spans


@app.cell
def __(spans):
    json_spans = [trace.model_dump(mode="serialization") for trace in spans]
    return json_spans,


@app.cell
def __(json_spans, mo):
    mo.ui.table(json_spans)
    return


@app.cell
def __(Span, pd):
    def spans_to_dataframe(spans: Span):
        data = []
        for span in spans:
            row = {
                "name": span.name,
                "kind": span.kind,
                "parent_id": span.parent_id,
                "start_time": span.start_time,
                "end_time": span.end_time,
                "status": span.status.status_code,
                "duration_ms": span.duration_ms,
                "depth": span.depth,
                "service_name": span.resource.attributes.service_name,
            }
            data.append(row)

        return pd.DataFrame(data)
    return spans_to_dataframe,


@app.cell
def __(spans, spans_to_dataframe):
    df = spans_to_dataframe(spans)
    df
    return df,


@app.cell
def __(df):
    df[["name", "duration_ms"]]
    return


@app.cell(hide_code=True)
def __(spans):
    total_duration = (
        max(span.end_time for span in spans)
        - min(span.start_time for span in spans)
    ).total_seconds() * 1000
    total_duration
    return total_duration,


@app.cell
def __(alt, df):
    duration_chart = (
        alt.Chart(df)
        .mark_bar()
        .interactive()
        .encode(
            x=alt.X("duration_ms:Q", bin=True, title="Duration (ms)"),
            y="count()",
            color="service_name:N",
        )
        .properties(
            title="Span Duration Distribution by Service", width=600, height=400
        )
    )

    duration_chart = (
        alt.Chart(df)
        .mark_bar()
        .interactive()
        .encode(
            x=alt.X("duration_ms:Q", bin=True, title="Duration (ms)"),
            y="count()",
            color="service_name:N",
        )
        .properties(
            title="Span Duration Distribution by Service", width=600, height=400
        )
    )

    service_count_chart = (
        alt.Chart(df)
        .mark_bar()
        .interactive()
        .encode(x="service_name:N", y="count()", color="service_name:N")
        .properties(title="Span Count by Service", width=600, height=400)
    )

    timeline_chart = (
        alt.Chart(df)
        .mark_bar()
        .encode(
            x=alt.X("start_time:T", title="Time"),
            x2="end_time:T",
            y="name:N",
            color="service_name:N",
            tooltip=["name", "duration_ms", "service_name"],
        )
        .properties(title="Span Timeline", width=800, height=400)
    )

    status_chart = (
        alt.Chart(df)
        .mark_bar()
        .interactive()
        .encode(x="status:N", y="count()", color="status:N")
        .properties(title="Span Status Distribution", width=400, height=300)
    )

    depth_chart = (
        alt.Chart(df)
        .mark_bar()
        .interactive()
        .encode(x="depth:O", y="count()", color="depth:O")
        .properties(title="Span Depth Distribution", width=400, height=300)
    )
    return (
        depth_chart,
        duration_chart,
        service_count_chart,
        status_chart,
        timeline_chart,
    )


@app.cell
def __(duration_chart):
    duration_chart
    return


@app.cell
def __(timeline_chart):
    timeline_chart
    return


@app.cell
def __(depth_chart, status_chart):
    status_chart | depth_chart
    return


if __name__ == "__main__":
    app.run()


--- scripts/convert_gif_to_webm.py ---
import marimo

__generated_with = "0.10.13"
app = marimo.App(width="medium")


@app.cell
def _():
    import marimo as mo

    return (mo,)


@app.cell(hide_code=True)
def _(mo):
    mo.md(r"""# Convert gifs to webm format""")
    return


@app.cell
def _(mo):
    mo.md(
        """
        You can either use the UI below or run:

        ```bash
        python convert_gif_to_webm.py -- --folder /path/to/folder
        ```
        """
    )
    return


@app.cell
def _():
    import os
    import subprocess
    from pathlib import Path

    return Path, os, subprocess


@app.cell(hide_code=True)
def _(Path, os, subprocess):
    def get_gifs_from_folder(input_folder):
        return list(Path(input_folder).glob("**/*.gif"))

    def convert_gif_to_webm(gif_files, force=False):
        if not gif_files:
            print("No GIF files found in the specified folder.")
            return

        print(f"Found {len(gif_files)} GIF files. Starting conversion...")

        for gif_path in gif_files:
            output_path = gif_path.with_suffix(".webm")

            def print_size_info(gif_path, output_path):
                original_size = os.path.getsize(gif_path)
                new_size = os.path.getsize(output_path)
                reduction = (1 - new_size / original_size) * 100
                print(f"Size reduced by {reduction:.1f}%")
                print(f"Original: {original_size/1024:.1f}KB")
                print(f"New: {new_size/1024:.1f}KB")
                print("-" * 50)

            if output_path.exists() and not force:
                print(f"Skipping {gif_path} - output already exists")
                print_size_info(gif_path, output_path)
                continue

            print(f"Converting: {gif_path}")

            try:
                # FFmpeg command to convert GIF to WebM
                cmd = [
                    "ffmpeg",
                    "-i",
                    str(gif_path),
                    "-c:v",
                    "libvpx-vp9",  # Use VP9 codec
                    "-b:v",
                    "1M",  # Bitrate
                    "-auto-alt-ref",
                    "0",
                    "-f",
                    "webm",
                    str(output_path),
                ]

                result = subprocess.run(
                    cmd, capture_output=True, text=True, timeout=20
                )

                if result.returncode == 0:
                    print(f"Successfully converted: {output_path}")
                    print_size_info(gif_path, output_path)
                else:
                    print(f"Error converting {gif_path}")
                    print(f"Error: {result.stderr}")

            except subprocess.TimeoutExpired:
                print(
                    f"Timeout converting {gif_path} - took longer than 20 seconds"
                )
            except Exception as e:
                print(f"Error processing {gif_path}: {str(e)}")

    return convert_gif_to_webm, get_gifs_from_folder


@app.cell
def _(mo):
    files = mo.ui.file_browser(multiple=True)
    force = mo.ui.checkbox(label="Force overwrite existing files")
    return files, force


@app.cell
def _(Path, files):
    gifs = [Path(f.path) for f in files.value]
    return (gifs,)


@app.cell
def _(gifs, mo):
    run_selection = mo.ui.run_button(
        label="Convert selection", disabled=len(gifs) == 0
    )
    run_selection = mo.ui.run_button(
        label="Convert all in folder", disabled=len(gifs) == 0
    )
    run_selection
    return (run_selection,)


@app.cell
def _(convert_gif_to_webm, gifs, mo, run_selection, force):
    if run_selection.value:
        with mo.status.spinner("Converting GIFs to WebM..."):
            convert_gif_to_webm(gifs, force=force.value)
    return


@app.cell
def _(convert_gif_to_webm, get_gifs_from_folder, mo, os):
    folder_path = mo.cli_args().get("folder")
    _force = mo.cli_args().get("force")
    if _force is None:
        _force = False

    if mo.app_meta().mode != "script":
        mo.stop(True, "Not running as a script")

    if not os.path.exists(folder_path):
        raise Exception("Specified folder does not exist!")
    else:
        convert_gif_to_webm(get_gifs_from_folder(folder_path), force=_force)
    return folder_path


if __name__ == "__main__":
    app.run()


--- scripts/generate.py ---
#!/usr/bin/env python3
import marimo

__generated_with = "0.11.5"
app = marimo.App(width="medium")


@app.cell(hide_code=True)
def _(mo):
    mo.md(r"""This marimo notebook generates the OpenAPI schema for the `TypeDict`s defined in `marimo._schemas.session`""")
    return


@app.cell
def _():
    from marimo._schemas.session import (
        TimeMetadata,
        StreamOutput,
        ErrorOutput,
        DataOutput,
        Cell,
        NotebookSessionMetadata,
        NotebookSessionV1,
    )

    MESSAGES = [
        TimeMetadata,
        StreamOutput,
        ErrorOutput,
        DataOutput,
        Cell,
        NotebookSessionMetadata,
        NotebookSessionV1,
    ]
    return (
        Cell,
        DataOutput,
        ErrorOutput,
        MESSAGES,
        NotebookSessionMetadata,
        NotebookSessionV1,
        StreamOutput,
        TimeMetadata,
    )


@app.cell(hide_code=True)
def _(mo):
    generate_schema = mo.ui.run_button(label="Write schema")
    generate_schema
    return (generate_schema,)


@app.cell
def _(build_openapi_schema, generate_schema, mo):
    if generate_schema.value:
        import yaml

        output = mo.notebook_dir() / "session.yaml"
        output.write_text(yaml.dump(build_openapi_schema()))
    return output, yaml


@app.cell(hide_code=True)
def _(Any, Dict, MESSAGES):
    from marimo._server.api.router import build_routes
    from marimo._utils.dataclass_to_openapi import (
        PythonTypeToOpenAPI,
    )


    def build_openapi_schema():
        processed_classes: Dict[Any, str] = {}
        component_schemas: Dict[str, Any] = {}
        name_overrides: Dict[Any, str] = {}

        converter = PythonTypeToOpenAPI(
            camel_case=False, name_overrides=name_overrides
        )
        for cls in MESSAGES:
            if cls in processed_classes:
                del processed_classes[cls]
            name = name_overrides.get(cls, cls.__name__)  # type: ignore[attr-defined]
            component_schemas[name] = converter.convert(cls, processed_classes)
            processed_classes[cls] = name

        schemas = {
            "openapi": "3.0.0",
            "info": {"title": "marimo_session"},
            "components": {
                "schemas": {
                    **component_schemas,
                }
            },
        }
        return schemas
    return PythonTypeToOpenAPI, build_openapi_schema, build_routes


@app.cell
def _():
    import marimo as mo
    return (mo,)


if __name__ == "__main__":
    app.run()


--- scripts/generate_bash_focus.py ---
# /// script
# requires-python = ">=3.13,<3.14"
# dependencies = [
#     "msgspec",
# ]
#
# [tool.uv]
# exclude-newer = "2025-06-27T12:38:25.742953-04:00"
# ///
"""Get GitHub PRs labeled with 'bash-focus' since the last release."""

from __future__ import annotations

import re
import subprocess
import sys

import msgspec


class Author(msgspec.Struct):
    """GitHub author/user information."""

    login: str


class Label(msgspec.Struct):
    """GitHub label information."""

    name: str
    color: str | None = None
    description: str | None = None


class PullRequest(msgspec.Struct):
    """GitHub Pull Request information."""

    number: int
    title: str
    author: Author
    labels: list[Label]
    url: str
    mergedAt: str | None = None


def get_latest_tag() -> str:
    """Get the latest git tag."""
    result = subprocess.run(
        ["git", "describe", "--tags", "--abbrev=0"],
        capture_output=True,
        text=True,
        check=True,
    )
    return result.stdout.strip()


def get_commits_since_tag(since_tag: str) -> set[int]:
    """Get PR numbers from commits since a specific tag."""
    try:
        result = subprocess.run(
            [
                "git",
                "log",
                f"{since_tag}..HEAD",
                "--format=%s",
                "--first-parent",
                "main",
            ],
            capture_output=True,
            text=True,
            check=True,
        )
    except subprocess.CalledProcessError:
        print(f"Error: Tag '{since_tag}' not found. Available tags:")
        tag_result = subprocess.run(
            ["git", "tag", "--list", "--sort=-version:refname"],
            capture_output=True,
            text=True,
        )
        for tag in tag_result.stdout.strip().split('\n')[:10]:
            print(f"  {tag}")
        sys.exit(1)
    
    pr_numbers = set()
    for line in result.stdout.strip().split('\n'):
        if not line:
            continue
        # Extract PR number from commit message
        pr_match = re.search(r'#(\d+)', line)
        if pr_match:
            pr_numbers.add(int(pr_match.group(1)))
    
    return pr_numbers


def get_prs_with_label(label: str, pr_numbers: set[int]) -> list[PullRequest]:
    """Get PRs with specific label from a set of PR numbers."""
    result = subprocess.run(
        [
            "gh",
            "pr",
            "list",
            "--base",
            "main",
            "--state",
            "merged",
            "--label",
            label,
            "--limit",
            "100",
            "--json",
            "number,title,author,labels,url,mergedAt",
        ],
        check=True,
        capture_output=True,
        text=True,
    )
    
    all_prs = msgspec.json.decode(result.stdout, type=list[PullRequest])
    
    # Filter PRs that are in our commit list
    filtered_prs = [pr for pr in all_prs if pr.number in pr_numbers]
    
    return filtered_prs


def main() -> None:
    label = "bash-focus"
    
    # Allow specifying a tag or use the latest one
    if len(sys.argv) >= 2:
        since_tag = sys.argv[1]
    else:
        since_tag = get_latest_tag()
        print(f"Using latest tag: {since_tag}")
    
    print(f"Fetching PRs with label '{label}' since {since_tag}...\n")
    
    pr_numbers = get_commits_since_tag(since_tag)
    prs = get_prs_with_label(label, pr_numbers)
    
    if not prs:
        print(f"No PRs found with label '{label}' since {since_tag}")
        return
    
    print(f"Found {len(prs)} PR(s) with label '{label}':\n")
    
    for pr in prs:
        print(f"#{pr.number}: {pr.title}")
        print(f"  Author: @{pr.author.login}")
        print(f"  Link: {pr.url}")
        print(f"  Merged: {pr.mergedAt}")
        print()


if __name__ == "__main__":
    main()


--- scripts/generate_ipynb_fixtures.py ---
# /// script
# requires-python = ">=3.13"
# dependencies = [
#     "jupytext",
#     "nbformat",
# ]
#
# [tool.uv]
# exclude-newer = "2025-06-03T16:30:20.082913-04:00"
# ///
"""
Generate `.ipynb` test fixtures for marimo's notebook conversion pipeline.

Each fixture corresponds to a named Jupyter notebook containing one or more code cells.
To add a new fixture, call `create_notebook_fixture(name, sources)`:

- `name`: the output filename (without `.ipynb`)
- `sources`: a list of code cell contents (as strings or `nbformat` cell dicts)

Run this script with `uv run scripts/generate_ipynb_fixtures.py` to regenerate all fixtures.
Output notebooks are written to `tests/_convert/fixtures/`.
"""

from __future__ import annotations
from pathlib import Path

import nbformat.v4.nbbase as nb
import jupytext


SELF_DIR = Path(__file__).parent
FIXTURES_DIR = SELF_DIR / "../tests/_convert/fixtures"


def create_notebook_fixture(name: str, sources: list[str | dict]) -> None:
    cells = []
    for source in sources:
        if isinstance(source, str):
            cell = nb.new_code_cell(source)
        else:
            cell = source
        cells.append(cell)

    notebook = nb.new_notebook(cells=cells)

    for i, cell in enumerate(notebook.cells):
        cell.id = str(i)  # ensure we always have 1,2,3,4

    (FIXTURES_DIR / f"{name}.ipynb").write_text(
        jupytext.writes(notebook, fmt="ipynb")
    )


def main() -> None:
    FIXTURES_DIR.mkdir(exist_ok=True)
    create_notebook_fixture(
        "multiple_definitions",
        [
            "x = 1\nprint(x) # print",
            "x = 2\nprint(x) # print",
        ],
    )
    create_notebook_fixture(
        "multiple_definitions_multiline",
        [
            "K = 2\nnearest_partition = np.argpartition(dist_sq_1, K + 1, axis=1)",
            """plt.scatter(X_1[:, 0], X_1[:, 1], s=100)
K = 2
for i_1 in range(X_1.shape[0]):
    for j in nearest_partition[i_1, :K + 1]:
        plt.plot(*zip(X_1[j], X_1[i_1]), color='black')\
""",
        ],
    )

    create_notebook_fixture(
        "duplicate_definitions_and_aug_assign",
        [
            "x = 1",
            "x",
            "x += 1",
            "x",
        ],
    )

    create_notebook_fixture(
        "duplicate_definitions_read_before_write",
        [
            "x = 1",
            "x",
            "x; x = 2; x",
            "x",
        ],
    )

    create_notebook_fixture(
        "duplicate_definitions_syntax_error",
        [
            "x ( b 2 d & !",
            "x",
        ],
    )

    create_notebook_fixture(
        "cell_metadata",
        [
            nb.new_code_cell(
                "print('Hello')", metadata={"tags": ["tag1", "tag2"]}
            ),
            nb.new_code_cell("print('World')", metadata={}),
            nb.new_code_cell(
                "print('Cell 1')",
                metadata={"tags": ["important", "data-processing"]},
            ),
            nb.new_code_cell("print('Cell 2')", metadata={"tags": []}),
            nb.new_code_cell(
                "print('Cell 3')",
                metadata={"tags": ["visualization"], "collapsed": True},
            ),
            nb.new_code_cell(
                "print('Complex metadata')",
                metadata={
                    "tags": ["tag1", "tag2"],
                    "collapsed": True,
                    "scrolled": False,
                    "custom": {"key": "value"},
                },
            ),
            nb.new_code_cell(
                "print('hidden cell')",
                metadata={
                    "tags": ["hide-cell"],
                },
            ),
            nb.new_code_cell(
                "print('hidden cell, with other tags')",
                metadata={
                    "tags": ["hide-cell", "remove-print"],
                },
            ),
        ],
    )

    create_notebook_fixture(
        "hides_markdown_cells",
        [
            nb.new_markdown_cell("A markdown cell."),
            nb.new_markdown_cell(
                "A markdown cell with tags: ['blah'].",
                metadata={"tags": ["blah"]},
            ),
            nb.new_markdown_cell(
                "A markdown cell with tags: ['blah', 'hide-cell'].",
                metadata={"tags": ["blah", "hide-cell"]},
            ),
        ],
    )

    create_notebook_fixture(
        "pip_commands",
        [
            "!pip install transformers",
            "!pip install pandas numpy matplotlib",
            "# Mixed cell with pip and other commands\n!pip install scikit-learn\nimport numpy as np\n!pip install seaborn",
            "# Non-pip exclamation commands should remain unchanged\n!ls -la\n!echo 'Hello World'",
            "# Magic pip command should also be handled\n%pip install requests",
        ],
    )


if __name__ == "__main__":
    main()


--- scripts/generate_schemas.py ---
#!/usr/bin/env python3

import marimo

__generated_with = "0.18.4"
app = marimo.App(width="medium")

with app.setup:
    import marimo as mo
    import marimo._schemas.session as s
    import marimo._schemas.notebook as n
    import marimo._messaging.notification as o
    import typing as t

    SESSION_MESSAGES = [
        # Session
        s.TimeMetadata,
        s.StreamOutput,
        s.StreamMediaOutput,
        s.ErrorOutput,
        s.DataOutput,
        s.Cell,
        s.NotebookSessionMetadata,
        s.NotebookSessionV1,
    ]
    NOTEBOOK_MESSAGES = [
        # Notebook
        n.NotebookCell,
        n.NotebookCellConfig,
        n.NotebookMetadata,
        n.NotebookV1,
    ]
    OPS_MESSAGES = [
        # Message operations
        o.CellNotification,
        o.FunctionCallResultNotification,
        o.RemoveUIElementsNotification,
        o.UIElementMessageNotification,
        o.InterruptedNotification,
        o.CompletedRunNotification,
        o.KernelReadyNotification,
        o.CompletionResultNotification,
        o.AlertNotification,
        o.MissingPackageAlertNotification,
        o.InstallingPackageAlertNotification,
        o.ReconnectedNotification,
        o.StartupLogsNotification,
        o.BannerNotification,
        o.ReloadNotification,
        o.VariablesNotification,
        o.VariableValuesNotification,
        o.DatasetsNotification,
        o.SQLTablePreviewNotification,
        o.SQLTableListPreviewNotification,
        o.DataColumnPreviewNotification,
        o.DataSourceConnectionsNotification,
        o.ValidateSQLResultNotification,
        o.QueryParamsSetNotification,
        o.QueryParamsAppendNotification,
        o.QueryParamsDeleteNotification,
        o.QueryParamsClearNotification,
        o.FocusCellNotification,
        o.UpdateCellCodesNotification,
        o.SecretKeysResultNotification,
        o.CacheClearedNotification,
        o.CacheInfoNotification,
        o.UpdateCellIdsNotification,
    ]


@app.cell(hide_code=True)
def _():
    mo.md(r"""
    This marimo notebook generates the OpenAPI schema for the `TypeDict`s defined in `marimo._schemas`
    """)
    return


@app.cell(hide_code=True)
def _():
    generate_schema_button = mo.ui.run_button(label="Write schema")
    generate_schema_button
    return (generate_schema_button,)


@app.function
def generate_schema(name: str):
    import yaml

    assert name in ["session", "notebook", "notifications"], (
        "Invalid schema name must be 'session', 'notebook', or 'notifications'"
    )

    header = f"# This file is generated by scripts/generate_schemas.py\n"

    print(f"Writing schema to marimo/_schemas/generated/{name}.yaml")
    if name == "session":
        messages = SESSION_MESSAGES
    elif name == "notebook":
        messages = NOTEBOOK_MESSAGES
    else:
        messages = OPS_MESSAGES
    return header + yaml.dump(build_openapi_schema(messages))


@app.function
def write_schema(name: str):
    output = (
        mo.notebook_dir().parent
        / "marimo"
        / "_schemas"
        / "generated"
        / f"{name}.yaml"
    )
    output.write_text(generate_schema(name), encoding="utf-8")


@app.function
def build_openapi_schema(messages):
    from marimo._utils.dataclass_to_openapi import (
        PythonTypeToOpenAPI,
    )
    import msgspec
    import msgspec.json

    try:
        components = msgspec.json.schema_components(messages, ref_template="#/components/schemas/{name}")
        return {
            "openapi": "3.0.0",
            "info": {"title": "marimo"},
            "components": {
                "schemas": {
                    **components[1],
                }
            },
        }
    except Exception as e:
        import traceback

        traceback.print_exc()

    processed_classes: dict[t.Any, str] = {}
    component_schemas: dict[str, t.Any] = {}
    name_overrides: dict[t.Any, str] = {}

    converter = PythonTypeToOpenAPI(
        camel_case=False, name_overrides=name_overrides
    )
    for cls in messages:
        if cls in processed_classes:
            del processed_classes[cls]
        name = name_overrides.get(cls, cls.__name__)  # type: ignore[attr-defined]
        component_schemas[name] = converter.convert(cls, processed_classes)
        processed_classes[cls] = name

    schemas = {
        "openapi": "3.0.0",
        "info": {"title": "marimo"},
        "components": {
            "schemas": {
                **component_schemas,
            }
        },
    }
    return schemas


@app.cell
def _(generate_schema_button):
    if mo.app_meta().mode == "script" or generate_schema_button.value:
        write_schema("session")
        write_schema("notebook")
        write_schema("notifications")
    return


if __name__ == "__main__":
    app.run()


--- scripts/modify_pyproject_for_marimo_base.py ---
#!/usr/bin/env uv run
"""
Python build tools generally only allow building
one project per Python project.

This modifies the pyproject.toml to build marimo-base,
a slimmed down marimo distribution with no static
artifacts.

Adapted from https://github.com/cvxpy/cvxpy/blob/297278e2a88db3c0084750052a16e60672074da3/.github/workflows/build.yml#L169C1-L180C1
"""
# /// script
# requires-python = ">=3.13"
# dependencies = ["tomlkit"]
#
# [tool.uv]
# exclude-newer = "2025-07-28T10:17:41.85442-04:00"
# ///

import pathlib
import tomlkit


root = pathlib.Path(__file__).parent.parent

force_exclude = ["marimo/_lsp"]
static_dir = root / "marimo/_static"

if static_dir.exists():
    force_exclude.extend([
        str(item.relative_to(root))
        for item in static_dir.iterdir()
        if item.name != "index.html"
    ])
else:
    print("No _static directory found, skipping")

with (root / "pyproject.toml").open(encoding="utf-8", mode="r") as f:
    data = tomlkit.load(f)


data["project"]["name"] = "marimo-base"
build_backend = data["tool"]["uv"]["build-backend"]

if "source-exclude" not in build_backend:
    build_backend["source-exclude"] = []
build_backend["source-exclude"].extend(force_exclude)

if "wheel-exclude" not in build_backend:
    build_backend["wheel-exclude"] = []
build_backend["wheel-exclude"].extend(force_exclude)

with (root / "pyproject.toml").open(encoding="utf-8", mode="w") as f:
    tomlkit.dump(data, f)

print("Successfully modified pyproject.toml for marimo-base build")


--- scripts/print_banned_cell_names.py ---
import marimo

__generated_with = "0.1.69"
app = marimo.App()


@app.cell
def __():
    def format_keywords(l: list[str]):
        print('\n'.join(l))
    return format_keywords,


@app.cell
def __():
    RESERVED_BY_MARIMO = [
        # We reserve tokens starting with two underscores for
        # the future
        "__*",
        # We import marimo in the notebook file
        "marimo",
        # The notebook/app object
        "app"
    ]
    return RESERVED_BY_MARIMO,


@app.cell
def __(keyword):
    RESERVED_BY_PYTHON = keyword.softkwlist + keyword.kwlist
    return RESERVED_BY_PYTHON,


@app.cell
def __(RESERVED_BY_MARIMO, RESERVED_BY_PYTHON, format_keywords):
    print(format_keywords(RESERVED_BY_MARIMO + RESERVED_BY_PYTHON))
    return


@app.cell
def __():
    import keyword
    return keyword,


if __name__ == "__main__":
    app.run()


--- tests/_session/state/snapshots/README.md ---
# Session Serialization Snapshots

This directory contains snapshot tests for the session serialization/deserialization functionality. The snapshots verify that the JSON structure of serialized notebook sessions remains consistent.



--- tests/_server/templates/data/index.html ---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="./favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" href="./assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" href="./assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" href="./assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
    <link rel="manifest" href="./manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        resizeObserver.observe(obj.contentWindow.document.body);
      }
    </script>
    <marimo-filename hidden>{{ filename }}</marimo-filename>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = '{{ mount_config }}';
    </script>
    <title>{{ title }}</title>
    <script type="module" crossorigin src="./assets/index-h93-9ptT.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-Bkoicf0g.css" />
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>


--- tests/conftest.py ---
# Copyright 2026 Marimo. All rights reserved.
from __future__ import annotations

import dataclasses
import re
import shutil
import sys
import textwrap
from pathlib import Path
from typing import TYPE_CHECKING, Any

import pytest
from _pytest import runner

from marimo._ast.app import App
from marimo._ast.app_config import _AppConfig
from marimo._ast.cell_manager import CellManager
from marimo._config.config import DEFAULT_CONFIG
from marimo._dependencies.dependencies import DependencyManager
from marimo._messaging.mimetypes import ConsoleMimeType
from marimo._messaging.notification import (
    CellNotification,
    NotificationMessage,
)
from marimo._messaging.print_override import print_override
from marimo._messaging.serde import deserialize_kernel_message
from marimo._messaging.streams import (
    ThreadSafeStderr,
    ThreadSafeStdin,
    ThreadSafeStdout,
    ThreadSafeStream,
)
from marimo._messaging.types import KernelMessage
from marimo._output.formatters.formatters import register_formatters
from marimo._runtime import patches
from marimo._runtime.commands import AppMetadata, ExecuteCellCommand
from marimo._runtime.context import teardown_context
from marimo._runtime.context.kernel_context import initialize_kernel_context
from marimo._runtime.input_override import input_override
from marimo._runtime.marimo_pdb import MarimoPdb
from marimo._runtime.runner.hooks import create_default_hooks
from marimo._runtime.runtime import Kernel
from marimo._save.stubs.module_stub import ModuleStub
from marimo._server.utils import initialize_mimetypes
from marimo._session.model import SessionMode
from marimo._types.ids import CellId_t

if TYPE_CHECKING:
    from collections.abc import Generator
    from types import ModuleType

# register import hooks for third-party module formatters
register_formatters()

# Initialize mimetypes for consistent behavior across platforms (especially Windows)
initialize_mimetypes()


def pytest_collection_modifyitems(
    config: pytest.Config, items: list[pytest.Item]
) -> None:
    """Auto-skip tests based on @pytest.mark.requires() markers."""
    del config  # Unused but required by pytest hook signature
    for item in items:
        requires_marker = item.get_closest_marker("requires")
        if not requires_marker:
            continue

        missing_deps = []
        # Get dependency names from marker args
        for dep_name in requires_marker.args:
            # Try to get the dependency from DependencyManager
            dep_manager = getattr(DependencyManager, dep_name, None)
            if dep_manager is not None:
                if not dep_manager.has():
                    missing_deps.append(dep_name)
            else:
                # Unknown dependency name
                missing_deps.append(f"{dep_name} (unknown)")

        # Skip test if any dependencies are missing
        if missing_deps:
            deps_str = ", ".join(missing_deps)
            reason = f"requires {deps_str}"
            item.add_marker(pytest.mark.skip(reason=reason))


@pytest.fixture(autouse=True)
def patch_random_seed(monkeypatch: pytest.MonkeyPatch) -> None:
    """Patch UIElement._random_seed to use a fixed seed for testing"""
    import random

    from marimo._plugins.ui._core.ui_element import UIElement

    # Patch the random seed to be deterministic for testing
    monkeypatch.setattr(UIElement, "_random_seed", random.Random(42))


@dataclasses.dataclass
class _MockStream(ThreadSafeStream):
    """Captures the ops sent through the stream"""

    cell_id: int | None = None
    input_queue: None = None
    pipe: None = None
    redirect_console: bool = False

    messages: list[KernelMessage] = dataclasses.field(default_factory=list)

    def write(self, data: KernelMessage) -> None:
        self.messages.append(data)
        # Attempt to deserialize the message to ensure it is valid
        deserialize_kernel_message(data)

    @property
    def operations(self) -> list[NotificationMessage]:
        return [
            deserialize_kernel_message(op_data) for op_data in self.messages
        ]

    @property
    def cell_notifications(self) -> list[CellNotification]:
        return [
            op for op in self.operations if isinstance(op, CellNotification)
        ]


class MockStdout(ThreadSafeStdout):
    """Captures the output sent through the stream"""

    def __init__(self, stream: _MockStream) -> None:
        super().__init__(stream)
        self.messages: list[str] = []

    def _write_with_mimetype(
        self, data: str, mimetype: ConsoleMimeType
    ) -> int:
        del mimetype
        self.messages.append(data)
        return len(data)

    def __repr__(self) -> str:
        return "".join(self.messages)


class MockStderr(ThreadSafeStderr):
    """Captures the output sent through the stream"""

    messages: list[str] = dataclasses.field(default_factory=list)

    def __init__(self, stream: _MockStream) -> None:
        super().__init__(stream)
        self.messages: list[str] = []

    def _write_with_mimetype(
        self, data: str, mimetype: ConsoleMimeType
    ) -> int:
        del mimetype
        self.messages.append(data)
        return len(data)

    def __repr__(self) -> str:
        # Error messages are commonly formatted for output in HTML
        return re.sub(r"<.*?>", "", "".join(self.messages))


class MockStdin(ThreadSafeStdin):
    """Echoes the prompt."""

    def __init__(self, stream: _MockStream) -> None:
        super().__init__(stream)
        self.messages: list[str] = []

    def _readline_with_prompt(
        self, prompt: str = "", password: bool = False
    ) -> str:
        del password
        return prompt


@dataclasses.dataclass
class MockedKernel:
    """Should only be created in fixtures b/c inits a runtime context"""

    stream: _MockStream = dataclasses.field(default_factory=_MockStream)
    session_mode: SessionMode = SessionMode.EDIT

    def __post_init__(self) -> None:
        self.stdout = MockStdout(self.stream)
        self.stderr = MockStderr(self.stream)
        self.stdin = MockStdin(self.stream)
        self._main = sys.modules["__main__"]
        module = patches.patch_main_module(
            file=None,
            input_override=input_override,
            print_override=print_override,
        )

        self.k = Kernel(
            stream=self.stream,
            stdout=self.stdout,
            stderr=self.stderr,
            stdin=self.stdin,
            cell_configs={},
            user_config=DEFAULT_CONFIG,
            app_metadata=AppMetadata(
                query_params={},
                filename=None,
                cli_args={},
                argv=None,
                app_config=_AppConfig(),
            ),
            debugger_override=MarimoPdb(stdout=self.stdout, stdin=self.stdin),
            enqueue_control_request=lambda _: None,
            module=module,
            hooks=create_default_hooks(),
        )

        initialize_kernel_context(
            kernel=self.k,
            stream=self.stream,  # type: ignore
            stdout=self.stdout,  # type: ignore
            stderr=self.stderr,  # type: ignore
            virtual_files_supported=True,
            mode=self.session_mode,
        )

    def teardown(self) -> None:
        # must be called by fixtures that instantiate this
        teardown_context()
        self.stdout._watcher.stop()
        self.stderr._watcher.stop()
        if self.k.module_watcher is not None:
            self.k.module_watcher.stop()
        sys.modules["__main__"] = self._main


# fixture that provides a kernel (and tears it down)
@pytest.fixture
def k() -> Generator[Kernel, None, None]:
    mocked = MockedKernel()
    yield mocked.k
    mocked.teardown()


# kernel configured with runtime=lazy
@pytest.fixture
def lazy_kernel(k: Kernel) -> Kernel:
    k.execution_type = "relaxed"
    k.reactive_execution_mode = "lazy"
    return k


# kernel configured with strict execution
@pytest.fixture
def strict_kernel() -> Generator[Kernel, None, None]:
    mocked = MockedKernel()
    mocked.k.execution_type = "strict"
    mocked.k.reactive_execution_mode = "autorun"
    yield mocked.k
    mocked.teardown()


# kernel configured in SessionMode.RUN mode
@pytest.fixture
def run_mode_kernel() -> Generator[MockedKernel, None, None]:
    mocked = MockedKernel(session_mode=SessionMode.RUN)
    yield mocked
    mocked.teardown()


@pytest.fixture(params=["k", "strict_kernel"])
def execution_kernel(request: Any) -> Kernel:
    return request.getfixturevalue(request.param)


@pytest.fixture(params=["k", "strict_kernel", "lazy_kernel"])
def any_kernel(request: Any) -> Kernel:
    return request.getfixturevalue(request.param)


# fixture that wraps a kernel and other mocked objects
@pytest.fixture
def mocked_kernel() -> Generator[MockedKernel, None, None]:
    mocked = MockedKernel()
    yield mocked
    mocked.teardown()


# Installs an execution context without stream redirection
@pytest.fixture
def executing_kernel() -> Generator[Kernel, None, None]:
    mocked = MockedKernel()
    mocked.k.stdout = None
    mocked.k.stderr = None
    mocked.k.stdin = None
    with mocked.k._install_execution_context(cell_id="0"):
        yield mocked.k
    mocked.teardown()


FIXTURE_DIR = Path(__file__).parent / "fixtures"


@pytest.fixture
def temp_marimo_file(tmp_path: Path) -> str:
    fixture_file = FIXTURE_DIR / "notebook.py"
    tmp_file = tmp_path / "test" / "notebook.py"
    tmp_file.parent.mkdir(parents=True, exist_ok=True)
    shutil.copy(fixture_file, tmp_file)
    return str(tmp_file)


@pytest.fixture
def temp_sandboxed_marimo_file(tmp_path: Path) -> str:
    fixture_file = FIXTURE_DIR / "notebook_sandboxed.py"
    tmp_file = tmp_path / "sandboxed" / "notebook.py"
    tmp_file.parent.mkdir(parents=True, exist_ok=True)
    shutil.copy(fixture_file, tmp_file)
    return str(tmp_file)


@pytest.fixture
def temp_async_marimo_file(tmp_path: Path) -> str:
    fixture_file = FIXTURE_DIR / "notebook_async.py"
    tmp_file = tmp_path / "async" / "notebook.py"
    tmp_file.parent.mkdir(parents=True, exist_ok=True)
    shutil.copy(fixture_file, tmp_file)
    return str(tmp_file)


@pytest.fixture
def temp_unparsable_marimo_file(tmp_path: Path) -> str:
    fixture_file = FIXTURE_DIR / "notebook_unparsable.py"
    tmp_file = tmp_path / "unparsable" / "notebook.py"
    tmp_file.parent.mkdir(parents=True, exist_ok=True)
    shutil.copy(fixture_file, tmp_file)
    return str(tmp_file)


@pytest.fixture
def temp_marimo_file_with_md(tmp_path: Path) -> str:
    fixture_file = FIXTURE_DIR / "notebook_with_md.py"
    tmp_file = tmp_path / "with_md" / "notebook.py"
    tmp_file.parent.mkdir(parents=True, exist_ok=True)
    shutil.copy(fixture_file, tmp_file)
    return str(tmp_file)


@pytest.fixture
def temp_marimo_file_with_media(tmp_path: Path) -> str:
    fixture_file = FIXTURE_DIR / "notebook_with_media.py"
    tmp_file = tmp_path / "with_media" / "notebook.py"
    tmp_file.parent.mkdir(parents=True, exist_ok=True)
    shutil.copy(fixture_file, tmp_file)
    return str(tmp_file)


@pytest.fixture
def temp_md_marimo_file(tmp_path: Path) -> str:
    fixture_file = FIXTURE_DIR / "notebook.md"
    tmp_file = tmp_path / "with_md" / "notebook.md"
    tmp_file.parent.mkdir(parents=True, exist_ok=True)
    shutil.copy(fixture_file, tmp_file)
    return str(tmp_file)


@pytest.fixture
def temp_marimo_file_with_errors(tmp_path: Path) -> str:
    fixture_file = FIXTURE_DIR / "notebook_with_errors.py"
    tmp_file = tmp_path / "with_errors" / "notebook.py"
    tmp_file.parent.mkdir(parents=True, exist_ok=True)
    shutil.copy(fixture_file, tmp_file)
    return str(tmp_file)


@pytest.fixture
def temp_marimo_file_with_multiple_definitions(tmp_path: Path) -> str:
    fixture_file = FIXTURE_DIR / "notebook_with_multiple_definitions.py"
    tmp_file = tmp_path / "with_multiple_definitions" / "notebook.py"
    tmp_file.parent.mkdir(parents=True, exist_ok=True)
    shutil.copy(fixture_file, tmp_file)
    return str(tmp_file)


# Factory to create ExecuteCellCommands and abstract away cell ID
class ExecReqProvider:
    def __init__(self) -> None:
        self.cell_manager = CellManager()

    def get(self, code: str) -> ExecuteCellCommand:
        key = self.cell_manager.create_cell_id()
        return ExecuteCellCommand(cell_id=key, code=textwrap.dedent(code))

    def get_with_id(self, cell_id: CellId_t, code: str) -> ExecuteCellCommand:
        return ExecuteCellCommand(cell_id=cell_id, code=textwrap.dedent(code))


# fixture that provides an ExecReqProvider
@pytest.fixture
def exec_req() -> ExecReqProvider:
    return ExecReqProvider()


# Library fixtures for direct marimo integration with pytest.
@pytest.fixture
def mo_fixture() -> ModuleType:
    import marimo as mo

    return mo


# Sets some non-public attributes on App and runs it.
@pytest.fixture
def app() -> Generator[App, None, None]:
    app = App()
    # Needed for consistent stack trace paths.
    app._anonymous_file = True
    # Provides verbose traceback on assertion errors. Note it does alter the
    # cell AST.
    app._pytest_rewrite = True
    yield app
    app.run()


class TestableModuleStub(ModuleStub):
    __test__ = False

    def __eq__(self, other: Any) -> bool:
        # Used for testing, equality otherwise not useful.
        if not isinstance(other, ModuleStub):
            return False
        return self.name == other.name

    def __hash__(self) -> int:
        return hash(self.name) + hash("module")


# A pytest hook to fail when raw marimo cells are not collected.
# Meta testing gets a little messy, and may leave you a little testy. This is
# increasingly coupled with the following specific tests that test testing:
# _ast/
#    ./test_pytest
#    ./test_pytest_toplevel
#    ./test_pytest_scoped
@pytest.hookimpl
def pytest_make_collect_report(collector):
    # If it's not a module, we must early.
    if not isinstance(collector, pytest.Module):
        return None

    report = runner.pytest_make_collect_report(collector)

    # Defined within the file does not seem to hook correctly, as such filter
    # for the test_pytest specific file here.
    if not (
        "test_pytest" in str(collector.path) and "_ast" in str(collector.path)
    ):
        return report

    # Classes may also be registered, but they will be hidden behind a cell.
    # As such, let's just collect functions.
    collected = {
        fn.originalname
        for fn in collector.collect()
        if isinstance(fn, pytest.Function)
    }
    classes = {
        cls.name
        for cls in collector.collect()
        if isinstance(cls, pytest.Class)
    }
    from tests._ast.test_pytest import app as app_pytest
    from tests._ast.test_pytest_scoped import app as app_scoped
    from tests._ast.test_pytest_toplevel import app as app_toplevel

    app = {
        "test_pytest": app_pytest,
        "test_pytest_toplevel": app_toplevel,
        "test_pytest_scoped": app_scoped,
    }[collector.path.stem]

    # Just a quick check to make sure the class is actually exported.
    if app == app_pytest:
        if len(classes) == 0:
            report.outcome = "failed"
            report.longrepr = (
                f"Expected class in {collector.path}, found none "
                " (tests/conftest.py)."
            )
            return report
    for cls in classes:
        if not (
            cls.startswith("MarimoTestBlock")
            or cls
            in (
                "TestClassWorks",
                "TestClassWithFixtures",
                "TestClassDefinitionWithFixtures",
            )
        ):
            report.outcome = "failed"
            report.longrepr = (
                f"Unknown class '{cls}' in {collector.path}"
                " (tests/conftest.py)."
            )

            return report

    # Check the functions match cells in the app.
    invalid = []
    for name in app._cell_manager.names():
        if name.startswith("test_") and name not in collected:
            invalid.append(f"'{name}'")
    if invalid:
        tests = ", ".join([f"'{test}'" for test in collected])
        report.outcome = "failed"
        report.longrepr = (
            f"Cannot collect test(s) {', '.join(invalid)} from {tests}"
            " (tests/conftest.py)."
        )
    return report


--- tests/__init__.py ---


--- tests/mocks.py ---
from __future__ import annotations

import difflib
import re
from html.parser import HTMLParser
from pathlib import Path
from typing import Protocol

import pytest

from marimo import __version__
from marimo._utils.paths import maybe_make_dirs
from marimo._utils.platform import is_windows


class SnapshotFunc(Protocol):
    def __call__(
        self, filename: str, result: str, keep_version: bool = False
    ) -> None: ...


class ToText(HTMLParser):
    def __init__(self) -> None:
        HTMLParser.__init__(self)
        self._text = []

    def handle_data(self, data: str) -> None:
        text = data.strip()
        if len(text) > 0:
            text = re.sub("[ \t\r\n]+", " ", text)
            self._text.append(text.strip())

    def text(self) -> str:
        return " ".join(self._text).strip()

    @staticmethod
    def apply(html: str) -> str:
        parser = ToText()
        parser.feed(html)
        parser.close()
        return parser.text()


def snapshotter(current_file: str) -> SnapshotFunc:
    """
    Utility function to create and compare snapshots.

    If the snapshot doesn't exist, it will be created.

    If the snapshot exists, it will be compared with the new result.
    If the result is different, the test will fail,
    but the snapshot will be updated with the new result.
    """

    def snapshot(
        filename: str, result: str, keep_version: bool = False
    ) -> None:
        filepath = Path(current_file).parent / "snapshots" / filename

        if not keep_version:
            result = _sanitize_version(result)

        # If snapshot directory doesn't exist, create it
        maybe_make_dirs(filepath)

        def normalize(string: str) -> str:
            return string.replace("\r\n", "\n")

        result = normalize(result)

        # If doesn't exist, create snapshot
        if not filepath.exists():
            filepath.write_text(result)
            print("Snapshot updated")
            return

        # Read snapshot
        expected = normalize(filepath.read_text())

        assert result, "Result is empty"
        assert expected, "Expected is empty"

        def write_result() -> None:
            filepath.write_text(result)

        is_json = filename.endswith(".json")
        if is_json:
            import json

            expected_json = json.loads(expected)
            result_json = json.loads(result)

            if expected_json != result_json:
                write_result()
                print("Snapshot updated")

            assert expected_json == result_json
        else:
            text_diff = "\n".join(
                list(
                    difflib.unified_diff(
                        expected.splitlines(),
                        result.splitlines(),
                        lineterm="",
                    )
                )
            )

            if result != expected:
                write_result()
                print("Snapshot updated")

                # If the snapshot only differs by whitespace,
                # provide a more helpful error message.
                if result.strip() == expected.strip():
                    print("Snapshot only differs by whitespace (.strip())")

                pytest.fail(f"Snapshot differs: '{text_diff}'")

    return snapshot


def _sanitize_version(output: str) -> str:
    output = output.replace(f"{__version__} (editable)", "0.0.0").replace(
        f"{__version__}", "0.0.0"
    )
    output = re.sub(
        r'"marimo_version": "[^"]*"', '"marimo_version": "0.0.0"', output
    )
    return output


def delete_lines_with_files(output: str) -> str:
    """Remove file paths from error messages for consistent snapshots."""

    def remove_file_name(line: str) -> str:
        if "File " not in line:
            return line
        start = line.index("File ")
        if ".py" in line[start:]:
            end = line.rindex(".py") + 3
            return line[0:start] + line[end:]
        return line

    return "\n".join(remove_file_name(line) for line in output.splitlines())


def simplify_images(output: str) -> str:
    """Simplify image paths for consistent snapshots."""
    # Handle data URLs
    output = re.sub(
        r"data:image/png;base64,.*",
        "data:image/png;base64,IMAGE_BASE64_DATA",
        output,
    )

    # Handle "image/png": "*"
    output = re.sub(
        r'"image/png": ".*"',
        '"image/png": "IMAGE_BASE64_DATA"',
        output,
    )
    return output


def simplify_plotly(output: str) -> str:
    """Simplify plotly output for consistent snapshots."""
    # Replace any <marimo-plotly ...>...</marimo-plotly> (attributes or not, any whitespace, multiline)
    # This will handle possible attributes, whitespace, and multiline contents.
    output = re.sub(
        r"<marimo-plotly\b[^>]*>.*?</marimo-plotly>",
        "<marimo-plotly>REDACTED</marimo-plotly>",
        output,
        flags=re.DOTALL | re.IGNORECASE,
    )
    # Replace plotly base64 blobs in data URLs (including possible line breaks)
    output = re.sub(
        r"data:application/json;base64,[A-Za-z0-9+/=\n\r]*",
        "data:application/json;base64,REDACTED_BASE64_DATA",
        output,
        flags=re.DOTALL,
    )
    # As a last resort, if there are still very large chunks of plotly content,
    # we redact anything between tags that looks like giant plotly JSON blobs.
    output = re.sub(
        r'("application/vnd\.plotly\.v1\+json":\s*")[^"]*(")',
        r"\1REDACTED_PLOTLY_JSON\2",
        output,
        flags=re.DOTALL,
    )

    # Sanitize raw Plotly HTML output (from mo.ui.plotly())
    # Replace random UUID-like div IDs (handles both escaped and unescaped quotes)
    output = re.sub(
        r'id=\\"[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\\"',
        'id=\\"PLOTLY_DIV_ID\\"',
        output,
    )
    output = re.sub(
        r'id="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"',
        'id="PLOTLY_DIV_ID"',
        output,
    )
    # Replace UUID in getElementById calls (handles both escaped and unescaped quotes)
    output = re.sub(
        r'getElementById\(\\"([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})\\"\)',
        'getElementById(\\"PLOTLY_DIV_ID\\")',
        output,
    )
    output = re.sub(
        r'getElementById\("([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})"\)',
        'getElementById("PLOTLY_DIV_ID")',
        output,
    )
    # Replace UUID in Plotly.newPlot calls (handles both escaped and unescaped quotes)
    output = re.sub(
        r'Plotly\.newPlot\(\s*\\"([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})\\"',
        'Plotly.newPlot(\\"PLOTLY_DIV_ID\\"',
        output,
    )
    output = re.sub(
        r'Plotly\.newPlot\(\s*"([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})"',
        'Plotly.newPlot("PLOTLY_DIV_ID"',
        output,
    )
    # Replace plotly CDN URLs with version and integrity (handles both escaped and unescaped quotes)
    output = re.sub(
        r'src=\\"https://cdn\.plot\.ly/plotly-[^\\"]*\\" integrity=\\"[^\\"]*\\"',
        'src=\\"https://cdn.plot.ly/plotly-VERSION.min.js\\" integrity=\\"INTEGRITY_HASH\\"',
        output,
    )
    output = re.sub(
        r'src="https://cdn\.plot\.ly/plotly-[^"]*" integrity="[^"]*"',
        'src="https://cdn.plot.ly/plotly-VERSION.min.js" integrity="INTEGRITY_HASH"',
        output,
    )
    # Replace base64-encoded binary data in plotly JSON (handles both escaped and unescaped quotes)
    output = re.sub(
        r'\\"bdata\\":\\"[^\\"]*\\"',
        '\\"bdata\\":\\"PLOTLY_BINARY_DATA\\"',
        output,
    )
    output = re.sub(
        r'"bdata":"[^"]*"',
        '"bdata":"PLOTLY_BINARY_DATA"',
        output,
    )

    return output


NON_WINDOWS_EDGE_CASE_FILENAMES = [
    "test<script>.py",
    'test"quotes".py',
]


EDGE_CASE_FILENAMES = [
    # Unicode characters
    "t√©st.py",
    "caf√©.py",
    "ÊµãËØï.py",
    "üöÄnotebook.py",
    # Spaces
    "test file with spaces.py",
    # Mixed unicode and spaces
    "caf√© notebook.py",
    "ÊµãËØï file.py",
    # Injection attempts
    *(NON_WINDOWS_EDGE_CASE_FILENAMES if not is_windows() else []),
]


--- tests/test_entrypoints.py ---
import os
from typing import cast
from unittest.mock import MagicMock, patch

import pytest

from marimo._entrypoints.ids import KnownEntryPoint
from marimo._entrypoints.registry import EntryPointRegistry, get_entry_points
from marimo._runtime.executor import ExecutionConfig, Executor, get_executor


class TestEntryPointRegistry:
    @pytest.fixture
    def registry(self) -> EntryPointRegistry[str]:
        return EntryPointRegistry[str](
            cast(KnownEntryPoint, "marimo.test.group")
        )

    def test_register_and_get(self, registry: EntryPointRegistry[str]) -> None:
        registry.register("test", "value")
        assert registry.get("test") == "value"

    def test_unregister(self, registry: EntryPointRegistry[str]) -> None:
        registry.register("test", "value")
        assert registry.unregister("test") == "value"
        with pytest.raises(KeyError):
            registry.get("test")

    def test_names(self, registry: EntryPointRegistry[str]) -> None:
        registry.register("test1", "value1")
        registry.register("test2", "value2")
        assert set(registry.names()) == {"test1", "test2"}

    def test_get_nonexistent(self, registry: EntryPointRegistry[str]) -> None:
        with pytest.raises(KeyError):
            registry.get("nonexistent")

    def test_repr(self, registry: EntryPointRegistry[str]) -> None:
        registry.register("test", "value")
        assert "EntryPointRegistry" in repr(registry)
        assert "test" in repr(registry)

    def test_allowlist(self, registry: EntryPointRegistry[str]) -> None:
        with patch.dict(
            os.environ, {"MARIMO_TEST_GROUP_ALLOWLIST": "test1,test2"}
        ):
            # Allowed extension
            registry.register("test1", "value1")
            assert registry.get("test1") == "value1"

            # Not allowed extension - should be silently ignored
            registry.register("test3", "value3")
            assert "test3" not in registry.names()

            # Not allowed extension - should raise on get
            with pytest.raises(ValueError, match="not allowed"):
                registry.get("test3")

    def test_denylist(self, registry: EntryPointRegistry[str]) -> None:
        with patch.dict(
            os.environ, {"MARIMO_TEST_GROUP_DENYLIST": "test2,test3"}
        ):
            # Allowed extension
            registry.register("test1", "value1")
            assert registry.get("test1") == "value1"

            # Denied extension - should be silently ignored
            registry.register("test2", "value2")
            assert "test2" not in registry.names()

            # Denied extension - should raise on get
            with pytest.raises(ValueError, match="not allowed"):
                registry.get("test2")

    def test_allowlist_and_denylist(
        self, registry: EntryPointRegistry[str]
    ) -> None:
        with patch.dict(
            os.environ,
            {
                "MARIMO_TEST_GROUP_ALLOWLIST": "test1,test2",
                "MARIMO_TEST_GROUP_DENYLIST": "test2,test3",
            },
        ):
            # Allowed extension
            registry.register("test1", "value1")
            assert registry.get("test1") == "value1"

            # Denied extension - should be silently ignored even if in allowlist
            registry.register("test2", "value2")
            assert "test2" not in registry.names()

            # Not in allowlist - should be silently ignored
            registry.register("test4", "value4")
            assert "test4" not in registry.names()

    def test_case_insensitive(self, registry: EntryPointRegistry[str]) -> None:
        with patch.dict(
            os.environ,
            {
                "MARIMO_TEST_GROUP_ALLOWLIST": "Test1,TEST2",
                "MARIMO_TEST_GROUP_DENYLIST": "TEST3,test4",
            },
        ):
            # Case-insensitive allowlist match
            registry.register("test1", "value1")
            registry.register("TEST2", "value2")
            assert set(registry.names()) == {"test1", "TEST2"}

            # Case-insensitive denylist match
            registry.register("Test3", "value3")
            registry.register("TEST4", "value4")
            assert "Test3" not in registry.names()
            assert "TEST4" not in registry.names()

    @patch("marimo._entrypoints.registry.entry_points")
    def test_get_entry_points_modern(
        self, mock_entry_points: MagicMock
    ) -> None:
        mock_eps = MagicMock()
        mock_eps.select.return_value = ["ep1", "ep2"]
        mock_entry_points.return_value = mock_eps

        result = get_entry_points(cast(KnownEntryPoint, "plugins"))
        assert result == ["ep1", "ep2"]
        mock_eps.select.assert_called_once_with(
            group=cast(KnownEntryPoint, "plugins")
        )

    def test_get_all(self, registry: EntryPointRegistry[str]) -> None:
        registry.register("test1", "value1")
        registry.register("test2", "value2")

        with patch(
            "marimo._entrypoints.registry.get_entry_points"
        ) as mock_get_entry_points:
            mock_get_entry_points.return_value = []
            result = registry.get_all()

        assert set(result) == {"value1", "value2"}

    @patch("marimo._entrypoints.registry.get_entry_points")
    def test_get_all_with_entry_points(
        self, mock_get_entry_points: MagicMock
    ) -> None:
        registry = EntryPointRegistry[str](cast(KnownEntryPoint, "test_group"))

        # Create mock entry points
        ep1 = MagicMock()
        ep1.name = "ep1"
        ep1.load.return_value = "ep_value1"

        ep2 = MagicMock()
        ep2.name = "ep2"
        ep2.load.return_value = "ep_value2"

        mock_get_entry_points.return_value = [ep1, ep2]

        # Register one plugin directly
        registry.register("test1", "value1")

        # Get all plugins
        result = registry.get_all()

        # Should include both registered and entry point plugins
        assert set(result) == {"value1", "ep_value1", "ep_value2"}


class CustomExecutor(Executor):
    def execute_cell(
        self,
        cell: str,
        glbls: dict[str, str],
        graph: str,
    ) -> str:
        return f"Executed {cell} with {glbls} in {graph}"

    async def execute_cell_async(
        self,
        cell: str,
        glbls: dict[str, str],
        graph: str,
    ) -> str:
        return f"Executed {cell} with {glbls} in {graph}"


class TestExecutorEntryPoint:
    @pytest.fixture
    def registry(self) -> EntryPointRegistry[Executor]:
        reg = EntryPointRegistry[Executor]("marimo.cell.executor")
        reg.register("custom", CustomExecutor)
        return reg

    def test_get_entry_points_modern(
        self, registry: EntryPointRegistry[Executor]
    ) -> None:
        executor = get_executor(
            ExecutionConfig(is_strict=False), registry=registry
        )
        assert isinstance(executor, CustomExecutor)


## Links discovered
- [Executor](https://github.com/marimo-team/marimo/blob/main/tests/"marimo.cell.executor")
