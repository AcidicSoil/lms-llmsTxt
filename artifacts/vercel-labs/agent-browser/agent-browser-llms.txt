<!-- llmstxt:source=dspy -->
# agent-browser: AI-First Web Automation CLI

## Project Purpose
The purpose of `agent-browser` is to enable fast, reliable, and scalable web automation for AI agents, particularly those running in serverless or headless environments. It provides a rich CLI interface with semantic selectors, persistent sessions, encryption support, and cloud browser integrations (iOS, Browserbase, Browser Use, Kernel). The tool is designed to be used by developers and AI assistants for testing, interaction, and automation tasks — especially those requiring deterministic element selection via snapshots and refs.

## Key Concepts
- Headless browser automation
- Rust CLI with Node.js fallback
- Semantic selectors (role, text, label, testid)
- Snapshot-based ref interactions
- Session persistence and encryption
- Cloud browser providers (iOS, Browserbase, Browser Use, Kernel)
- CDP mode for remote browser control
- Streaming for live preview/pair browsing
- Authenticated sessions via HTTP headers
- AI-friendly workflow with snapshot → ref → action

## Architecture Overview
`agent-browser` employs a client-daemon architecture: the Rust CLI acts as a fast, native command interface that communicates with a Node.js daemon managing the Playwright browser instance. The daemon handles browser lifecycle, session state persistence, and protocol translation between CLI commands and browser actions. It supports multiple browser engines (Chromium, Firefox, WebKit) via Playwright, and offers fallback mechanisms for environments without Rust binaries. The architecture enables high performance, session isolation, and seamless integration with cloud providers via provider flags (`-p`), while also supporting advanced features like streaming, CDP connections, and mobile iOS testing through Appium.

## Important Directories
- `cli/` — CLI command implementation
- `src/` — Rust source code for core logic
- `docs/` — Project documentation and guides
- `skills/` — Skill modules for agent interaction
- `agents/skills/skill-creator/` — Agent skill creation tooling
- `scripts/` — Build, test, and deployment scripts

## Entry Points
- `bin/agent-browser.js` — Node.js daemon entry point
- `cli/src/main.rs` — Rust CLI binary entry point

## Development Info
The project uses TypeScript with `tsx` for transpilation and Vitest for unit testing. It has a complex build pipeline involving Cargo (for native CLI binaries), Docker, and cross-platform builds via shell scripts. The `package.json` includes CI/CD scripts like `build:all-platforms`, `release`, and `ci:publish`. Dependencies include Playwright Core, WebdriverIO, and Node-Simctl for iOS automation. Linting is handled by Prettier with Husky pre-commit hooks. Version sync and publishing are managed via Changeset and custom scripts.

## Usage Examples
```bash
# Start a session with persistent encryption
agent-browser --session my-session --encrypt --browser browserbase

# Use semantic selector to click "Login" button (role=button, text="Login")
agent-browser --action click --selector role=button:text="Login"

# Take a snapshot and reference it for later use
agent-browser --action snapshot --ref login-ref --selector role=button:text="Login"

# Perform action using the saved ref (e.g., click)
agent-browser --action click --ref login-ref

# Use streaming for live preview (pair browsing with another agent)
agent-browser --stream --partner http://localhost:3000

# Authenticate with custom headers
agent-browser --auth "Authorization: Bearer <token>" --browser kernel

# Switch to iOS browser (cloud provider)
agent-browser --browser ios --session my-ios-session
```
