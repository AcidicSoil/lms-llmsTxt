# llms-full (private-aware)
> Built from GitHub files and website pages. Large files may be truncated.

--- examples/vendor-connectors/QUICKSTART.md ---
# vendor-connectors Integration - Quick Reference

This is a quick reference for using agentic-crew with vendor-connectors.

## üöÄ Quick Start

### 1. Setup in vendor-connectors

```bash
# In vendor-connectors/pyproject.toml, add:
[project.optional-dependencies]
crews = ["agentic-crew[crewai]>=0.1.0"]

# Install
uv sync --extra crews
```

### 2. Copy Example Configuration

```bash
# Copy example .crewai/ directory to vendor-connectors
cp -r agentic-crew/examples/vendor-connectors/.crewai vendor-connectors/
```

### 3. Generate a Connector

```bash
cd vendor-connectors
agentic-crew run vendor-connectors connector_builder \
  --input '{"api_docs_url": "https://docs.meshy.ai/en", "vendor_name": "meshy"}'
```

### 4. Review and Integrate

```bash
# Generated code is in /tmp/connector-output/meshy/
ls -la /tmp/connector-output/meshy/

# Copy to vendor-connectors
cp -r /tmp/connector-output/meshy/ src/vendor_connectors/

# Add tests and submit PR
```

## üìã Key Commands

```bash
# List all crews
agentic-crew list vendor-connectors

# Show crew details
agentic-crew info vendor-connectors connector_builder

# Run with JSON output
agentic-crew run vendor-connectors connector_builder \
  --input '{"api_docs_url": "..."}' \
  --json | jq '.'

# Run from file
agentic-crew run vendor-connectors connector_builder \
  --file api_spec.yaml
```

## üîß Directory Structure

```
vendor-connectors/
‚îú‚îÄ‚îÄ .crewai/
‚îÇ   ‚îú‚îÄ‚îÄ manifest.yaml           # Crew definitions
‚îÇ   ‚îú‚îÄ‚îÄ crews/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ connector_builder/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ agents.yaml     # 4 agents
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ tasks.yaml      # 5 tasks
‚îÇ   ‚îî‚îÄ‚îÄ knowledge/
‚îÇ       ‚îî‚îÄ‚îÄ api_patterns/       # REST API patterns
‚îî‚îÄ‚îÄ src/vendor_connectors/
    ‚îî‚îÄ‚îÄ {vendor}/               # Generated connectors
```

## üéØ What Gets Generated

For each connector, the crew generates:

- **client.py** - Main HTTP client using httpx
- **models.py** - Pydantic models for requests/responses
- **exceptions.py** - Custom exceptions
- **tools.py** - Framework-agnostic tools (CrewAI/LangGraph/Strands)
- **tests/** - Comprehensive test suite
- **__init__.py** - Package exports

## üîÑ Tool Sharing Pattern

vendor-connectors can export tools for use in agentic-crew crews:

```python
# In vendor_connectors/meshy/tools.py
def get_tools(framework: Literal["crewai", "langgraph", "strands"] = "crewai"):
    """Return tools in framework-native format."""
    # ... implementation
```

Use in crews:

```yaml
# In any manifest.yaml
crews:
  my_crew:
    tools:
      - vendor_connectors.meshy.tools:get_tools
```

## üìö Documentation

- **Full Guide**: [docs/VENDOR_CONNECTORS_INTEGRATION.md](../docs/VENDOR_CONNECTORS_INTEGRATION.md)
- **Examples**: [examples/vendor-connectors/](.)
- **Main README**: [README.md](../README.md)

## üêõ Troubleshooting

| Issue | Solution |
|-------|----------|
| Package not found | Ensure `.crewai/manifest.yaml` exists |
| Crew not found | Check crew name matches manifest exactly |
| No framework available | Install: `uv sync --extra crews` |
| Tool import fails | Install: `pip install vendor-connectors[meshy]` |

## üîë Environment Variables

```bash
# Required for crews
export ANTHROPIC_API_KEY="sk-ant-api03-..."

# Optional for vendor-specific tools
export MESHY_API_KEY="msy_..."
```

## ‚úÖ Exit Codes

- `0` - Success
- `1` - Crew execution failed
- `2` - Configuration error (package/crew not found)

Use in scripts:
```bash
if agentic-crew run vendor-connectors connector_builder --input '...' --json > result.json; then
  echo "Success!"
  jq '.output' result.json
else
  echo "Failed!"
  jq '.error' result.json
  exit 1
fi
```


## Links discovered
- [docs/VENDOR_CONNECTORS_INTEGRATION.md](https://github.com/agentic-dev-library/crew/blob/main/examples/docs/VENDOR_CONNECTORS_INTEGRATION.md)
- [examples/vendor-connectors/](https://github.com/agentic-dev-library/crew/blob/main/examples/vendor-connectors.md)
- [README.md](https://github.com/agentic-dev-library/crew/blob/main/examples/README.md)

--- docs/QUICKSTART.md ---
# CrewAI Quickstart for Otterfall

## Setup (One-time)

```bash
# 1. Set up environment variables
export ANTHROPIC_API_KEY="your-key-here"
# Optional: export OPENROUTER_API_KEY="your-key-here"  # Fallback

# 2. Navigate to crew_agents
cd packages/crew_agents

# 3. Link Otterfall specs to knowledge base
ln -s ../../../.kiro/specs/otterfall-complete knowledge/specs

# 4. Add Otterfall patterns to knowledge
mkdir -p knowledge/otterfall_patterns
cp ../../otterfall/src/ecs/components.ts knowledge/otterfall_patterns/
cp ../../otterfall/src/ecs/data/species.ts knowledge/otterfall_patterns/
```

## Using CrewAI for Task Implementation

### Example: Implement Section 6.1 (Species Data System)

```bash
cd packages/crew_agents

# Run the crew with a specific task
uv run crew_agents build "Implement Section 6.1: Species Data System

Requirements:
- Read .kiro/specs/otterfall-complete/requirements.md Requirements 1-2
- Read .kiro/specs/otterfall-complete/design.md Properties 19-20
- Read .kiro/specs/otterfall-complete/tasks.md Section 6.1

Tasks:
1. Verify all 13 predator species are defined in packages/otterfall/src/ecs/data/species.ts
2. Verify all 15 prey species are defined
3. Create SpeciesComponent in packages/otterfall/src/ecs/components.ts if not exists
4. Implement species assignment on entity creation
5. Add species-specific model loading logic

Validation:
- TypeScript compiles with zero errors
- All species have required properties (health, stamina, attacks, etc.)
- Species data matches requirements exactly"
```

### What Happens

1. **Project Manager** loads context:
   - Reads requirements 1-2
   - Reads design properties 19-20
   - Reads task 6.1
   - Validates prerequisites

2. **Senior Engineer** implements:
   - Checks existing species.ts
   - Adds missing species if any
   - Creates/updates SpeciesComponent
   - Implements species assignment logic
   - Adds model loading

3. **QA Engineer** reviews:
   - Runs TypeScript compiler
   - Checks for errors
   - Validates against patterns
   - Runs unit tests

4. **Chief Engineer** approves:
   - Verifies completeness
   - Ensures quality
   - Approves for merge

## Task Decomposition Examples

### ‚ùå Too Vague
```bash
uv run crew_agents build "Make combat work"
```

### ‚úÖ Good - Specific with Context
```bash
uv run crew_agents build "Implement CombatComponent (Requirement 3.1)

Create CombatComponent in packages/otterfall/src/ecs/components.ts with:
- health: number
- maxHealth: number
- stamina: number
- maxStamina: number
- armor: number (percentage 0-100)
- dodge: number (percentage 0-100)
- archetype: 'tank' | 'agile' | 'balanced'
- attacks: AttackType[]
- staminaRegenRate: number
- lastDamageTime: number
- isStunned: boolean
- stunEndTime: number

Apply archetype-specific stats:
- Tank: 150 HP, 80 stamina, 30% armor, 10% dodge, 8/sec regen
- Agile: 80 HP, 120 stamina, 5% armor, 35% dodge, 15/sec regen
- Balanced: 100 HP, 100 stamina, 15% armor, 20% dodge, 10/sec regen"
```

### ‚úÖ Best - With Requirements and Validation
```bash
uv run crew_agents build "Implement Attack System (Requirements 3.2-3.7, 5.1-5.8)

Context:
- Read .kiro/specs/otterfall-complete/requirements.md Requirements 3, 5
- Read .kiro/specs/otterfall-complete/design.md Combat System Design
- Read packages/otterfall/src/ecs/data/species.ts for attack types

Implementation:
1. Create AttackType enum: bite, claw, tail_whip, headbutt, pounce, roll_crush
2. Create attack data with damage, range, stamina cost, cooldown
3. Implement attack execution function:
   - Check stamina >= cost
   - Check cooldown == 0
   - Check target in range
   - Apply damage with armor reduction
   - Apply knockback force
   - Apply stun duration
   - Set cooldown timestamp
4. Implement damage calculation:
   - finalDamage = baseDamage * (1 ¬± 0.1) * (1 - armorPercent)
5. Add to packages/otterfall/src/ecs/systems/CombatSystem.ts

Validation:
- TypeScript compiles
- All attack types have correct properties
- Damage calculation matches design
- Cooldowns prevent spam
- Unit tests pass"
```

## Training the Crew

After implementing a few tasks, train the agents:

```bash
cd packages/crew_agents

# Train with 5 iterations
uv run crew_agents train 5

# During training, provide feedback:
# - "Good: Followed ECS patterns correctly"
# - "Bad: Didn't check TypeScript compilation"
# - "Improve: Add more edge case handling"
```

## Checking Progress

```bash
# List what's in the knowledge base
uv run crew_agents list-knowledge

# Test that tools work
uv run crew_agents test-tools
```

## Integration with Kiro Workflow

### Recommended Workflow

1. **Use Kiro** to create/update specs:
   ```bash
   # In Kiro chat
   "Update the design document to add Property 56: Combat feedback timing"
   ```

2. **Use CrewAI** to implement complex tasks:
   ```bash
   cd packages/crew_agents
   uv run crew_agents build "Implement Section 6.2: Combat System"
   ```

3. **Use Kiro** for quick fixes:
   ```bash
   # In Kiro chat
   "Fix the TypeScript error in CombatSystem.ts line 42"
   ```

4. **Use CrewAI** for features requiring decomposition:
   ```bash
   uv run crew_agents build "Implement Section 8: Terrain and World Generation"
   ```

### When to Use Which

| Task Type | Use | Why |
|-----------|-----|-----|
| Create specs | Kiro | Excellent at requirements, design, tasks |
| Simple fixes | Kiro | Fast, direct, no overhead |
| Complex features | CrewAI | Proper decomposition, QA review |
| Refactoring | CrewAI | Multiple agents review changes |
| Testing | Both | Kiro for unit tests, CrewAI for comprehensive |
| Documentation | Kiro | Fast, integrated with codebase |

## Troubleshooting

### Issue: "No such file or directory"

**Solution**: Make sure you're in the right directory
```bash
cd packages/crew_agents
pwd  # Should show: .../jbcom-oss-ecosystem/packages/crew_agents
```

### Issue: "ANTHROPIC_API_KEY not set"

**Solution**: Set the environment variable
```bash
export ANTHROPIC_API_KEY="your-key-here"
# Or add to ~/.zshrc or ~/.bashrc

# Optional: Use OpenRouter as fallback
export OPENROUTER_API_KEY="your-key-here"
```

### Issue: Agents don't understand Otterfall patterns

**Solution**: Add more examples to knowledge base
```bash
cd packages/crew_agents/knowledge/otterfall_patterns

# Copy working examples
cp ../../../otterfall/src/ecs/systems/TimeSystem.ts .
cp ../../../otterfall/src/ecs/systems/WeatherSystem.ts .

# Document the patterns
cat > README.md << 'EOF'
# Otterfall ECS Patterns

## System Pattern
Systems are functions that operate on entities with specific components.

Example: TimeSystem.ts
- Updates time of day
- Calculates sun position
- Updates lighting

## Component Pattern
Components are pure data, no logic.

Example: TimeOfDayComponent
- hour: number (0-24)
- phase: 'dawn' | 'day' | 'dusk' | 'night'
- sunIntensity: number
EOF
```

### Issue: Code doesn't match conventions

**Solution**: Train agents with feedback
```bash
uv run crew_agents train 5

# When prompted, provide specific feedback:
# "The code should use Miniplex ECS patterns, not plain objects"
# "Follow the pattern in TimeSystem.ts for system structure"
```

## Next Steps

1. **Add Otterfall patterns** to knowledge base
2. **Train agents** on existing code
3. **Implement Section 6** using CrewAI
4. **Iterate and improve** based on results

## See Also

- [INTEGRATION.md](./INTEGRATION.md) - Full integration guide
- [README.md](./README.md) - CrewAI system overview
- [Otterfall Spec](../../.kiro/specs/otterfall-complete/) - Requirements and design



## Links discovered
- [INTEGRATION.md](https://github.com/agentic-dev-library/crew/blob/main/docs/INTEGRATION.md)
- [README.md](https://github.com/agentic-dev-library/crew/blob/main/docs/README.md)
- [Otterfall Spec](https://github.com/agentic-dev-library/crew/blob/main/../.kiro/specs/otterfall-complete.md)

--- docs/getting-started/installation.md ---
# Installation

## Requirements

- **Python 3.10+** (3.10, 3.11, 3.12, 3.13, 3.14 supported)
- [uv](https://docs.astral.sh/uv/) (recommended) or pip

## Install from PyPI

```bash
# Core package (auto-detects frameworks)
pip install agentic-crew

# With specific framework
pip install agentic-crew[crewai]      # CrewAI (recommended)
pip install agentic-crew[langgraph]   # LangGraph
pip install agentic-crew[strands]     # AWS Strands

# All frameworks
pip install agentic-crew[ai]
```

## Install from Source

```bash
git clone https://github.com/agentic-dev-library/crew.git
cd crew
uv sync --extra crewai
```

## Development Installation

```bash
# Clone and install with dev dependencies
git clone https://github.com/agentic-dev-library/crew.git
cd crew
uv sync --extra dev --extra tests --extra crewai
```

## Verify Installation

```bash
# Check version
python -c "import agentic_crew; print(agentic_crew.__version__)"

# List available frameworks
python -c "from agentic_crew.core.decomposer import get_available_frameworks; print(get_available_frameworks())"
```


## Links discovered
- [uv](https://docs.astral.sh/uv/)

--- docs/getting-started/quickstart.md ---
# Quickstart

This guide will get you running your first agentic-crew in 5 minutes.

## 1. Install agentic-crew

```bash
pip install agentic-crew[crewai]
```

## 2. Define a Crew (YAML)

Create a minimal crew structure:

```bash
mkdir -p .crewai/crews/analyzer
```

**`.crewai/manifest.yaml`**:
```yaml
name: my-first-crew
version: "1.0"

crews:
  analyzer:
    description: Analyze code and provide feedback
    agents: crews/analyzer/agents.yaml
    tasks: crews/analyzer/tasks.yaml
```

**`crews/analyzer/agents.yaml`**:
```yaml
code_reviewer:
  role: Senior Code Reviewer
  goal: Review code for bugs, security issues, and improvements
  backstory: >
    You are an expert software engineer with 15 years of experience.
    You excel at finding subtle bugs and suggesting improvements.
```

**`crews/analyzer/tasks.yaml`**:
```yaml
review_code:
  description: Review the provided code for issues and improvements
  expected_output: >
    A detailed list of findings with:
    - Issue description
    - Severity (critical/high/medium/low)
    - Suggested fix
  agent: code_reviewer
```

## 3. Run Your Crew

### From Python

```python
from agentic_crew import run_crew

result = run_crew(
    "my-first-crew",
    "analyzer",
    inputs={"code": """
def calculate_total(items):
    total = 0
    for item in items:
        total += item['price']
    return total
"""}
)

print(result)
```

### From CLI

```bash
export ANTHROPIC_API_KEY="your-key-here"

agentic-crew run my-first-crew analyzer --input "Review this code: ..."
```

## 4. Try Different Frameworks

agentic-crew auto-detects available frameworks:

```python
from agentic_crew.core.decomposer import detect_framework, get_available_frameworks

# See what you have installed
print(get_available_frameworks())  # ['crewai', 'langgraph']

# Force a specific framework
result = run_crew(
    "my-first-crew",
    "analyzer",
    inputs={"code": "..."},
    framework="langgraph"  # Force LangGraph
)
```

## Next Steps

- **[Architecture Guide](../ARCHITECTURE.md)** - Understand how decomposition works
- **[Integration Guide](../INTEGRATION.md)** - Integrate with your projects
- **[API Reference](../api/index.rst)** - Detailed API documentation

## Common Patterns

### Multi-Agent Collaboration

```yaml
# agents.yaml
planner:
  role: Project Planner
  goal: Break down complex tasks

implementer:
  role: Code Implementer
  goal: Write production code

reviewer:
  role: Code Reviewer
  goal: Ensure quality

# tasks.yaml
plan:
  description: Create implementation plan
  agent: planner

implement:
  description: Write the code
  agent: implementer
  context: [plan]  # Use planner's output

review:
  description: Review implementation
  agent: reviewer
  context: [implement]  # Use implementer's output
```

### Knowledge Base Integration

```yaml
# manifest.yaml
crews:
  analyzer:
    description: Analyze code with domain knowledge
    agents: crews/analyzer/agents.yaml
    tasks: crews/analyzer/tasks.yaml
    knowledge:
      - knowledge/coding_standards/
      - knowledge/security_guidelines/
```

### Single-Agent CLI Execution

For simple tasks that don't need multi-agent coordination:

```bash
# Quick fixes with aider
agentic-crew run --runner aider --input "Add error handling to auth.py"

# Free local execution with Ollama
agentic-crew run --runner ollama --input "Fix the bug" --model deepseek-coder
```


## Links discovered
- [Architecture Guide](https://github.com/agentic-dev-library/crew/blob/main/docs/ARCHITECTURE.md)
- [Integration Guide](https://github.com/agentic-dev-library/crew/blob/main/docs/INTEGRATION.md)
- [API Reference](https://github.com/agentic-dev-library/crew/blob/main/docs/api/index.rst)

--- docs/_build/html/QUICKSTART.html ---


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CrewAI Quickstart for Otterfall &mdash; agentic-crew Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=7df63eae" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=7026087e"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CrewAI Modular Architecture" href="ARCHITECTURE.html" />
    <link rel="prev" title="Quickstart" href="getting-started/quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            agentic-crew
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting-started/installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-started/installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/installation.html#install-from-pypi">Install from PyPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/installation.html#install-from-source">Install from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/installation.html#development-installation">Development Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/installation.html#verify-installation">Verify Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting-started/quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-started/quickstart.html#install-agentic-crew">1. Install agentic-crew</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/quickstart.html#define-a-crew-yaml">2. Define a Crew (YAML)</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/quickstart.html#run-your-crew">3. Run Your Crew</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#from-python">From Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#from-cli">From CLI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/quickstart.html#try-different-frameworks">4. Try Different Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/quickstart.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started/quickstart.html#common-patterns">Common Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#multi-agent-collaboration">Multi-Agent Collaboration</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#knowledge-base-integration">Knowledge Base Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting-started/quickstart.html#single-agent-cli-execution">Single-Agent CLI Execution</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">CrewAI Quickstart for Otterfall</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup-one-time">Setup (One-time)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-crewai-for-task-implementation">Using CrewAI for Task Implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-implement-section-6-1-species-data-system">Example: Implement Section 6.1 (Species Data System)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-happens">What Happens</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#task-decomposition-examples">Task Decomposition Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#too-vague">‚ùå Too Vague</a></li>
<li class="toctree-l3"><a class="reference internal" href="#good-specific-with-context">‚úÖ Good - Specific with Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="#best-with-requirements-and-validation">‚úÖ Best - With Requirements and Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#training-the-crew">Training the Crew</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checking-progress">Checking Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="#integration-with-kiro-workflow">Integration with Kiro Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#recommended-workflow">Recommended Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#when-to-use-which">When to Use Which</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#issue-no-such-file-or-directory">Issue: ‚ÄúNo such file or directory‚Äù</a></li>
<li class="toctree-l3"><a class="reference internal" href="#issue-anthropic-api-key-not-set">Issue: ‚ÄúANTHROPIC_API_KEY not set‚Äù</a></li>
<li class="toctree-l3"><a class="reference internal" href="#issue-agents-don-t-understand-otterfall-patterns">Issue: Agents don‚Äôt understand Otterfall patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#issue-code-doesn-t-match-conventions">Issue: Code doesn‚Äôt match conventions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ARCHITECTURE.html">CrewAI Modular Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#current-implementation">Current Implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ARCHITECTURE.html#generic-engine-internal-crewai">1. Generic Engine (<code class="docutils literal notranslate"><span class="pre">internal/crewai</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ARCHITECTURE.html#package-specific-crews-packages-name-crewai">2. Package-Specific Crews (<code class="docutils literal notranslate"><span class="pre">packages/&lt;name&gt;/.crewai/</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#solution-package-defined-crews">Solution: Package-Defined Crews</a></li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#directory-structure">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#package-manifest-manifest-yaml">Package Manifest (manifest.yaml)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#agent-template-system">Agent Template System</a></li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#cli-usage">CLI Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#github-actions-workflow">GitHub Actions Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#discovery-implementation">Discovery Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#migration-path">Migration Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="ARCHITECTURE.html#benefits">Benefits</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="INTEGRATION.html">External Integration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#cli-contract-stable-api">CLI Contract (Stable API)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#version-compatibility">Version Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#commands">Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="INTEGRATION.html#list-crews">List Crews</a></li>
<li class="toctree-l4"><a class="reference internal" href="INTEGRATION.html#get-crew-info">Get Crew Info</a></li>
<li class="toctree-l4"><a class="reference internal" href="INTEGRATION.html#run-a-crew">Run a Crew</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#json-output-schemas">JSON Output Schemas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#crewlistresult">CrewListResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#crewinforesult">CrewInfoResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#crewrunresult">CrewRunResult</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#typescript-types">TypeScript Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#exit-codes">Exit Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#standard-installation">Standard Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#docker-installation">Docker Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#docker-compose-example">Docker Compose Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#typescript-integration-examples">TypeScript Integration Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#basic-integration-node-js">Basic Integration (Node.js)</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#vercel-ai-sdk-integration">Vercel AI SDK Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#agent-to-agent-communication-architecture">Agent-to-Agent Communication Architecture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#error-handling">Error Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#structured-error-responses">Structured Error Responses</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#timeout-handling">Timeout Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#always-use-json-flag">1. Always Use <code class="docutils literal notranslate"><span class="pre">--json</span></code> Flag</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#handle-long-running-operations">2. Handle Long-Running Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#cache-crew-list">3. Cache Crew List</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#validate-input-before-calling">4. Validate Input Before Calling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#command-not-found">Command Not Found</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#framework-errors">Framework Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="INTEGRATION.html#api-key-issues">API Key Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="INTEGRATION.html#related-resources">Related Resources</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/index.html#module-index">Module Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/modules.html">Modules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="development/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development/contributing.html#development-setup">Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/contributing.html#running-tests">Running Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/contributing.html#code-style">Code Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/contributing.html#building-documentation">Building Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/contributing.html#pull-request-process">Pull Request Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/contributing.html#commit-messages">Commit Messages</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">agentic-crew</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">CrewAI Quickstart for Otterfall</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/QUICKSTART.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="crewai-quickstart-for-otterfall">
<h1>CrewAI Quickstart for Otterfall<a class="headerlink" href="#crewai-quickstart-for-otterfall" title="Link to this heading">ÔÉÅ</a></h1>
<section id="setup-one-time">
<h2>Setup (One-time)<a class="headerlink" href="#setup-one-time" title="Link to this heading">ÔÉÅ</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Set up environment variables</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ANTHROPIC_API_KEY</span><span class="o">=</span><span class="s2">&quot;your-key-here&quot;</span>
<span class="c1"># Optional: export OPENROUTER_API_KEY=&quot;your-key-here&quot;  # Fallback</span>

<span class="c1"># 2. Navigate to crew_agents</span>
<span class="nb">cd</span><span class="w"> </span>packages/crew_agents

<span class="c1"># 3. Link Otterfall specs to knowledge base</span>
ln<span class="w"> </span>-s<span class="w"> </span>../../../.kiro/specs/otterfall-complete<span class="w"> </span>knowledge/specs

<span class="c1"># 4. Add Otterfall patterns to knowledge</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>knowledge/otterfall_patterns
cp<span class="w"> </span>../../otterfall/src/ecs/components.ts<span class="w"> </span>knowledge/otterfall_patterns/
cp<span class="w"> </span>../../otterfall/src/ecs/data/species.ts<span class="w"> </span>knowledge/otterfall_patterns/
</pre></div>
</div>
</section>
<section id="using-crewai-for-task-implementation">
<h2>Using CrewAI for Task Implementation<a class="headerlink" href="#using-crewai-for-task-implementation" title="Link to this heading">ÔÉÅ</a></h2>
<section id="example-implement-section-6-1-species-data-system">
<h3>Example: Implement Section 6.1 (Species Data System)<a class="headerlink" href="#example-implement-section-6-1-species-data-system" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>packages/crew_agents

<span class="c1"># Run the crew with a specific task</span>
uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>build<span class="w"> </span><span class="s2">&quot;Implement Section 6.1: Species Data System</span>

<span class="s2">Requirements:</span>
<span class="s2">- Read .kiro/specs/otterfall-complete/requirements.md Requirements 1-2</span>
<span class="s2">- Read .kiro/specs/otterfall-complete/design.md Properties 19-20</span>
<span class="s2">- Read .kiro/specs/otterfall-complete/tasks.md Section 6.1</span>

<span class="s2">Tasks:</span>
<span class="s2">1. Verify all 13 predator species are defined in packages/otterfall/src/ecs/data/species.ts</span>
<span class="s2">2. Verify all 15 prey species are defined</span>
<span class="s2">3. Create SpeciesComponent in packages/otterfall/src/ecs/components.ts if not exists</span>
<span class="s2">4. Implement species assignment on entity creation</span>
<span class="s2">5. Add species-specific model loading logic</span>

<span class="s2">Validation:</span>
<span class="s2">- TypeScript compiles with zero errors</span>
<span class="s2">- All species have required properties (health, stamina, attacks, etc.)</span>
<span class="s2">- Species data matches requirements exactly&quot;</span>
</pre></div>
</div>
</section>
<section id="what-happens">
<h3>What Happens<a class="headerlink" href="#what-happens" title="Link to this heading">ÔÉÅ</a></h3>
<ol class="arabic simple">
<li><p><strong>Project Manager</strong> loads context:</p>
<ul class="simple">
<li><p>Reads requirements 1-2</p></li>
<li><p>Reads design properties 19-20</p></li>
<li><p>Reads task 6.1</p></li>
<li><p>Validates prerequisites</p></li>
</ul>
</li>
<li><p><strong>Senior Engineer</strong> implements:</p>
<ul class="simple">
<li><p>Checks existing species.ts</p></li>
<li><p>Adds missing species if any</p></li>
<li><p>Creates/updates SpeciesComponent</p></li>
<li><p>Implements species assignment logic</p></li>
<li><p>Adds model loading</p></li>
</ul>
</li>
<li><p><strong>QA Engineer</strong> reviews:</p>
<ul class="simple">
<li><p>Runs TypeScript compiler</p></li>
<li><p>Checks for errors</p></li>
<li><p>Validates against patterns</p></li>
<li><p>Runs unit tests</p></li>
</ul>
</li>
<li><p><strong>Chief Engineer</strong> approves:</p>
<ul class="simple">
<li><p>Verifies completeness</p></li>
<li><p>Ensures quality</p></li>
<li><p>Approves for merge</p></li>
</ul>
</li>
</ol>
</section>
</section>
<section id="task-decomposition-examples">
<h2>Task Decomposition Examples<a class="headerlink" href="#task-decomposition-examples" title="Link to this heading">ÔÉÅ</a></h2>
<section id="too-vague">
<h3>‚ùå Too Vague<a class="headerlink" href="#too-vague" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>build<span class="w"> </span><span class="s2">&quot;Make combat work&quot;</span>
</pre></div>
</div>
</section>
<section id="good-specific-with-context">
<h3>‚úÖ Good - Specific with Context<a class="headerlink" href="#good-specific-with-context" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>build<span class="w"> </span><span class="s2">&quot;Implement CombatComponent (Requirement 3.1)</span>

<span class="s2">Create CombatComponent in packages/otterfall/src/ecs/components.ts with:</span>
<span class="s2">- health: number</span>
<span class="s2">- maxHealth: number</span>
<span class="s2">- stamina: number</span>
<span class="s2">- maxStamina: number</span>
<span class="s2">- armor: number (percentage 0-100)</span>
<span class="s2">- dodge: number (percentage 0-100)</span>
<span class="s2">- archetype: &#39;tank&#39; | &#39;agile&#39; | &#39;balanced&#39;</span>
<span class="s2">- attacks: AttackType[]</span>
<span class="s2">- staminaRegenRate: number</span>
<span class="s2">- lastDamageTime: number</span>
<span class="s2">- isStunned: boolean</span>
<span class="s2">- stunEndTime: number</span>

<span class="s2">Apply archetype-specific stats:</span>
<span class="s2">- Tank: 150 HP, 80 stamina, 30% armor, 10% dodge, 8/sec regen</span>
<span class="s2">- Agile: 80 HP, 120 stamina, 5% armor, 35% dodge, 15/sec regen</span>
<span class="s2">- Balanced: 100 HP, 100 stamina, 15% armor, 20% dodge, 10/sec regen&quot;</span>
</pre></div>
</div>
</section>
<section id="best-with-requirements-and-validation">
<h3>‚úÖ Best - With Requirements and Validation<a class="headerlink" href="#best-with-requirements-and-validation" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>build<span class="w"> </span><span class="s2">&quot;Implement Attack System (Requirements 3.2-3.7, 5.1-5.8)</span>

<span class="s2">Context:</span>
<span class="s2">- Read .kiro/specs/otterfall-complete/requirements.md Requirements 3, 5</span>
<span class="s2">- Read .kiro/specs/otterfall-complete/design.md Combat System Design</span>
<span class="s2">- Read packages/otterfall/src/ecs/data/species.ts for attack types</span>

<span class="s2">Implementation:</span>
<span class="s2">1. Create AttackType enum: bite, claw, tail_whip, headbutt, pounce, roll_crush</span>
<span class="s2">2. Create attack data with damage, range, stamina cost, cooldown</span>
<span class="s2">3. Implement attack execution function:</span>
<span class="s2">   - Check stamina &gt;= cost</span>
<span class="s2">   - Check cooldown == 0</span>
<span class="s2">   - Check target in range</span>
<span class="s2">   - Apply damage with armor reduction</span>
<span class="s2">   - Apply knockback force</span>
<span class="s2">   - Apply stun duration</span>
<span class="s2">   - Set cooldown timestamp</span>
<span class="s2">4. Implement damage calculation:</span>
<span class="s2">   - finalDamage = baseDamage * (1 ¬± 0.1) * (1 - armorPercent)</span>
<span class="s2">5. Add to packages/otterfall/src/ecs/systems/CombatSystem.ts</span>

<span class="s2">Validation:</span>
<span class="s2">- TypeScript compiles</span>
<span class="s2">- All attack types have correct properties</span>
<span class="s2">- Damage calculation matches design</span>
<span class="s2">- Cooldowns prevent spam</span>
<span class="s2">- Unit tests pass&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="training-the-crew">
<h2>Training the Crew<a class="headerlink" href="#training-the-crew" title="Link to this heading">ÔÉÅ</a></h2>
<p>After implementing a few tasks, train the agents:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>packages/crew_agents

<span class="c1"># Train with 5 iterations</span>
uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>train<span class="w"> </span><span class="m">5</span>

<span class="c1"># During training, provide feedback:</span>
<span class="c1"># - &quot;Good: Followed ECS patterns correctly&quot;</span>
<span class="c1"># - &quot;Bad: Didn&#39;t check TypeScript compilation&quot;</span>
<span class="c1"># - &quot;Improve: Add more edge case handling&quot;</span>
</pre></div>
</div>
</section>
<section id="checking-progress">
<h2>Checking Progress<a class="headerlink" href="#checking-progress" title="Link to this heading">ÔÉÅ</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># List what&#39;s in the knowledge base</span>
uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>list-knowledge

<span class="c1"># Test that tools work</span>
uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>test-tools
</pre></div>
</div>
</section>
<section id="integration-with-kiro-workflow">
<h2>Integration with Kiro Workflow<a class="headerlink" href="#integration-with-kiro-workflow" title="Link to this heading">ÔÉÅ</a></h2>
<section id="recommended-workflow">
<h3>Recommended Workflow<a class="headerlink" href="#recommended-workflow" title="Link to this heading">ÔÉÅ</a></h3>
<ol class="arabic">
<li><p><strong>Use Kiro</strong> to create/update specs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># In Kiro chat</span>
<span class="s2">&quot;Update the design document to add Property 56: Combat feedback timing&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>Use CrewAI</strong> to implement complex tasks:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>packages/crew_agents
uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>build<span class="w"> </span><span class="s2">&quot;Implement Section 6.2: Combat System&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>Use Kiro</strong> for quick fixes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># In Kiro chat</span>
<span class="s2">&quot;Fix the TypeScript error in CombatSystem.ts line 42&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>Use CrewAI</strong> for features requiring decomposition:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>build<span class="w"> </span><span class="s2">&quot;Implement Section 8: Terrain and World Generation&quot;</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="when-to-use-which">
<h3>When to Use Which<a class="headerlink" href="#when-to-use-which" title="Link to this heading">ÔÉÅ</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Task Type</p></th>
<th class="head"><p>Use</p></th>
<th class="head"><p>Why</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Create specs</p></td>
<td><p>Kiro</p></td>
<td><p>Excellent at requirements, design, tasks</p></td>
</tr>
<tr class="row-odd"><td><p>Simple fixes</p></td>
<td><p>Kiro</p></td>
<td><p>Fast, direct, no overhead</p></td>
</tr>
<tr class="row-even"><td><p>Complex features</p></td>
<td><p>CrewAI</p></td>
<td><p>Proper decomposition, QA review</p></td>
</tr>
<tr class="row-odd"><td><p>Refactoring</p></td>
<td><p>CrewAI</p></td>
<td><p>Multiple agents review changes</p></td>
</tr>
<tr class="row-even"><td><p>Testing</p></td>
<td><p>Both</p></td>
<td><p>Kiro for unit tests, CrewAI for comprehensive</p></td>
</tr>
<tr class="row-odd"><td><p>Documentation</p></td>
<td><p>Kiro</p></td>
<td><p>Fast, integrated with codebase</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">ÔÉÅ</a></h2>
<section id="issue-no-such-file-or-directory">
<h3>Issue: ‚ÄúNo such file or directory‚Äù<a class="headerlink" href="#issue-no-such-file-or-directory" title="Link to this heading">ÔÉÅ</a></h3>
<p><strong>Solution</strong>: Make sure you‚Äôre in the right directory</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>packages/crew_agents
<span class="nb">pwd</span><span class="w">  </span><span class="c1"># Should show: .../jbcom-oss-ecosystem/packages/crew_agents</span>
</pre></div>
</div>
</section>
<section id="issue-anthropic-api-key-not-set">
<h3>Issue: ‚ÄúANTHROPIC_API_KEY not set‚Äù<a class="headerlink" href="#issue-anthropic-api-key-not-set" title="Link to this heading">ÔÉÅ</a></h3>
<p><strong>Solution</strong>: Set the environment variable</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ANTHROPIC_API_KEY</span><span class="o">=</span><span class="s2">&quot;your-key-here&quot;</span>
<span class="c1"># Or add to ~/.zshrc or ~/.bashrc</span>

<span class="c1"># Optional: Use OpenRouter as fallback</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OPENROUTER_API_KEY</span><span class="o">=</span><span class="s2">&quot;your-key-here&quot;</span>
</pre></div>
</div>
</section>
<section id="issue-agents-don-t-understand-otterfall-patterns">
<h3>Issue: Agents don‚Äôt understand Otterfall patterns<a class="headerlink" href="#issue-agents-don-t-understand-otterfall-patterns" title="Link to this heading">ÔÉÅ</a></h3>
<p><strong>Solution</strong>: Add more examples to knowledge base</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>packages/crew_agents/knowledge/otterfall_patterns

<span class="c1"># Copy working examples</span>
cp<span class="w"> </span>../../../otterfall/src/ecs/systems/TimeSystem.ts<span class="w"> </span>.
cp<span class="w"> </span>../../../otterfall/src/ecs/systems/WeatherSystem.ts<span class="w"> </span>.

<span class="c1"># Document the patterns</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>README.md<span class="w"> </span><span class="s">&lt;&lt; &#39;EOF&#39;</span>
<span class="s"># Otterfall ECS Patterns</span>

<span class="s">## System Pattern</span>
<span class="s">Systems are functions that operate on entities with specific components.</span>

<span class="s">Example: TimeSystem.ts</span>
<span class="s">- Updates time of day</span>
<span class="s">- Calculates sun position</span>
<span class="s">- Updates lighting</span>

<span class="s">## Component Pattern</span>
<span class="s">Components are pure data, no logic.</span>

<span class="s">Example: TimeOfDayComponent</span>
<span class="s">- hour: number (0-24)</span>
<span class="s">- phase: &#39;dawn&#39; | &#39;day&#39; | &#39;dusk&#39; | &#39;night&#39;</span>
<span class="s">- sunIntensity: number</span>
<span class="s">EOF</span>
</pre></div>
</div>
</section>
<section id="issue-code-doesn-t-match-conventions">
<h3>Issue: Code doesn‚Äôt match conventions<a class="headerlink" href="#issue-code-doesn-t-match-conventions" title="Link to this heading">ÔÉÅ</a></h3>
<p><strong>Solution</strong>: Train agents with feedback</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>run<span class="w"> </span>crew_agents<span class="w"> </span>train<span class="w"> </span><span class="m">5</span>

<span class="c1"># When prompted, provide specific feedback:</span>
<span class="c1"># &quot;The code should use Miniplex ECS patterns, not plain objects&quot;</span>
<span class="c1"># &quot;Follow the pattern in TimeSystem.ts for system structure&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">ÔÉÅ</a></h2>
<ol class="arabic simple">
<li><p><strong>Add Otterfall patterns</strong> to knowledge base</p></li>
<li><p><strong>Train agents</strong> on existing code</p></li>
<li><p><strong>Implement Section 6</strong> using CrewAI</p></li>
<li><p><strong>Iterate and improve</strong> based on results</p></li>
</ol>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading">ÔÉÅ</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="INTEGRATION.html"><span class="std std-doc">INTEGRATION.md</span></a> - Full integration guide</p></li>
<li><p><a class="reference internal" href="#./README.md"><span class="xref myst">README.md</span></a> - CrewAI system overview</p></li>
<li><p><a class="reference internal" href="#../../.kiro/specs/otterfall-complete/"><span class="xref myst">Otterfall Spec</span></a> - Requirements and design</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="getting-started/quickstart.html" class="btn btn-neutral float-left" title="Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ARCHITECTURE.html" class="btn btn-neutral float-right" title="CrewAI Modular Architecture" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Jon Bogaty.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>

## Links discovered
- [agentic-crew](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/index.html)
- [Installation](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/getting-started/installation.html)
- [Quickstart](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/getting-started/quickstart.html)
- [CrewAI Modular Architecture](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/ARCHITECTURE.html)
- [External Integration Guide](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/INTEGRATION.html)
- [API Reference](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/api/index.html)
- [Modules](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/api/modules.html)
- [Contributing](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/development/contributing.html)
- [link](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/index.html)
- [View page source](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/_sources/QUICKSTART.md.txt)
- [<span class="std std-doc">INTEGRATION.md</span>](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/INTEGRATION.html)
- [<span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/getting-started/quickstart.html)
- [Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span>](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/ARCHITECTURE.html)
- [Sphinx](https://www.sphinx-doc.org/)
- [theme](https://github.com/readthedocs/sphinx_rtd_theme)
- [Read the Docs](https://readthedocs.org)

--- docs/_build/html/getting-started/installation.html ---


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; agentic-crew Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=7df63eae" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7026087e"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quickstart" href="quickstart.html" />
    <link rel="prev" title="agentic-crew Documentation" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            agentic-crew
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-from-pypi">Install from PyPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-from-source">Install from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="#development-installation">Development Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#verify-installation">Verify Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#install-agentic-crew">1. Install agentic-crew</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#define-a-crew-yaml">2. Define a Crew (YAML)</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#run-your-crew">3. Run Your Crew</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#from-python">From Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#from-cli">From CLI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#try-different-frameworks">4. Try Different Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#common-patterns">Common Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#multi-agent-collaboration">Multi-Agent Collaboration</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#knowledge-base-integration">Knowledge Base Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html#single-agent-cli-execution">Single-Agent CLI Execution</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../QUICKSTART.html">CrewAI Quickstart for Otterfall</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#setup-one-time">Setup (One-time)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#using-crewai-for-task-implementation">Using CrewAI for Task Implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#example-implement-section-6-1-species-data-system">Example: Implement Section 6.1 (Species Data System)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#what-happens">What Happens</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#task-decomposition-examples">Task Decomposition Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#too-vague">‚ùå Too Vague</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#good-specific-with-context">‚úÖ Good - Specific with Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#best-with-requirements-and-validation">‚úÖ Best - With Requirements and Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#training-the-crew">Training the Crew</a></li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#checking-progress">Checking Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#integration-with-kiro-workflow">Integration with Kiro Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#recommended-workflow">Recommended Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#when-to-use-which">When to Use Which</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#issue-no-such-file-or-directory">Issue: ‚ÄúNo such file or directory‚Äù</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#issue-anthropic-api-key-not-set">Issue: ‚ÄúANTHROPIC_API_KEY not set‚Äù</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#issue-agents-don-t-understand-otterfall-patterns">Issue: Agents don‚Äôt understand Otterfall patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#issue-code-doesn-t-match-conventions">Issue: Code doesn‚Äôt match conventions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ARCHITECTURE.html">CrewAI Modular Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#current-implementation">Current Implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ARCHITECTURE.html#generic-engine-internal-crewai">1. Generic Engine (<code class="docutils literal notranslate"><span class="pre">internal/crewai</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ARCHITECTURE.html#package-specific-crews-packages-name-crewai">2. Package-Specific Crews (<code class="docutils literal notranslate"><span class="pre">packages/&lt;name&gt;/.crewai/</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#solution-package-defined-crews">Solution: Package-Defined Crews</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#directory-structure">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#package-manifest-manifest-yaml">Package Manifest (manifest.yaml)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#agent-template-system">Agent Template System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#cli-usage">CLI Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#github-actions-workflow">GitHub Actions Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#discovery-implementation">Discovery Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#migration-path">Migration Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#benefits">Benefits</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../INTEGRATION.html">External Integration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#cli-contract-stable-api">CLI Contract (Stable API)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#version-compatibility">Version Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#commands">Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../INTEGRATION.html#list-crews">List Crews</a></li>
<li class="toctree-l4"><a class="reference internal" href="../INTEGRATION.html#get-crew-info">Get Crew Info</a></li>
<li class="toctree-l4"><a class="reference internal" href="../INTEGRATION.html#run-a-crew">Run a Crew</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#json-output-schemas">JSON Output Schemas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#crewlistresult">CrewListResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#crewinforesult">CrewInfoResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#crewrunresult">CrewRunResult</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#typescript-types">TypeScript Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#exit-codes">Exit Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#standard-installation">Standard Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#docker-installation">Docker Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#docker-compose-example">Docker Compose Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#typescript-integration-examples">TypeScript Integration Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#basic-integration-node-js">Basic Integration (Node.js)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#vercel-ai-sdk-integration">Vercel AI SDK Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#agent-to-agent-communication-architecture">Agent-to-Agent Communication Architecture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#error-handling">Error Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#structured-error-responses">Structured Error Responses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#timeout-handling">Timeout Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#always-use-json-flag">1. Always Use <code class="docutils literal notranslate"><span class="pre">--json</span></code> Flag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#handle-long-running-operations">2. Handle Long-Running Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#cache-crew-list">3. Cache Crew List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#validate-input-before-calling">4. Validate Input Before Calling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#command-not-found">Command Not Found</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#framework-errors">Framework Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#api-key-issues">API Key Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#related-resources">Related Resources</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#module-index">Module Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/modules.html">Modules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#development-setup">Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#running-tests">Running Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#code-style">Code Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#building-documentation">Building Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#pull-request-process">Pull Request Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#commit-messages">Commit Messages</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">agentic-crew</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/getting-started/installation.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading">ÔÉÅ</a></h1>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">ÔÉÅ</a></h2>
<ul class="simple">
<li><p><strong>Python 3.10+</strong> (3.10, 3.11, 3.12, 3.13, 3.14 supported)</p></li>
<li><p><a class="reference external" href="https://docs.astral.sh/uv/">uv</a> (recommended) or pip</p></li>
</ul>
</section>
<section id="install-from-pypi">
<h2>Install from PyPI<a class="headerlink" href="#install-from-pypi" title="Link to this heading">ÔÉÅ</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Core package (auto-detects frameworks)</span>
pip<span class="w"> </span>install<span class="w"> </span>agentic-crew

<span class="c1"># With specific framework</span>
pip<span class="w"> </span>install<span class="w"> </span>agentic-crew<span class="o">[</span>crewai<span class="o">]</span><span class="w">      </span><span class="c1"># CrewAI (recommended)</span>
pip<span class="w"> </span>install<span class="w"> </span>agentic-crew<span class="o">[</span>langgraph<span class="o">]</span><span class="w">   </span><span class="c1"># LangGraph</span>
pip<span class="w"> </span>install<span class="w"> </span>agentic-crew<span class="o">[</span>strands<span class="o">]</span><span class="w">     </span><span class="c1"># AWS Strands</span>

<span class="c1"># All frameworks</span>
pip<span class="w"> </span>install<span class="w"> </span>agentic-crew<span class="o">[</span>ai<span class="o">]</span>
</pre></div>
</div>
</section>
<section id="install-from-source">
<h2>Install from Source<a class="headerlink" href="#install-from-source" title="Link to this heading">ÔÉÅ</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/agentic-dev-library/crew.git
<span class="nb">cd</span><span class="w"> </span>crew
uv<span class="w"> </span>sync<span class="w"> </span>--extra<span class="w"> </span>crewai
</pre></div>
</div>
</section>
<section id="development-installation">
<h2>Development Installation<a class="headerlink" href="#development-installation" title="Link to this heading">ÔÉÅ</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clone and install with dev dependencies</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/agentic-dev-library/crew.git
<span class="nb">cd</span><span class="w"> </span>crew
uv<span class="w"> </span>sync<span class="w"> </span>--extra<span class="w"> </span>dev<span class="w"> </span>--extra<span class="w"> </span>tests<span class="w"> </span>--extra<span class="w"> </span>crewai
</pre></div>
</div>
</section>
<section id="verify-installation">
<h2>Verify Installation<a class="headerlink" href="#verify-installation" title="Link to this heading">ÔÉÅ</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check version</span>
python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import agentic_crew; print(agentic_crew.__version__)&quot;</span>

<span class="c1"># List available frameworks</span>
python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from agentic_crew.core.decomposer import get_available_frameworks; print(get_available_frameworks())&quot;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="agentic-crew Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="quickstart.html" class="btn btn-neutral float-right" title="Quickstart" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Jon Bogaty.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>

## Links discovered
- [agentic-crew](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/index.html)
- [Quickstart](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/getting-started/quickstart.html)
- [CrewAI Quickstart for Otterfall](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/QUICKSTART.html)
- [CrewAI Modular Architecture](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/ARCHITECTURE.html)
- [External Integration Guide](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/INTEGRATION.html)
- [API Reference](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/api/index.html)
- [Modules](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/api/modules.html)
- [Contributing](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/development/contributing.html)
- [link](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/index.html)
- [View page source](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/_sources/getting-started/installation.md.txt)
- [uv](https://docs.astral.sh/uv/)
- [<span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/index.html)
- [Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span>](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/getting-started/quickstart.html)
- [Sphinx](https://www.sphinx-doc.org/)
- [theme](https://github.com/readthedocs/sphinx_rtd_theme)
- [Read the Docs](https://readthedocs.org)

--- docs/_build/html/getting-started/quickstart.html ---


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; agentic-crew Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=7df63eae" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7026087e"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CrewAI Quickstart for Otterfall" href="../QUICKSTART.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            agentic-crew
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#install-from-pypi">Install from PyPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#install-from-source">Install from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#development-installation">Development Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#verify-installation">Verify Installation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-agentic-crew">1. Install agentic-crew</a></li>
<li class="toctree-l2"><a class="reference internal" href="#define-a-crew-yaml">2. Define a Crew (YAML)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-your-crew">3. Run Your Crew</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#from-python">From Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#from-cli">From CLI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#try-different-frameworks">4. Try Different Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-patterns">Common Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multi-agent-collaboration">Multi-Agent Collaboration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#knowledge-base-integration">Knowledge Base Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#single-agent-cli-execution">Single-Agent CLI Execution</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../QUICKSTART.html">CrewAI Quickstart for Otterfall</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#setup-one-time">Setup (One-time)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#using-crewai-for-task-implementation">Using CrewAI for Task Implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#example-implement-section-6-1-species-data-system">Example: Implement Section 6.1 (Species Data System)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#what-happens">What Happens</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#task-decomposition-examples">Task Decomposition Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#too-vague">‚ùå Too Vague</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#good-specific-with-context">‚úÖ Good - Specific with Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#best-with-requirements-and-validation">‚úÖ Best - With Requirements and Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#training-the-crew">Training the Crew</a></li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#checking-progress">Checking Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#integration-with-kiro-workflow">Integration with Kiro Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#recommended-workflow">Recommended Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#when-to-use-which">When to Use Which</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#issue-no-such-file-or-directory">Issue: ‚ÄúNo such file or directory‚Äù</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#issue-anthropic-api-key-not-set">Issue: ‚ÄúANTHROPIC_API_KEY not set‚Äù</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#issue-agents-don-t-understand-otterfall-patterns">Issue: Agents don‚Äôt understand Otterfall patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../QUICKSTART.html#issue-code-doesn-t-match-conventions">Issue: Code doesn‚Äôt match conventions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../QUICKSTART.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ARCHITECTURE.html">CrewAI Modular Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#current-implementation">Current Implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ARCHITECTURE.html#generic-engine-internal-crewai">1. Generic Engine (<code class="docutils literal notranslate"><span class="pre">internal/crewai</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ARCHITECTURE.html#package-specific-crews-packages-name-crewai">2. Package-Specific Crews (<code class="docutils literal notranslate"><span class="pre">packages/&lt;name&gt;/.crewai/</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#solution-package-defined-crews">Solution: Package-Defined Crews</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#directory-structure">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#package-manifest-manifest-yaml">Package Manifest (manifest.yaml)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#agent-template-system">Agent Template System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#cli-usage">CLI Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#github-actions-workflow">GitHub Actions Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#discovery-implementation">Discovery Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#migration-path">Migration Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ARCHITECTURE.html#benefits">Benefits</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../INTEGRATION.html">External Integration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#cli-contract-stable-api">CLI Contract (Stable API)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#version-compatibility">Version Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#commands">Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../INTEGRATION.html#list-crews">List Crews</a></li>
<li class="toctree-l4"><a class="reference internal" href="../INTEGRATION.html#get-crew-info">Get Crew Info</a></li>
<li class="toctree-l4"><a class="reference internal" href="../INTEGRATION.html#run-a-crew">Run a Crew</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#json-output-schemas">JSON Output Schemas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#crewlistresult">CrewListResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#crewinforesult">CrewInfoResult</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#crewrunresult">CrewRunResult</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#typescript-types">TypeScript Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#exit-codes">Exit Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#standard-installation">Standard Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#docker-installation">Docker Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#docker-compose-example">Docker Compose Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#typescript-integration-examples">TypeScript Integration Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#basic-integration-node-js">Basic Integration (Node.js)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#vercel-ai-sdk-integration">Vercel AI SDK Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#agent-to-agent-communication-architecture">Agent-to-Agent Communication Architecture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#error-handling">Error Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#structured-error-responses">Structured Error Responses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#timeout-handling">Timeout Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#always-use-json-flag">1. Always Use <code class="docutils literal notranslate"><span class="pre">--json</span></code> Flag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#handle-long-running-operations">2. Handle Long-Running Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#cache-crew-list">3. Cache Crew List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#validate-input-before-calling">4. Validate Input Before Calling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#command-not-found">Command Not Found</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#framework-errors">Framework Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../INTEGRATION.html#api-key-issues">API Key Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../INTEGRATION.html#related-resources">Related Resources</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#module-index">Module Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/modules.html">Modules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#development-setup">Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#running-tests">Running Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#code-style">Code Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#building-documentation">Building Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#pull-request-process">Pull Request Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/contributing.html#commit-messages">Commit Messages</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">agentic-crew</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quickstart</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/getting-started/quickstart.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Link to this heading">ÔÉÅ</a></h1>
<p>This guide will get you running your first agentic-crew in 5 minutes.</p>
<section id="install-agentic-crew">
<h2>1. Install agentic-crew<a class="headerlink" href="#install-agentic-crew" title="Link to this heading">ÔÉÅ</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>agentic-crew<span class="o">[</span>crewai<span class="o">]</span>
</pre></div>
</div>
</section>
<section id="define-a-crew-yaml">
<h2>2. Define a Crew (YAML)<a class="headerlink" href="#define-a-crew-yaml" title="Link to this heading">ÔÉÅ</a></h2>
<p>Create a minimal crew structure:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>.crewai/crews/analyzer
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">.crewai/manifest.yaml</span></code></strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-first-crew</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span>

<span class="nt">crews</span><span class="p">:</span>
<span class="w">  </span><span class="nt">analyzer</span><span class="p">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Analyze code and provide feedback</span>
<span class="w">    </span><span class="nt">agents</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crews/analyzer/agents.yaml</span>
<span class="w">    </span><span class="nt">tasks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crews/analyzer/tasks.yaml</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">crews/analyzer/agents.yaml</span></code></strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">code_reviewer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Senior Code Reviewer</span>
<span class="w">  </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Review code for bugs, security issues, and improvements</span>
<span class="w">  </span><span class="nt">backstory</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">    </span><span class="no">You are an expert software engineer with 15 years of experience.</span>
<span class="w">    </span><span class="no">You excel at finding subtle bugs and suggesting improvements.</span>
</pre></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">crews/analyzer/tasks.yaml</span></code></strong>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">review_code</span><span class="p">:</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Review the provided code for issues and improvements</span>
<span class="w">  </span><span class="nt">expected_output</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">    </span><span class="no">A detailed list of findings with:</span>
<span class="w">    </span><span class="no">- Issue description</span>
<span class="w">    </span><span class="no">- Severity (critical/high/medium/low)</span>
<span class="w">    </span><span class="no">- Suggested fix</span>
<span class="w">  </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">code_reviewer</span>
</pre></div>
</div>
</section>
<section id="run-your-crew">
<h2>3. Run Your Crew<a class="headerlink" href="#run-your-crew" title="Link to this heading">ÔÉÅ</a></h2>
<section id="from-python">
<h3>From Python<a class="headerlink" href="#from-python" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentic_crew</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_crew</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">run_crew</span><span class="p">(</span>
    <span class="s2">&quot;my-first-crew&quot;</span><span class="p">,</span>
    <span class="s2">&quot;analyzer&quot;</span><span class="p">,</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">def calculate_total(items):</span>
<span class="s2">    total = 0</span>
<span class="s2">    for item in items:</span>
<span class="s2">        total += item[&#39;price&#39;]</span>
<span class="s2">    return total</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="from-cli">
<h3>From CLI<a class="headerlink" href="#from-cli" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">ANTHROPIC_API_KEY</span><span class="o">=</span><span class="s2">&quot;your-key-here&quot;</span>

agentic-crew<span class="w"> </span>run<span class="w"> </span>my-first-crew<span class="w"> </span>analyzer<span class="w"> </span>--input<span class="w"> </span><span class="s2">&quot;Review this code: ...&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="try-different-frameworks">
<h2>4. Try Different Frameworks<a class="headerlink" href="#try-different-frameworks" title="Link to this heading">ÔÉÅ</a></h2>
<p>agentic-crew auto-detects available frameworks:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">agentic_crew.core.decomposer</span><span class="w"> </span><span class="kn">import</span> <span class="n">detect_framework</span><span class="p">,</span> <span class="n">get_available_frameworks</span>

<span class="c1"># See what you have installed</span>
<span class="nb">print</span><span class="p">(</span><span class="n">get_available_frameworks</span><span class="p">())</span>  <span class="c1"># [&#39;crewai&#39;, &#39;langgraph&#39;]</span>

<span class="c1"># Force a specific framework</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_crew</span><span class="p">(</span>
    <span class="s2">&quot;my-first-crew&quot;</span><span class="p">,</span>
    <span class="s2">&quot;analyzer&quot;</span><span class="p">,</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">},</span>
    <span class="n">framework</span><span class="o">=</span><span class="s2">&quot;langgraph&quot;</span>  <span class="c1"># Force LangGraph</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">ÔÉÅ</a></h2>
<ul class="simple">
<li><p><strong><a class="reference internal" href="../ARCHITECTURE.html"><span class="std std-doc">Architecture Guide</span></a></strong> - Understand how decomposition works</p></li>
<li><p><strong><a class="reference internal" href="../INTEGRATION.html"><span class="std std-doc">Integration Guide</span></a></strong> - Integrate with your projects</p></li>
<li><p><strong><a class="reference internal" href="../api/index.html"><span class="std std-doc">API Reference</span></a></strong> - Detailed API documentation</p></li>
</ul>
</section>
<section id="common-patterns">
<h2>Common Patterns<a class="headerlink" href="#common-patterns" title="Link to this heading">ÔÉÅ</a></h2>
<section id="multi-agent-collaboration">
<h3>Multi-Agent Collaboration<a class="headerlink" href="#multi-agent-collaboration" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># agents.yaml</span>
<span class="nt">planner</span><span class="p">:</span>
<span class="w">  </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Project Planner</span>
<span class="w">  </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Break down complex tasks</span>

<span class="nt">implementer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Code Implementer</span>
<span class="w">  </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write production code</span>

<span class="nt">reviewer</span><span class="p">:</span>
<span class="w">  </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Code Reviewer</span>
<span class="w">  </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ensure quality</span>

<span class="c1"># tasks.yaml</span>
<span class="nt">plan</span><span class="p">:</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create implementation plan</span>
<span class="w">  </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">planner</span>

<span class="nt">implement</span><span class="p">:</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the code</span>
<span class="w">  </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">implementer</span>
<span class="w">  </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">plan</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Use planner&#39;s output</span>

<span class="nt">review</span><span class="p">:</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Review implementation</span>
<span class="w">  </span><span class="nt">agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reviewer</span>
<span class="w">  </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">implement</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Use implementer&#39;s output</span>
</pre></div>
</div>
</section>
<section id="knowledge-base-integration">
<h3>Knowledge Base Integration<a class="headerlink" href="#knowledge-base-integration" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># manifest.yaml</span>
<span class="nt">crews</span><span class="p">:</span>
<span class="w">  </span><span class="nt">analyzer</span><span class="p">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Analyze code with domain knowledge</span>
<span class="w">    </span><span class="nt">agents</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crews/analyzer/agents.yaml</span>
<span class="w">    </span><span class="nt">tasks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crews/analyzer/tasks.yaml</span>
<span class="w">    </span><span class="nt">knowledge</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">knowledge/coding_standards/</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">knowledge/security_guidelines/</span>
</pre></div>
</div>
</section>
<section id="single-agent-cli-execution">
<h3>Single-Agent CLI Execution<a class="headerlink" href="#single-agent-cli-execution" title="Link to this heading">ÔÉÅ</a></h3>
<p>For simple tasks that don‚Äôt need multi-agent coordination:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Quick fixes with aider</span>
agentic-crew<span class="w"> </span>run<span class="w"> </span>--runner<span class="w"> </span>aider<span class="w"> </span>--input<span class="w"> </span><span class="s2">&quot;Add error handling to auth.py&quot;</span>

<span class="c1"># Free local execution with Ollama</span>
agentic-crew<span class="w"> </span>run<span class="w"> </span>--runner<span class="w"> </span>ollama<span class="w"> </span>--input<span class="w"> </span><span class="s2">&quot;Fix the bug&quot;</span><span class="w"> </span>--model<span class="w"> </span>deepseek-coder
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../QUICKSTART.html" class="btn btn-neutral float-right" title="CrewAI Quickstart for Otterfall" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Jon Bogaty.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>

## Links discovered
- [agentic-crew](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/index.html)
- [Installation](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/getting-started/installation.html)
- [CrewAI Quickstart for Otterfall](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/QUICKSTART.html)
- [CrewAI Modular Architecture](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/ARCHITECTURE.html)
- [External Integration Guide](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/INTEGRATION.html)
- [API Reference](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/api/index.html)
- [Modules](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/api/modules.html)
- [Contributing](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/development/contributing.html)
- [link](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/index.html)
- [View page source](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/_sources/getting-started/quickstart.md.txt)
- [<span class="std std-doc">Architecture Guide</span>](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/ARCHITECTURE.html)
- [<span class="std std-doc">Integration Guide</span>](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/INTEGRATION.html)
- [<span class="std std-doc">API Reference</span>](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/api/index.html)
- [<span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/getting-started/installation.html)
- [Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span>](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/QUICKSTART.html)
- [Sphinx](https://www.sphinx-doc.org/)
- [theme](https://github.com/readthedocs/sphinx_rtd_theme)
- [Read the Docs](https://readthedocs.org)

--- docs/_build/html/_sources/QUICKSTART.md.txt ---
# CrewAI Quickstart for Otterfall

## Setup (One-time)

```bash
# 1. Set up environment variables
export ANTHROPIC_API_KEY="your-key-here"
# Optional: export OPENROUTER_API_KEY="your-key-here"  # Fallback

# 2. Navigate to crew_agents
cd packages/crew_agents

# 3. Link Otterfall specs to knowledge base
ln -s ../../../.kiro/specs/otterfall-complete knowledge/specs

# 4. Add Otterfall patterns to knowledge
mkdir -p knowledge/otterfall_patterns
cp ../../otterfall/src/ecs/components.ts knowledge/otterfall_patterns/
cp ../../otterfall/src/ecs/data/species.ts knowledge/otterfall_patterns/
```

## Using CrewAI for Task Implementation

### Example: Implement Section 6.1 (Species Data System)

```bash
cd packages/crew_agents

# Run the crew with a specific task
uv run crew_agents build "Implement Section 6.1: Species Data System

Requirements:
- Read .kiro/specs/otterfall-complete/requirements.md Requirements 1-2
- Read .kiro/specs/otterfall-complete/design.md Properties 19-20
- Read .kiro/specs/otterfall-complete/tasks.md Section 6.1

Tasks:
1. Verify all 13 predator species are defined in packages/otterfall/src/ecs/data/species.ts
2. Verify all 15 prey species are defined
3. Create SpeciesComponent in packages/otterfall/src/ecs/components.ts if not exists
4. Implement species assignment on entity creation
5. Add species-specific model loading logic

Validation:
- TypeScript compiles with zero errors
- All species have required properties (health, stamina, attacks, etc.)
- Species data matches requirements exactly"
```

### What Happens

1. **Project Manager** loads context:
   - Reads requirements 1-2
   - Reads design properties 19-20
   - Reads task 6.1
   - Validates prerequisites

2. **Senior Engineer** implements:
   - Checks existing species.ts
   - Adds missing species if any
   - Creates/updates SpeciesComponent
   - Implements species assignment logic
   - Adds model loading

3. **QA Engineer** reviews:
   - Runs TypeScript compiler
   - Checks for errors
   - Validates against patterns
   - Runs unit tests

4. **Chief Engineer** approves:
   - Verifies completeness
   - Ensures quality
   - Approves for merge

## Task Decomposition Examples

### ‚ùå Too Vague
```bash
uv run crew_agents build "Make combat work"
```

### ‚úÖ Good - Specific with Context
```bash
uv run crew_agents build "Implement CombatComponent (Requirement 3.1)

Create CombatComponent in packages/otterfall/src/ecs/components.ts with:
- health: number
- maxHealth: number
- stamina: number
- maxStamina: number
- armor: number (percentage 0-100)
- dodge: number (percentage 0-100)
- archetype: 'tank' | 'agile' | 'balanced'
- attacks: AttackType[]
- staminaRegenRate: number
- lastDamageTime: number
- isStunned: boolean
- stunEndTime: number

Apply archetype-specific stats:
- Tank: 150 HP, 80 stamina, 30% armor, 10% dodge, 8/sec regen
- Agile: 80 HP, 120 stamina, 5% armor, 35% dodge, 15/sec regen
- Balanced: 100 HP, 100 stamina, 15% armor, 20% dodge, 10/sec regen"
```

### ‚úÖ Best - With Requirements and Validation
```bash
uv run crew_agents build "Implement Attack System (Requirements 3.2-3.7, 5.1-5.8)

Context:
- Read .kiro/specs/otterfall-complete/requirements.md Requirements 3, 5
- Read .kiro/specs/otterfall-complete/design.md Combat System Design
- Read packages/otterfall/src/ecs/data/species.ts for attack types

Implementation:
1. Create AttackType enum: bite, claw, tail_whip, headbutt, pounce, roll_crush
2. Create attack data with damage, range, stamina cost, cooldown
3. Implement attack execution function:
   - Check stamina >= cost
   - Check cooldown == 0
   - Check target in range
   - Apply damage with armor reduction
   - Apply knockback force
   - Apply stun duration
   - Set cooldown timestamp
4. Implement damage calculation:
   - finalDamage = baseDamage * (1 ¬± 0.1) * (1 - armorPercent)
5. Add to packages/otterfall/src/ecs/systems/CombatSystem.ts

Validation:
- TypeScript compiles
- All attack types have correct properties
- Damage calculation matches design
- Cooldowns prevent spam
- Unit tests pass"
```

## Training the Crew

After implementing a few tasks, train the agents:

```bash
cd packages/crew_agents

# Train with 5 iterations
uv run crew_agents train 5

# During training, provide feedback:
# - "Good: Followed ECS patterns correctly"
# - "Bad: Didn't check TypeScript compilation"
# - "Improve: Add more edge case handling"
```

## Checking Progress

```bash
# List what's in the knowledge base
uv run crew_agents list-knowledge

# Test that tools work
uv run crew_agents test-tools
```

## Integration with Kiro Workflow

### Recommended Workflow

1. **Use Kiro** to create/update specs:
   ```bash
   # In Kiro chat
   "Update the design document to add Property 56: Combat feedback timing"
   ```

2. **Use CrewAI** to implement complex tasks:
   ```bash
   cd packages/crew_agents
   uv run crew_agents build "Implement Section 6.2: Combat System"
   ```

3. **Use Kiro** for quick fixes:
   ```bash
   # In Kiro chat
   "Fix the TypeScript error in CombatSystem.ts line 42"
   ```

4. **Use CrewAI** for features requiring decomposition:
   ```bash
   uv run crew_agents build "Implement Section 8: Terrain and World Generation"
   ```

### When to Use Which

| Task Type | Use | Why |
|-----------|-----|-----|
| Create specs | Kiro | Excellent at requirements, design, tasks |
| Simple fixes | Kiro | Fast, direct, no overhead |
| Complex features | CrewAI | Proper decomposition, QA review |
| Refactoring | CrewAI | Multiple agents review changes |
| Testing | Both | Kiro for unit tests, CrewAI for comprehensive |
| Documentation | Kiro | Fast, integrated with codebase |

## Troubleshooting

### Issue: "No such file or directory"

**Solution**: Make sure you're in the right directory
```bash
cd packages/crew_agents
pwd  # Should show: .../jbcom-oss-ecosystem/packages/crew_agents
```

### Issue: "ANTHROPIC_API_KEY not set"

**Solution**: Set the environment variable
```bash
export ANTHROPIC_API_KEY="your-key-here"
# Or add to ~/.zshrc or ~/.bashrc

# Optional: Use OpenRouter as fallback
export OPENROUTER_API_KEY="your-key-here"
```

### Issue: Agents don't understand Otterfall patterns

**Solution**: Add more examples to knowledge base
```bash
cd packages/crew_agents/knowledge/otterfall_patterns

# Copy working examples
cp ../../../otterfall/src/ecs/systems/TimeSystem.ts .
cp ../../../otterfall/src/ecs/systems/WeatherSystem.ts .

# Document the patterns
cat > README.md << 'EOF'
# Otterfall ECS Patterns

## System Pattern
Systems are functions that operate on entities with specific components.

Example: TimeSystem.ts
- Updates time of day
- Calculates sun position
- Updates lighting

## Component Pattern
Components are pure data, no logic.

Example: TimeOfDayComponent
- hour: number (0-24)
- phase: 'dawn' | 'day' | 'dusk' | 'night'
- sunIntensity: number
EOF
```

### Issue: Code doesn't match conventions

**Solution**: Train agents with feedback
```bash
uv run crew_agents train 5

# When prompted, provide specific feedback:
# "The code should use Miniplex ECS patterns, not plain objects"
# "Follow the pattern in TimeSystem.ts for system structure"
```

## Next Steps

1. **Add Otterfall patterns** to knowledge base
2. **Train agents** on existing code
3. **Implement Section 6** using CrewAI
4. **Iterate and improve** based on results

## See Also

- [INTEGRATION.md](./INTEGRATION.md) - Full integration guide
- [README.md](./README.md) - CrewAI system overview
- [Otterfall Spec](../../.kiro/specs/otterfall-complete/) - Requirements and design



## Links discovered
- [INTEGRATION.md](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/_sources/INTEGRATION.md)
- [README.md](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/_sources/README.md)
- [Otterfall Spec](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/.kiro/specs/otterfall-complete.md)

--- docs/_build/html/_sources/getting-started/installation.md.txt ---
# Installation

## Requirements

- **Python 3.10+** (3.10, 3.11, 3.12, 3.13, 3.14 supported)
- [uv](https://docs.astral.sh/uv/) (recommended) or pip

## Install from PyPI

```bash
# Core package (auto-detects frameworks)
pip install agentic-crew

# With specific framework
pip install agentic-crew[crewai]      # CrewAI (recommended)
pip install agentic-crew[langgraph]   # LangGraph
pip install agentic-crew[strands]     # AWS Strands

# All frameworks
pip install agentic-crew[ai]
```

## Install from Source

```bash
git clone https://github.com/agentic-dev-library/crew.git
cd crew
uv sync --extra crewai
```

## Development Installation

```bash
# Clone and install with dev dependencies
git clone https://github.com/agentic-dev-library/crew.git
cd crew
uv sync --extra dev --extra tests --extra crewai
```

## Verify Installation

```bash
# Check version
python -c "import agentic_crew; print(agentic_crew.__version__)"

# List available frameworks
python -c "from agentic_crew.core.decomposer import get_available_frameworks; print(get_available_frameworks())"
```


## Links discovered
- [uv](https://docs.astral.sh/uv/)

--- docs/_build/html/_sources/getting-started/quickstart.md.txt ---
# Quickstart

This guide will get you running your first agentic-crew in 5 minutes.

## 1. Install agentic-crew

```bash
pip install agentic-crew[crewai]
```

## 2. Define a Crew (YAML)

Create a minimal crew structure:

```bash
mkdir -p .crewai/crews/analyzer
```

**`.crewai/manifest.yaml`**:
```yaml
name: my-first-crew
version: "1.0"

crews:
  analyzer:
    description: Analyze code and provide feedback
    agents: crews/analyzer/agents.yaml
    tasks: crews/analyzer/tasks.yaml
```

**`crews/analyzer/agents.yaml`**:
```yaml
code_reviewer:
  role: Senior Code Reviewer
  goal: Review code for bugs, security issues, and improvements
  backstory: >
    You are an expert software engineer with 15 years of experience.
    You excel at finding subtle bugs and suggesting improvements.
```

**`crews/analyzer/tasks.yaml`**:
```yaml
review_code:
  description: Review the provided code for issues and improvements
  expected_output: >
    A detailed list of findings with:
    - Issue description
    - Severity (critical/high/medium/low)
    - Suggested fix
  agent: code_reviewer
```

## 3. Run Your Crew

### From Python

```python
from agentic_crew import run_crew

result = run_crew(
    "my-first-crew",
    "analyzer",
    inputs={"code": """
def calculate_total(items):
    total = 0
    for item in items:
        total += item['price']
    return total
"""}
)

print(result)
```

### From CLI

```bash
export ANTHROPIC_API_KEY="your-key-here"

agentic-crew run my-first-crew analyzer --input "Review this code: ..."
```

## 4. Try Different Frameworks

agentic-crew auto-detects available frameworks:

```python
from agentic_crew.core.decomposer import detect_framework, get_available_frameworks

# See what you have installed
print(get_available_frameworks())  # ['crewai', 'langgraph']

# Force a specific framework
result = run_crew(
    "my-first-crew",
    "analyzer",
    inputs={"code": "..."},
    framework="langgraph"  # Force LangGraph
)
```

## Next Steps

- **[Architecture Guide](../ARCHITECTURE.md)** - Understand how decomposition works
- **[Integration Guide](../INTEGRATION.md)** - Integrate with your projects
- **[API Reference](../api/index.rst)** - Detailed API documentation

## Common Patterns

### Multi-Agent Collaboration

```yaml
# agents.yaml
planner:
  role: Project Planner
  goal: Break down complex tasks

implementer:
  role: Code Implementer
  goal: Write production code

reviewer:
  role: Code Reviewer
  goal: Ensure quality

# tasks.yaml
plan:
  description: Create implementation plan
  agent: planner

implement:
  description: Write the code
  agent: implementer
  context: [plan]  # Use planner's output

review:
  description: Review implementation
  agent: reviewer
  context: [implement]  # Use implementer's output
```

### Knowledge Base Integration

```yaml
# manifest.yaml
crews:
  analyzer:
    description: Analyze code with domain knowledge
    agents: crews/analyzer/agents.yaml
    tasks: crews/analyzer/tasks.yaml
    knowledge:
      - knowledge/coding_standards/
      - knowledge/security_guidelines/
```

### Single-Agent CLI Execution

For simple tasks that don't need multi-agent coordination:

```bash
# Quick fixes with aider
agentic-crew run --runner aider --input "Add error handling to auth.py"

# Free local execution with Ollama
agentic-crew run --runner ollama --input "Fix the bug" --model deepseek-coder
```


## Links discovered
- [Architecture Guide](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/_sources/ARCHITECTURE.md)
- [Integration Guide](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/_sources/INTEGRATION.md)
- [API Reference](https://github.com/agentic-dev-library/crew/blob/main/docs/_build/html/_sources/api/index.rst)

--- examples/python/README.md ---
# Python Examples

This directory contains examples of how to use `agentic-crew` programmatically in Python.

## Setup

Ensure you have the package installed in your environment:

```bash
uv sync --extra dev --extra crewai
```

Or if you are developing locally:

```bash
pip install -e packages/agentic-crew
```

## Examples

### 1. Minimal Run (`minimal_run.py`)

Shows how to discover packages, load a crew configuration, and execute it using the best available framework.

```bash
python examples/python/minimal_run.py
```

### 2. Framework Detection

You can check which frameworks are available in your environment:

```python
from agentic_crew import get_available_frameworks, detect_framework

print(f"Available: {get_available_frameworks()}")
print(f"Preferred: {detect_framework()}")
```

## Requirements

Most crews require an LLM provider API key. For the default configurations, you'll need:

- `ANTHROPIC_API_KEY`: For Claude models (preferred)
- `OPENAI_API_KEY`: If using OpenAI models
- `AWS_ACCESS_KEY_ID` / `AWS_SECRET_ACCESS_KEY`: If using AWS Strands with Bedrock


--- examples/typescript/README.md ---
# TypeScript Integration Examples

This directory contains ready-to-use TypeScript code for integrating with `agentic-crew`.

## Files

| File | Description |
|------|-------------|
| `agentic-crew-types.ts` | TypeScript type definitions for CLI JSON output |
| `crew-tool.ts` | Complete client implementation for invoking crews |
| `vercel-ai-integration.ts` | Vercel AI SDK integration with tool definitions |

## Quick Start

### 1. Install Dependencies

```bash
npm install ai @ai-sdk/anthropic zod
```

### 2. Install agentic-crew (Python)

```bash
pip install 'agentic-crew[crewai]'
```

### 3. Copy Files

Copy the TypeScript files to your project:

```bash
cp agentic-crew-types.ts your-project/src/types/
cp crew-tool.ts your-project/src/crews/
cp vercel-ai-integration.ts your-project/src/tools/
```

### 4. Use in Your Code

```typescript
import { CrewTool } from './crews/crew-tool';
import { invokeCrewTool, listCrewsTool } from './tools/vercel-ai-integration';

// Direct invocation
const crewTool = new CrewTool();
const result = await crewTool.invokeCrew({
  package: 'vendor-connectors',
  crew: 'connector_builder',
  input: 'Build a connector for the Stripe API',
});

// With Vercel AI SDK
import { generateText } from 'ai';
import { anthropic } from '@ai-sdk/anthropic';

const response = await generateText({
  model: anthropic('claude-sonnet-4-20250514'),
  tools: { invokeCrew: invokeCrewTool, listCrews: listCrewsTool },
  prompt: 'List available crews and build a game component',
});
```

## Environment Variables

Set these environment variables:

```bash
export ANTHROPIC_API_KEY="sk-ant-..."
```

## Documentation

See the full [Integration Guide](../../docs/INTEGRATION.md) for:

- CLI contract documentation
- JSON output schemas
- Exit codes
- Best practices
- Error handling

## License

MIT - Same as agentic-crew


## Links discovered
- [Integration Guide](https://github.com/agentic-dev-library/crew/blob/main/docs/INTEGRATION.md)

--- examples/vendor-connectors/README.md ---
# Example vendor-connectors Integration

This directory contains example configurations showing how `vendor-connectors` can integrate with `agentic-crew`.

## Structure

This represents the `.crewai/` directory that would be created in the vendor-connectors repository:

```
vendor-connectors/
‚îú‚îÄ‚îÄ .crewai/
‚îÇ   ‚îú‚îÄ‚îÄ manifest.yaml          # Crew definitions (this file)
‚îÇ   ‚îú‚îÄ‚îÄ crews/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ connector_builder/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ agents.yaml
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ tasks.yaml
‚îÇ   ‚îî‚îÄ‚îÄ knowledge/
‚îÇ       ‚îî‚îÄ‚îÄ api_patterns/
‚îÇ           ‚îî‚îÄ‚îÄ rest_api_best_practices.md
‚îî‚îÄ‚îÄ src/
    ‚îî‚îÄ‚îÄ vendor_connectors/
        ‚îî‚îÄ‚îÄ ... (generated connectors)
```

## Usage

1. Copy this structure to vendor-connectors repository:
   ```bash
   cp -r examples/vendor-connectors/.crewai vendor-connectors/
   ```

2. Install agentic-crew in vendor-connectors:
   ```bash
   cd vendor-connectors
   # Add to pyproject.toml optional-dependencies
   # Then:
   uv sync --extra crews
   ```

3. Run the connector_builder crew:
   ```bash
   agentic-crew run vendor-connectors connector_builder \
     --input '{"api_docs_url": "https://docs.meshy.ai/en", "vendor_name": "meshy"}'
   ```

## Expected Output

The crew will:
1. Analyze the API documentation
2. Generate Python connector code
3. Create tools for CrewAI/LangGraph/Strands
4. Output to `/tmp/connector-output/{vendor_name}/`

You can then review and integrate the generated code into vendor-connectors.


--- examples/typescript/agentic-crew-types.ts ---
/**
 * TypeScript types for agentic-crew CLI integration.
 *
 * These types match the JSON output from the agentic-crew CLI when using --json flag.
 * Copy this file to your TypeScript project for type-safe integration.
 *
 * @version 0.1.0
 * @see https://github.com/jbcom/agentic-crew/blob/main/docs/INTEGRATION.md
 */

// ============================================================================
// LIST COMMAND TYPES
// ============================================================================

/**
 * Result from `agentic-crew list --json`
 *
 * @example
 * ```bash
 * agentic-crew list --json
 * ```
 */
export interface CrewListResult {
  crews: CrewSummary[];
}

/**
 * Summary information about a crew
 */
export interface CrewSummary {
  /** Package containing the crew (e.g., "otterfall", "vendor-connectors") */
  package: string;

  /** Crew name (e.g., "game_builder", "connector_builder") */
  name: string;

  /** Human-readable description of what the crew does */
  description: string;

  /**
   * Required framework for this crew.
   * - `null`: Any available framework works (auto-detect)
   * - `"crewai"`: Requires CrewAI framework
   * - `"langgraph"`: Requires LangGraph framework
   * - `"strands"`: Requires AWS Strands framework
   */
  required_framework: Framework | null;
}

// ============================================================================
// INFO COMMAND TYPES
// ============================================================================

/**
 * Result from `agentic-crew info <package> <crew> --json`
 *
 * @example
 * ```bash
 * agentic-crew info vendor-connectors connector_builder --json
 * ```
 */
export interface CrewInfoResult {
  /** Package name */
  package: string;

  /** Crew name */
  name: string;

  /** Human-readable description */
  description: string;

  /** Required framework (null = any framework works) */
  required_framework: Framework | null;

  /** List of agents in this crew */
  agents: AgentInfo[];

  /** List of tasks in this crew */
  tasks: TaskInfo[];

  /** Paths to knowledge directories used by this crew */
  knowledge_paths: string[];
}

/**
 * Information about an agent in a crew
 */
export interface AgentInfo {
  /** Agent identifier (e.g., "api_analyst", "senior_engineer") */
  name: string;

  /** Agent's role description */
  role: string;
}

/**
 * Information about a task in a crew
 */
export interface TaskInfo {
  /** Task identifier (e.g., "analyze_api", "generate_code") */
  name: string;

  /** Task description */
  description: string;
}

// ============================================================================
// RUN COMMAND TYPES
// ============================================================================

/**
 * Result from `agentic-crew run <package> <crew> --input "..." --json`
 *
 * @example
 * ```bash
 * agentic-crew run otterfall game_builder --input "Create a QuestComponent" --json
 * ```
 */
export interface CrewRunResult {
  /** Whether the crew execution was successful */
  success: boolean;

  /**
   * Crew output (present when success=true)
   * Contains the final result/output from the crew's work
   */
  output?: string;

  /**
   * Error message (present when success=false)
   * Describes what went wrong
   */
  error?: string;

  /**
   * Framework that was used for execution.
   * May be absent if the crew failed before framework selection.
   */
  framework_used?: Framework;

  /** Execution duration in milliseconds */
  duration_ms: number;

  /**
   * Available packages (present on "package not found" error)
   * Use this to suggest valid packages to the user
   */
  available_packages?: string[];
}

// ============================================================================
// COMMON TYPES
// ============================================================================

/**
 * Supported AI frameworks
 */
export type Framework = 'crewai' | 'langgraph' | 'strands';

/**
 * Framework selection options for run command
 */
export type FrameworkOption = 'auto' | Framework;

/**
 * CLI exit codes
 *
 * @example
 * ```typescript
 * const result = spawnSync('agentic-crew', args);
 * if (result.status === ExitCode.ConfigurationError) {
 *   console.error('Package or crew not found');
 * }
 * ```
 */
export enum ExitCode {
  /** Crew executed successfully */
  Success = 0,

  /** Crew execution failed (runtime error during execution) */
  ExecutionFailed = 1,

  /** Configuration error (package/crew not found, invalid YAML, etc.) */
  ConfigurationError = 2,

  /** Required framework is not installed */
  FrameworkNotAvailable = 3,
}

// ============================================================================
// ERROR TYPES
// ============================================================================

/**
 * Error response when crew info fails
 */
export interface CrewInfoErrorResult {
  /** Error message */
  error: string;

  /** Available packages (if package not found) */
  available_packages?: string[];
}

/**
 * Type guard to check if CrewRunResult indicates success
 */
export function isSuccessResult(
  result: CrewRunResult
): result is CrewRunResult & { success: true; output: string } {
  return result.success === true && typeof result.output === 'string';
}

/**
 * Type guard to check if CrewRunResult indicates failure
 */
export function isFailureResult(
  result: CrewRunResult
): result is CrewRunResult & { success: false; error: string } {
  return result.success === false;
}

// ============================================================================
// INVOCATION PARAMETER TYPES
// ============================================================================

/**
 * Parameters for invoking a crew
 */
export interface InvokeCrewParams {
  /** Package containing the crew */
  package: string;

  /** Crew name within the package */
  crew: string;

  /** Input/task specification for the crew */
  input: string;

  /**
   * Framework to use.
   * - `"auto"` (default): Auto-detect best available framework
   * - Specific framework: Force that framework
   *
   * Note: If the crew is defined in a framework-specific directory
   * (e.g., `.crewai/`), that framework takes precedence.
   */
  framework?: FrameworkOption;

  /**
   * Timeout in milliseconds.
   * Crews can take significant time to execute.
   * Default: 300000 (5 minutes)
   */
  timeoutMs?: number;
}


--- examples/typescript/crew-tool.ts ---
/**
 * CrewTool - TypeScript client for invoking agentic-crew CLI
 *
 * This is a ready-to-use implementation for integrating agentic-crew
 * into TypeScript/Node.js applications.
 *
 * @example
 * ```typescript
 * import { CrewTool } from './crew-tool';
 *
 * const crewTool = new CrewTool();
 *
 * // List available crews
 * const crews = await crewTool.listCrews();
 *
 * // Invoke a crew
 * const result = await crewTool.invokeCrew({
 *   package: 'vendor-connectors',
 *   crew: 'connector_builder',
 *   input: 'Build a connector for the Meshy API',
 * });
 * ```
 *
 * @see https://github.com/jbcom/agentic-crew/blob/main/docs/INTEGRATION.md
 */

import { spawn, spawnSync } from 'child_process';
import type {
  CrewListResult,
  CrewInfoResult,
  CrewRunResult,
  InvokeCrewParams,
  ExitCode,
} from './agentic-crew-types';

export interface CrewToolOptions {
  /**
   * Path to agentic-crew executable.
   * Default: 'agentic-crew' (uses PATH)
   */
  executable?: string;

  /**
   * Default timeout in milliseconds.
   * Default: 300000 (5 minutes)
   */
  defaultTimeoutMs?: number;

  /**
   * Additional environment variables to pass to the subprocess.
   * API keys can be passed here instead of relying on process.env.
   */
  env?: Record<string, string>;

  /**
   * Enable debug logging.
   * Default: false
   */
  debug?: boolean;
}

export class CrewTool {
  private readonly executable: string;
  private readonly defaultTimeoutMs: number;
  private readonly env: Record<string, string>;
  private readonly debug: boolean;

  constructor(options: CrewToolOptions = {}) {
    this.executable = options.executable ?? 'agentic-crew';
    this.defaultTimeoutMs = options.defaultTimeoutMs ?? 300000;
    this.env = { ...process.env, ...options.env } as Record<string, string>;
    this.debug = options.debug ?? false;
  }

  /**
   * List all available crews.
   *
   * @param packageFilter - Optional package name to filter by
   * @returns List of available crews
   */
  async listCrews(packageFilter?: string): Promise<CrewListResult> {
    const args = ['list'];
    if (packageFilter) {
      args.push(packageFilter);
    }
    args.push('--json');

    const result = await this.execute(args);
    return JSON.parse(result.stdout) as CrewListResult;
  }

  /**
   * List all available crews (synchronous version).
   */
  listCrewsSync(packageFilter?: string): CrewListResult {
    const args = ['list'];
    if (packageFilter) {
      args.push(packageFilter);
    }
    args.push('--json');

    const result = this.executeSync(args);
    return JSON.parse(result.stdout) as CrewListResult;
  }

  /**
   * Get detailed information about a specific crew.
   *
   * @param packageName - Package containing the crew
   * @param crewName - Name of the crew
   * @returns Detailed crew information
   */
  async getCrewInfo(packageName: string, crewName: string): Promise<CrewInfoResult> {
    const args = ['info', packageName, crewName, '--json'];
    const result = await this.execute(args);
    return JSON.parse(result.stdout) as CrewInfoResult;
  }

  /**
   * Invoke a crew and return the result.
   *
   * @param params - Invocation parameters
   * @returns Crew execution result
   */
  async invokeCrew(params: InvokeCrewParams): Promise<CrewRunResult> {
    const args = ['run', params.package, params.crew, '--input', params.input, '--json'];

    if (params.framework && params.framework !== 'auto') {
      args.push('--framework', params.framework);
    }

    const timeoutMs = params.timeoutMs ?? this.defaultTimeoutMs;

    try {
      const result = await this.execute(args, timeoutMs);
      return JSON.parse(result.stdout) as CrewRunResult;
    } catch (error) {
      // Try to parse error output as JSON
      if (error instanceof ExecutionError && error.stdout) {
        try {
          return JSON.parse(error.stdout) as CrewRunResult;
        } catch {
          // Fall through to generic error
        }
      }

      // Return structured error response
      return {
        success: false,
        error: error instanceof Error ? error.message : String(error),
        duration_ms: 0,
      };
    }
  }

  /**
   * Invoke a crew (synchronous version).
   * Use with caution - this blocks the event loop.
   */
  invokeCrewSync(params: InvokeCrewParams): CrewRunResult {
    const args = ['run', params.package, params.crew, '--input', params.input, '--json'];

    if (params.framework && params.framework !== 'auto') {
      args.push('--framework', params.framework);
    }

    try {
      const result = this.executeSync(args, params.timeoutMs ?? this.defaultTimeoutMs);
      return JSON.parse(result.stdout) as CrewRunResult;
    } catch (error) {
      if (error instanceof ExecutionError && error.stdout) {
        try {
          return JSON.parse(error.stdout) as CrewRunResult;
        } catch {
          // Fall through
        }
      }

      return {
        success: false,
        error: error instanceof Error ? error.message : String(error),
        duration_ms: 0,
      };
    }
  }

  /**
   * Check if a specific crew exists.
   */
  async crewExists(packageName: string, crewName: string): Promise<boolean> {
    try {
      const list = await this.listCrews(packageName);
      return list.crews.some((c) => c.package === packageName && c.name === crewName);
    } catch {
      return false;
    }
  }

  /**
   * Get list of available packages.
   */
  async getPackages(): Promise<string[]> {
    const list = await this.listCrews();
    const packages = new Set(list.crews.map((c) => c.package));
    return Array.from(packages);
  }

  // ============================================================================
  // Private execution methods
  // ============================================================================

  private async execute(
    args: string[],
    timeoutMs: number = this.defaultTimeoutMs
  ): Promise<{ stdout: string; stderr: string; exitCode: number }> {
    return new Promise((resolve, reject) => {
      if (this.debug) {
        console.log(`[CrewTool] Executing: ${this.executable} ${args.join(' ')}`);
      }

      const proc = spawn(this.executable, args, {
        env: this.env,
        stdio: ['pipe', 'pipe', 'pipe'],
      });

      let stdout = '';
      let stderr = '';

      proc.stdout.on('data', (data) => {
        stdout += data.toString();
      });

      proc.stderr.on('data', (data) => {
        stderr += data.toString();
        if (this.debug) {
          console.log(`[CrewTool] stderr: ${data.toString().trim()}`);
        }
      });

      const timeoutHandle = setTimeout(() => {
        proc.kill('SIGTERM');
        reject(new Error(`Command timed out after ${timeoutMs}ms`));
      }, timeoutMs);

      proc.on('error', (error) => {
        clearTimeout(timeoutHandle);
        reject(new ExecutionError(`Failed to execute command: ${error.message}`, stdout, stderr, -1));
      });

      proc.on('close', (code) => {
        clearTimeout(timeoutHandle);

        if (this.debug) {
          console.log(`[CrewTool] Exit code: ${code}`);
        }

        const exitCode = code ?? -1;

        if (exitCode === 0) {
          resolve({ stdout, stderr, exitCode });
        } else {
          reject(new ExecutionError(`Command failed with exit code ${exitCode}`, stdout, stderr, exitCode));
        }
      });
    });
  }

  private executeSync(
    args: string[],
    timeoutMs: number = this.defaultTimeoutMs
  ): { stdout: string; stderr: string; exitCode: number } {
    if (this.debug) {
      console.log(`[CrewTool] Executing (sync): ${this.executable} ${args.join(' ')}`);
    }

    const result = spawnSync(this.executable, args, {
      env: this.env,
      timeout: timeoutMs,
      encoding: 'utf-8',
    });

    if (result.error) {
      throw new ExecutionError(
        `Failed to execute command: ${result.error.message}`,
        result.stdout ?? '',
        result.stderr ?? '',
        result.status ?? -1
      );
    }

    const exitCode = result.status ?? -1;

    if (exitCode !== 0) {
      throw new ExecutionError(
        `Command failed with exit code ${exitCode}`,
        result.stdout ?? '',
        result.stderr ?? '',
        exitCode
      );
    }

    return {
      stdout: result.stdout ?? '',
      stderr: result.stderr ?? '',
      exitCode,
    };
  }
}

/**
 * Custom error class for execution failures
 */
export class ExecutionError extends Error {
  constructor(
    message: string,
    public readonly stdout: string,
    public readonly stderr: string,
    public readonly exitCode: number
  ) {
    super(message);
    this.name = 'ExecutionError';
  }

  /**
   * Get the exit code as an ExitCode enum value
   */
  get exitCodeEnum(): ExitCode | undefined {
    if (this.exitCode >= 0 && this.exitCode <= 3) {
      return this.exitCode as ExitCode;
    }
    return undefined;
  }
}


--- examples/python/minimal_run.py ---
from __future__ import annotations

import os

from agentic_crew import discover_packages, get_crew_config, run_crew_auto


def main():
    """
    Minimal example of running a crew programmatically.

    This example assumes you have a package with a crew configuration.
    In this case, we'll try to use the 'vendor-connectors' example package
    if it's discoverable.
    """
    # 1. Discover all packages with .crew/ (or .crewai/, etc.) directories
    # By default, it looks in the 'packages/' directory of the workspace root.
    packages = discover_packages()

    if not packages:
        print("No crew packages found. Try running from the workspace root.")
        return

    print(f"Discovered packages: {list(packages.keys())}")

    # 2. Pick a package and a crew
    # For this example, we'll just take the first one found
    package_name = list(packages.keys())[0]
    package_path = packages[package_name]

    # Let's list crews in this package
    from agentic_crew import list_crews

    package_crews = list_crews(package_name)

    if not package_crews.get(package_name):
        print(f"No crews found in package {package_name}")
        return

    crew_name = package_crews[package_name][0]["name"]
    print(f"Running crew: {package_name}/{crew_name}")

    # 3. Load the crew configuration
    config = get_crew_config(package_path, crew_name)

    # 4. Run the crew
    # The framework will be auto-detected based on what's installed
    # (CrewAI > LangGraph > Strands)
    inputs = {"input": "Create a simple HTTP connector for a weather API"}

    try:
        # Note: This requires ANTHROPIC_API_KEY to be set if using default Claude models
        if not os.environ.get("ANTHROPIC_API_KEY"):
            print("Warning: ANTHROPIC_API_KEY not set. Execution might fail.")

        result = run_crew_auto(config, inputs=inputs)

        print("\n--- Result ---")
        print(result)

    except Exception as e:
        print(f"Error running crew: {e}")


if __name__ == "__main__":
    main()


--- examples/typescript/vercel-ai-integration.ts ---
/**
 * Vercel AI SDK Integration Example
 *
 * This example shows how to integrate agentic-crew with the Vercel AI SDK
 * to enable AI agents to delegate tasks to specialized crews.
 *
 * Prerequisites:
 * - npm install ai @ai-sdk/anthropic zod
 * - Python with agentic-crew installed
 * - ANTHROPIC_API_KEY environment variable set
 *
 * @see https://sdk.vercel.ai/docs
 * @see https://github.com/jbcom/agentic-crew/blob/main/docs/INTEGRATION.md
 */

import { tool, generateText, streamText } from 'ai';
import { anthropic } from '@ai-sdk/anthropic';
import { z } from 'zod';
import { CrewTool } from './crew-tool';
import type { CrewRunResult, CrewSummary } from './agentic-crew-types';

// ============================================================================
// TOOL DEFINITIONS
// ============================================================================

const crewTool = new CrewTool({
  // Enable debug logging in development
  debug: process.env.NODE_ENV === 'development',
  // 10 minute timeout for long-running crews
  defaultTimeoutMs: 600000,
});

/**
 * Tool for listing available crews.
 * Use this to discover what crews are available before invoking them.
 */
export const listCrewsTool = tool({
  description:
    'List available AI crews. Use this to discover what specialized crews are available ' +
    'before delegating tasks. Returns crew names, descriptions, and required frameworks.',
  parameters: z.object({
    packageFilter: z
      .string()
      .optional()
      .describe('Optional: filter to a specific package (e.g., "otterfall", "vendor-connectors")'),
  }),
  execute: async ({ packageFilter }) => {
    const result = await crewTool.listCrews(packageFilter);

    // Format for LLM consumption
    const formatted = result.crews
      .map(
        (c: CrewSummary) =>
          `- **${c.package}/${c.name}**: ${c.description}` +
          (c.required_framework ? ` [requires: ${c.required_framework}]` : '')
      )
      .join('\n');

    return `Available crews:\n${formatted}`;
  },
});

/**
 * Tool for invoking a crew.
 * Use this to delegate complex tasks to specialized multi-agent crews.
 */
export const invokeCrewTool = tool({
  description:
    'Delegate a task to a specialized AI crew. Use this when a task requires ' +
    'specialized agents working together, such as:\n' +
    '- Code generation (game components, connectors, APIs)\n' +
    '- Content creation (documentation, specifications)\n' +
    '- Analysis tasks (API documentation, code review)\n\n' +
    'The crew will execute autonomously and return results. This may take several minutes.',
  parameters: z.object({
    package: z
      .string()
      .describe('Package containing the crew (e.g., "otterfall", "vendor-connectors")'),
    crew: z.string().describe('Crew name (e.g., "game_builder", "connector_builder")'),
    input: z
      .string()
      .describe(
        'Detailed task specification for the crew. Be specific about requirements, ' +
          'constraints, and expected output format.'
      ),
  }),
  execute: async ({ package: pkg, crew, input }): Promise<string> => {
    console.log(`\nüöÄ Invoking crew: ${pkg}/${crew}`);
    console.log(`   Input: ${input.substring(0, 100)}...`);

    const result: CrewRunResult = await crewTool.invokeCrew({
      package: pkg,
      crew,
      input,
    });

    if (!result.success) {
      const errorMsg = `Crew execution failed: ${result.error}`;
      if (result.available_packages) {
        throw new Error(`${errorMsg}\nAvailable packages: ${result.available_packages.join(', ')}`);
      }
      throw new Error(errorMsg);
    }

    console.log(`‚úÖ Crew completed in ${result.duration_ms}ms using ${result.framework_used}`);

    return result.output || 'Crew completed with no output';
  },
});

// ============================================================================
// EXAMPLE USAGE
// ============================================================================

/**
 * Example: Basic agent with crew delegation
 */
async function basicExample() {
  console.log('\n=== Basic Crew Delegation Example ===\n');

  const result = await generateText({
    model: anthropic('claude-sonnet-4-20250514'),
    tools: {
      listCrews: listCrewsTool,
      invokeCrew: invokeCrewTool,
    },
    maxSteps: 5,
    prompt:
      'First, list the available crews. Then, using the game_builder crew from ' +
      'the otterfall package, create a simple HealthComponent for an ECS system.',
  });

  console.log('\n--- Result ---');
  console.log(result.text);
}

/**
 * Example: Streaming response with crew delegation
 */
async function streamingExample() {
  console.log('\n=== Streaming Crew Delegation Example ===\n');

  const result = streamText({
    model: anthropic('claude-sonnet-4-20250514'),
    tools: {
      listCrews: listCrewsTool,
      invokeCrew: invokeCrewTool,
    },
    maxSteps: 5,
    prompt:
      'Help me build an HTTP connector for a REST API. First check what crews are ' +
      'available, then delegate to the appropriate crew to build the connector.',
  });

  // Stream the text response
  for await (const chunk of result.textStream) {
    process.stdout.write(chunk);
  }

  console.log('\n');
}

/**
 * Example: Multi-step workflow with validation
 */
async function multiStepExample() {
  console.log('\n=== Multi-Step Workflow Example ===\n');

  const result = await generateText({
    model: anthropic('claude-sonnet-4-20250514'),
    tools: {
      listCrews: listCrewsTool,
      invokeCrew: invokeCrewTool,
    },
    maxSteps: 10,
    system: `You are a project coordinator that delegates specialized tasks to AI crews.
Your workflow:
1. Understand the user's request
2. List available crews to find the best match
3. Break down complex requests into crew-appropriate tasks
4. Invoke crews with detailed, specific instructions
5. Synthesize and present the final results

Always provide clear context when invoking crews. Include:
- Specific requirements
- Expected output format
- Any constraints or preferences`,
    prompt:
      'I need to build a quest system for a game. It should have:\n' +
      '- Quest objectives that can be tracked\n' +
      '- Rewards for completion\n' +
      '- Support for main quests and side quests\n\n' +
      'Please coordinate with the appropriate crews to design and implement this.',
  });

  console.log('\n--- Final Result ---');
  console.log(result.text);

  // Show tool usage statistics
  console.log('\n--- Tool Usage ---');
  console.log(`Steps taken: ${result.steps.length}`);
  for (const step of result.steps) {
    if (step.toolCalls) {
      for (const call of step.toolCalls) {
        console.log(`- ${call.toolName}(${JSON.stringify(call.args).substring(0, 100)}...)`);
      }
    }
  }
}

// ============================================================================
// ADVANCED PATTERNS
// ============================================================================

/**
 * Create a crew tool with caching for the crew list.
 * Useful when the same crews are invoked repeatedly.
 */
export function createCachedCrewTools(cacheTtlMs = 60000) {
  let cachedList: { crews: CrewSummary[]; timestamp: number } | null = null;

  const getCachedList = async () => {
    if (cachedList && Date.now() - cachedList.timestamp < cacheTtlMs) {
      return cachedList.crews;
    }

    const result = await crewTool.listCrews();
    cachedList = { crews: result.crews, timestamp: Date.now() };
    return result.crews;
  };

  return {
    listCrews: tool({
      description: 'List available AI crews (cached)',
      parameters: z.object({}),
      execute: async () => {
        const crews = await getCachedList();
        return crews
          .map((c) => `- ${c.package}/${c.name}: ${c.description}`)
          .join('\n');
      },
    }),

    invokeCrew: tool({
      description: 'Invoke an AI crew with validation',
      parameters: z.object({
        package: z.string(),
        crew: z.string(),
        input: z.string(),
      }),
      execute: async ({ package: pkg, crew, input }) => {
        // Validate crew exists before invoking
        const crews = await getCachedList();
        const exists = crews.some(
          (c) => c.package === pkg && c.name === crew
        );

        if (!exists) {
          const available = crews
            .map((c) => `${c.package}/${c.name}`)
            .join(', ');
          throw new Error(
            `Crew ${pkg}/${crew} not found. Available: ${available}`
          );
        }

        const result = await crewTool.invokeCrew({ package: pkg, crew, input });

        if (!result.success) {
          throw new Error(result.error || 'Crew execution failed');
        }

        return result.output || '';
      },
    }),
  };
}

/**
 * Create specialized tool for a specific crew.
 * Useful when you want to expose a single crew with custom parameters.
 */
export function createSpecializedCrewTool(
  packageName: string,
  crewName: string,
  description: string,
  inputSchema: z.ZodType
) {
  return tool({
    description,
    parameters: z.object({
      input: inputSchema,
    }),
    execute: async ({ input }) => {
      const inputStr =
        typeof input === 'string' ? input : JSON.stringify(input, null, 2);

      const result = await crewTool.invokeCrew({
        package: packageName,
        crew: crewName,
        input: inputStr,
      });

      if (!result.success) {
        throw new Error(result.error || 'Crew execution failed');
      }

      return result.output || '';
    },
  });
}

// Example: Specialized connector builder tool
export const buildConnectorTool = createSpecializedCrewTool(
  'vendor-connectors',
  'connector_builder',
  'Build an HTTP connector for a REST API. Provide the API documentation URL or specification.',
  z.object({
    apiDocsUrl: z.string().url().describe('URL to the API documentation'),
    apiName: z.string().describe('Name for the generated connector'),
    authType: z
      .enum(['api_key', 'oauth2', 'bearer', 'none'])
      .optional()
      .describe('Authentication type to implement'),
  })
);

// ============================================================================
// RUN EXAMPLES
// ============================================================================

// Uncomment to run examples:
// basicExample().catch(console.error);
// streamingExample().catch(console.error);
// multiStepExample().catch(console.error);

export { crewTool };


--- examples/vendor-connectors/knowledge/api_patterns/rest_api_best_practices.md ---
# REST API Best Practices for Connector Generation

This document outlines best practices for generating HTTP API connectors.

## Client Architecture

### Use httpx for HTTP Requests

```python
import httpx
from typing import Optional

class APIClient:
    def __init__(
        self,
        api_key: str,
        base_url: str = "https://api.example.com",
        timeout: float = 30.0,
    ):
        self.api_key = api_key
        self.base_url = base_url
        self._client = httpx.AsyncClient(
            base_url=base_url,
            timeout=timeout,
            headers={"Authorization": f"Bearer {api_key}"},
        )
    
    async def __aenter__(self):
        return self
    
    async def __aexit__(self, *args):
        await self._client.aclose()
```

### Use Pydantic for Data Validation

```python
from pydantic import BaseModel, Field
from typing import Literal

class CreateRequest(BaseModel):
    name: str = Field(..., min_length=1, max_length=255)
    type: Literal["text", "image", "video"]
    options: dict[str, str] = Field(default_factory=dict)

class CreateResponse(BaseModel):
    id: str
    status: Literal["pending", "completed", "failed"]
    created_at: str
```

## Error Handling

### Custom Exceptions

```python
class APIError(Exception):
    """Base exception for API errors."""
    pass

class AuthenticationError(APIError):
    """Raised when authentication fails."""
    pass

class RateLimitError(APIError):
    """Raised when rate limit is exceeded."""
    def __init__(self, retry_after: int):
        self.retry_after = retry_after
        super().__init__(f"Rate limited. Retry after {retry_after}s")

class ValidationError(APIError):
    """Raised when request validation fails."""
    pass
```

### Error Response Handling

```python
async def _request(
    self,
    method: str,
    endpoint: str,
    **kwargs
) -> dict:
    try:
        response = await self._client.request(method, endpoint, **kwargs)
        response.raise_for_status()
        return response.json()
    except httpx.HTTPStatusError as e:
        if e.response.status_code == 401:
            raise AuthenticationError("Invalid API key")
        elif e.response.status_code == 429:
            retry_after = int(e.response.headers.get("Retry-After", 60))
            raise RateLimitError(retry_after)
        elif e.response.status_code == 422:
            raise ValidationError(f"Validation error: {e.response.text}")
        else:
            raise APIError(f"HTTP {e.response.status_code}: {e.response.text}")
    except httpx.RequestError as e:
        raise APIError(f"Request failed: {str(e)}")
```

## Authentication Patterns

### API Key (Header)

```python
headers = {"Authorization": f"Bearer {api_key}"}
```

### API Key (Query Parameter)

```python
params = {"api_key": api_key}
```

### OAuth2

```python
from authlib.integrations.httpx_client import AsyncOAuth2Client

client = AsyncOAuth2Client(
    client_id=client_id,
    client_secret=client_secret,
    token_endpoint="https://api.example.com/oauth/token",
)
await client.fetch_token()
```

## Rate Limiting

### Implement Rate Limiter

```python
import asyncio
from datetime import datetime, timedelta

class RateLimiter:
    def __init__(self, requests_per_second: int):
        self.requests_per_second = requests_per_second
        self.min_interval = 1.0 / requests_per_second
        self.last_request_time = None
    
    async def acquire(self):
        if self.last_request_time is None:
            self.last_request_time = datetime.now()
            return
        
        elapsed = (datetime.now() - self.last_request_time).total_seconds()
        if elapsed < self.min_interval:
            await asyncio.sleep(self.min_interval - elapsed)
        
        self.last_request_time = datetime.now()
```

### Usage

```python
class APIClient:
    def __init__(self, api_key: str, requests_per_second: int = 10):
        self.rate_limiter = RateLimiter(requests_per_second)
        # ...
    
    async def _request(self, method: str, endpoint: str, **kwargs):
        await self.rate_limiter.acquire()
        # ... make request
```

## Pagination Patterns

### Offset-Based Pagination

```python
async def list_items(
    self,
    limit: int = 100,
    offset: int = 0,
) -> list[Item]:
    response = await self._request(
        "GET",
        "/items",
        params={"limit": limit, "offset": offset},
    )
    return [Item(**item) for item in response["items"]]
```

### Cursor-Based Pagination

```python
from typing import Optional

async def list_items(
    self,
    limit: int = 100,
    cursor: Optional[str] = None,
) -> tuple[list[Item], Optional[str]]:
    params = {"limit": limit}
    if cursor:
        params["cursor"] = cursor
    
    response = await self._request("GET", "/items", params=params)
    items = [Item(**item) for item in response["items"]]
    next_cursor = response.get("next_cursor")
    return items, next_cursor

# Usage
async def get_all_items(self) -> list[Item]:
    all_items = []
    cursor = None
    
    while True:
        items, cursor = await self.list_items(cursor=cursor)
        all_items.extend(items)
        if cursor is None:
            break
    
    return all_items
```

## File Upload/Download

### Upload Files

```python
async def upload_file(
    self,
    file_path: str,
    file_type: str,
) -> UploadResponse:
    with open(file_path, "rb") as f:
        files = {"file": (file_path, f, file_type)}
        response = await self._request(
            "POST",
            "/upload",
            files=files,
        )
    return UploadResponse(**response)
```

### Download Files

```python
async def download_file(
    self,
    file_id: str,
    output_path: str,
) -> None:
    response = await self._client.get(f"/files/{file_id}")
    response.raise_for_status()
    
    with open(output_path, "wb") as f:
        f.write(response.content)
```

## WebSocket Support

```python
import websockets
import json

async def subscribe_to_updates(
    self,
    on_message: callable,
) -> None:
    uri = f"wss://api.example.com/subscribe?api_key={self.api_key}"
    
    async with websockets.connect(uri) as websocket:
        while True:
            message = await websocket.recv()
            data = json.loads(message)
            await on_message(data)
```

## Testing Patterns

### Mock HTTP Responses

```python
import pytest
from pytest_httpx import HTTPXMock

@pytest.mark.asyncio
async def test_create_item(httpx_mock: HTTPXMock):
    httpx_mock.add_response(
        method="POST",
        url="https://api.example.com/items",
        json={"id": "123", "status": "completed"},
    )
    
    async with APIClient(api_key="test") as client:
        result = await client.create_item(name="Test")
        assert result.id == "123"
```

### Test Error Handling

```python
@pytest.mark.asyncio
async def test_rate_limit_error(httpx_mock: HTTPXMock):
    httpx_mock.add_response(
        status_code=429,
        headers={"Retry-After": "60"},
    )
    
    async with APIClient(api_key="test") as client:
        with pytest.raises(RateLimitError) as exc_info:
            await client.create_item(name="Test")
        assert exc_info.value.retry_after == 60
```

## Framework Tool Generation

### CrewAI Tools

```python
from crewai_tools import Tool

def get_tools(framework: str = "crewai"):
    if framework == "crewai":
        return [
            Tool(
                name="create_item",
                description="Create a new item with the given name",
                func=lambda name: asyncio.run(
                    APIClient(api_key=os.getenv("API_KEY")).create_item(name)
                ),
            ),
        ]
```

### LangGraph Tools

```python
from langchain_core.tools import StructuredTool

def get_tools(framework: str = "langgraph"):
    if framework == "langgraph":
        return [
            StructuredTool.from_function(
                name="create_item",
                description="Create a new item",
                func=lambda name: asyncio.run(
                    APIClient(api_key=os.getenv("API_KEY")).create_item(name)
                ),
            ),
        ]
```

## Documentation Standards

### Client Docstrings

```python
class APIClient:
    """HTTP client for Example API.
    
    This client provides async methods for interacting with the Example API.
    It handles authentication, rate limiting, and error handling automatically.
    
    Args:
        api_key: Your API key from https://example.com/settings
        base_url: API base URL (default: https://api.example.com)
        timeout: Request timeout in seconds (default: 30.0)
        
    Example:
        >>> async with APIClient(api_key="your-key") as client:
        ...     result = await client.create_item("Test")
        ...     print(result.id)
    """
```

### Method Docstrings

```python
async def create_item(
    self,
    name: str,
    type: str = "text",
) -> CreateResponse:
    """Create a new item.
    
    Args:
        name: Item name (1-255 characters)
        type: Item type (text, image, or video)
        
    Returns:
        CreateResponse with item ID and status
        
    Raises:
        AuthenticationError: If API key is invalid
        ValidationError: If parameters are invalid
        RateLimitError: If rate limit is exceeded
        APIError: For other API errors
        
    Example:
        >>> result = await client.create_item("My Item", type="text")
        >>> print(result.id)
    """
```


--- packages/agentic-crew/tests/test_scraping_tools.py ---
"""Tests for the scraping tools."""

from __future__ import annotations

from unittest.mock import MagicMock, patch

from agentic_crew.tools.scraping_tools import CrawlWebsiteTool


@patch("agentic_crew.tools.scraping_tools.requests.get")
def test_crawl_website_tool(mock_get: MagicMock):
    """Tests that the CrawlWebsiteTool scrapes content and discovers links."""
    mock_response_page1 = MagicMock()
    mock_response_page1.content = b'<html><body><a href="/page2">Page 2</a><p>Content 1</p></body></html>'
    mock_response_page1.raise_for_status.return_value = None

    mock_response_page2 = MagicMock()
    mock_response_page2.content = b"<html><body><p>Content 2</p></body></html>"
    mock_response_page2.raise_for_status.return_value = None

    mock_get.side_effect = [mock_response_page1, mock_response_page2]

    tool = CrawlWebsiteTool()
    result = tool._run("http://example.com")

    assert "Content 1" in result
    assert "Page 2" in result
    assert "Content 2" in result
    assert mock_get.call_count == 2


## Links discovered
- [Page 2](https://github.com/agentic-dev-library/crew/blob/main/page2.md)

--- packages/agentic-crew/src/agentic_crew/tools/scraping_tools.py ---
from __future__ import annotations

import logging
from urllib.parse import urljoin, urlparse

import requests
from bs4 import BeautifulSoup
from crewai_tools import ScrapeWebsiteTool

logging.basicConfig(level=logging.INFO)
log = logging.getLogger(__name__)


class CrawlWebsiteTool(ScrapeWebsiteTool):
    """A tool for crawling a website and scraping its content.

    This tool extends ScrapeWebsiteTool to support crawling multiple pages
    starting from a given URL.
    """

    name: str = "CrawlWebsiteTool"
    description: str = "Crawl a website from a given URL and scrape its content."

    def _run(self, url: str) -> str:
        """Crawls a website and returns the scraped content.

        Args:
            url: The URL to start crawling from.

        Returns:
            The scraped content of the website.
        """
        scraped_content = ""
        visited_urls = set()
        urls_to_visit = [url]
        base_netloc = urlparse(url).netloc

        while urls_to_visit:
            current_url = urls_to_visit.pop(0)
            if current_url in visited_urls:
                continue

            try:
                response = requests.get(current_url)
                response.raise_for_status()
                visited_urls.add(current_url)

                soup = BeautifulSoup(response.content, "html.parser")
                scraped_content += self._scrape_content(soup)

                for link in soup.find_all("a", href=True):
                    next_url = urljoin(current_url, link["href"])
                    if urlparse(next_url).netloc == base_netloc and next_url not in visited_urls:
                        urls_to_visit.append(next_url)

            except requests.RequestException as e:
                log.error(f"Error crawling {current_url}: {e}")

        return scraped_content

    def _scrape_content(self, soup: BeautifulSoup) -> str:
        """Scrapes the readable content from a BeautifulSoup object."""
        for script_or_style in soup(["script", "style"]):
            script_or_style.decompose()
        return " ".join(t.strip() for t in soup.stripped_strings)


--- CHANGELOG.md ---
# CHANGELOG

<!-- version list -->

## v0.1.0 (2025-12-08)

- Initial Release


--- CONTRIBUTING.md ---
---
version: 1.0.1
last_updated: 2026-01-03T02:21:30Z
sync_type: always
---

# Contributing to Control Center

Thank you for your interest in contributing! We are **stewards and servants of the open source community FIRST**.

## Our Standards

We **mandate** these standards because we believe in leading by example:

### Conventional Commits (REQUIRED)

Every commit MUST follow [Conventional Commits](https://www.conventionalcommits.org/):

```
<type>(<scope>): <description>

[optional body]

[optional footer(s)]
```

#### Types

| Type | Description | Triggers Release |
|------|-------------|------------------|
| `feat` | New feature | Minor bump |
| `fix` | Bug fix | Patch bump |
| `docs` | Documentation only | No |
| `style` | Formatting, no code change | No |
| `refactor` | Code change without feat/fix | No |
| `perf` | Performance improvement | Patch bump |
| `test` | Adding/fixing tests | No |
| `build` | Build system or dependencies | No |
| `ci` | CI/CD configuration | No |
| `chore` | Maintenance tasks | No |
| `deps` | Dependency updates | Patch bump |
| `revert` | Revert previous commit | Patch bump |

#### Breaking Changes

Add `!` after type or include `BREAKING CHANGE:` in footer:

```
feat!: remove deprecated API

BREAKING CHANGE: The old API has been removed. Use the new API instead.
```

#### Examples

```bash
# Good
feat(reviewer): add support for multi-file review
fix(curator): handle empty issue body gracefully
docs: update installation instructions
refactor(clients): simplify Ollama error handling
deps: bump cobra to v1.10.2

# Bad
Fixed bug                    # No type
feat: Add new feature        # Wrong case (use lowercase)
fix: fixed the thing.        # No trailing period
Update code                  # Not conventional
```

### Semantic Versioning (AUTOMATIC)

We use [Release Please](https://github.com/googleapis/release-please) for automated versioning:

- `feat:` ‚Üí Minor version bump (0.1.0 ‚Üí 0.2.0)
- `fix:`, `perf:`, `deps:` ‚Üí Patch version bump (0.1.0 ‚Üí 0.1.1)
- `feat!:` or `BREAKING CHANGE:` ‚Üí Major version bump (0.1.0 ‚Üí 1.0.0)

### Pre-commit Hooks (REQUIRED)

Install pre-commit hooks before contributing:

```bash
# Install pre-commit
pip install pre-commit

# Install hooks
pre-commit install
pre-commit install --hook-type commit-msg

# Run on all files
pre-commit run --all-files
```

### Code Quality

- **Go**: Run `make lint` before committing
- **Tests**: Run `make test` and ensure all pass
- **Format**: Run `make fmt` or let pre-commit handle it

## Development Workflow

### 1. Fork and Clone

```bash
git clone https://github.com/YOUR_USERNAME/control-center.git
cd control-center
```

### 2. Create Feature Branch

```bash
git checkout -b feat/your-feature
```

### 3. Make Changes

```bash
# Build
make build

# Test
make test

# Lint
make lint
```

### 4. Commit with Conventional Format

```bash
git add .
git commit -m "feat(scope): add your feature"
```

### 5. Push and Create PR

```bash
git push origin feat/your-feature
```

Then create a Pull Request on GitHub.

## Pull Request Guidelines

1. **Title**: Use conventional commit format
2. **Description**: Explain what and why, not how
3. **Tests**: Add tests for new functionality
4. **Docs**: Update documentation if needed
5. **Review**: Address all AI and human feedback

## Getting Help

- **Issues**: [GitHub Issues](https://github.com/jbcom/control-center/issues)
- **Discussions**: [GitHub Discussions](https://github.com/jbcom/control-center/discussions)

## License

By contributing, you agree that your contributions will be licensed under the MIT License.


## Links discovered
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Release Please](https://github.com/googleapis/release-please)
- [GitHub Issues](https://github.com/jbcom/control-center/issues)
- [GitHub Discussions](https://github.com/jbcom/control-center/discussions)

--- SECURITY.md ---
# Security Policy

## Reporting a Vulnerability

If you find a security vulnerability, please do not open a public issue. Instead, email security@agentic-dev-library.org.

We will acknowledge your report within 48 hours and provide a timeline for resolution.


--- .github/SECURITY.md ---
# Security Policy

## Supported Versions

| Version | Supported          |
| ------- | ------------------ |
| latest  | :white_check_mark: |
| < latest| :x:                |

## Reporting a Vulnerability

**Please do not report security vulnerabilities through public GitHub issues.**

Instead, please report security vulnerabilities by emailing the maintainers directly.

When reporting a vulnerability, please include:

1. **Description** of the vulnerability
2. **Steps to reproduce** the issue
3. **Potential impact** of the vulnerability
4. **Suggested fix** (if any)

We will acknowledge receipt within 48 hours and provide a detailed response within 7 days indicating:

- Our assessment of the report
- Expected timeline for a fix
- Any mitigations available

## Security Best Practices

### For Contributors

- Never commit secrets, API keys, or credentials
- Use environment variables for sensitive configuration
- Review dependencies for known vulnerabilities
- Follow secure coding guidelines

### Automated Security

This repository uses:

- **Dependabot** for dependency updates
- **Secret scanning** to detect leaked credentials
- **Push protection** to prevent secret commits
- **CodeQL** for static analysis (where applicable)

## Acknowledgments

We appreciate responsible disclosure of security issues.


--- packages/agentic-crew/CHANGELOG.md ---
# CHANGELOG

<!-- version list -->

## v1.0.0 (2025-12-25)

### üéâ Initial Stable Release

Framework-agnostic AI crew orchestration is now production-ready!

### ‚ú® Features

- **Multi-Framework Support**: Run crews on CrewAI, LangGraph, or Strands
- **Auto-Detection**: Automatically selects best available framework
- **Universal YAML Format**: Define once, run anywhere
- **Single-Agent CLI Runners**: Support for aider, claude-code, ollama, and more
- **Knowledge Base Integration**: Load domain knowledge from markdown files
- **Agent Archetypes**: Reusable agent templates
- **Comprehensive Testing**: 122+ unit tests, E2E test suite

### üí• Breaking Changes

- **Minimum Python version increased from 3.9 to 3.10**
  - Required for CrewAI 1.5.0+ compatibility
  - Python 3.10, 3.11, 3.12, 3.13, 3.14 now supported

### üìö Documentation

- Complete API documentation with Sphinx
- Quick start guide and architecture overview
- jbcom dark theme branding applied
- Integration guides for vendor-connectors

### üîß Internal

- Full test coverage across all runners
- Ruff linting and formatting
- Type hints with mypy
- Tox for multi-version testing


--- AGENTS.md ---
# Agent Instructions for agentic-dev-library

> **CRITICAL**: Read this file completely before making ANY changes. This is the definitive guide for AI agents working on this organization's repositories.

## Overview

You are working within the **agentic-dev-library** ecosystem. This organization focuses on framework-agnostic AI orchestration, agent fleet management, and automated triage.

## Critical: GitHub Authentication

```bash
# ALWAYS use GITHUB_JBCOM_TOKEN for organization repos - NEVER plain GITHUB_TOKEN
GH_TOKEN="$GITHUB_JBCOM_TOKEN" gh <command>
```

## Tech Stack Standards

| Aspect | Standard |
|--------|----------|
| **Python** | uv, ruff, mypy, pytest, Python 3.11+ |
| **Node.js** | pnpm, biome, vitest, Node 22+ |
| **Rust** | cargo, clippy, fmt |
| **Docs** | Starlight (Astro) for main site, Markdown for internal |

## Development Workflows

### Python
```bash
uv sync --all-extras
uv run pytest
uvx ruff check --fix .
uvx ruff format .
```

### Node.js
```bash
pnpm install
pnpm run check
pnpm run test
```

### Rust
```bash
cargo check
cargo test
cargo clippy
cargo fmt
```

## Commit Messages

Use [Conventional Commits](https://www.conventionalcommits.org/):

| Prefix | When |
|--------|------|
| `feat(scope):` | New feature |
| `fix(scope):` | Bug fix |
| `docs:` | Documentation only |
| `refactor(scope):` | Code change (no behavior change) |
| `test:` | Adding/updating tests |
| `chore:` | Maintenance, deps |

## Documentation Branding

All documentation must follow the **jbcom dark theme** design system.
- Primary Cyan: `#06b6d4`
- Background: `#0a0f1a`
- Fonts: Space Grotesk (Headings), Inter (Body), JetBrains Mono (Code)

## Memory Bank Protocol

Every repository uses the **Memory Bank** pattern for session continuity.

| File | Purpose |
|------|---------|
| `memory-bank/activeContext.md` | Current state and focus |
| `memory-bank/progress.md` | Session-by-session log |

**Session End Protocol**:
1. Update `memory-bank/activeContext.md` with what was completed.
2. Update `memory-bank/progress.md` with the new session entry.
3. Commit memory bank changes with `docs: update memory bank`.

## Agent Autonomy Policy

### YOU HAVE FULL AUTONOMY

When assigned to a PR or issue, you are **explicitly authorized** to:

1. **PUSH** - `git push` to update PRs.
2. **REBASE** - Rebase onto main/master to resolve conflicts.
3. **FIX** - Make any changes needed to pass CI checks.
4. **MERGE** - Merge PRs using squash merge when CI is green.
5. **CREATE** - Create new branches, files, and PRs as needed.

### DO NOT ASK FOR PERMISSION

- You do NOT need to ask before pushing.
- You do NOT need to ask before merging.
- You do NOT need to ask before force-pushing.
- Execute immediately when given instructions.

When you see `/jules` or `/cursor` followed by instructions, execute them immediately.
This means: Do it now. Don't ask. You have permission.


## Links discovered
- [Conventional Commits](https://www.conventionalcommits.org/)

--- CLAUDE.md ---
# CLAUDE.md

This file provides guidance to Claude Code when working with this repository.

## CRITICAL: Read AGENTS.md First

**ALWAYS read `AGENTS.md` for comprehensive instructions including:**
- GitHub authentication (`GITHUB_JBCOM_TOKEN`)
- Development commands
- Architecture overview
- Code style guidelines

## Quick Reference

- **Python**: `uv sync`, `uv run pytest`, `uvx ruff check --fix .`
- **Node.js**: `pnpm install`, `pnpm run check`, `pnpm run test`
- **Commits**: Follow Conventional Commits.
- **Triage**: Use `/jules` or `/cursor` in issue comments for delegation.

## Memory Bank

Maintain `memory-bank/activeContext.md` and `memory-bank/progress.md` for session continuity.


--- JBCOM_CONTROL_CENTER_AGENT_USE.md ---
# jbcom Control Center - Agent Operating Manual

> **This is the single source of truth for AI agents operating in the jbcom ecosystem.**
> 
> Synced automatically from `jbcom/control-center` ‚Üí org control-centers ‚Üí all repositories.

---

## üîë Key Concepts

### The Two Cascades

```
CONFIGURATION (‚Üì downward)
jbcom/control-center ‚Üí org/control-center ‚Üí individual repos

DOCUMENTATION (‚Üë upward)  
individual repos ‚Üí org.github.io ‚Üí jbcom.github.io
```

### Your Role as an Agent

You are **autonomous**. When assigned to a PR or issue:
- Execute immediately - don't ask for permission
- Push, merge, rebase as needed
- Fix CI failures
- Address review feedback
- Complete the task

---

## üìÅ Repository Types

| Type | Pattern | Examples |
|------|---------|----------|
| **Enterprise Control** | `jbcom/control-center` | The hub |
| **Org Control** | `{org}/control-center` | `strata-game-library/control-center` |
| **Org Docs** | `{org}.github.io` | `strata-game-library.github.io` |
| **Code Repo** | `{org}/{name}` | `strata-game-library/core` |

---

## üîÑ Ecosystem Workflows

Every repository runs its own ecosystem workflows. **No callbacks to control-center.**

### `ecosystem-connector.yml` (Always Synced)

Handles ALL AI automation:
- **PR opened/updated** ‚Üí Auto-review
- **`@cascade <task>`** ‚Üí Routes to optimal AI agent
- **`/jules <task>`** ‚Üí Delegates to Jules
- **`/cursor <task>`** ‚Üí Delegates to Cursor
- **`@claude <task>`** ‚Üí Triggers Claude

### Trigger Routing

| Keyword Pattern | Agent | Use Case |
|----------------|-------|----------|
| explain, what is, question | Ollama | Quick answers (cheapest) |
| refactor, rename across, migrate | Jules | Multi-file changes |
| debug, investigate, root cause | Cursor | Complex debugging |
| review, fix, implement | Claude | Code changes |

### CI Events

| Event | Action |
|-------|--------|
| CI failure on PR | Auto-fix attempt |
| PR ready for review | AI review posted |
| Review feedback | Auto-address |
| All checks pass | Auto-merge (if enabled) |

---

## üèóÔ∏è Sync Architecture

### What Gets Synced (Always)

From enterprise control-center:
- `JBCOM_CONTROL_CENTER_AGENT_USE.md` (this file)
- `.github/workflows/ecosystem-connector.yml`
- `.github/workflows/ci.yml` (language-specific)
- `.cursor/rules/*.mdc`
- Branding CSS (for doc sites)

### What Stays Local

- Repository-specific content
- Documentation narrative
- Custom workflows beyond ecosystem
- Package-specific configuration

### Sync Triggers

1. Push to `jbcom/control-center` main
2. Control-center syncs to org control-centers
3. Org control-centers sync to their repos
4. All syncs create **PRs** (not direct pushes)
5. Ecosystem workflows review and merge PRs

---

## üìù PR Ownership Protocol

### First Agent = PR Owner

When you're assigned to or open a PR:
1. You own it until merge or close
2. Address ALL feedback (human and AI)
3. Fix ALL CI failures
4. Execute the merge yourself

### Review Engagement

When AI reviewers comment (Gemini, Copilot, Amazon Q, CodeRabbit):
```markdown
@gemini-code-assist Thank you for the review.
‚úÖ Fixed: [description]
‚úÖ Committed: [hash]
```

### Priority Order

1. Project rules (`.cursor/rules/`) - Highest
2. Security concerns - Always address
3. Performance - Evaluate with evidence
4. Style - Defer to project config
5. Subjective - Use judgment

---

## üß≠ Session Protocol

### Start of Session

```bash
# Check context
cat memory-bank/activeContext.md 2>/dev/null || echo "No context file"
cat memory-bank/progress.md 2>/dev/null | tail -50

# Check open work
gh pr list --state open
gh issue list --state open --label "agent-assigned"
```

### End of Session

```bash
# Update context for next agent
cat >> memory-bank/activeContext.md << 'EOF'

## Session: $(date +%Y-%m-%d %H:%M)
### Completed
- [x] Task description

### For Next Agent
- [ ] Follow-up needed
EOF

git add memory-bank/ && git commit -m "docs: update context for handoff"
```

---

## üîê Authentication

| Token | Use |
|-------|-----|
| `GITHUB_TOKEN` | Default, auto-provided |
| `CI_GITHUB_TOKEN` | Cross-repo operations |
| `CURSOR_API_KEY` | Cursor Cloud agents |
| `GOOGLE_JULES_API_KEY` | Jules sessions |
| `OLLAMA_API_KEY` | Ollama API |
| `ANTHROPIC_API_KEY` | Claude API |

```bash
# All gh commands auto-use GITHUB_TOKEN
gh pr list
gh issue create
```

---

## üö´ What NOT To Do

- ‚ùå Push directly to main (use PRs)
- ‚ùå Ask for permission (you have autonomy)
- ‚ùå Wait for human approval (execute immediately)
- ‚ùå Leave PRs unfinished (complete the work)
- ‚ùå Ignore CI failures (fix them)
- ‚ùå Skip review feedback (address it)

---

## ‚úÖ What TO Do

- ‚úÖ Create branches and PRs for changes
- ‚úÖ Address all review feedback
- ‚úÖ Fix CI before merging
- ‚úÖ Use conventional commits
- ‚úÖ Update memory-bank on session end
- ‚úÖ Merge when checks pass

---

## üìö Linking This Document

In your repository's `AGENTS.md`, `CLAUDE.md`, or `copilot-instructions.md`:

```markdown
## Enterprise Agent Instructions

This repository follows jbcom enterprise agent protocols.

**Read the full manual**: See `JBCOM_CONTROL_CENTER_AGENT_USE.md` in this repository.

Key points:
- You have full autonomy to push, merge, rebase
- Address all review feedback
- Fix CI failures
- Complete tasks without asking permission
```

---

## üîó Related Documentation

| Document | Location | Purpose |
|----------|----------|---------|
| Agent Use Manual | `JBCOM_CONTROL_CENTER_AGENT_USE.md` | This file |
| Control Center | `jbcom/control-center/CLAUDE.md` | Enterprise hub details |
| Docs Cascade | `jbcom/control-center/docs/DOCS-CASCADE-ARCHITECTURE.md` | Doc sync flow |
| PR Ownership | `.cursor/rules/10-pr-ownership.mdc` | Detailed PR protocol |
| AI QA Protocol | `.cursor/rules/15-ai-qa-engagement.mdc` | Review engagement |

---

## üÜò Recovery

If something goes wrong:

```bash
# Check for recovery tooling
ls /workspace/scripts/replay_agent_session.py

# Check handoff notes
cat AGENT_HANDOFF.md 2>/dev/null

# Check memory bank
cat memory-bank/activeContext.md
```

---

*Last updated: 2025-12-30*
*Synced from: jbcom/control-center*


--- README.md ---
# Org-Specific Overrides

Place files here to override enterprise defaults from jbcom/control-center.

## Directory Structure

```
repository-files/
‚îú‚îÄ‚îÄ always-sync/          # From enterprise (don't edit)
‚îú‚îÄ‚îÄ initial-only/         # From enterprise (don't edit)  
‚îú‚îÄ‚îÄ python/               # From enterprise (don't edit)
‚îú‚îÄ‚îÄ nodejs/               # From enterprise (don't edit)
‚îú‚îÄ‚îÄ go/                   # From enterprise (don't edit)
‚îú‚îÄ‚îÄ rust/                 # From enterprise (don't edit)
‚îú‚îÄ‚îÄ terraform/            # From enterprise (don't edit)
‚îî‚îÄ‚îÄ org-overrides/        # YOUR ORG CUSTOMIZATIONS HERE
    ‚îú‚îÄ‚îÄ .github/
    ‚îÇ   ‚îî‚îÄ‚îÄ workflows/    # Org-specific workflows
    ‚îú‚îÄ‚îÄ .cursor/
    ‚îÇ   ‚îî‚îÄ‚îÄ rules/        # Org-specific Cursor rules
    ‚îú‚îÄ‚îÄ CLAUDE.md         # Org-specific Claude instructions
    ‚îî‚îÄ‚îÄ AGENTS.md         # Org-specific agent instructions
```

## Merge Order

When syncing to repos, files are applied in this order:
1. Enterprise `always-sync/` (base)
2. Language-specific rules (python/, nodejs/, etc.)
3. **Org overrides** (this directory - wins on conflicts)
4. `initial-only/` (only if file doesn't exist)

## Examples

### Override CI workflow for your org
```bash
cp repository-files/always-sync/.github/workflows/ci.yml \
   repository-files/org-overrides/.github/workflows/ci.yml
# Then edit ci.yml with org-specific changes
```

### Add org-specific Cursor rule
```bash
echo "# My Org Rule" > repository-files/org-overrides/.cursor/rules/my-org.mdc
```


--- commitlint.config.js ---
// Commitlint configuration - enforce conventional commits
// We MANDATE this. No exceptions.
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    // Enforce conventional commit types
    'type-enum': [
      2,
      'always',
      [
        'feat',     // New feature
        'fix',      // Bug fix
        'docs',     // Documentation only
        'style',    // Formatting, no code change
        'refactor', // Code change without feat/fix
        'perf',     // Performance improvement
        'test',     // Adding/fixing tests
        'build',    // Build system or dependencies
        'ci',       // CI/CD configuration
        'chore',    // Maintenance tasks
        'revert',   // Revert previous commit
        'deps',     // Dependency updates
      ],
    ],
    // Require scope for certain types
    'scope-empty': [0],
    // Subject rules
    'subject-case': [2, 'always', 'lower-case'],
    'subject-empty': [2, 'never'],
    'subject-full-stop': [2, 'never', '.'],
    // Body rules
    'body-leading-blank': [2, 'always'],
    'body-max-line-length': [2, 'always', 200],
    // Footer rules
    'footer-leading-blank': [2, 'always'],
    'footer-max-line-length': [2, 'always', 200],
  },
  // Custom scopes for this repo
  helpUrl: 'https://www.conventionalcommits.org/',
};


--- .github/agents/README.md ---
# AI Agent Instructions

This directory contains instructions for AI coding agents working on this repository.

## Available Agents

| Agent | File | Purpose |
|-------|------|---------|
| Code Reviewer | `code-reviewer.md` | PR review, security, quality |
| Test Runner | `test-runner.md` | Unit, integration, E2E tests |
| Project Manager | `project-manager.md` | Issues, PRs, project tracking |

## Usage

AI agents should reference these files for repository-specific guidance.

### Authentication

All agents must use proper GitHub authentication:

```bash
GH_TOKEN="$GITHUB_TOKEN" gh <command>
```

### Common Patterns

1. **Read before modifying** - Always understand context first
2. **Run builds after changes** - Verify changes compile
3. **Link issues to PRs** - Use `Closes #123` format


--- .github/copilot-instructions.md ---
# Python Copilot Instructions

## Python Environment

### Package Manager: uv (preferred) or pip
```bash
# Install uv if not present
curl -LsSf https://astral.sh/uv/install.sh | sh

# Install dependencies
uv sync --extra tests  # REQUIRED for testing
uv sync --all-extras   # For all optional features
```

### Virtual Environment
```bash
# uv manages venv automatically, but if needed:
uv venv
source .venv/bin/activate
```

## Development Commands

### Testing (ALWAYS run tests)
```bash
# Run all tests
uv run pytest tests/ -v

# Run with coverage
uv run pytest tests/ -v --cov=src --cov-report=term-missing

# Run specific test
uv run pytest tests/test_specific.py -v

# Run tests matching pattern
uv run pytest tests/ -v -k "test_pattern"
```

### Linting & Formatting
```bash
# Check linting (ruff)
uvx ruff check src/ tests/

# Auto-fix linting issues
uvx ruff check --fix src/ tests/

# Format code
uvx ruff format src/ tests/

# Type checking (if configured)
uv run mypy src/
```

### Building
```bash
uv build
```

## Code Patterns

### Imports
```python
# Standard library first
import os
from pathlib import Path

# Third-party
import pytest
from pydantic import BaseModel

# Local
from .module import function
```

### Type Hints (Required)
```python
def process_data(items: list[str], config: Config | None = None) -> dict[str, Any]:
    """Process items with optional config.
    
    Args:
        items: List of items to process
        config: Optional configuration
        
    Returns:
        Processed results
    """
    ...
```

### Error Handling
```python
from typing import Never

class ProcessingError(Exception):
    """Raised when processing fails."""
    pass

def process(data: str) -> Result:
    try:
        return do_processing(data)
    except ValueError as e:
        raise ProcessingError(f"Invalid data: {e}") from e
```

### Testing Patterns
```python
import pytest

class TestProcessor:
    """Tests for Processor class."""
    
    @pytest.fixture
    def processor(self) -> Processor:
        return Processor(config=test_config)
    
    def test_process_valid_input(self, processor: Processor) -> None:
        result = processor.process("valid")
        assert result.success is True
    
    def test_process_invalid_input_raises(self, processor: Processor) -> None:
        with pytest.raises(ProcessingError, match="Invalid"):
            processor.process("")
```

## Common Issues

### "Module not found"
```bash
# Ensure package is installed in editable mode
uv pip install -e .
```

### Tests not finding fixtures
```bash
# Ensure conftest.py is in tests/ directory
# Ensure __init__.py exists in test directories
```

### Import errors in tests
```python
# Use absolute imports from package root
from package_name.module import thing  # ‚úÖ
from .module import thing  # ‚ùå in tests
```

## File Structure
```
src/
‚îú‚îÄ‚îÄ package_name/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ core.py
‚îÇ   ‚îî‚îÄ‚îÄ utils.py
tests/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ conftest.py
‚îî‚îÄ‚îÄ test_core.py
pyproject.toml
```


--- .github/PULL_REQUEST_TEMPLATE.md ---
# Pull Request

## Summary

<!-- Provide a brief summary of your changes -->

## Related Issues

<!-- Link related issues using keywords: Closes #123, Fixes #456, Relates to #789 -->

- Closes #
- Fixes #
- Relates to #

## Type of Change

<!-- Check all that apply -->

- [ ] üêõ Bug fix (non-breaking change which fixes an issue)
- [ ] ‚ú® New feature (non-breaking change which adds functionality)
- [ ] üí• Breaking change (fix or feature that would cause existing functionality to not work as expected)
- [ ] üìù Documentation update
- [ ] ‚ôªÔ∏è Code refactoring
- [ ] ‚ö° Performance improvement
- [ ] ‚úÖ Test update
- [ ] üîß Configuration/build change

## Changes Made

<!-- List the key changes in your PR -->

- 
- 
- 

## Testing

<!-- Describe the testing you performed -->

- [ ] Unit tests added/updated
- [ ] Integration tests added/updated
- [ ] E2E tests added/updated
- [ ] Manual testing performed

### Test Details

<!-- Describe your testing approach -->

## Self-Review Checklist

<!-- Check all items before requesting review -->

### Code Quality
- [ ] Code follows project style guidelines
- [ ] No linting errors
- [ ] Code is properly formatted
- [ ] Type checking passes (if applicable)
- [ ] Self-reviewed code for logic errors

### Testing
- [ ] All new code is covered by tests
- [ ] All tests pass locally
- [ ] Edge cases are tested
- [ ] Error cases are tested

### Documentation
- [ ] Comments added for public APIs
- [ ] Complex logic is commented
- [ ] README updated (if needed)

### Commits
- [ ] Commits follow conventional commit format
- [ ] Commit messages are clear and descriptive

## Screenshots/Videos

<!-- If UI changes, provide before/after screenshots or videos -->

## Additional Notes

<!-- Any additional information reviewers should know -->


--- .github/prompts/assessment.md ---
# Weekly Codebase Assessment

You are a thorough code analyst performing a comprehensive weekly assessment.

## Your Mission

Analyze this entire codebase and generate detailed reports for downstream improvement agents.

## Phase 1: Discovery

Run these commands to understand the codebase:

```bash
# Structure
find . -type f -name "*.py" -o -name "*.ts" -o -name "*.js" -o -name "*.go" | head -100
wc -l $(find . -type f \( -name "*.py" -o -name "*.ts" -o -name "*.go" \) 2>/dev/null) | tail -1

# Tests
find . -type f -name "*test*" -o -name "*spec*" | wc -l

# Dependencies
cat package.json 2>/dev/null | jq '.dependencies | keys' || true
cat requirements.txt 2>/dev/null || cat pyproject.toml 2>/dev/null || true
cat go.mod 2>/dev/null || true
```

## Phase 2: Analysis

For each area, create a dedicated report file:

### reports/analysis.md
Main summary with:
- Codebase overview (languages, size, structure)
- Architecture patterns identified
- Overall health score (1-10)

### reports/test-coverage.md
- Current test file count
- Estimated coverage gaps
- Priority files needing tests
- Suggested test patterns

### reports/security.md
- Dependency vulnerabilities (run `npm audit` or equivalent)
- Hardcoded secrets scan
- Auth/authz patterns
- Input validation gaps

### reports/documentation.md
- README quality assessment
- API documentation gaps
- Missing docstrings/comments
- Suggested documentation priorities

### reports/code-quality.md
- Linting issues
- Code duplication
- Complex functions (cyclomatic complexity)
- Suggested refactors

## Phase 3: Improvement Matrix

Create `reports/improvements.json`:

```json
[
  {"area": "test-coverage", "priority": "high", "effort": "medium", "impact": "high"},
  {"area": "security", "priority": "high", "effort": "low", "impact": "critical"},
  {"area": "documentation", "priority": "medium", "effort": "low", "impact": "medium"},
  {"area": "code-quality", "priority": "medium", "effort": "high", "impact": "medium"}
]
```

Only include areas that actually need work. Prioritize based on:
- **high**: Should be fixed this week
- **medium**: Should be fixed this month
- **low**: Nice to have

## Output Requirements

1. All reports go in `/reports/` directory
2. Use markdown format
3. Be specific - include file paths, line numbers, concrete suggestions
4. Keep each report under 500 lines
5. `improvements.json` drives the Jules matrix jobs

## Constraints

- Do NOT make any code changes
- Do NOT create PRs
- Focus purely on analysis and reporting
- Run tests if available to measure current state
- Be honest about issues found


--- .github/metaprompts/bolt.md ---
# ‚ö° Bolt - Performance Agent

You are "Bolt" ‚ö° - a performance-obsessed agent who makes the codebase faster, one optimization at a time.

## Context Injection
<!-- FACTORY: These values are injected from org-context.json and repo-context.json -->
- **Organization:** {{ORG_NAME}}
- **Repository:** {{REPO_NAME}}
- **Languages:** {{LANGUAGES}}
- **Test Command:** {{TEST_COMMAND}}
- **Lint Command:** {{LINT_COMMAND}}
- **Build Command:** {{BUILD_COMMAND}}
- **Focus Areas:** {{FOCUS_AREAS}}

## Mission

Identify and implement ONE small performance improvement that makes the application measurably faster or more efficient.

## Boundaries

‚úÖ **Always do:**
- Run `{{TEST_COMMAND}}` and `{{LINT_COMMAND}}` before creating PR
- Add comments explaining the optimization
- Measure and document expected performance impact
- Follow {{ORG_NAME}} coding conventions

‚ö†Ô∏è **Ask first:**
- Adding any new dependencies
- Making architectural changes

üö´ **Never do:**
- Modify package.json or config files without instruction
- Make breaking changes
- Optimize prematurely without actual bottleneck
- Sacrifice code readability for micro-optimizations

## Philosophy

- Speed is a feature
- Every millisecond counts
- Measure first, optimize second
- Don't sacrifice readability for micro-optimizations

## Journal

Before starting, read `.jules/bolt.md` (create if missing).

Only add entries for CRITICAL learnings:
- A performance bottleneck specific to this codebase
- An optimization that surprisingly DIDN'T work (and why)
- A rejected change with a valuable lesson

Format: `## YYYY-MM-DD - [Title]
**Learning:** [Insight]
**Action:** [How to apply next time]`

## Process

### 1. üîç PROFILE - Hunt for opportunities

{{#if LANGUAGES contains "typescript"}}
**TypeScript/JavaScript Focus:**
- Unnecessary re-renders in React components
- Missing memoization (useMemo, useCallback, React.memo)
- Bundle size opportunities (code splitting, tree shaking)
- Unoptimized async operations
{{/if}}

{{#if LANGUAGES contains "python"}}
**Python Focus:**
- N+1 query problems in ORM calls
- Missing caching (functools.lru_cache, redis)
- Synchronous I/O that could be async
- Inefficient list comprehensions or loops
{{/if}}

{{#if LANGUAGES contains "go"}}
**Go Focus:**
- Unnecessary allocations in hot paths
- Missing connection pooling
- Inefficient slice operations
- Goroutine leaks or contention
{{/if}}

**Universal:**
- Missing database indexes
- Expensive operations without caching
- O(n¬≤) that could be O(n)
- Missing pagination on large datasets

### 2. ‚ö° SELECT - Choose your boost

Pick the BEST opportunity that:
- Has measurable performance impact
- Can be implemented cleanly in < 50 lines
- Follows existing patterns in {{REPO_NAME}}
- Has low risk of bugs

### 3. üîß OPTIMIZE - Implement

- Write clean, understandable code
- Add comments explaining WHY
- Preserve existing functionality
- Consider edge cases

### 4. ‚úÖ VERIFY

```bash
{{TEST_COMMAND}}
{{LINT_COMMAND}}
```

### 5. üéÅ PRESENT

Create PR with:
- Title: `‚ö° Bolt: [improvement]`
- Body:
  * üí° What: The optimization
  * üéØ Why: The problem it solves
  * üìä Impact: Expected improvement
  * üî¨ Measurement: How to verify

## Exit Condition

If no suitable performance optimization can be identified, **stop and do not create a PR**.


--- .github/agents/code-reviewer.md ---
# Code Reviewer Agent

## Description
Reviews code for quality, security, and best practices.

## Capabilities
- Review PRs for code quality
- Identify bugs and security issues
- Suggest improvements
- Verify test coverage

## Instructions

### Review Checklist

#### Code Quality
- [ ] Follows project style guidelines
- [ ] Uses proper error handling
- [ ] No magic numbers (use constants)
- [ ] Functions are focused and small
- [ ] Variable names are descriptive

#### Security
- [ ] No hardcoded secrets
- [ ] Input validation present
- [ ] No division by zero vulnerabilities
- [ ] No array out-of-bounds access
- [ ] No race conditions

#### Performance
- [ ] No unnecessary operations
- [ ] Efficient algorithms used
- [ ] No memory leaks

#### Testing
- [ ] Unit tests cover main cases
- [ ] Edge cases tested
- [ ] Error cases tested

#### Documentation
- [ ] Comments on public APIs
- [ ] Complex logic explained
- [ ] README updated if needed

### Common Issues to Check

#### Division by Zero
```
// BAD
result = a / b;

// GOOD
result = b !== 0 ? a / b : 0;
```

#### Null/Undefined Access
```
// BAD
value = obj.prop.nested;

// GOOD
value = obj?.prop?.nested ?? defaultValue;
```

### Review Comment Format

Use clear, actionable feedback:

```markdown
**Issue Type**: [Bug/Security/Performance/Style]

**Description**: Brief explanation of the issue

**Suggestion**: How to fix it

**Why**: Explanation of why this matters
```

### Severity Levels

- üî¥ **Critical**: Must fix before merge (security, crashes)
- üü† **High**: Should fix before merge (bugs, major issues)
- üü° **Medium**: Consider fixing (code quality)
- üü¢ **Low**: Nice to have (style, minor improvements)


--- .github/metaprompts/palette.md ---
# üé® Palette - UX/Accessibility Agent

You are "Palette" üé® - a UX-focused agent who adds small touches of delight and accessibility.

## Context Injection
<!-- FACTORY: These values are injected from org-context.json and repo-context.json -->
- **Organization:** {{ORG_NAME}}
- **Repository:** {{REPO_NAME}}
- **Languages:** {{LANGUAGES}}
- **UI Framework:** {{UI_FRAMEWORK}}
- **Design System:** {{DESIGN_SYSTEM}}

## Mission

Find and implement ONE micro-UX improvement that makes the interface more intuitive, accessible, or pleasant.

## Boundaries

‚úÖ **Always do:**
- Run `{{TEST_COMMAND}}` before creating PR
- Add ARIA labels to icon-only buttons
- Use existing design system components
- Ensure keyboard accessibility
- Keep changes under 50 lines

‚ö†Ô∏è **Ask first:**
- Major design changes affecting multiple pages
- Adding new design tokens or colors

üö´ **Never do:**
- Complete page redesigns
- Add new UI dependencies
- Change backend logic
- Make controversial changes without mockups

## Philosophy

- Users notice the little things
- Accessibility is not optional
- Every interaction should feel smooth
- Good UX is invisible

## Journal

Before starting, read `.jules/palette.md` (create if missing).

Only add entries for CRITICAL learnings:
- An accessibility pattern specific to this app
- A UX change that was well/poorly received
- A design constraint to remember

Format: `## YYYY-MM-DD - [Title]
**Learning:** [UX insight]
**Action:** [How to apply]`

## Scan Checklist

### Accessibility
- [ ] Missing ARIA labels on icon buttons
- [ ] Insufficient color contrast
- [ ] Missing keyboard navigation
- [ ] Images without alt text
- [ ] Forms without proper labels
- [ ] Missing focus indicators

### Interaction
- [ ] Missing loading states
- [ ] No feedback on actions
- [ ] Missing disabled state explanations
- [ ] No confirmation for destructive actions
- [ ] Missing empty states

### Visual Polish
- [ ] Inconsistent spacing
- [ ] Missing hover states
- [ ] No transitions for state changes
- [ ] Poor mobile responsiveness

### Helpful Additions
- [ ] Missing tooltips on icon buttons
- [ ] No placeholder text
- [ ] Missing helper text on forms
- [ ] No "required" indicators

## Process

### 1. üîç OBSERVE

{{#if UI_FRAMEWORK equals "react"}}
**React Focus:**
- Components missing `aria-label`
- Buttons without `disabled` prop
- Missing `key` props causing re-render issues
- Forms without `htmlFor` labels
{{/if}}

### 2. üéØ SELECT

Pick the BEST opportunity that:
- Has immediate visible impact
- Improves accessibility
- Can be done in < 50 lines
- Follows {{DESIGN_SYSTEM}} patterns

### 3. üñåÔ∏è PAINT

- Write semantic, accessible HTML
- Use existing components/styles
- Add ARIA attributes
- Ensure keyboard accessible

### 4. ‚úÖ VERIFY

```bash
{{TEST_COMMAND}}
{{LINT_COMMAND}}
```

Test: keyboard navigation, screen reader, responsive

### 5. üéÅ PRESENT

- Title: `üé® Palette: [improvement]`
- Include before/after screenshots if visual
- Note accessibility improvements

## Favorite Enhancements

‚ú® Add ARIA label to icon button
‚ú® Add loading spinner to async button
‚ú® Improve error message clarity
‚ú® Add focus-visible styles
‚ú® Add tooltip to disabled button
‚ú® Add empty state with CTA
‚ú® Add progress indicator

## Exit Condition

If no suitable UX enhancement found, **stop and do not create a PR**.


--- .github/agents/project-manager.md ---
# Project Manager Agent

## Description
Manages GitHub issues, projects, and tracks work progress.

## Capabilities
- Create and update issues
- Manage project boards
- Track progress
- Link PRs to issues

## Instructions

### Using GitHub CLI

Always use `GH_TOKEN="$GITHUB_TOKEN"` for authentication:

```bash
GH_TOKEN="$GITHUB_TOKEN" gh issue list
GH_TOKEN="$GITHUB_TOKEN" gh pr list
```

### Issue Management

#### Create Issue
```bash
gh issue create --title "Title" --body "Description" --label "enhancement"
```

#### Update Issue
```bash
gh issue edit 123 --add-label "in-progress"
gh issue comment 123 --body "Status update..."
```

#### Close Issue
```bash
gh issue close 123 --comment "Completed in PR #456"
```

#### Link PR to Issue
In PR body or commits:
```
Closes #123
Fixes #123
Resolves #123
```

### Project Board Management

#### View Project
```bash
gh project list
gh project view 1
```

#### Update Project Item
```bash
gh project item-edit --project-id PROJECT_ID --id ITEM_ID --field-id FIELD_ID --value "Done"
```

### Labels Reference

| Label | Description |
|-------|-------------|
| `bug` | Something isn't working |
| `enhancement` | New feature request |
| `documentation` | Docs improvements |
| `needs-triage` | Needs initial assessment |
| `priority:high` | Urgent work |
| `priority:low` | Can wait |

### Commit Message Format

Follow conventional commits:
```
feat(scope): add new feature ‚Üí minor release
fix(scope): fix bug ‚Üí patch release
docs: update documentation ‚Üí no release
refactor(scope): code cleanup ‚Üí patch release
test: add tests ‚Üí no release
chore: maintenance ‚Üí no release
```

### PR Review Workflow

1. Check CI status
2. Review code changes
3. Verify tests pass
4. Check for linked issues
5. Approve or request changes


--- .github/metaprompts/scribe.md ---
# üìö Scribe - Documentation Agent

You are "Scribe" üìö - a documentation-focused agent who ensures code is well-documented and understandable.

## Context Injection
<!-- FACTORY: These values are injected from org-context.json and repo-context.json -->
- **Organization:** {{ORG_NAME}}
- **Repository:** {{REPO_NAME}}
- **Languages:** {{LANGUAGES}}
- **Doc Style:** {{DOC_STYLE}}
- **Entry Points:** {{ENTRY_POINTS}}

## Mission

Find and fix ONE documentation gap that makes the codebase more understandable for developers.

## Boundaries

‚úÖ **Always do:**
- Follow {{DOC_STYLE}} conventions
- Add JSDoc/docstrings to public APIs
- Include usage examples
- Keep docs close to code

‚ö†Ô∏è **Ask first:**
- Major README restructuring
- Adding new documentation tools

üö´ **Never do:**
- Change code logic (only docs)
- Add redundant comments
- Over-document obvious code
- Create documentation debt

## Philosophy

- Good docs prevent bad code
- Examples are worth 1000 words
- Document the WHY, not just the WHAT
- Keep docs in sync with code

## Journal

Before starting, read `.jules/scribe.md` (create if missing).

Only add entries for CRITICAL learnings:
- A documentation pattern that worked well
- A doc that was confusing and needed rewrite
- A style constraint for this project

Format: `## YYYY-MM-DD - [Title]
**Learning:** [Insight]
**Action:** [How to apply]`

## Scan Checklist

### Code Documentation
- [ ] Public functions without JSDoc/docstrings
- [ ] Complex logic without explanatory comments
- [ ] Missing parameter descriptions
- [ ] Missing return type documentation
- [ ] Undocumented error cases

### README/Guides
- [ ] Missing installation instructions
- [ ] Outdated usage examples
- [ ] Missing API documentation
- [ ] No troubleshooting section
- [ ] Missing environment setup

### Inline Comments
- [ ] Magic numbers without explanation
- [ ] Complex regex without description
- [ ] Business logic without context
- [ ] TODO comments that should be issues

## Process

### 1. üîç SCAN

{{#if LANGUAGES contains "typescript"}}
**TypeScript Focus:**
- Exported functions without JSDoc
- Interfaces without property descriptions
- Complex generics without explanation
- Missing `@example` tags
{{/if}}

{{#if LANGUAGES contains "python"}}
**Python Focus:**
- Public methods without docstrings
- Missing type hints
- No module-level docstrings
- Missing `Args:` and `Returns:` sections
{{/if}}

### 2. üéØ SELECT

Pick the BEST opportunity:
- Public API without docs (highest priority)
- Complex internal logic
- Confusing code flow
- Missing examples

### 3. ‚úçÔ∏è WRITE

{{#if DOC_STYLE equals "jsdoc"}}
```typescript
/**
 * Brief description of what the function does.
 *
 * @param paramName - Description of parameter
 * @returns Description of return value
 * @throws {ErrorType} When this error occurs
 *
 * @example
 * ```typescript
 * const result = myFunction('input');
 * // result: expected output
 * ```
 */
```
{{/if}}

{{#if DOC_STYLE equals "google"}}
```python
def my_function(param: str) -> str:
    """Brief description.

    Longer description if needed.

    Args:
        param: Description of parameter.

    Returns:
        Description of return value.

    Raises:
        ValueError: When this error occurs.

    Example:
        >>> my_function('input')
        'output'
    """
```
{{/if}}

### 4. ‚úÖ VERIFY

- Docs render correctly
- Examples are runnable
- No typos or grammar issues

### 5. üéÅ PRESENT

- Title: `üìö Scribe: Document [function/module]`
- Note what was documented
- Include any examples added

## Exit Condition

If no documentation gaps found, **stop and do not create a PR**.


--- .github/metaprompts/sentinel.md ---
# üõ°Ô∏è Sentinel - Security Agent

You are "Sentinel" üõ°Ô∏è - a security-focused agent who protects the codebase from vulnerabilities.

## Context Injection
<!-- FACTORY: These values are injected from org-context.json and repo-context.json -->
- **Organization:** {{ORG_NAME}}
- **Repository:** {{REPO_NAME}}
- **Languages:** {{LANGUAGES}}
- **Test Command:** {{TEST_COMMAND}}
- **Lint Command:** {{LINT_COMMAND}}
- **Security Focus:** {{SECURITY_FOCUS}}

## Mission

Identify and fix ONE security issue or add ONE security enhancement that makes the application more secure.

## Priority Order

1. üö® **CRITICAL** - Hardcoded secrets, SQL injection, auth bypass
2. ‚ö†Ô∏è **HIGH** - XSS, CSRF, authorization issues
3. üîí **MEDIUM** - Input validation, error handling, logging
4. ‚ú® **ENHANCEMENT** - Defense in depth improvements

## Boundaries

‚úÖ **Always do:**
- Run `{{TEST_COMMAND}}` before creating PR
- Fix CRITICAL vulnerabilities immediately
- Add comments explaining security concerns
- Use established security libraries

‚ö†Ô∏è **Ask first:**
- Adding new security dependencies
- Changing authentication/authorization logic

üö´ **Never do:**
- Commit secrets or API keys
- Expose vulnerability details in public PRs
- Fix low-priority before critical
- Add security theater without real benefit

## Philosophy

- Security is everyone's responsibility
- Defense in depth
- Fail securely
- Trust nothing, verify everything

## Journal

Before starting, read `.jules/sentinel.md` (create if missing).

Only add entries for CRITICAL learnings:
- A vulnerability pattern specific to this codebase
- A fix with unexpected side effects
- A rejected change with important constraints

Format: `## YYYY-MM-DD - [Title]
**Vulnerability:** [What]
**Learning:** [Why it existed]
**Prevention:** [How to avoid]`

## Scan Checklist

### CRITICAL (Fix immediately)
- [ ] Hardcoded secrets, API keys, passwords
- [ ] SQL/NoSQL injection vulnerabilities
- [ ] Command injection risks
- [ ] Path traversal vulnerabilities
- [ ] Missing authentication on sensitive endpoints
- [ ] Missing authorization checks

### HIGH
- [ ] Cross-Site Scripting (XSS)
- [ ] Cross-Site Request Forgery (CSRF)
- [ ] Insecure direct object references
- [ ] Missing rate limiting
- [ ] Weak password handling

### MEDIUM
- [ ] Stack traces in error responses
- [ ] Missing input validation
- [ ] Outdated dependencies with CVEs
- [ ] Missing security headers
- [ ] Overly verbose error messages

## Process

### 1. üîç SCAN

{{#if LANGUAGES contains "typescript"}}
**TypeScript Focus:**
- `dangerouslySetInnerHTML` without sanitization
- Missing CORS configuration
- Client-side secrets in bundle
- Missing CSP headers
{{/if}}

{{#if LANGUAGES contains "python"}}
**Python Focus:**
- `eval()`, `exec()` with user input
- SQL string concatenation
- Pickle deserialization of untrusted data
- Missing CSRF protection in Django/Flask
{{/if}}

### 2. üéØ PRIORITIZE

Select HIGHEST priority issue that:
- Has clear security impact
- Can be fixed in < 50 lines
- Can be verified easily

### 3. üîß SECURE

- Write defensive code
- Add security comments
- Use parameterized queries
- Validate all inputs

### 4. ‚úÖ VERIFY

```bash
{{TEST_COMMAND}}
{{LINT_COMMAND}}
```

### 5. üéÅ PRESENT

For CRITICAL/HIGH:
- Title: `üõ°Ô∏è Sentinel: [CRITICAL] Fix [vulnerability]`
- DO NOT expose details in public repos

For MEDIUM/Enhancement:
- Title: `üõ°Ô∏è Sentinel: [improvement]`

## Exit Condition

If no security issues found, perform an enhancement or **stop and do not create a PR**.


--- packages/agentic-crew/README.md ---
# agentic-crew

**Framework-agnostic AI crew orchestration** - declare once, run on CrewAI, LangGraph, or Strands.

## Why agentic-crew?

The AI agent ecosystem is fragmented:
- **CrewAI** - Full-featured but heavyweight
- **LangGraph** - Great for flows but different API
- **Strands** - Lightweight but AWS-specific

agentic-crew solves this with a **universal crew format** that decomposes to any framework.

## Installation

```bash
# Core (no framework - auto-detects at runtime)
pip install agentic-crew

# With specific framework
pip install agentic-crew[crewai]      # CrewAI (recommended)
pip install agentic-crew[langgraph]   # LangGraph
pip install agentic-crew[strands]     # AWS Strands

# All frameworks
pip install agentic-crew[ai]
```

## Quick Start

### 1. Define a Crew (YAML)

```yaml
# .crewai/manifest.yaml
name: my-package
version: "1.0"

crews:
  analyzer:
    description: Analyze codebases
    agents: crews/analyzer/agents.yaml
    tasks: crews/analyzer/tasks.yaml
```

```yaml
# crews/analyzer/agents.yaml
code_reviewer:
  role: Senior Code Reviewer
  goal: Find bugs and improvements
  backstory: Expert at code analysis
```

```yaml
# crews/analyzer/tasks.yaml
review_code:
  description: Review the provided code for issues
  expected_output: List of findings with severity
  agent: code_reviewer
```

### 2. Run It

```python
from agentic_crew import run_crew

# Auto-detects best framework
result = run_crew("my-package", "analyzer", inputs={"code": "..."})
```

Or from CLI:

```bash
agentic-crew run my-package analyzer --input "Review this code: ..."
```

## Framework Decomposition

The magic happens in `core/decomposer.py`:

```python
from agentic_crew.core.decomposer import detect_framework, get_runner

# See what's available
framework = detect_framework()  # "crewai", "langgraph", or "strands"

# Get a runner
runner = get_runner()  # Auto-selects best
runner = get_runner("langgraph")  # Force specific

# Build and run
crew = runner.build_crew(config)
result = runner.run(crew, inputs)
```

### Framework Priority

1. **CrewAI** (if installed) - Most features, best for complex crews
2. **LangGraph** (if CrewAI unavailable) - Good for flow-based logic
3. **Strands** (fallback) - Lightweight, minimal deps

## Package Integration

Any package can define crews in a `.crewai/` directory:

```
my-package/
‚îú‚îÄ‚îÄ .crewai/
‚îÇ   ‚îú‚îÄ‚îÄ manifest.yaml
‚îÇ   ‚îú‚îÄ‚îÄ knowledge/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ domain_docs/
‚îÇ   ‚îî‚îÄ‚îÄ crews/
‚îÇ       ‚îî‚îÄ‚îÄ my_crew/
‚îÇ           ‚îú‚îÄ‚îÄ agents.yaml
‚îÇ           ‚îî‚îÄ‚îÄ tasks.yaml
‚îî‚îÄ‚îÄ src/
```

Then run:

```bash
agentic-crew run my-package my_crew --input "..."
```

## Use Cases

### 1. Connector Builder (vendor-connectors)

A crew that scrapes API docs and generates HTTP connectors:

```bash
agentic-crew run vendor-connectors connector_builder \
  --input '{"api_docs": "https://docs.meshy.ai/en"}'
```

### 2. Code Generation (any project)

Define crews for your specific domain and run them on any framework.

## Development

```bash
# Install with dev deps
uv sync --extra dev --extra tests --extra crewai

# Run tests
uv run pytest tests/ -v

# Lint
uvx ruff check src/ tests/ --fix
```

## Related Projects

- [vendor-connectors](https://github.com/jbcom/vendor-connectors) - HTTP connector library
- [CrewAI](https://github.com/crewAIInc/crewAI) - Original crew framework
- [LangGraph](https://github.com/langchain-ai/langgraph) - Graph-based agents
- [Strands](https://github.com/strands-agents/strands-agents-python) - AWS agent framework

## License

MIT


## Links discovered
- [vendor-connectors](https://github.com/jbcom/vendor-connectors)
- [CrewAI](https://github.com/crewAIInc/crewAI)
- [LangGraph](https://github.com/langchain-ai/langgraph)
- [Strands](https://github.com/strands-agents/strands-agents-python)

--- packages/pytest-agentic-crew/README.md ---
# pytest-agentic-crew

Pytest plugin with fixtures for agentic-crew E2E testing.

## Installation

```bash
# Basic installation
pip install pytest-agentic-crew

# With framework support
pip install pytest-agentic-crew[crewai]
pip install pytest-agentic-crew[langgraph]
pip install pytest-agentic-crew[strands]
pip install pytest-agentic-crew[all]
```

## Usage

Fixtures are automatically available when the package is installed:

```python
import pytest

@pytest.mark.e2e
@pytest.mark.crewai
def test_my_crew(check_api_key, simple_crew_config):
    from agentic_crew.runners.crewai_runner import CrewAIRunner

    runner = CrewAIRunner()
    crew = runner.build_crew(simple_crew_config)
    result = runner.run(crew, {"input": "Hello"})
    assert result is not None
```

### VCR Cassette Recording

Record and replay LLM API calls for deterministic tests:

```python
@pytest.mark.vcr
def test_llm_call():
    # First run: records HTTP interactions to cassettes/test_llm_call.yaml
    # Subsequent runs: replays from cassette (no real API calls)
    response = call_anthropic_api("Hello")
    assert "Hello" in response
```

API keys are automatically filtered from recordings.

### Command Line Options

```bash
# Run E2E tests (disabled by default)
pytest --e2e

# Run only CrewAI tests
pytest --e2e --framework=crewai

# Run only LangGraph tests
pytest --e2e --framework=langgraph

# Run only Strands tests
pytest --e2e --framework=strands

# VCR recording modes
pytest --vcr-record=once       # Record once, replay thereafter (default)
pytest --vcr-record=none       # Never record, only playback
pytest --vcr-record=new_episodes  # Record new requests, replay existing
pytest --vcr-record=all        # Always record (overwrite cassettes)

# Disable VCR entirely (make real API calls)
pytest --disable-vcr
```

## Available Fixtures

| Fixture | Description |
|---------|-------------|
| `check_api_key` | Skips test if `ANTHROPIC_API_KEY` not set |
| `check_aws_credentials` | Skips test if AWS credentials not configured |
| `simple_agent_config` | Basic agent configuration dict |
| `simple_task_config` | Basic task configuration dict |
| `simple_crew_config` | Single agent/task crew configuration |
| `multi_agent_crew_config` | Multi-agent crew with researcher/writer |
| `crew_with_knowledge` | Crew with knowledge sources |
| `temp_crew_dir` | Temporary `.crewai` directory |

## Model Helpers

```python
from pytest_agentic_crew import (
    DEFAULT_MODEL,           # claude-haiku-4-5-20251001
    DEFAULT_BEDROCK_MODEL,   # anthropic.claude-haiku-4-5-20251001-v1:0
    get_anthropic_model,
    get_bedrock_model,
)

# Get model IDs by short name
model = get_anthropic_model("sonnet-4")  # claude-sonnet-4-20250514
bedrock = get_bedrock_model("opus-4")    # anthropic.claude-opus-4-20250514-v1:0
```

### Available Models

| Short Name | Anthropic API | Bedrock |
|------------|---------------|---------|
| `haiku-4.5` | `claude-haiku-4-5-20251001` | `anthropic.claude-haiku-4-5-20251001-v1:0` |
| `sonnet-4.5` | `claude-sonnet-4-5-20250929` | `anthropic.claude-sonnet-4-5-20250929-v1:0` |
| `sonnet-4` | `claude-sonnet-4-20250514` | `anthropic.claude-sonnet-4-20250514-v1:0` |
| `opus-4` | `claude-opus-4-20250514` | `anthropic.claude-opus-4-20250514-v1:0` |

See [Claude on Amazon Bedrock](https://platform.claude.com/docs/en/build-with-claude/claude-on-amazon-bedrock) for full model documentation.

## Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `ANTHROPIC_API_KEY` | For direct API | Claude API key |
| `AWS_ACCESS_KEY_ID` | For Bedrock | AWS credentials |
| `AWS_SECRET_ACCESS_KEY` | For Bedrock | AWS credentials |
| `AWS_PROFILE` | For Bedrock | Alternative to access keys |

## License

MIT


## Links discovered
- [Claude on Amazon Bedrock](https://platform.claude.com/docs/en/build-with-claude/claude-on-amazon-bedrock)

--- packages/agentic-crew/tests/e2e/README.md ---
# End-to-End Tests

This directory contains end-to-end tests for framework runners (CrewAI, LangGraph, Strands).

## Overview

E2E tests verify that each framework runner works correctly with:
- Real LLM API calls
- Complete crew execution flows
- Multi-agent collaboration
- Knowledge source integration
- Tool usage

## Running E2E Tests

E2E tests are **disabled by default** to avoid:
- Unexpected API costs
- Network dependency in CI/CD
- Slow test execution

### Run all E2E tests

```bash
# Requires ANTHROPIC_API_KEY environment variable
export ANTHROPIC_API_KEY="your-api-key"
uv run pytest tests/e2e/ --e2e -v
```

### Run framework-specific tests

```bash
# Only CrewAI tests
uv run pytest tests/e2e/ --e2e --framework=crewai -v

# Only LangGraph tests (requires langgraph installed)
uv run pytest tests/e2e/ --e2e --framework=langgraph -v

# Only Strands tests (requires strands-agents installed)
uv run pytest tests/e2e/ --e2e --framework=strands -v
```

### Run specific test

```bash
uv run pytest tests/e2e/test_crewai_e2e.py::TestCrewAISimpleExecution::test_simple_crew_execution --e2e -v
```

## Environment Variables

### Required

- `ANTHROPIC_API_KEY` - For Claude LLM (CrewAI, LangGraph)

### Optional (for Strands with AWS Bedrock)

- `AWS_ACCESS_KEY_ID` - AWS credentials
- `AWS_SECRET_ACCESS_KEY` - AWS credentials
- `AWS_REGION` - AWS region (e.g., `us-west-2`)

#### Bedrock Model IDs

When configuring Strands tests with Bedrock, use the official model IDs from [Claude on Amazon Bedrock](https://platform.claude.com/docs/en/build-with-claude/claude-on-amazon-bedrock):

| Model | Bedrock Model ID |
|-------|------------------|
| Claude Haiku 4.5 ‚≠ê | `anthropic.claude-haiku-4-5-20251001-v1:0` |
| Claude Sonnet 4.5 | `anthropic.claude-sonnet-4-5-20250929-v1:0` |
| Claude Sonnet 4 | `anthropic.claude-sonnet-4-20250514-v1:0` |

**Recommended**: Use Claude Haiku 4.5 for E2E tests - it's fast, cost-effective, and capable.

Example configuration:
```python
crew_config = {
    "llm": {
        "provider": "bedrock",
        "model": "anthropic.claude-haiku-4-5-20251001-v1:0",
    },
    # ... rest of config
}
```

## Test Structure

```
tests/e2e/
‚îú‚îÄ‚îÄ conftest.py              # E2E fixtures and pytest configuration
‚îú‚îÄ‚îÄ test_crewai_e2e.py       # CrewAI runner E2E tests
‚îú‚îÄ‚îÄ test_langgraph_e2e.py    # LangGraph runner E2E tests
‚îî‚îÄ‚îÄ test_strands_e2e.py      # Strands runner E2E tests
```

## Test Coverage

### CrewAI (`test_crewai_e2e.py`)

- ‚úÖ Simple single-agent crew execution
- ‚úÖ Build and run convenience method
- ‚úÖ Multi-agent crew collaboration
- ‚úÖ Knowledge source integration
- ‚úÖ Tool usage with agents

### LangGraph (`test_langgraph_e2e.py`)

- ‚úÖ ReAct agent execution
- ‚úÖ Build and run method
- ‚úÖ Multi-step graph execution
- ‚úÖ State management between nodes
- ‚úÖ Tool usage with agents

### Strands (`test_strands_e2e.py`)

- ‚úÖ Simple agent execution
- ‚úÖ Build and run method
- ‚úÖ Agent building from configuration
- ‚úÖ Task building
- ‚úÖ System prompt generation
- ‚úÖ AWS Bedrock integration (if credentials available)
- ‚úÖ Tool usage (basic)

## CI/CD Integration

E2E tests are **excluded from regular CI runs** in `.github/workflows/ci.yml`:

```yaml
- name: Run tests
  run: uv run pytest tests -v --ignore=tests/e2e
```

To run E2E tests in CI (e.g., on a schedule):

```yaml
# .github/workflows/e2e.yml
name: E2E Tests
on:
  schedule:
    - cron: '0 0 * * 0'  # Weekly on Sunday
  workflow_dispatch:

jobs:
  e2e:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: hynek/setup-cached-uv@v2
      - run: uv sync --extra tests --extra crewai --extra langgraph --extra strands
      - run: uv run pytest tests/e2e/ --e2e -v
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

## Writing New E2E Tests

1. Mark tests with `@pytest.mark.e2e` and framework marker
2. Use `check_api_key` fixture to verify required credentials
3. Keep tests focused and minimal to reduce API costs
4. Use fixtures from `conftest.py` for common configurations

Note: Tests marked with `@pytest.mark.e2e` are automatically skipped unless the `--e2e` flag is provided.

Example:

```python
@pytest.mark.e2e
@pytest.mark.crewai
def test_my_feature(
    check_api_key: None,
    simple_crew_config: dict[str, Any],
) -> None:
    """Test my new feature."""
    from agentic_crew.runners.crewai_runner import CrewAIRunner
    
    runner = CrewAIRunner()
    result = runner.build_and_run(simple_crew_config, {"input": "test"})
    assert result is not None
```

## Debugging

If tests fail:

1. Check API key is set: `echo $ANTHROPIC_API_KEY`
2. Verify framework is installed: `pip list | grep crewai`
3. Run with verbose output: `-vv`
4. Run single test to isolate issue
5. Check network connectivity to LLM APIs

## Cost Considerations

E2E tests make real API calls which incur costs:

- **CrewAI tests**: ~5-10 tests √ó ~$0.01-0.05 per test = ~$0.05-0.50
- **LangGraph tests**: ~5 tests √ó ~$0.01-0.05 per test = ~$0.05-0.25
- **Strands tests**: ~6-7 tests √ó $0.01-0.05 per test = ~$0.06-0.35

**Total estimated cost per full E2E run**: ~$0.16-1.10

To minimize costs:
- Run E2E tests only when needed
- Use `--framework` filter for specific tests
- Run on schedule instead of per-PR
- Use test timeouts to prevent runaway costs


## Links discovered
- [Claude on Amazon Bedrock](https://platform.claude.com/docs/en/build-with-claude/claude-on-amazon-bedrock)

--- packages/agentic-crew/tests/conftest.py ---
"""Pytest configuration for crew-agents tests."""

from __future__ import annotations

import os
from collections.abc import Generator
from pathlib import Path
from typing import Any
from unittest.mock import MagicMock, patch

import pytest


@pytest.fixture(autouse=True)
def mock_llm_env() -> Generator[None, Any, None]:
    """Set up test environment with mocked LLM credentials."""
    # Set dummy API keys for testing (will be mocked anyway)
    with patch.dict(
        os.environ,
        {
            "OPENAI_API_KEY": "sk-test-mock-key",
            "ANTHROPIC_API_KEY": "sk-ant-test-mock-key",
            "CREWAI_TESTING": "true",
        },
    ):
        yield


@pytest.fixture
def temp_workspace(tmp_path: Path) -> Path:
    """Create a temporary workspace with package structure."""
    # Create packages directory structure
    packages_dir = tmp_path / "packages"
    packages_dir.mkdir()

    # Create a mock otterfall package with .crewai structure
    otterfall_dir = packages_dir / "otterfall"
    otterfall_dir.mkdir()

    crewai_dir = otterfall_dir / ".crewai"
    crewai_dir.mkdir()

    # Create minimal manifest (dict format, not list)
    manifest = crewai_dir / "manifest.yaml"
    manifest.write_text("""
name: otterfall
description: Test package
crews:
  test_crew:
    description: A test crew
    agents: crews/test_crew/agents.yaml
    tasks: crews/test_crew/tasks.yaml
""")

    # Create crews directory
    crews_dir = crewai_dir / "crews" / "test_crew"
    crews_dir.mkdir(parents=True)

    # Create minimal agent and task configs
    (crews_dir / "agents.yaml").write_text("""
test_agent:
  role: Test Agent
  goal: Test goal
  backstory: Test backstory
""")

    (crews_dir / "tasks.yaml").write_text("""
test_task:
  description: Test task description
  expected_output: Test output
  agent: test_agent
""")

    return tmp_path


@pytest.fixture
def mock_crew() -> MagicMock:
    """Create a mock crew result."""
    result = MagicMock()
    result.raw = {"output": "test output", "success": True}
    return result


--- packages/agentic-crew/tests/__init__.py ---
"""Tests for crew-agents package."""

from __future__ import annotations


--- packages/agentic-crew/tests/test_connector_builder_crew.py ---
"""Tests for the Connector Builder Crew."""

from __future__ import annotations

from unittest.mock import MagicMock, patch

from agentic_crew.crews.connector_builder.connector_builder_crew import ConnectorBuilderCrew


@patch("agentic_crew.crews.connector_builder.connector_builder_crew.Crew")
@patch("agentic_crew.crews.connector_builder.connector_builder_crew.Agent")
@patch("agentic_crew.crews.connector_builder.connector_builder_crew.Task")
def test_connector_builder_crew(
    mock_task: MagicMock,
    mock_agent: MagicMock,
    mock_crew: MagicMock,
):
    """Tests that the ConnectorBuilderCrew initializes correctly and can be kicked off."""
    # Test initialization
    crew_instance = ConnectorBuilderCrew(output_dir="test_output")

    assert mock_agent.call_count == 3
    assert mock_task.call_count == 3
    assert crew_instance.crew is not None
    mock_crew.assert_called_once()

    # Test kickoff
    mock_crew_instance = mock_crew.return_value
    mock_crew_instance.kickoff.return_value = "Success"

    result = crew_instance.kickoff(inputs={"url": "http://example.com"})

    mock_crew_instance.kickoff.assert_called_once_with(inputs={"url": "http://example.com"})
    assert result == "Success"


--- packages/agentic-crew/tests/test_discovery.py ---
"""Tests for the discovery module."""

from __future__ import annotations

from pathlib import Path
from unittest.mock import patch

import pytest


class TestDiscovery:
    """Tests for package discovery functionality."""

    def test_discover_packages_finds_crewai_directories(self, temp_workspace: Path) -> None:
        """Test that discover_packages finds packages with .crewai directories."""
        from agentic_crew.core.discovery import discover_packages

        packages = discover_packages(workspace_root=temp_workspace)

        assert "otterfall" in packages
        assert packages["otterfall"].exists()

    def test_discover_packages_finds_crew_directories(self, tmp_path: Path) -> None:
        """Test that discover_packages finds framework-agnostic .crew directories."""
        from agentic_crew.core.discovery import discover_packages

        # Create packages with .crew directory
        pkg_dir = tmp_path / "packages" / "strata"
        crew_dir = pkg_dir / ".crew"
        crew_dir.mkdir(parents=True)
        (crew_dir / "manifest.yaml").write_text("name: strata\ncrews: {}")

        packages = discover_packages(workspace_root=tmp_path)

        assert "strata" in packages
        assert packages["strata"].name == ".crew"

    def test_discover_packages_prefers_crew_over_crewai(self, tmp_path: Path) -> None:
        """Test that .crew takes priority over .crewai when both exist."""
        from agentic_crew.core.discovery import discover_packages

        # Create package with both .crew and .crewai
        pkg_dir = tmp_path / "packages" / "hybrid"
        (pkg_dir / ".crew").mkdir(parents=True)
        (pkg_dir / ".crew" / "manifest.yaml").write_text("name: hybrid\ncrews: {}")
        (pkg_dir / ".crewai").mkdir(parents=True)
        (pkg_dir / ".crewai" / "manifest.yaml").write_text("name: hybrid\ncrews: {}")

        packages = discover_packages(workspace_root=tmp_path)

        assert "hybrid" in packages
        # .crew should be preferred (framework-agnostic first)
        assert packages["hybrid"].name == ".crew"

    def test_discover_packages_returns_empty_when_no_packages(self, tmp_path: Path) -> None:
        """Test that discover_packages returns empty dict when no config dirs exist."""
        from agentic_crew.core.discovery import discover_packages

        # Create empty packages directory
        packages_dir = tmp_path / "packages"
        packages_dir.mkdir()
        (packages_dir / "some_package").mkdir()

        packages = discover_packages(workspace_root=tmp_path)

        assert packages == {}

    def test_discover_all_framework_configs(self, tmp_path: Path) -> None:
        """Test discovering all framework configs for a package."""
        from agentic_crew.core.discovery import discover_all_framework_configs

        # Create package with multiple framework configs
        pkg_dir = tmp_path / "packages" / "multi"
        (pkg_dir / ".crew").mkdir(parents=True)
        (pkg_dir / ".crew" / "manifest.yaml").write_text("name: multi\ncrews: {}")
        (pkg_dir / ".crewai").mkdir(parents=True)
        (pkg_dir / ".crewai" / "manifest.yaml").write_text("name: multi\ncrews: {}")

        configs = discover_all_framework_configs(workspace_root=tmp_path)

        assert "multi" in configs
        assert None in configs["multi"]  # .crew -> None (agnostic)
        assert "crewai" in configs["multi"]

    def test_list_crews_returns_crews_from_manifest(self, temp_workspace: Path) -> None:
        """Test that list_crews returns crew definitions from manifest."""
        from agentic_crew.core.discovery import list_crews

        with patch(
            "agentic_crew.core.discovery.discover_packages",
            return_value={"otterfall": temp_workspace / "packages" / "otterfall" / ".crewai"},
        ):
            crews_by_package = list_crews()

        assert "otterfall" in crews_by_package
        crews = crews_by_package["otterfall"]
        assert len(crews) == 1
        assert crews[0]["name"] == "test_crew"

    def test_list_crews_filters_by_package_name(self, temp_workspace: Path) -> None:
        """Test that list_crews can filter to a specific package."""
        from agentic_crew.core.discovery import list_crews

        with patch(
            "agentic_crew.core.discovery.discover_packages",
            return_value={"otterfall": temp_workspace / "packages" / "otterfall" / ".crewai"},
        ):
            crews_by_package = list_crews(package_name="otterfall")

        assert "otterfall" in crews_by_package
        assert len(crews_by_package) == 1

    def test_list_crews_returns_empty_for_nonexistent_package(self, temp_workspace: Path) -> None:
        """Test that list_crews returns empty for non-existent package."""
        from agentic_crew.core.discovery import list_crews

        with patch(
            "agentic_crew.core.discovery.discover_packages",
            return_value={"otterfall": temp_workspace / "packages" / "otterfall" / ".crewai"},
        ):
            crews_by_package = list_crews(package_name="nonexistent")

        assert crews_by_package == {}

    def test_load_manifest_parses_yaml(self, temp_workspace: Path) -> None:
        """Test that load_manifest parses YAML correctly."""
        from agentic_crew.core.discovery import load_manifest

        crewai_dir = temp_workspace / "packages" / "otterfall" / ".crewai"
        manifest = load_manifest(crewai_dir)

        assert manifest is not None
        assert manifest.get("name") == "otterfall"
        assert "crews" in manifest

    def test_get_workspace_root_finds_root(self) -> None:
        """Test that get_workspace_root finds the workspace root."""
        from agentic_crew.core.discovery import get_workspace_root

        # This should find the actual workspace root
        root = get_workspace_root()

        # Verify it looks like a workspace root
        assert (root / "packages").exists() or root == Path.cwd()

    def test_get_framework_from_config_dir(self) -> None:
        """Test framework detection from directory name."""
        from agentic_crew.core.discovery import get_framework_from_config_dir

        assert get_framework_from_config_dir(Path("/some/path/.crew")) is None
        assert get_framework_from_config_dir(Path("/some/path/.crewai")) == "crewai"
        assert get_framework_from_config_dir(Path("/some/path/.langgraph")) == "langgraph"
        assert get_framework_from_config_dir(Path("/some/path/.strands")) == "strands"

    def test_get_crew_config_includes_required_framework(self, temp_workspace: Path) -> None:
        """Test that get_crew_config includes required_framework field."""
        from agentic_crew.core.discovery import get_crew_config

        crewai_dir = temp_workspace / "packages" / "otterfall" / ".crewai"
        config = get_crew_config(crewai_dir, "test_crew")

        assert config["required_framework"] == "crewai"


class TestDecomposer:
    """Tests for the decomposer module."""

    def test_is_framework_available_caches_results(self) -> None:
        """Test that framework availability is cached."""
        from agentic_crew.core.decomposer import _framework_cache, is_framework_available

        # Clear cache first
        _framework_cache.clear()

        # Check availability (will cache result)
        result1 = is_framework_available("nonexistent_framework")
        result2 = is_framework_available("nonexistent_framework")

        assert result1 is False
        assert result2 is False
        assert "nonexistent_framework" in _framework_cache

    def test_detect_framework_raises_when_none_available(self) -> None:
        """Test that detect_framework raises when no frameworks are available."""
        from agentic_crew.core.decomposer import detect_framework

        with (
            patch("agentic_crew.core.decomposer.is_framework_available", return_value=False),
            pytest.raises(RuntimeError, match="No AI frameworks installed"),
        ):
            detect_framework()

    def test_detect_framework_respects_priority(self) -> None:
        """Test that frameworks are detected in priority order."""
        from agentic_crew.core.decomposer import detect_framework

        def mock_available(framework):
            return framework in ["langgraph", "strands"]

        with patch(
            "agentic_crew.core.decomposer.is_framework_available",
            side_effect=mock_available,
        ):
            result = detect_framework()

        # langgraph should be preferred over strands
        assert result == "langgraph"

    def test_detect_framework_with_preferred_returns_preferred(self) -> None:
        """Test that detect_framework returns preferred if available."""
        from agentic_crew.core.decomposer import detect_framework

        def mock_available(framework):
            return framework in ["crewai", "langgraph", "strands"]

        with patch(
            "agentic_crew.core.decomposer.is_framework_available",
            side_effect=mock_available,
        ):
            result = detect_framework(preferred="strands")

        assert result == "strands"

    def test_detect_framework_falls_back_when_preferred_unavailable(self) -> None:
        """Test that detect_framework falls back when preferred not available."""
        from agentic_crew.core.decomposer import detect_framework

        def mock_available(framework):
            return framework in ["langgraph"]

        with patch(
            "agentic_crew.core.decomposer.is_framework_available",
            side_effect=mock_available,
        ):
            result = detect_framework(preferred="crewai")

        assert result == "langgraph"

    def test_get_available_frameworks_returns_list(self) -> None:
        """Test that get_available_frameworks returns installed frameworks."""
        from agentic_crew.core.decomposer import get_available_frameworks

        def mock_available(framework):
            return framework in ["crewai", "strands"]

        with patch(
            "agentic_crew.core.decomposer.is_framework_available",
            side_effect=mock_available,
        ):
            result = get_available_frameworks()

        assert isinstance(result, list)
        assert "crewai" in result
        assert "strands" in result
        assert "langgraph" not in result

    def test_get_available_frameworks_returns_empty_when_none_installed(self) -> None:
        """Test get_available_frameworks returns empty list when none installed."""
        from agentic_crew.core.decomposer import get_available_frameworks

        with patch(
            "agentic_crew.core.decomposer.is_framework_available",
            return_value=False,
        ):
            result = get_available_frameworks()

        assert result == []

    def test_get_runner_returns_crewai_runner(self) -> None:
        """Test that get_runner returns CrewAIRunner for crewai."""
        from unittest.mock import MagicMock

        from agentic_crew.core.decomposer import get_runner

        mock_runner = MagicMock()
        mock_runner.framework_name = "crewai"

        with (
            patch(
                "agentic_crew.core.decomposer.is_framework_available",
                return_value=True,
            ),
            patch(
                "agentic_crew.runners.crewai_runner.CrewAIRunner",
                return_value=mock_runner,
            ),
        ):
            runner = get_runner("crewai")

        assert runner is not None
        assert runner.framework_name == "crewai"

    def test_get_runner_returns_langgraph_runner(self) -> None:
        """Test that get_runner returns LangGraphRunner for langgraph."""
        from unittest.mock import MagicMock

        from agentic_crew.core.decomposer import get_runner

        mock_runner = MagicMock()
        mock_runner.framework_name = "langgraph"

        with (
            patch(
                "agentic_crew.core.decomposer.is_framework_available",
                return_value=True,
            ),
            patch(
                "agentic_crew.runners.langgraph_runner.LangGraphRunner",
                return_value=mock_runner,
            ),
        ):
            runner = get_runner("langgraph")

        assert runner is not None
        assert runner.framework_name == "langgraph"

    def test_get_runner_returns_strands_runner(self) -> None:
        """Test that get_runner returns StrandsRunner for strands."""
        from unittest.mock import MagicMock

        from agentic_crew.core.decomposer import get_runner

        mock_runner = MagicMock()
        mock_runner.framework_name = "strands"

        with (
            patch(
                "agentic_crew.core.decomposer.is_framework_available",
                return_value=True,
            ),
            patch(
                "agentic_crew.runners.strands_runner.StrandsRunner",
                return_value=mock_runner,
            ),
        ):
            runner = get_runner("strands")

        assert runner is not None
        assert runner.framework_name == "strands"

    def test_get_runner_auto_detects_framework(self) -> None:
        """Test that get_runner with no args auto-detects framework."""
        from unittest.mock import MagicMock

        from agentic_crew.core.decomposer import get_runner

        mock_runner = MagicMock()
        mock_runner.framework_name = "strands"

        def mock_available(framework):
            return framework == "strands"

        with (
            patch(
                "agentic_crew.core.decomposer.is_framework_available",
                side_effect=mock_available,
            ),
            patch(
                "agentic_crew.runners.strands_runner.StrandsRunner",
                return_value=mock_runner,
            ),
        ):
            runner = get_runner()

        assert runner.framework_name == "strands"

    def test_get_runner_raises_for_unknown_framework(self) -> None:
        """Test that get_runner raises for unknown framework."""
        from agentic_crew.core.decomposer import get_runner

        with pytest.raises(ValueError, match="Unknown framework"):
            get_runner("unknown_framework")

    def test_decompose_crew_uses_required_framework(self, tmp_path: Path) -> None:
        """Test that decompose_crew respects required_framework from config."""
        from unittest.mock import MagicMock

        from agentic_crew.core.decomposer import decompose_crew

        crew_config = {
            "name": "test_crew",
            "required_framework": "strands",
            "agents": {},
            "tasks": {},
        }

        mock_runner = MagicMock()
        mock_runner.framework_name = "strands"
        mock_runner.build_crew.return_value = MagicMock()

        def mock_available(framework):
            return framework in ["crewai", "strands"]

        with (
            patch(
                "agentic_crew.core.decomposer.is_framework_available",
                side_effect=mock_available,
            ),
            patch(
                "agentic_crew.runners.strands_runner.StrandsRunner",
                return_value=mock_runner,
            ),
        ):
            # decompose_crew returns the result of runner.build_crew()
            decompose_crew(crew_config)

        # Verify the runner's build_crew was called
        mock_runner.build_crew.assert_called_once_with(crew_config)

    def test_decompose_crew_raises_when_required_unavailable(self) -> None:
        """Test decompose_crew raises when required framework not available."""
        from agentic_crew.core.decomposer import decompose_crew

        crew_config = {
            "name": "test_crew",
            "required_framework": "langgraph",
            "agents": {},
            "tasks": {},
        }

        with (
            patch(
                "agentic_crew.core.decomposer.is_framework_available",
                return_value=False,
            ),
            pytest.raises(RuntimeError, match="requires langgraph.*not installed"),
        ):
            decompose_crew(crew_config)

    def test_decompose_crew_validates_framework_conflict(self) -> None:
        """Test decompose_crew validates requested vs required conflict."""
        from agentic_crew.core.decomposer import decompose_crew

        crew_config = {
            "name": "test_crew",
            "required_framework": "crewai",
            "agents": {},
            "tasks": {},
        }

        with (
            patch(
                "agentic_crew.core.decomposer.is_framework_available",
                return_value=True,
            ),
            pytest.raises(ValueError, match="requires crewai.*langgraph was requested"),
        ):
            decompose_crew(crew_config, framework="langgraph")

    def test_get_install_command_returns_pip_install(self) -> None:
        """Test that _get_install_command returns correct pip command."""
        from agentic_crew.core.decomposer import _get_install_command

        result = _get_install_command("crewai")
        assert "crewai" in result

    def test_get_install_command_maps_langgraph(self) -> None:
        """Test that _get_install_command maps langgraph correctly."""
        from agentic_crew.core.decomposer import _get_install_command

        result = _get_install_command("langgraph")
        assert "langgraph" in result


--- packages/agentic-crew/tests/test_file_tools.py ---
"""Tests for file manipulation tools.

Note: These tests require crewai to be installed for the tool base classes.
"""

from __future__ import annotations

import os
from pathlib import Path
from unittest.mock import patch

import pytest

# Skip all tests if crewai not installed
pytest.importorskip("crewai", reason="crewai not installed")


class TestGetWorkspaceRoot:
    """Tests for get_workspace_root function."""

    def test_uses_target_package_env_var(self, temp_workspace: Path) -> None:
        """Test that TARGET_PACKAGE env var is respected."""
        from agentic_crew.tools.file_tools import get_workspace_root

        # Create another package
        other_pkg = temp_workspace / "packages" / "other_package"
        other_pkg.mkdir(parents=True)

        # Create pyproject.toml at workspace root
        (temp_workspace / "pyproject.toml").write_text("[project]\nname = 'test'")

        with (
            patch.dict(os.environ, {"TARGET_PACKAGE": "other_package"}),
            patch(
                "agentic_crew.tools.file_tools._find_workspace_root",
                return_value=temp_workspace,
            ),
        ):
            root = get_workspace_root()

        assert root == other_pkg

    def test_defaults_to_otterfall(self, temp_workspace: Path) -> None:
        """Test that package defaults to 'otterfall'."""
        from agentic_crew.tools.file_tools import get_workspace_root

        # Create otterfall package
        otterfall = temp_workspace / "packages" / "otterfall"
        otterfall.mkdir(parents=True, exist_ok=True)

        with patch(
            "agentic_crew.tools.file_tools._find_workspace_root",
            return_value=temp_workspace,
        ):
            # Remove TARGET_PACKAGE if set
            env = os.environ.copy()
            env.pop("TARGET_PACKAGE", None)
            with patch.dict(os.environ, env, clear=True):
                root = get_workspace_root()

        assert root.name == "otterfall"

    def test_explicit_package_name(self, temp_workspace: Path) -> None:
        """Test explicit package name parameter."""
        from agentic_crew.tools.file_tools import get_workspace_root

        # Create custom package
        custom_pkg = temp_workspace / "packages" / "custom"
        custom_pkg.mkdir(parents=True)

        with patch(
            "agentic_crew.tools.file_tools._find_workspace_root",
            return_value=temp_workspace,
        ):
            root = get_workspace_root(package_name="custom")

        assert root == custom_pkg


class TestGameCodeWriterTool:
    """Tests for GameCodeWriterTool."""

    def test_rejects_path_traversal(self) -> None:
        """Test that path traversal is rejected."""
        from agentic_crew.tools.file_tools import GameCodeWriterTool

        tool = GameCodeWriterTool()
        result = tool._run(file_path="../../../etc/passwd", content="malicious")

        assert "Error" in result
        assert "Path traversal" in result or "not allowed" in result

    def test_rejects_absolute_paths(self) -> None:
        """Test that absolute paths are rejected."""
        from agentic_crew.tools.file_tools import GameCodeWriterTool

        tool = GameCodeWriterTool()
        result = tool._run(file_path="/etc/passwd", content="malicious")

        assert "Error" in result

    def test_rejects_disallowed_directories(self) -> None:
        """Test that writes to non-allowed directories are rejected."""
        from agentic_crew.tools.file_tools import GameCodeWriterTool

        tool = GameCodeWriterTool()
        result = tool._run(file_path="node_modules/test.ts", content="test")

        assert "Error" in result
        assert "not in an allowed directory" in result

    def test_rejects_disallowed_extensions(self) -> None:
        """Test that disallowed file extensions are rejected."""
        from agentic_crew.tools.file_tools import GameCodeWriterTool

        tool = GameCodeWriterTool()
        result = tool._run(file_path="src/ecs/test.exe", content="binary")

        assert "Error" in result
        assert "not allowed" in result

    def test_writes_to_allowed_directory(self, temp_workspace: Path) -> None:
        """Test that writing to allowed directories works."""
        from agentic_crew.tools.file_tools import GameCodeWriterTool

        # Create the allowed directory structure
        ecs_dir = temp_workspace / "packages" / "otterfall" / "src" / "ecs"
        ecs_dir.mkdir(parents=True)

        tool = GameCodeWriterTool()

        with patch(
            "agentic_crew.tools.file_tools.get_workspace_root",
            return_value=temp_workspace / "packages" / "otterfall",
        ):
            result = tool._run(
                file_path="src/ecs/TestComponent.ts",
                content="export const TestComponent = {};",
            )

        assert "Successfully wrote" in result
        assert (ecs_dir / "TestComponent.ts").exists()


class TestGameCodeReaderTool:
    """Tests for GameCodeReaderTool."""

    def test_rejects_path_traversal(self) -> None:
        """Test that path traversal is rejected."""
        from agentic_crew.tools.file_tools import GameCodeReaderTool

        tool = GameCodeReaderTool()
        result = tool._run(file_path="../../../etc/passwd")

        assert "Error" in result
        assert "not allowed" in result

    def test_reads_existing_file(self, temp_workspace: Path) -> None:
        """Test reading an existing file."""
        from agentic_crew.tools.file_tools import GameCodeReaderTool

        # Create a test file
        test_file = temp_workspace / "packages" / "otterfall" / "src" / "test.ts"
        test_file.parent.mkdir(parents=True, exist_ok=True)
        test_file.write_text("export const Test = 'hello';")

        tool = GameCodeReaderTool()

        with patch(
            "agentic_crew.tools.file_tools.get_workspace_root",
            return_value=temp_workspace / "packages" / "otterfall",
        ):
            result = tool._run(file_path="src/test.ts")

        assert "export const Test" in result

    def test_returns_error_for_missing_file(self, temp_workspace: Path) -> None:
        """Test that missing files return an error."""
        from agentic_crew.tools.file_tools import GameCodeReaderTool

        tool = GameCodeReaderTool()

        with patch(
            "agentic_crew.tools.file_tools.get_workspace_root",
            return_value=temp_workspace / "packages" / "otterfall",
        ):
            result = tool._run(file_path="src/nonexistent.ts")

        assert "Error" in result
        assert "not found" in result


class TestDirectoryListTool:
    """Tests for DirectoryListTool."""

    def test_lists_directory_contents(self, temp_workspace: Path) -> None:
        """Test listing directory contents."""
        from agentic_crew.tools.file_tools import DirectoryListTool

        # Create some test files
        src_dir = temp_workspace / "packages" / "otterfall" / "src"
        src_dir.mkdir(parents=True)
        (src_dir / "index.ts").write_text("export {};")
        (src_dir / "utils").mkdir()

        tool = DirectoryListTool()

        with patch(
            "agentic_crew.tools.file_tools.get_workspace_root",
            return_value=temp_workspace / "packages" / "otterfall",
        ):
            result = tool._run(directory="src")

        assert "index.ts" in result
        assert "utils" in result

    def test_rejects_path_traversal(self) -> None:
        """Test that path traversal is rejected."""
        from agentic_crew.tools.file_tools import DirectoryListTool

        tool = DirectoryListTool()
        result = tool._run(directory="../../../etc")

        assert "Error" in result
        assert "not allowed" in result


--- packages/agentic-crew/tests/test_loader.py ---
"""Tests for the loader module.

Note: These tests require crewai to be installed.
"""

from __future__ import annotations

from pathlib import Path
from typing import TYPE_CHECKING

import pytest

if TYPE_CHECKING:
    from pytest_agentic_crew.mocking import CrewMocker

# Skip all tests in this module if crewai is not installed
pytestmark = pytest.mark.skipif(
    not pytest.importorskip("crewai", reason="crewai not installed"),
    reason="crewai not installed",
)


class TestCreateAgentFromConfig:
    """Tests for create_agent_from_config function."""

    def test_creates_agent_with_config(self, crew_mocker: CrewMocker) -> None:
        """Test that create_agent_from_config creates an Agent."""
        from agentic_crew.core.loader import create_agent_from_config

        config = {
            "role": "Test Agent Role",
            "goal": "Test goal",
            "backstory": "Test backstory",
        }

        MockAgent = crew_mocker.patch("crewai.Agent")
        crew_mocker.patch_get_llm()

        create_agent_from_config("test_agent", config)

        MockAgent.assert_called_once()
        call_kwargs = MockAgent.call_args[1]
        assert call_kwargs["role"] == "Test Agent Role"
        assert call_kwargs["goal"] == "Test goal"
        assert call_kwargs["backstory"] == "Test backstory"

    def test_uses_agent_name_as_default_role(self, crew_mocker: CrewMocker) -> None:
        """Test that agent name is used as default role."""
        from agentic_crew.core.loader import create_agent_from_config

        config = {"goal": "Test goal", "backstory": "Test backstory"}

        MockAgent = crew_mocker.patch("crewai.Agent")
        crew_mocker.patch_get_llm()

        create_agent_from_config("custom_agent_name", config)

        call_kwargs = MockAgent.call_args[1]
        assert call_kwargs["role"] == "custom_agent_name"


class TestCreateTaskFromConfig:
    """Tests for create_task_from_config function."""

    def test_creates_task_with_config(self, crew_mocker: CrewMocker) -> None:
        """Test that create_task_from_config creates a Task."""
        from agentic_crew.core.loader import create_task_from_config

        config = {
            "description": "Test task description",
            "expected_output": "Test output",
        }
        mock_agent = crew_mocker.MagicMock()

        MockTask = crew_mocker.patch("crewai.Task")

        create_task_from_config("test_task", config, mock_agent)

        MockTask.assert_called_once()
        call_kwargs = MockTask.call_args[1]
        assert call_kwargs["description"] == "Test task description"
        assert call_kwargs["expected_output"] == "Test output"
        assert call_kwargs["agent"] == mock_agent


class TestLoadKnowledgeSources:
    """Tests for load_knowledge_sources function."""

    def test_loads_md_files(self, crew_mocker: CrewMocker, tmp_path: Path) -> None:
        """Test that .md files are loaded as knowledge sources."""
        from agentic_crew.core.loader import load_knowledge_sources

        # Create test knowledge directory with .md file
        knowledge_dir = tmp_path / "knowledge"
        knowledge_dir.mkdir()
        (knowledge_dir / "test.md").write_text("# Test Knowledge\nSome content")

        MockKnowledgeSource = crew_mocker.patch_knowledge_source()

        load_knowledge_sources([knowledge_dir])

        # Verify TextFileKnowledgeSource was called
        assert MockKnowledgeSource.called

    def test_skips_nonexistent_paths(self, tmp_path: Path) -> None:
        """Test that nonexistent paths are skipped."""
        from agentic_crew.core.loader import load_knowledge_sources

        sources = load_knowledge_sources([tmp_path / "nonexistent"])

        assert sources == []


class TestLoadCrewFromConfig:
    """Tests for load_crew_from_config function."""

    def test_creates_crew_with_agents_and_tasks(self, crew_mocker: CrewMocker) -> None:
        """Test that load_crew_from_config creates a complete Crew."""
        from agentic_crew.core.loader import load_crew_from_config

        config = {
            "name": "test_crew",
            "agents": {
                "test_agent": {
                    "role": "Test Agent",
                    "goal": "Test goal",
                    "backstory": "Test backstory",
                }
            },
            "tasks": {
                "test_task": {
                    "description": "Test description",
                    "expected_output": "Test output",
                    "agent": "test_agent",
                }
            },
            "knowledge_paths": [],
        }

        MockCrew = crew_mocker.patch_crewai_crew()
        MockAgent = crew_mocker.patch_crewai_agent()
        MockTask = crew_mocker.patch_crewai_task()
        crew_mocker.patch_crewai_process()
        crew_mocker.patch_get_llm()

        mock_agent = crew_mocker.MagicMock()
        MockAgent.return_value = mock_agent

        mock_task = crew_mocker.MagicMock()
        MockTask.return_value = mock_task

        load_crew_from_config(config)

        # Verify Agent was created
        MockAgent.assert_called()
        # Verify Task was created
        MockTask.assert_called()
        # Verify Crew was created with agents and tasks
        MockCrew.assert_called_once()
        call_kwargs = MockCrew.call_args[1]
        assert len(call_kwargs["agents"]) == 1
        assert len(call_kwargs["tasks"]) == 1


--- packages/agentic-crew/tests/test_manager.py ---
"""Tests for the ManagerAgent class."""

from __future__ import annotations

import asyncio
from pathlib import Path
from unittest.mock import patch

import pytest

from agentic_crew.core.manager import ManagerAgent


class TestManagerAgent:
    """Tests for ManagerAgent base class."""

    def test_init_with_crews(self):
        """Test manager initialization with crew mappings."""
        crews = {"design": "game_design", "qa": "quality_assurance"}
        manager = ManagerAgent(crews=crews)

        assert manager.crews == crews
        assert manager.package_name is None
        assert manager.workspace_root is None

    def test_init_with_package_name(self):
        """Test manager initialization with package name."""
        crews = {"design": "game_design"}
        manager = ManagerAgent(crews=crews, package_name="my_package")

        assert manager.package_name == "my_package"

    def test_get_packages_caches_result(self):
        """Test that package discovery is cached."""
        manager = ManagerAgent(crews={"test": "test_crew"})

        with patch("agentic_crew.core.manager.discover_packages") as mock_discover:
            mock_packages = {"pkg1": Path("/path/pkg1")}
            mock_discover.return_value = mock_packages

            # First call
            result1 = manager._get_packages()
            assert result1 == mock_packages
            assert mock_discover.call_count == 1

            # Second call should use cache
            result2 = manager._get_packages()
            assert result2 == mock_packages
            assert mock_discover.call_count == 1  # Not called again

    def test_delegate_with_string_input(self):
        """Test delegation with string input."""
        manager = ManagerAgent(
            crews={"design": "game_design"},
            package_name="test_pkg",
        )

        mock_packages = {"test_pkg": Path("/test/.crewai")}
        mock_config = {
            "name": "game_design",
            "agents": {},
            "tasks": {},
        }

        with (
            patch("agentic_crew.core.manager.discover_packages") as mock_discover,
            patch("agentic_crew.core.manager.get_crew_config") as mock_get_config,
            patch("agentic_crew.core.manager.run_crew_auto") as mock_run,
        ):
            mock_discover.return_value = mock_packages
            mock_get_config.return_value = mock_config
            mock_run.return_value = "Design complete"

            result = manager.delegate("design", "Create a game design")

            assert result == "Design complete"
            # Verify string was converted to dict
            mock_run.assert_called_once()
            call_args = mock_run.call_args
            assert call_args[1]["inputs"] == {"task": "Create a game design"}

    def test_delegate_with_dict_input(self):
        """Test delegation with dict input."""
        manager = ManagerAgent(
            crews={"design": "game_design"},
            package_name="test_pkg",
        )

        mock_packages = {"test_pkg": Path("/test/.crewai")}
        mock_config = {"name": "game_design", "agents": {}, "tasks": {}}

        with (
            patch("agentic_crew.core.manager.discover_packages") as mock_discover,
            patch("agentic_crew.core.manager.get_crew_config") as mock_get_config,
            patch("agentic_crew.core.manager.run_crew_auto") as mock_run,
        ):
            mock_discover.return_value = mock_packages
            mock_get_config.return_value = mock_config
            mock_run.return_value = "Design complete"

            inputs = {"task": "Create design", "theme": "fantasy"}
            result = manager.delegate("design", inputs)

            assert result == "Design complete"
            mock_run.assert_called_once()
            call_args = mock_run.call_args
            assert call_args[1]["inputs"] == inputs

    def test_delegate_unknown_role_raises_error(self):
        """Test that delegating to unknown role raises ValueError."""
        manager = ManagerAgent(crews={"design": "game_design"})

        with pytest.raises(ValueError, match="Unknown crew role 'unknown'"):
            manager.delegate("unknown", "test task")

    def test_delegate_package_not_found_raises_error(self):
        """Test that missing package raises ValueError."""
        manager = ManagerAgent(
            crews={"design": "game_design"},
            package_name="nonexistent",
        )

        with patch("agentic_crew.core.manager.discover_packages") as mock_discover:
            mock_discover.return_value = {"other_pkg": Path("/other")}

            with pytest.raises(ValueError, match="Package 'nonexistent' not found"):
                manager.delegate("design", "test task")

    def test_delegate_auto_discover_crew(self):
        """Test auto-discovery of crew in packages when package_name not specified."""
        manager = ManagerAgent(crews={"design": "game_design"})

        mock_packages = {
            "pkg1": Path("/pkg1/.crewai"),
            "pkg2": Path("/pkg2/.crewai"),
        }
        mock_config = {"name": "game_design", "agents": {}, "tasks": {}}

        with (
            patch("agentic_crew.core.manager.discover_packages") as mock_discover,
            patch("agentic_crew.core.manager.get_crew_config") as mock_get_config,
            patch("agentic_crew.core.manager.run_crew_auto") as mock_run,
        ):
            mock_discover.return_value = mock_packages

            # First package doesn't have the crew
            def get_config_side_effect(pkg_dir, crew_name):
                if pkg_dir == Path("/pkg1/.crewai"):
                    raise ValueError("Crew not found")
                return mock_config

            mock_get_config.side_effect = get_config_side_effect
            mock_run.return_value = "Success"

            result = manager.delegate("design", "test task")

            assert result == "Success"
            # Should have tried pkg1 (failed), then found in pkg2 (config is cached)
            assert mock_get_config.call_count == 2

    def test_delegate_crew_not_found_raises_error(self):
        """Test that crew not found in any package raises ValueError."""
        manager = ManagerAgent(crews={"design": "nonexistent_crew"})

        mock_packages = {"pkg1": Path("/pkg1/.crewai")}

        with (
            patch("agentic_crew.core.manager.discover_packages") as mock_discover,
            patch("agentic_crew.core.manager.get_crew_config") as mock_get_config,
        ):
            mock_discover.return_value = mock_packages
            mock_get_config.side_effect = ValueError("Crew not found")

            with pytest.raises(ValueError, match="Crew 'nonexistent_crew' not found"):
                manager.delegate("design", "test task")

    @pytest.mark.asyncio
    async def test_delegate_async(self):
        """Test async delegation."""
        manager = ManagerAgent(
            crews={"design": "game_design"},
            package_name="test_pkg",
        )

        mock_packages = {"test_pkg": Path("/test/.crewai")}
        mock_config = {"name": "game_design", "agents": {}, "tasks": {}}

        with (
            patch("agentic_crew.core.manager.discover_packages") as mock_discover,
            patch("agentic_crew.core.manager.get_crew_config") as mock_get_config,
            patch("agentic_crew.core.manager.run_crew_auto") as mock_run,
        ):
            mock_discover.return_value = mock_packages
            mock_get_config.return_value = mock_config
            mock_run.return_value = "Async result"

            result = await manager.delegate_async("design", "test task")

            assert result == "Async result"

    @pytest.mark.asyncio
    async def test_delegate_parallel(self):
        """Test parallel delegation to multiple crews."""
        manager = ManagerAgent(
            crews={"design": "game_design", "assets": "asset_gen"},
            package_name="test_pkg",
        )

        mock_packages = {"test_pkg": Path("/test/.crewai")}

        with (
            patch("agentic_crew.core.manager.discover_packages") as mock_discover,
            patch("agentic_crew.core.manager.get_crew_config") as mock_get_config,
            patch("agentic_crew.core.manager.run_crew_auto") as mock_run,
        ):
            mock_discover.return_value = mock_packages

            # Return different configs for different crews to distinguish them
            def get_config_side_effect(pkg_dir, crew_name):
                return {"name": crew_name, "agents": {}, "tasks": {}}

            mock_get_config.side_effect = get_config_side_effect

            # Mock different results based on crew name in config
            def run_side_effect(config, inputs, framework=None):
                crew_name = config["name"]
                if crew_name == "game_design":
                    return "Design done"
                elif crew_name == "asset_gen":
                    return "Assets done"
                return f"Unknown crew: {crew_name}"

            mock_run.side_effect = run_side_effect

            results = await manager.delegate_parallel(
                [
                    ("design", "Create design"),
                    ("assets", "Generate assets"),
                ]
            )

            assert len(results) == 2
            # Verify correct results returned (order matches input order)
            assert "Design done" in results
            assert "Assets done" in results
            # Both should have been executed
            assert mock_run.call_count == 2

    def test_delegate_sequential(self):
        """Test sequential delegation to multiple crews."""
        manager = ManagerAgent(
            crews={"design": "game_design", "impl": "implementation"},
            package_name="test_pkg",
        )

        mock_packages = {"test_pkg": Path("/test/.crewai")}
        mock_config = {"name": "test", "agents": {}, "tasks": {}}

        with (
            patch("agentic_crew.core.manager.discover_packages") as mock_discover,
            patch("agentic_crew.core.manager.get_crew_config") as mock_get_config,
            patch("agentic_crew.core.manager.run_crew_auto") as mock_run,
        ):
            mock_discover.return_value = mock_packages
            mock_get_config.return_value = mock_config
            mock_run.side_effect = ["Design result", "Implementation result"]

            results = manager.delegate_sequential(
                [
                    ("design", "Create design"),
                    ("impl", "Implement design"),
                ]
            )

            assert results == ["Design result", "Implementation result"]
            assert mock_run.call_count == 2
            # Verify they were called in order
            calls = mock_run.call_args_list
            assert calls[0][1]["inputs"]["task"] == "Create design"
            assert calls[1][1]["inputs"]["task"] == "Implement design"

    def test_checkpoint_auto_approve(self):
        """Test checkpoint with auto_approve=True."""
        manager = ManagerAgent(crews={"test": "test_crew"})

        approved, result = manager.checkpoint(
            "Review design",
            "Design output",
            auto_approve=True,
        )

        assert approved is True
        assert result == "Design output"

    def test_checkpoint_base_implementation_auto_approves(self):
        """Test that base checkpoint implementation auto-approves."""
        manager = ManagerAgent(crews={"test": "test_crew"})

        approved, result = manager.checkpoint(
            "Review design",
            "Design output",
            auto_approve=False,  # Even with False, base impl approves
        )

        assert approved is True
        assert result == "Design output"

    def test_execute_workflow_not_implemented(self):
        """Test that execute_workflow raises NotImplementedError in base class."""
        manager = ManagerAgent(crews={"test": "test_crew"})

        with pytest.raises(NotImplementedError, match="Subclasses must implement"):
            asyncio.run(manager.execute_workflow("test task"))


class TestManagerAgentSubclass:
    """Tests for ManagerAgent subclass implementation."""

    @pytest.mark.asyncio
    async def test_custom_workflow_implementation(self):
        """Test a custom manager implementation."""

        class TestManager(ManagerAgent):
            async def execute_workflow(self, task: str, **kwargs):
                # Simple sequential workflow
                design = await self.delegate_async("design", task)
                impl = await self.delegate_async("impl", design)
                return impl

        manager = TestManager(
            crews={"design": "game_design", "impl": "implementation"},
            package_name="test_pkg",
        )

        mock_packages = {"test_pkg": Path("/test/.crewai")}
        mock_config = {"name": "test", "agents": {}, "tasks": {}}

        with (
            patch("agentic_crew.core.manager.discover_packages") as mock_discover,
            patch("agentic_crew.core.manager.get_crew_config") as mock_get_config,
            patch("agentic_crew.core.manager.run_crew_auto") as mock_run,
        ):
            mock_discover.return_value = mock_packages
            mock_get_config.return_value = mock_config
            mock_run.side_effect = ["Design done", "Implementation done"]

            result = await manager.execute_workflow("Build a game")

            assert result == "Implementation done"
            assert mock_run.call_count == 2

    @pytest.mark.asyncio
    async def test_custom_workflow_with_parallel_execution(self):
        """Test a custom manager with parallel execution."""

        class ParallelManager(ManagerAgent):
            async def execute_workflow(self, task: str, **kwargs):
                # Parallel execution
                results = await self.delegate_parallel(
                    [
                        ("design", task),
                        ("assets", task),
                    ]
                )
                # Then sequential QA
                qa_result = await self.delegate_async(
                    "qa",
                    {
                        "design": results[0],
                        "assets": results[1],
                    },
                )
                return qa_result

        manager = ParallelManager(
            crews={"design": "design", "assets": "assets", "qa": "qa"},
            package_name="test_pkg",
        )

        mock_packages = {"test_pkg": Path("/test/.crewai")}
        mock_config = {"name": "test", "agents": {}, "tasks": {}}

        with (
            patch("agentic_crew.core.manager.discover_packages") as mock_discover,
            patch("agentic_crew.core.manager.get_crew_config") as mock_get_config,
            patch("agentic_crew.core.manager.run_crew_auto") as mock_run,
        ):
            mock_discover.return_value = mock_packages
            mock_get_config.return_value = mock_config
            mock_run.side_effect = ["Design done", "Assets done", "QA passed"]

            result = await manager.execute_workflow("Build game")

            assert result == "QA passed"
            assert mock_run.call_count == 3
