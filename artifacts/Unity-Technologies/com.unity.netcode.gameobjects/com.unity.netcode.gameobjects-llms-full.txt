# llms-full (private-aware)
> Built from GitHub files and website pages. Large files may be truncated.

--- com.unity.netcode.gameobjects/Documentation~/da-quickstart.md ---
# Distributed authority quickstart

Manage latency and performance in your Netcode for GameObjects project.

| **Topic**                       | **Description**                  |
| :------------------------------ | :------------------------------- |
| **[Distributed authority general quickstart](learn/distributed-authority-quick-start.md)** | Use this guide to learn how to create your first [distributed authority](terms-concepts/distributed-authority.md) Netcode for GameObjects project. |
| **[Distributed authority WebGL quickstart](learn/distributed-authority-webgl.md)** | Use this guide to learn how to create your first [distributed authority](terms-concepts/distributed-authority.md) Netcode for GameObjects WebGL project. |

## Links discovered
- [Distributed authority general quickstart](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/distributed-authority-quick-start.md)
- [distributed authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/distributed-authority.md)
- [Distributed authority WebGL quickstart](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/distributed-authority-webgl.md)

--- com.unity.netcode.gameobjects/Documentation~/install.md ---
# Install Netcode for GameObjects

Follow the instructions on this page to set up Netcode for GameObjects in your Unity project.

##  Prerequisites

Before you begin, you need the following:

- An active Unity account with a valid license.
- A supported version of Unity. Check [Netcode for GameObjects' requirements](#netcode-installation-requirements) for the specific version details.
- An existing Unity project. If you're new to Unity, you can refer to the [get started](./tutorials/get-started-with-ngo.md) section for guidance.

### Compatibility

- Unity Editor version 2021.3 or later
- Mono and IL2CPP [scripting backends](https://docs.unity3d.com/Manual/scripting-backends.html)

### Supported platforms

- Windows, MacOS, and Linux
- iOS and Android
- XR platforms on Windows, Android, and iOS
- Most [**closed platforms**](https://unity.com/platform-installation), such as consoles. Contact the [development team](https://discord.com/channels/449263083769036810/563033158480691211) for more information about specific closed platforms.
- WebGL (requires Netcode for GameObjects 1.2.0+ and [Unity Transport](https://docs-multiplayer.unity3d.com/transport/current/about/) 2.0.0+)

> [!NOTE]
> When working with closed platforms like consoles (PlayStation, Xbox, Nintendo Switch), there may be specific policies and considerations. Refer to your console's documentation for more information.

## Install Netcode for GameObjects with the Package Manager

1. From the Unity Editor, select **Window** > **Package Manager**.
1. From the Package Manager, select **Add** ![add symbol](images/add.png) > **Add package by name…**
1. Type (or copy and paste) `com.unity.netcode.gameobjects` into the package name field, then select **Add**.

### For Unity Editor versions 2020.3 LTS or earlier

1. From the Unity Editor, select **Window** > **Package Manager**.
1. From the Package Manager, select **Add** ![add symbol](images/add.png) > **Add package by git URL…**
1. Type (or copy and paste) `https://github.com/Unity-Technologies/com.unity.netcode.gameobjects` into the git URL field, then select **Add**.

## Next Steps

After installing Netcode for GameObjects, see the following content to continue your journey:

* Use the [Get started with Netcode for GameObjects tutorial](./tutorials/get-started-with-ngo.md) to create a project, test your installation, and learn how to use the basic features of Netcode for GameObjects.


## Links discovered
- [get started](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/tutorials/get-started-with-ngo.md)
- [scripting backends](https://docs.unity3d.com/Manual/scripting-backends.html)
- [**closed platforms**](https://unity.com/platform-installation)
- [development team](https://discord.com/channels/449263083769036810/563033158480691211)
- [Unity Transport](https://docs-multiplayer.unity3d.com/transport/current/about/)
- [add symbol](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/images/add.png)
- [Get started with Netcode for GameObjects tutorial](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/tutorials/get-started-with-ngo.md)

--- com.unity.netcode.gameobjects/Documentation~/samples/bossroom/getting-started-boss-room.md ---
# Getting started with Boss Room

> [!WARNING]
> Boss Room is no longer being actively maintained as of 2026. While it remains available as a learning resource, it may not be compatible with the latest versions of Netcode for GameObjects or Unity.

Boss Room is a fully functional co-op multiplayer RPG made with Unity Netcode. It's an educational sample designed to showcase typical netcode [patterns](bossroom-actions.md) often featured in similar multiplayer games.

> [!NOTE]
> Boss Room is compatible with the latest Unity Long Term Support (LTS) Editor version (currently [6000 LTS](https://unity.com/releases). Make sure to include standalone support for Windows/Mac in your installation.

Boss Room has been developed and tested on the following platforms:

* Windows
* Mac
* iOS
* Android

The minimum device specifications for Boss Room are:

* iPhone 6S
* Samsung Galaxy J2 Core

Join the multiplayer community on the Unity [Discord](https://discord.gg/mNgM2XRDpb) and [Forum](https://forum.unity.com/forums/multiplayer.26/) to connect and find support. Got feedback? Tell us what you think using our new [Feedback Form](#feedback-form).

### Contents and quick links

- [Boss Room Overview](#boss-room-overview)
- [Install the Boss Room project](#getting-the-project)
  - [Install Git LFS to clone locally](#installing-git-lfs-to-clone-locally)
  - [Direct download](#direct-download)
- [Registering the project with Unity Gaming Services (UGS)](#registering-the-project-with-unity-gaming-services-ugs)
- [Opening the project for the first time](#opening-the-project-for-the-first-time)
- [Exploring the project](#exploring-the-project)
- [Testing multiplayer](#testing-multiplayer)
  - [Local multiplayer setup](#local-multiplayer-setup)
  - [Multiplayer over Internet](#multiplayer-over-internet)
- [Index of resources](#index-of-resources)
  - [Gameplay](#gameplay)
  - [Game flow](#game-flow)
  - [Connectivity](#connectivity)
  - [Services](#services)
  - [Tools and utilities](#tools-and-utilities)
- [Troubleshooting](#troubleshooting)
  - [Bugs](#bugs)
- [Licence](#licence)
- [Other samples](#other-samples)

### Boss Room Overview

Boss Room is designed to be used in its entirety to help you explore the concepts and patterns behind a multiplayer game flow; such as character abilities, casting animations to hide latency, replicated objects, RPCs, and integration with the [Relay](https://unity.com/products/relay), [Lobby](https://unity.com/products/lobby), and [Authentication](https://unity.com/products/authentication) services.

You can use the project as a reference starting point for your own Unity game or use elements individually.

This repository also has a [Utilities](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop) package containing reusable sample scripts. You can install it using the following manifest file entry:

```json
"com.unity.multiplayer.samples.coop": "https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop.git?path=/Packages/com.unity.multiplayer.samples.coop"
```

For more information on the art in Boss Room, see [ART_NOTES.md](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Documentation/ART_NOTES.md).

### Install the Boss Room project

To install the Boss Room project, download or clone it from the [com.unity.multiplayer.samples.coop](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop) repository.

**Note**: If you install the project with Git, you must install Git LFS first.

#### Install Git LFS to clone locally

Boss Room uses Git Large Files Support (LFS) to handle all large assets required locally. See [Git LFS installation options](https://github.com/git-lfs/git-lfs/wiki/Installation) for Windows and Mac instructions. This step is only needed if cloning locally. You can also just download the project which will already include large files.

#### Direct download

You can download the latest version of Boss Room from our [Releases](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/releases) page. Doing so doesn't require you to use Git LFS.

Alternatively, you can click the green **Code** button on the main "Code" github page, then select **Download Zip**. This downloads the branch that you are currently viewing on Github.

:::note
**Note for Windows users**: Using Windows' built-in extraction tool may generate an `Error 0x80010135: Path too long` error window which can invalidate the extraction process. A workaround for this is to shorten the zip file to a single character (for example, "`c.zip`") and move it to the shortest path on your computer (most often right at `C:\`) and retry. If that solution fails, another workaround is to extract the downloaded zip file using [7zip](https://www.7-zip.org/).
:::

### Registering the project with Unity Gaming Services (UGS)

Boss Room leverages several services from UGS to ease connectivity between players. To use these services inside your project, you need to [create an organization](https://support.unity.com/hc/en-us/articles/208592876-How-do-I-create-a-new-Organization-) inside the Unity Dashboard, which will provide you with access to the [Relay](https://docs.unity.com/relay/get-started.html) and [Lobby](https://docs.unity.com/lobby/game-lobby-sample.html) services.

### Opening the project for the first time

Once you have downloaded the project, follow the steps below to get up and running:

1. Check that you have installed the most recent [LTS editor version](https://unity.com/releases/).
    1. Include standalone support for **Windows/Mac** in your Unity Editor installation.
2. Add the project to the Unity Hub by selecting the **Add** button and pointing it to the root folder of the downloaded project.
    1. Unity imports all the project assets the first time you open the project, which takes longer than usual.
3. Select the **Play** button. You can then host a new game or join an existing one using the in-game UI.

### Exploring the project

Boss Room is an eight-player co-op RPG game experience, where players collaborate to fight imps, and then a boss. Players can select between character classes that were designed to provide educational oriented implementations of characteristics commonly found in similar small-scale netcode games. Control model is click-to-move, with skills triggered by a mouse button or hotkey.

One of the eight clients acts as the host/server. That client will use a compositional approach so that its entities have both server and client components.

* The game is server-authoritative, with latency-masking animations.
* Position updates are carried out through NetworkTransform that sync position and rotation.
* Code is organized in domain-based assemblies.

### Testing multiplayer

To see the multiplayer functionality in action, you can:

* Connect with a friend over your local area network
* Connect with a friend over the internet
  * You can use UGS which helps remove the complexities of handling port forwarding
  * Otherwise, the host will need to setup port forwarding on their router

See [Testing multiplayer games locally](../../tutorials/testing/testing_locally.md) for more information.

#### Local multiplayer setup

First, build an executable by selecting **File** > **Build Profiles** > **Build**.

After you have the build, you can launch several instances of the build executable to host or join a game.

If you run several instances locally, you must use the **Change Profile** button to set different profiles for each instance for authentication purposes.

:::note
**Note**: If you're using Mac to run multiple instances of the same app, you need to use the command line. Run `open -n BossRoom.app`.
:::

#### Multiplayer over Internet

Use the following instructions to test Boss Room with multiple players over the Internet.

First, build an executable and distribute it to all players.

:::tip
**Tip**: it's possible to connect between multiple instances of the same executable OR between executables and the Unity Editor that you used to create the executable.
:::

Next, you need to set up a relay. Running the Boss Room over the internet currently requires setting up a relay:

* Boss Room provides an integration with [Unity Relay](../../relay/relay.md). You can find our Unity Relay setup guide [here](../../relay/relay.md).
* Alternatively you can use Port Forwarding. The [https://portforward.com/](https://portforward.com/) site has guides on how to enable port forwarding on a huge number of routers.
* Boss Room uses `UDP` and needs a `9998` external port to be open.
* Make sure your host's address listens on 0.0.0.0 (127.0.0.1 is for local development only).

### Index of resources

The Boss Room sample includes resources for gameplay, game flow, connectivity, Unity services, and other tools and utilities.

#### Gameplay

Boss Room includes the following gameplay resources:

* Action anticipation - AnticipateActionClient() in [Assets/Scripts/Gameplay/Action/Action.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/Action.cs)
* Object spawning for long actions (archer arrow) - LaunchProjectile() in [Assets/Scripts/Gameplay/Action/ConcreteActions/LaunchProjectileAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/LaunchProjectileAction.cs)
* Quick actions with RPCs (ex: mage bolt) - [Assets/Scripts/Gameplay/Action/ConcreteActions/FXProjectileTargetedAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/FXProjectileTargetedAction.cs)
* Teleport - [Assets/Scripts/Gameplay/Action/ConcreteActions/DashAttackAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/DashAttackAction.cs)
* Client side input tracking before an action (archer AOE) - OnStartClient() in [Assets/Scripts/Gameplay/Action/ConcreteActions/AOEAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/AOEAction.cs)
* Time based action (charged shot) - [Assets/Scripts/Gameplay/Action/ConcreteActions/ChargedLaunchProjectileAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/ChargedLaunchProjectileAction.cs)
* Object parenting to animation - [Assets/Scripts/Gameplay/Action/ConcreteActions/PickUpAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/PickUpAction.cs)
* Physics object throwing (using NetworkRigidbody) - [Assets/Scripts/Gameplay/Action/ConcreteActions/TossAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/TossAction.cs)
* NetworkAnimator usage - All actions, in particular [Assets/Scripts/Gameplay/Action/ConcreteActions/ChargedShieldAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/ChargedShieldAction.cs)
* NetworkTransform local space - [Assets/Scripts/Gameplay/GameplayObjects/ServerDisplacerOnParentChange.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/ServerDisplacerOnParentChange.cs)
* Dynamic imp spawning with portals - [Assets/Scripts/Gameplay/GameplayObjects/ServerWaveSpawner.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/ServerWaveSpawner.cs)
* In scene placed dynamic objects (imps) - [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetworkObjectSpawner.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetworkObjectSpawner.cs)
* Static objects (non-destroyables like doors, switches, etc) - [Assets/Scripts/Gameplay/GameplayObjects/SwitchedDoor.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/SwitchedDoor.cs)
* State tracking with breakables, switch, doors
    * [Assets/Scripts/Gameplay/GameplayObjects/Breakable.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/Breakable.cs)
    * [Assets/Scripts/Gameplay/GameplayObjects/FloorSwitch.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/FloorSwitch.cs)
    * [Assets/Scripts/Gameplay/GameplayObjects/SwitchedDoor.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/SwitchedDoor.cs)
* NetworkVariable with Enum - [Assets/Scripts/Gameplay/GameState/NetworkPostGame.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/NetworkPostGame.cs)
* NetworkVariable with custom serialization (GUID) - [Assets/Scripts/Infrastructure/NetworkGuid.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Infrastructure/NetworkGuid.cs)
* NetworkVariable with fixed string - [Assets/Scripts/Utils/NetworkNameState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Utils/NetworkNameState.cs)
* NetworkList with custom serialization (LobbyPlayerState) - [Assets/Scripts/Gameplay/GameState/NetworkCharSelection.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/NetworkCharSelection.cs)
* Persistent player (over multiple scenes) - [Assets/Scripts/Gameplay/GameplayObjects/PersistentPlayer.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/PersistentPlayer.cs)
* Character logic (including player's avatar) - [Assets/Scripts/Gameplay/GameplayObjects/Character/ \
Assets/Scripts/Gameplay/GameplayObjects/Character/ServerCharacter.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/Character)
* Character movements - [Assets/Scripts/Gameplay/GameplayObjects/Character/ServerCharacterMovement.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/Character/ServerCharacterMovement.cs)
* Client driven movements - Boss Room is server driven with anticipation animation. See [Client Driven bitesize](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.bitesize/tree/main/Basic/ClientDriven) for client driven gameplay
* Player spawn - SpawnPlayer() in [Assets/Scripts/Gameplay/GameState/ServerBossRoomState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/ServerBossRoomState.cs)

#### Game flow

Boss Room includes the following game flow resources:

* Application Controller - [Assets/Scripts/ApplicationLifecycle/ApplicationController.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ApplicationLifecycle/ApplicationController.cs)
* Game flow state machine - All child classes in [Assets/Scripts/Gameplay/GameState/GameStateBehaviour.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/GameStateBehaviour.cs)
* Scene loading and progress sharing - [ackages/com.unity.multiplayer.samples.coop/Utilities/SceneManagement/](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/SceneManagement)
* Synced UI with character select - [Assets/Scripts/Gameplay/GameState/ClientCharSelectState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/ClientCharSelectState.cs)
* In-game lobby (character selection) - [Assets/Scripts/Gameplay/GameState/NetworkCharSelection.cs \
Assets/Scripts/Gameplay/GameState/ServerCharSelectState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/NetworkCharSelection.cs)
* Win state - [Assets/Scripts/Gameplay/GameState/PersistentGameState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/PersistentGameState.cs)

#### Connectivity

Boss Room includes the following connectivity resources:

* Connection approval return value with custom messaging - WaitToDenyApproval() in [Assets/Scripts/ConnectionManagement/ConnectionState/HostingState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionState/HostingState.cs)
* Connection state machine - [Assets/Scripts/ConnectionManagement/ConnectionManager.cs \
Assets/Scripts/ConnectionManagement/ConnectionState/](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionManager.cs)
* Session manager - [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/SessionManager.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/SessionManager.cs)
* RTT stats - [Assets/Scripts/Utils/NetworkOverlay/NetworkStats.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Utils/NetworkOverlay/NetworkStats.cs)

#### Services

Boss Room supports integration with Lobby, Relay, and Authentication (UAS). Boss Room includes the following service resources:

* Lobby and relay - host creation - CreateLobbyRequest() in [Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs)
* Lobby and relay - client join - JoinLobbyRequest() in [Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs)
* Relay Join - StartClientLobby() in [Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs)
* Relay Create - StartHostLobby() in [Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs)
* Authentication - EnsurePlayerIsAuthorized() in [Assets/Scripts/UnityServices/Auth/AuthenticationServiceFacade.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/UnityServices/Auth/AuthenticationServiceFacade.cs)

#### Tools and utilities

Boss Room includes the following tools and utilities:

* Networked message channel (inter-class and networked messaging) - [Assets/Scripts/Infrastructure/PubSub/NetworkedMessageChannel.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Infrastructure/PubSub/NetworkedMessageChannel.cs)
* Simple interpolation - [Assets/Scripts/Utils/PositionLerper.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Utils/PositionLerper.cs)
* Network Object Pooling - [Assets/Scripts/Infrastructure/NetworkObjectPool.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Infrastructure/NetworkObjectPool.cs)
* NetworkGuid - [Assets/Scripts/Infrastructure/NetworkGuid.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Infrastructure/NetworkGuid.cs)
* Netcode hooks - [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetcodeHooks.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetcodeHooks.cs)
* Spawner for in-scene objects - [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetworkObjectSpawner.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetworkObjectSpawner.cs)
* Session manager for reconnection - [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/SessionManager.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/SessionManager.cs)
* Relay utils - [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/UnityRelayUtilities.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/UnityRelayUtilities.cs)
* Client authority - [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/ClientAuthority/ClientNetworkTransform.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/ClientAuthority/ClientNetworkTransform.cs)
* Scene utils with synced loading screens - [Packages/com.unity.multiplayer.samples.coop/Utilities/SceneManagement/](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/SceneManagement)
* RNSM custom config - [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/RNSM/CustomNetStatsMonitorConfiguration.asset](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/RNSM/CustomNetStatsMonitorConfiguration.asset)
* NetworkSimulator usage through UI - [Assets/Scripts/Utils/NetworkSimulatorUIMediator.cs ](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Utils/NetworkSimulatorUIMediator.cs)
* ParrelSync - [Packages/manifest.json](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/manifest.json)

### Troubleshooting

#### Bugs

- Report bugs in Boss Room using Github [issues](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/issues)
- Report Netcode for GameObjects bugs using Netcode for GameObjects Github [issues](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/issues)
- Report Unity bugs using the [Unity bug submission process](https://unity3d.com/unity/qa/bug-reporting).

### Licence

Boss Room is licenced under the Unity Companion Licence. See [LICENSE.md](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/LICENSE.md) for more legal information.

Visit the following links to learn more about Unity Netcode and Boss Room.

* [About Netcode for GameObjects](../../index.md)
* [Boss Room Actions Walkthrough](bossroom-actions.md)
* [NetworkObject Parenting inside Boss Room](networkobject-parenting.md)
* [NetworkRigidbody inside Boss Room](networkrigidbody.md)
* [Dynamically spawning NetworkObject in Boss Room](spawn-networkobjects.md)

### Other samples

The [Bitesize Samples](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.bitesize) repository is currently being expanded and has a collection of smaller samples and games showcasing sub-features of Netcode for GameObjects. You can review these samples with documentation to better understand our APIs and features.

## Links discovered
- [patterns](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bossroom/bossroom-actions.md)
- [6000 LTS](https://unity.com/releases)
- [Discord](https://discord.gg/mNgM2XRDpb)
- [Forum](https://forum.unity.com/forums/multiplayer.26/)
- [Relay](https://unity.com/products/relay)
- [Lobby](https://unity.com/products/lobby)
- [Authentication](https://unity.com/products/authentication)
- [Utilities](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop)
- [ART_NOTES.md](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Documentation/ART_NOTES.md)
- [com.unity.multiplayer.samples.coop](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop)
- [Git LFS installation options](https://github.com/git-lfs/git-lfs/wiki/Installation)
- [Releases](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/releases)
- [7zip](https://www.7-zip.org/)
- [create an organization](https://support.unity.com/hc/en-us/articles/208592876-How-do-I-create-a-new-Organization-)
- [Relay](https://docs.unity.com/relay/get-started.html)
- [Lobby](https://docs.unity.com/lobby/game-lobby-sample.html)
- [LTS editor version](https://unity.com/releases/)
- [Testing multiplayer games locally](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/tutorials/testing/testing_locally.md)
- [Unity Relay](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/relay/relay.md)
- [here](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/relay/relay.md)
- [https://portforward.com/](https://portforward.com/)
- [Assets/Scripts/Gameplay/Action/Action.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/Action.cs)
- [Assets/Scripts/Gameplay/Action/ConcreteActions/LaunchProjectileAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/LaunchProjectileAction.cs)
- [Assets/Scripts/Gameplay/Action/ConcreteActions/FXProjectileTargetedAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/FXProjectileTargetedAction.cs)
- [Assets/Scripts/Gameplay/Action/ConcreteActions/DashAttackAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/DashAttackAction.cs)
- [Assets/Scripts/Gameplay/Action/ConcreteActions/AOEAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/AOEAction.cs)
- [Assets/Scripts/Gameplay/Action/ConcreteActions/ChargedLaunchProjectileAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/ChargedLaunchProjectileAction.cs)
- [Assets/Scripts/Gameplay/Action/ConcreteActions/PickUpAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/PickUpAction.cs)
- [Assets/Scripts/Gameplay/Action/ConcreteActions/TossAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/TossAction.cs)
- [Assets/Scripts/Gameplay/Action/ConcreteActions/ChargedShieldAction.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ConcreteActions/ChargedShieldAction.cs)
- [Assets/Scripts/Gameplay/GameplayObjects/ServerDisplacerOnParentChange.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/ServerDisplacerOnParentChange.cs)
- [Assets/Scripts/Gameplay/GameplayObjects/ServerWaveSpawner.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/ServerWaveSpawner.cs)
- [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetworkObjectSpawner.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetworkObjectSpawner.cs)
- [Assets/Scripts/Gameplay/GameplayObjects/SwitchedDoor.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/SwitchedDoor.cs)
- [Assets/Scripts/Gameplay/GameplayObjects/Breakable.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/Breakable.cs)
- [Assets/Scripts/Gameplay/GameplayObjects/FloorSwitch.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/FloorSwitch.cs)
- [Assets/Scripts/Gameplay/GameState/NetworkPostGame.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/NetworkPostGame.cs)
- [Assets/Scripts/Infrastructure/NetworkGuid.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Infrastructure/NetworkGuid.cs)
- [Assets/Scripts/Utils/NetworkNameState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Utils/NetworkNameState.cs)
- [Assets/Scripts/Gameplay/GameState/NetworkCharSelection.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/NetworkCharSelection.cs)
- [Assets/Scripts/Gameplay/GameplayObjects/PersistentPlayer.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/PersistentPlayer.cs)
- [Assets/Scripts/Gameplay/GameplayObjects/Character/ \
Assets/Scripts/Gameplay/GameplayObjects/Character/ServerCharacter.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/Character)
- [Assets/Scripts/Gameplay/GameplayObjects/Character/ServerCharacterMovement.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/Character/ServerCharacterMovement.cs)
- [Client Driven bitesize](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.bitesize/tree/main/Basic/ClientDriven)
- [Assets/Scripts/Gameplay/GameState/ServerBossRoomState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/ServerBossRoomState.cs)
- [Assets/Scripts/ApplicationLifecycle/ApplicationController.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ApplicationLifecycle/ApplicationController.cs)
- [Assets/Scripts/Gameplay/GameState/GameStateBehaviour.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/GameStateBehaviour.cs)
- [ackages/com.unity.multiplayer.samples.coop/Utilities/SceneManagement/](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/SceneManagement)
- [Assets/Scripts/Gameplay/GameState/ClientCharSelectState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/ClientCharSelectState.cs)
- [Assets/Scripts/Gameplay/GameState/NetworkCharSelection.cs \
Assets/Scripts/Gameplay/GameState/ServerCharSelectState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/NetworkCharSelection.cs)
- [Assets/Scripts/Gameplay/GameState/PersistentGameState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameState/PersistentGameState.cs)
- [Assets/Scripts/ConnectionManagement/ConnectionState/HostingState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionState/HostingState.cs)
- [Assets/Scripts/ConnectionManagement/ConnectionManager.cs \
Assets/Scripts/ConnectionManagement/ConnectionState/](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionManager.cs)
- [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/SessionManager.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/SessionManager.cs)
- [Assets/Scripts/Utils/NetworkOverlay/NetworkStats.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Utils/NetworkOverlay/NetworkStats.cs)
- [Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs)
- [Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs)
- [Assets/Scripts/UnityServices/Auth/AuthenticationServiceFacade.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/UnityServices/Auth/AuthenticationServiceFacade.cs)
- [Assets/Scripts/Infrastructure/PubSub/NetworkedMessageChannel.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Infrastructure/PubSub/NetworkedMessageChannel.cs)
- [Assets/Scripts/Utils/PositionLerper.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Utils/PositionLerper.cs)
- [Assets/Scripts/Infrastructure/NetworkObjectPool.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Infrastructure/NetworkObjectPool.cs)
- [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetcodeHooks.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/NetcodeHooks.cs)
- [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/UnityRelayUtilities.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/UnityRelayUtilities.cs)
- [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/ClientAuthority/ClientNetworkTransform.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/ClientAuthority/ClientNetworkTransform.cs)
- [Packages/com.unity.multiplayer.samples.coop/Utilities/SceneManagement/](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/SceneManagement)
- [Packages/com.unity.multiplayer.samples.coop/Utilities/Net/RNSM/CustomNetStatsMonitorConfiguration.asset](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/RNSM/CustomNetStatsMonitorConfiguration.asset)
- [Assets/Scripts/Utils/NetworkSimulatorUIMediator.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Utils/NetworkSimulatorUIMediator.cs)
- [Packages/manifest.json](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/manifest.json)
- [issues](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/issues)
- [issues](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/issues)
- [Unity bug submission process](https://unity3d.com/unity/qa/bug-reporting)
- [LICENSE.md](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/LICENSE.md)
- [About Netcode for GameObjects](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/index.md)
- [Boss Room Actions Walkthrough](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bossroom/bossroom-actions.md)
- [NetworkObject Parenting inside Boss Room](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bossroom/networkobject-parenting.md)
- [NetworkRigidbody inside Boss Room](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bossroom/networkrigidbody.md)
- [Dynamically spawning NetworkObject in Boss Room](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bossroom/spawn-networkobjects.md)
- [Bitesize Samples](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.bitesize)

--- com.unity.netcode.gameobjects/Documentation~/basics/scenemanagement/scene-management-overview.md ---
# Scene management overview

## Netcode Scene Management
Generally speaking, netcode aware scene management complexity can vary depending upon your project's needs and goals. Netcode for GameObjects (Netcode) provides you with two potential paths:

### [Integrated Scene Management](using-networkscenemanager.md):
The Netcode for GameObjects scene management solution is enabled by default and provides you with a fully functional netcode scene management solution.

> [!NOTE]
> It's recommended that advanced developers new to Netcode for GameObjects become familiar with the integrated scene management solution before creating their own netcode scene management solution.

### [Custom Scene Management](custom-management.md):
If your project has needs that go beyond the scope of the Netcode integrated scene management solution, you can disable scene management in the editor through NetworkManager's properties.

> [!NOTE]
> Writing your own scene management can be time consuming and complex. It's recommended that only advanced users already familiar with Netcode for GameObjects take this path.


## Links discovered
- [Integrated Scene Management](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/scenemanagement/using-networkscenemanager.md)
- [Custom Scene Management](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/scenemanagement/custom-management.md)

--- Examples/CharacterControllerMovingBodies/Readme.md ---
# Netcode for GameObjects Smooth Transform Space Transitions
## Non-Rigidbody CharacterController Parenting with Moving Bodies
![image](https://github.com/user-attachments/assets/096953ca-5d7d-40d5-916b-72212575d258)
This example provides you with the fundamental building blocks for smooth synchronized transitions between two non-rigidbody based objects. This includes transitioning from world to local, local to world, and local to local transform spaces.

### The `CharacterController`
![image](https://github.com/user-attachments/assets/13c627bd-920d-40c8-8947-69aa37b44ebf)
The `CharacterController` component is assigned to the `PlayerNoRigidbody` player prefab. It includes a `MoverScriptNoRigidbody` that handles all of the player's motion and includes some additional "non-rigidbody to non-rigidbody" collision handling logic that is applied when a player bumps into a rotation and/or moving body. The player prefab includes a child "PlayerBallPrime" that rotates around the player in local space (nested NetworkTransform), and the "PlayerBallPrime" has 3 children ("PlayerBallChild1-3") that each rotates around a different axis of the "PlayerBallPrime". While the end resulting effect is kind of cool looking, they provide a point of reference as to whether there is any deviation of each child's given axial path relative to each parent level. Additionally, it shows how tick synchronized nested NetworkTransform components keep synchronized with their parent and how that persists when the parent is parented or has its parent removed.

### Rotating Bodies
#### StationaryBodyA&B
The stationary bodies are representative of changing the parenting of a `NetworkObject` between two `NetworkObject` instances while remaining in local space, interpolating, and smoothly transitioning between the two parents.
![image](https://github.com/user-attachments/assets/1b234fdc-efc9-4053-a947-531c4fe5dd96)

#### RotatingBody
The RotatingBody are just provide an example of a rotating non-Rigidbody object and one way to handle a rotation based collision. This also tests world to local and local to world transform space updates.
![image](https://github.com/user-attachments/assets/f5da2374-08b6-4eeb-9a4a-cddc67ecb33b)

#### MovingRotatingBody & ElevatorBody
Both of these bodies use a simple path to follow.
The MovingRotatingBody moves between two points on the world Z-axis and rotates while moving. The ElevatorBody moves between 4 points (forming a rectangular path) to show motion on more than one axis.
![image](https://github.com/user-attachments/assets/146912eb-0dcc-4089-a6ba-3e0dbb51fd4e)


### Example Limitations
This example is primarily to provide a starting point for anyone interested in exploring a non-Rigidbody motion based project and is not to be considered a full working solution but more of a place to start. As an example. you might notice there is no consideration of Y-axis motion when on the elevator so it impacts the `MoverScriptNoRigidbody` jumping. This could be extended to take into consideration the bodies within the `RotatingBodyLogic` script that would increase the upward velocity amount when on a moving body that does move in the Y Axis. This could be further extended by adding a `MonoBehaviour` component to the path points that define its direction of movement or by a normalized direction vector between points to determine the movement of the body. These kind of details are left up to you to determine what style best fits your project.



## Links discovered
- [image](https://github.com/user-attachments/assets/096953ca-5d7d-40d5-916b-72212575d258)
- [image](https://github.com/user-attachments/assets/13c627bd-920d-40c8-8947-69aa37b44ebf)
- [image](https://github.com/user-attachments/assets/1b234fdc-efc9-4053-a947-531c4fe5dd96)
- [image](https://github.com/user-attachments/assets/f5da2374-08b6-4eeb-9a4a-cddc67ecb33b)
- [image](https://github.com/user-attachments/assets/146912eb-0dcc-4089-a6ba-3e0dbb51fd4e)

--- Examples/OverridingScenesAndPrefabs/Readme.md ---
# Netcode for GameObjects <br /> Overriding Scenes and NetworkPrefabs
![image](Images/EndResultView.png)
_Supports using the client-server and distributed authority network topologies._


This example, based on the [Netcode for GameObjects Smooth Transform Space Transitions](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/tree/example/server-client-unique-scenes-and-prefabs/Examples/CharacterControllerMovingBodies), provides and overview of how to use:
- [`NetworkPrefabHandler`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@2.0/api/Unity.Netcode.NetworkPrefabHandler.html) as a way to dynamically control overriding network prefabs and how they are instantiated.
  - For this example, the prefab handler is overriding the player prefab.
    - *You will only see the end result of this portion of the example by running a server instance (i.e. not host) as that will create instances of the ServerPlayer network prefab instead of the ClientPlayer network prefab.*
- [`NetworkSceneManager.SetClientSynchronizationMode`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@2.0/api/Unity.Netcode.NetworkSceneManager.html#Unity_Netcode_NetworkSceneManager_SetClientSynchronizationMode_UnityEngine_SceneManagement_LoadSceneMode_) to change the default client synchronization mode (SingleMode) to an additive client synchronization mode.
  - Additive client synchronization mode will prevent already existing preloaded scenes from being unloaded and will use them, as opposed to reloading the same scene, during a client's initial synchronization.
    - *This is a server-side only setting that gets sent to the clients during the initial synchronization process.*
- [`NetworkSceneManager.VerifySceneBeforeLoading`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@2.0/api/Unity.Netcode.NetworkSceneManager.html#Unity_Netcode_NetworkSceneManager_VerifySceneBeforeLoading) in order to control what scenes the server will include when sending the synchronization message to newly connecting clients.

## Building The Project
This example uses unity services. Upon loading the project for the first time, you will want to set your organization and create a new cloud project. This is the only required setting to create stand alone builds for this project.
![image](Images/ServiceSettings.png)

## Terminology

### Shared Scenes
These are scenes that will be synchronized between a server or session owner and used when a client runs through the initial synchronization process.
- You can populate these scenes with in-scene placed or dynamically spawned NetworkObjects.
- These scenes **must be** within the scenes in build list.

### Local Scenes
These are scenes that are always only local to the application instances (server or client) and will not be synchronized.
- You should not populate these scenes with NetworkObjects.
  -However, this example includes one of several ways you can associate a `MonoBehaviour` with a NetworkBehaviour.
- These scenes can be dynamically created, included in the scenes in build list, or be an addressable loaded at some point prior to connecting or while connected to a session.

## Client Synchronization and Scene Validation
By combining these two scene management features, you can preload scenes:
- That should not be synchronized and/or are specific to the server or client side of a network session.
- That you know will be synchronized in order to reduce the client synchronization process.

This approach can be useful if you:
- Want to have server-side only content that is loaded only on a server.
- Want to load local scenes for UI purposes or content that you don't need to synchronize.
    - *This example separates the colliders of the scene geometry from the mesh filters and renderers. Clients are the only instances that load the graphics related scene assets. Both clients and server load a shared scene that contains in-scene placed NetworkObjects and the colliders for the "floor"*

[Read the documentation for more information about client synchronization mode.](https://docs-multiplayer.unity3d.com/netcode/current/basics/scenemanagement/client-synchronization-mode/)

### Note on Distributed Authority
Since a distributed authority network topology is designed to keep all clients synchronized enough with the SDK level states in order to allow for rapid session owner promotion, the most common design approach (relative to this example) is to have local client scenes and the scenes to be synchronized between clients. However, there could be edge case scenarios where perhaps you only want there to only ever be a single session owner and upon the session owner disconnecting all clients will disconnect themselves too. Under this type of design, it would be valid to have local "server-side" (i.e. session owner) scenes. This example implements this by default for example purposes only. If you want your project to use session owner promotion, then it is highly recommended to only use the have client-side local and shared scenes approach.

## The Bootstrap Loading Process
![image](Images/ScenesView.png)

### BootstrapScene
The first scene loaded. Contains a `NetworkManagerBootstrapper` in-scene placed `GameObject`.
![image](Images/NetworkManagerBootstrapper.png)

#### NetworkManager Bootstrapper (component)
![image](Images/NetworkManagerBootstrapperProperties.png)

Handles the pre-network session menu interface along with connect and disconnect events. Since it is derived from NetworkManager, it also defines the network session configuration (i.e. `NetworkConfig`). The `NetworkManagerBootstrapper` in-scene placed `GameObject` gets loaded into the DDOL scene automatically and will persist throughout the application life time. This derived class requires the `SceneBootstrapLoader` component.

#### Scene Bootstrap Loader (component)
![image](Images/SceneBootstrapLoader.png)

This component handles preloading scenes for both the client(s) and server. Upon being started, the `NetworkManagerBootstrapper` component will invoke `SceneBootstrapLoader.LoadMainMenu` method that kicks off the scene preloading process.
- **Default Active Scene Asset:** There is always an active scene. For this example, the default active scene is the same on both the client and server relative properties. *The active scene is always (and should always) be a "shared scene".*
  - This could represent a lobby or network session main menu (i.e. create or join session).
  - Both the client and the server preload this scene prior to starting a network session.
- **Local Scene Assets:** There could be times where you want to load scenes specific to the NetworkManager instance type (i.e. client, host, or server).
  - These scenes are not synchronized by a server (client-server) or session owner (distributed authority).
  - Having different locally loaded scenes is typically more common in a client-server network topology.
  - In a distributed authority network topology, it is more common to keep all scenes synchronized but you might want to load non-synchronized scenes (i.e. menu interface for settings etc).
- **Shared Scene Assets:** These scenes are synchronized by the server or session owner (depending upon network topology used).
  - This example only provides a server specific set of scene assets to load because you can always add those same scenes to the client-side locally loaded scenes.
    - If the server synchronizes any scenes from the share scene assets with a client that already has those scene loaded, then those locally loaded scenes on the client side will be used during synchronization.
    - Depending upon how many scenes you want to synchronize and/or how large one or more scenes are, preloading scenes can reduce synchronization time for clients.
The `NetworkManagerBootstrapper` uses the `SceneBootstrapLoader` component to start the creation or joining of a network session. The logical flow looks like:
- `NetworkManagerBootstrapper` invokes `SceneBootstrapLoader.StartSession` when you click one of the (very simple) main menu buttons and passes in the mode/type of NetworkManager to start.
- Based on the NetworkManager type being started, the `SceneBootstrapLoader` will then:
 - Load the default active scene using the `UnityEngine.SceneManagement.SceneManager`.
 - Load the local scenes using the `UnityEngine.SceneManagement.SceneManager`.
 - Then it will create or join a network session by either starting the NetworkManager or connecting to the sesssion via multiplayer services.
 - _Server or Session Owner only:_
   - If any, load the shared (i.e. synchronized) scene assets using the `NetworkSceneManager`

#### Network Prefab Override Handler (component)
![image](Images/NetworkPrefabOverrideHandler.png)

This `MonoBehaviour` component implements the `INetworkPrefabInstanceHandler` interface and registers with the `NetworkManafer.PrefabHandler` when started. It contains two network prefab properties:
- Network Prefab: This is the network prefab that you want to override. In this example, it is what is used to spawn a server-side player prefab and is what is defined within the `NetworkManagerBootstrapper` component.
- Network Prefab Override: This is what is used to spawn a player prefab on the client-side.

At runtime the local NetworkManager instance is a client/host or server and will spawn either the ClientPlayer or ServerPlayer prefab. The `NetworkPrefabOverrideHandler` does not need to be a NetworkBehaviour and sometimes (especially for overriding the player prefab) it is better to register prefab handlers prior to starting the NetworkManager.

## Input Controls
The following is a list of the input controls used in this project:
### Clients Only
- `W,A,S,D`: Movement (forward, backward, turn left, turn right)
  - *Arrow keys can be used as well.*
- `SPACE`: Jumps
- `P`: Enable disable player name and information.
- `C`: Toggles the player child object movement (continuous or only when the player moves).

### Server Only
- `[,]`: Right and left bracket keys will follow spawned players.
- `Backspace`: Stop following a player.

## Example Limitations
This example is primarily to provide a starting point for anyone interested in exploring how to override (customize) the scene loading and/or prefab instantiation. It does not cover all possible use case scenarios. It is recommended to explore this example, modify it, and read the [Netcode for GameObjects documentation](https://docs-multiplayer.unity3d.com/netcode/current/about/) for more details.








## Links discovered
- [image](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/Examples/OverridingScenesAndPrefabs/Images/EndResultView.png)
- [Netcode for GameObjects Smooth Transform Space Transitions](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/tree/example/server-client-unique-scenes-and-prefabs/Examples/CharacterControllerMovingBodies)
- [`NetworkPrefabHandler`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@2.0/api/Unity.Netcode.NetworkPrefabHandler.html)
- [`NetworkSceneManager.SetClientSynchronizationMode`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@2.0/api/Unity.Netcode.NetworkSceneManager.html#Unity_Netcode_NetworkSceneManager_SetClientSynchronizationMode_UnityEngine_SceneManagement_LoadSceneMode_)
- [`NetworkSceneManager.VerifySceneBeforeLoading`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@2.0/api/Unity.Netcode.NetworkSceneManager.html#Unity_Netcode_NetworkSceneManager_VerifySceneBeforeLoading)
- [image](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/Examples/OverridingScenesAndPrefabs/Images/ServiceSettings.png)
- [Read the documentation for more information about client synchronization mode.](https://docs-multiplayer.unity3d.com/netcode/current/basics/scenemanagement/client-synchronization-mode/)
- [image](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/Examples/OverridingScenesAndPrefabs/Images/ScenesView.png)
- [image](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/Examples/OverridingScenesAndPrefabs/Images/NetworkManagerBootstrapper.png)
- [image](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/Examples/OverridingScenesAndPrefabs/Images/NetworkManagerBootstrapperProperties.png)
- [image](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/Examples/OverridingScenesAndPrefabs/Images/SceneBootstrapLoader.png)
- [image](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/Examples/OverridingScenesAndPrefabs/Images/NetworkPrefabOverrideHandler.png)
- [Netcode for GameObjects documentation](https://docs-multiplayer.unity3d.com/netcode/current/about/)

--- Examples/PingTool/README.md ---
# Netcode for GameObjects Ping Tool
This project is only for example purposes and provides an example of how one can acquire ping times between clients during a network session. It also includes integration with the Realtime Network Stats Monitor tool that provides additional relative (and useful) network stats.

## Ping Tool
The ping tool lives in its own assembly for convenience purposes:

![image](https://github.com/user-attachments/assets/d2fdecda-e8ec-4d1a-ae6e-4590c6fcce40)

The **Sample** scene includes an in-scene placed instance of the **PingTool**:

![image](https://github.com/user-attachments/assets/4e7c8af1-bc15-4b93-95f1-86367abea5ab)

The **Net Stats Monitor Toggle** property allows you to select the key to press to toggle the RNSM visibility (the **tab** key is the default).

The ping tool includes a runtime "Ping Rate" slider that provides you with the ability to adjust the number of pings to send per second. This is only to demonstrate you really don't need to send more than 1 or 2 pings per second to get reasonable results.


## Ping Tool RNSM Integration
Depending upon the network topology selected in the **NetworkManager** depends upon how information is displayed.
The RTT values represnt the UnityTransport's Round Trip Time calculated values.
The Ping values represent the time it takes to send a message from Client-A to Client-B which includes the time it takes to be serialized, added to the outbound queue, sent via UTP, received by UTP, deserialized and processed on the Client-B side. The delta time is based off of the delta network server time on Client-A and Client-B.

### Client-Server Network Topology
When using a client-server network topology, upon first starting a host with no other connected clients you should see no stats other than the frame frate:
**(Host View)**

![image](https://github.com/user-attachments/assets/9c5c16f7-bb41-4c6b-945d-b3dfcb3a3fea)

When you connect one or more clients:
- From the host side, you will begin to see the RTT and ping times to each connected client:
**(Host View)**
  
![image](https://github.com/user-attachments/assets/b130f453-6acf-4e1e-b264-d69c7ae7be23)

- From a client side, you will see the RTT to the server and a ping time for each connected client:
**(Client-2 View)**
  
![image](https://github.com/user-attachments/assets/73e7d93a-5f6c-4c0f-b044-ef35315f33a0)

### Distributed Authority Network Topology
When using a distributed authority network topology, upon creating a session you will immediately see the RTT to the service displayed:

![image](https://github.com/user-attachments/assets/c1f36a49-9986-4b26-b78d-feadc8f00d2a)

As more clients join the session you will start to see the ping times to each client:

![image](https://github.com/user-attachments/assets/06abcaac-693f-4b7f-bf13-03c63dd684bf)

## About This Example
While we will make efforts to update this project, it is for example purposes only and could have bugs or even areas where it could be improved. If you plan on using this example or the PingTool assembly for your project, we recommend you cusotmize it depending upon your project's needs and goals.









## Links discovered
- [image](https://github.com/user-attachments/assets/d2fdecda-e8ec-4d1a-ae6e-4590c6fcce40)
- [image](https://github.com/user-attachments/assets/4e7c8af1-bc15-4b93-95f1-86367abea5ab)
- [image](https://github.com/user-attachments/assets/9c5c16f7-bb41-4c6b-945d-b3dfcb3a3fea)
- [image](https://github.com/user-attachments/assets/b130f453-6acf-4e1e-b264-d69c7ae7be23)
- [image](https://github.com/user-attachments/assets/73e7d93a-5f6c-4c0f-b044-ef35315f33a0)
- [image](https://github.com/user-attachments/assets/c1f36a49-9986-4b26-b78d-feadc8f00d2a)
- [image](https://github.com/user-attachments/assets/06abcaac-693f-4b7f-bf13-03c63dd684bf)

--- com.unity.netcode.gameobjects/Documentation~/tutorials/command-line-helper.md ---
#  Create a command-line helper for testing

This page walks you through how to create a command-line helper that launches your project outside the Unity Editor to make testing builds easier.

Using a command-line helper script to launch multiple instances of a game build isn't the only way to test a multiplayer game. You can also use the Unity Editor or the [Multiplayer Play Mode package](https://docs-multiplayer.unity3d.com/mppm/current/about/).

## Create the command-line helper

1. Right-click the **Assets** folder in the **Projects** tab, then select **Create** > **Folder**.
2. Name the new folder **Scripts**.
3. Right-click the **Scripts** folder you created, then select **Create** > **C# Script**.
4. Name the script **NetworkCommandLine**.
5. Right-click on **NetworkManager** within the **Hierarchy** list, then select **Create Empty**.
6. Name the new GameObject **NetworkCommandLine**.
7. With the `NetworkCommandLine` GameObject selected, select **Add Component** from the **Inspector** tab.
8. For the new component, select **Scripts** > **Network Command Line** (the `NetworkCommandLine.cs` script you created earlier).
9. Double-click on the **NetworkCommandLine.cs** script from the **Project** tab to open it in a text editor.
10. Edit the `NetworkCommandLine.cs` script to match the following code snippet:

```csharp
using System.Collections.Generic;
using Unity.Netcode;
using UnityEngine;

public class NetworkCommandLine : MonoBehaviour
{
   private NetworkManager netManager;

   void Start()
   {
       netManager = GetComponentInParent<NetworkManager>();

       if (Application.isEditor) return;

       var args = GetCommandlineArgs();

       if (args.TryGetValue("-mode", out string mode))
       {
           switch (mode)
           {
               case "server":
                   netManager.StartServer();
                   break;
               case "host":
                   netManager.StartHost();
                   break;
               case "client":

                   netManager.StartClient();
                   break;
           }
       }
   }

   private Dictionary<string, string> GetCommandlineArgs()
   {
       Dictionary<string, string> argDictionary = new Dictionary<string, string>();

       var args = System.Environment.GetCommandLineArgs();

       for (int i = 0; i < args.Length; ++i)
       {
           var arg = args[i].ToLower();
           if (arg.StartsWith("-"))
           {
               var value = i < args.Length - 1 ? args[i + 1].ToLower() : null;
               value = (value?.StartsWith("-") ?? false) ? null : value;

               argDictionary.Add(arg, value);
           }
       }
       return argDictionary;
   }
}
```

11. Save the file, then return to the Unity Editor.
12. Open the Build Settings window by selecting **File** > **Build Settings**.
13. Select **Player Settings…**.
14. Beneath **Settings for PC, Mac, & Linux Standalone**, select **Resolution and Presentation** to open the section options.
15. From **Resolution** > **Fullscreen Mode**, change **Fullscreen Window** to **Windowed**.
16. Return to the Editor main window and save your scene.

## Test the command-line helper

Follow these instructions to test that the command-line helper script works.

1. Select **File** > **Build and Run**.
2. Create a new folder called `Build` inside your Hello World project folder.
3. **Save As** the binary `HelloWorld`.

Saving the project in this way causes the Unity Editor to build and launch the project in a new window. After it launches (and displays the plane), close the window you just launched.

### Test on Windows

To test on Windows:

1. Open the Command Prompt.
2. Use the following command to launch the server and the client. Make sure to replace the placeholder text within the angled brackets (`< >`) for all commands.
    * You might get a [UAC prompt](https://learn.microsoft.com/windows/security/identity-protection/user-account-control/how-user-account-control-works) requesting permission to run the executable. Allow the executable to run to continue.

Command to start the server:

```cmd
<Path to Project>\HelloWorld.exe -mode server
```

Command to start the client:

```cmd
<path to project>\HelloWorld.exe -mode client
```

To run these commands on a single line:

```cmd
<path to project>\HelloWorld.exe -mode server & <path to project>\HelloWorld.exe -mode client
```

Here's an example of what your command might look like when you replace the placeholder text in `< >`:

```cmd
<path to project>\HelloWorld.exe -mode server & <path to project>\HelloWorld.exe -mode client
```
There's no standard out stream on Windows by default, so you need to view the `Debug.log` file for the outputs. You can find the `Debug.log` files in:

```cmd
C:\Users\username\AppData\LocalLow\CompanyName\ProductName\Player.log
```

Where the `CompanyName` defaults to `DefaultCompany` for a new project and `ProductName` equals to the project's name.

You can also change the Windows commands to create a `log.txt` file in the same folder as your `HelloWorld` folder.

Change the commands as follows:

Server command:

```cmd
<Path to Project>\HelloWorld.exe -logfile log-server.txt -mode server
```

Client command:

```cmd
<Path to Project>\HelloWorld.exe  -logfile log-client.txt -mode client
```

Example (Running as a single command line):

```cmd
C:\Users\sarao>HelloWorld\Build\HelloWorld.exe -logfile log-server.txt -mode server & HelloWorld\Build\HelloWorld.exe -logfile log-client.txt -mode client
```

### Test on macOS

Use the following instructions if you're using macOS:

1. Open the Terminal app.
2. Use the following command to launch the server and the client. Make sure to replace the placeholder text within the angled brackets (`< >`) for all commands.

Command to start the server:

```shell
<Path to Project>/HelloWorld.app/Contents/MacOS/<Project Name> -mode server -logfile -
```

Command to start the client:

```shell
<Path to Project>/HelloWorld.app/Contents/MacOS/<Project Name> -mode client -logfile -
```

To run both as a single command:

```shell
<Path to Project>/HelloWorld.app/Contents/MacOS/<Project Name> -mode server -logfile - & <Path to Project>HelloWorld.app/Contents/MacOS/<Project Name> -mode client -logfile -
```


## Links discovered
- [Multiplayer Play Mode package](https://docs-multiplayer.unity3d.com/mppm/current/about/)
- [UAC prompt](https://learn.microsoft.com/windows/security/identity-protection/user-account-control/how-user-account-control-works)

--- com.unity.netcode.gameobjects/Documentation~/tutorials/get-started-with-ngo.md ---
# Client-server quickstart for Netcode for GameObjects

Use this guide to learn how to create your first [client-server](../terms-concepts/client-server.md) Netcode for GameObjects project. It walks you through creating a simple Hello World project that implements the basic features of Netcode for GameObjects.

Refer to [Testing the command line helper](command-line-helper.md) to learn how to test your builds with a command-line helper.

## Prerequisites

Before you begin, you need the following:

- An active Unity account with a valid license.
- The [Unity Hub](https://unity.com/download).
- A supported version of the Unity Editor. Refer to the [Netcode for GameObjects requirements](https://docs-multiplayer.unity3d.com/netcode/current/installation).

Before continuing, create a new project using Unity Editor version 2022.3 or later.

### Create an `Assets/Scripts/` folder

If you don't already have an `Assets/Scripts/` folder, create one now:

1. Right-click the **Assets** folder in the **Projects** tab, then select **Create** > **Folder**.
2. Name the new folder **Scripts**.

This is where you'll keep all your scripts as part of this Hello World project.

## Install Netcode for GameObjects

Refer to [Install Netcode for GameObjects](https://docs-multiplayer.unity3d.com/netcode/current/installation).

## Add the basic components

This section guides you through adding the essential components of a networked game:

- [A NetworkManager component](#create-the-networkmanager-component)
- [A player object](#create-an-object-to-spawn-for-each-connected-player)
- [A scene](#add-your-scene-to-the-build)

### Create the NetworkManager component

This section guides you through creating a NetworkManager component.

First, create the NetworkManager component:

1. Right-click in the **Hierarchy** tab, then select **Create Empty** to create an empty GameObject.

![](../images/get-started-ngo/ngo-10.png)

2. Rename the empty GameObject **NetworkManager**.

![](../images/get-started-ngo/ngo-11.png)

3. Select **NetworkManager**, then select **Add Component** from the **Inspector** tab.

![](../images/get-started-ngo/ngo-6.png)

4. Select **Netcode** > **NetworkManager** from the component list.

![](../images/get-started-ngo/ngo-1.png)

5. In the Inspector tab, locate the Unity Transport section, then select **UnityTransport** as the **Protocol type**.

![](../images/get-started-ngo/ngo-13.png)

![](../images/get-started-ngo/ngo-14.png)

6. Save the scene by pressing **Ctrl/Cmd** + **S** (or by selecting **File** > **Save**).

### Create an object to spawn for each connected player

> [!NOTE]
> When you drop the prefab into the **PlayerPrefab** slot, you're telling the library that when a client connects to the game, it automatically spawns this prefab as the character for the connecting client. Netcode for GameObjects won't spawn a player object if you don't have any prefab set as the **PlayerPrefab**. Refer to [Player Objects](../components/core/networkobject.md#finding-playerobjects).


This section guides you through creating an object that spawns for each connected player.

1. In the Unity Editor, right-click within the **Hierarchy** tab, then select **3D Object** > **Capsule**.
2. Name the Capsule Object **Player**.
3. With Player selected, add a NetworkObject component in the **Inspector** tab by selecting **Add Component** > **Netcode** > **NetworkObject**.
4. Right-click within the **Assets** folder under the **Project** tab, then select **Create** > **Folder**.
5. Name the folder **Prefabs**.
6. Make the **Player** object you created earlier into a prefab by dragging it from the **Hierarchy** tab into the **Prefabs** folder.

![](../images/get-started-ngo/ngo-12.png)

7. Delete the Player from the scene by selecting the Player capsule within the **Scene** tab, then pressing the **Delete** key (or **Cmd** + **Delete** for macOS).
    * You can remove the Player GameObject from the scene because you assign this network prefab to the Player prefab property in the NetworkManager component. The library doesn't support defining a player object as an in-scene placed NetworkObject.
8. Select **NetworkManager**.
9. With NetworkManager selected, locate the **PlayerPrefab** field in the **Inspector** tab.

![](../images/get-started-ngo/ngo-9.png)

10. Drag the **Player** prefab from the **Project** tab into the **PlayerPrefab** slot within the **NetworkManager** component in the **Inspector** tab.

![](../images/get-started-ngo/ngo-5.png)

11. Add a 3D Plane (centered at 0,0,0) to the scene by right-clicking in the **Hierarchy** tab, then selecting **3D Object** > **Plane**.
    * Adding the Plane adds a visual reference point to visualize the Player prefab's position, but it isn't necessary.
![](../images/get-started-ngo/ngo-7.png)

12. Save the scene by pressing **Ctrl/Cmd** + **S** (selecting **File** > **Save**).

### Scene management and the scenes in build list

Netcode for GameObjects comes with an integrated scene management solution that helps you synchronize what scenes should be loaded by all connected clients. The NetworkManager **Enable Scene Management** property, enabled by default, determines whether the integrated scene management solution will be used for your project (or not). In order for the integrated scene management solution to work properly, you must add any scene you want to be synchronized to the scenes in build list. This section guides you through adding your current scene to the scenes in build list.

1. Open the Build Settings window by selecting **File** > **Build Settings**.
2. Select **Add Open Scenes**.
3. **Scenes/SampleScene** is listed under **Scenes In Build**. You can close the Build Settings window.

## Test starting a host in the Unity Editor

Now that you have a **NetworkManager**, assigned a **PlayerPrefab**, and added your current scene to the scenes in build test, you can quickly verify everything is functioning/configured correctly via entering play mode in the Unity Editor. By starting a host, you are starting NetworkManager as both a server and a client at the same time.

You can test your Hello World project using the Unity Editor or a command-line helper. If you choose the latter, refer to [Create a command line helper](../tutorials/command-line-helper/). Otherwise, refer to the following instructions to test using the Unity Editor. Only the Plane appears on the server until the first client connects. Then, Netcode for GameObjects spawns a new Player prefab for each connected client; however, they overlap in the Game view.

1. Select **Play** from the top of the Unity Editor to start the scene.

![](../images/get-started-ngo/ngo-8.png)

2. Select **NetworkManager** from the **Hierarchy** list.

![](\img\get-started-ngo\ngo-2.png)

3. With **NetworkManager** selected (in the Hierarchy tab), select **Start Host** from the **Inspector** tab. Alternatively, you can use the in-game GUI buttons.

![](../images/get-started-ngo/ngo-3.png)

If it works correctly, the option to **Stop Host** displays in the **Inspector** tab.


### The `HelloWorldManager.cs` script

Now that you have verified everything is configured correctly, you will want to have the ability to start the NetworkManager whether in play mode, as a stand alone build, or in another MPPM instance. This section will walk you through creating the `HelloWorldManager.cs` component script.

1. Create a new script in the `Scripts` folder named `HelloWorldManager.cs`.
2. Add this component to the NetworkManager GameObject in your scene.
3. Copy the following code into the `HelloWorldManager.cs` script:

```csharp
using Unity.Netcode;
using UnityEngine;

namespace HelloWorld
{
    /// <summary>
    /// Add this component to the same GameObject as
    /// the NetworkManager component.
    /// </summary>
    public class HelloWorldManager : MonoBehaviour
    {
        private NetworkManager m_NetworkManager;

        private void Awake()
        {
            m_NetworkManager = GetComponent<NetworkManager>();
        }

        private void OnGUI()
        {
            GUILayout.BeginArea(new Rect(10, 10, 300, 300));
            if (!m_NetworkManager.IsClient && !m_NetworkManager.IsServer)
            {
                StartButtons();
            }
            else
            {
                StatusLabels();

                SubmitNewPosition();
            }

            GUILayout.EndArea();
        }

        private void StartButtons()
        {
            if (GUILayout.Button("Host")) m_NetworkManager.StartHost();
            if (GUILayout.Button("Client")) m_NetworkManager.StartClient();
            if (GUILayout.Button("Server")) m_NetworkManager.StartServer();
        }

        private void StatusLabels()
        {
            var mode = m_NetworkManager.IsHost ?
                "Host" : m_NetworkManager.IsServer ? "Server" : "Client";

            GUILayout.Label("Transport: " +
                m_NetworkManager.NetworkConfig.NetworkTransport.GetType().Name);
            GUILayout.Label("Mode: " + mode);
        }

        private void SubmitNewPosition()
        {
            if (GUILayout.Button(m_NetworkManager.IsServer ? "Move" : "Request Position Change"))
            {
                if (m_NetworkManager.IsServer && !m_NetworkManager.IsClient)
                {
                    foreach (ulong uid in m_NetworkManager.ConnectedClientsIds)
                        m_NetworkManager.SpawnManager.GetPlayerNetworkObject(uid).GetComponent<HelloWorldPlayer>().Move();
                }
                else
                {
                    var playerObject = m_NetworkManager.SpawnManager.GetLocalPlayerObject();
                    var player = playerObject.GetComponent<HelloWorldPlayer>();
                    player.Move();
                }
            }
        }
    }
}
```

In your Hello World project, you created a NetworkManager by adding the pre-created NetworkManager component to a GameObject. This component allows you to start a Host, Client, or Server in Play Mode via the inspector view. The `HelloWorldManager.cs` script simplifies and extends this functionality by creating a runtime/play mode UI menu that allows you to select the three different NetworkManager modes you can start:

- The **Host** starts the server and joins as a client.
- The **Client** joins the server as a client player.
- The **Server** starts the game as a server without instantiating a player.

The `HelloWorldManager.cs` script accomplishes this menu within the `StartButtons().` After you select a button, the `StatusLabels()`method adds a label on-screen to display which mode you have selected. This helps distinguish Game view windows from each other when testing your multiplayer game.

```csharp
       private void StartButtons()
        {
            if (GUILayout.Button("Host")) NetworkManager.Singleton.StartHost();
            if (GUILayout.Button("Client")) NetworkManager.Singleton.StartClient();
            if (GUILayout.Button("Server")) NetworkManager.Singleton.StartServer();
        }

        private void StatusLabels()
        {
            var mode = NetworkManager.Singleton.IsHost ?
                "Host" : NetworkManager.Singleton.IsServer ? "Server" : "Client";

            GUILayout.Label("Transport: " +
                NetworkManager.Singleton.NetworkConfig.NetworkTransport.GetType().Name);
            GUILayout.Label("Mode: " + mode);
        }
```

As seen in the earlier code snippet, the `HelloWorldManager.cs` script also uses the NetworkManager's instance via its singleton to grab properties like the `IsClient`, `IsServer`, and `IsLocalClient`. The `IsClient` and `IsServer` properties dictate the established connection state.

The `HelloWorldManager.cs` script also introduces a new method called `SubmitNewPosition()` that the `HelloWorldPlayer` script uses to [create a simple RPC call](#add-simple-rpc-use).

## Adding RPCs (Remote Procedure Calls)

This section guides you through adding basic RPCs to the project. Save your scripts in your `Assets/Scripts/` folder. RPCs are used to call functions on remote clients or the server.

Create a script named `RpcTest.cs`:

1. In the **Project** tab, select **Assets** > **Scripts**.
2. Right-click in the **Scripts** folder and select **Create** > **C# Script**.
3. Name the script `RpcTest`.

Add the `RpcTest.cs` script to the Player prefab:

1. Select the **Player** prefab in **Assets** > **Prefabs**.
2. In the **Inspector** tab (with the Player prefab selected), select **Add Component**.
3. Select **Scripts** > **Rpc Test**.

Edit the `RpcTest.cs` script:

1. In the **Project** tab, select **Assets** > **Scripts** > **`RpcTest`**.
2. In the **Inspector** tab (with the script selected), select **Open**. This opens this script in the default local text editor.
3. Edit the `RpcTest.cs` script to match the following:

```csharp
using Unity.Netcode;
using UnityEngine;

public class RpcTest : NetworkBehaviour
{
    public override void OnNetworkSpawn()
    {
        if (!IsServer && IsOwner) //Only send an RPC to the server from the client that owns the NetworkObject of this NetworkBehaviour instance
        {
            ServerOnlyRpc(0, NetworkObjectId);
        }
    }

    [Rpc(SendTo.ClientsAndHost)]
    private void ClientAndHostRpc(int value, ulong sourceNetworkObjectId)
    {
        Debug.Log($"Client Received the RPC #{value} on NetworkObject #{sourceNetworkObjectId}");
        if (IsOwner) //Only send an RPC to the owner of the NetworkObject
        {
            ServerOnlyRpc(value + 1, sourceNetworkObjectId);
        }
    }

    [Rpc(SendTo.Server)]
    private void ServerOnlyRpc(int value, ulong sourceNetworkObjectId)
    {
        Debug.Log($"Server Received the RPC #{value} on NetworkObject #{sourceNetworkObjectId}");
        ClientAndHostRpc(value, sourceNetworkObjectId);
    }
}
```

4. Save the Scene by pressing **Ctrl/Cmd** + **S** (or by selecting **File** > **Save**).

### Test the RPCs

This section guides you through testing the RPCs you added in the earlier section.

1. Select **File** > **Build Setting...**.
2. In the **Build Setting** window, configure your build settings as needed.
3. Click **Build** and choose a location to save your first build.
4. After the first build is done, return to the **Build Setting** window.
5. Click **Build** again and choose a different location to save your second build.
    * Alternatively, you can run the builds by:
      - Launching the client and server together in a terminal, as shown in [Testing the command line helper](command-line-helper.md).
      - Using the Multiplayer Play Mode package, which lets you run multiple instances of the Unity Editor to test multiplayer functionality. Refer to [Multiplayer Play Mode](https://docs-multiplayer.unity3d.com/tools/current/mppm) to learn more.

After the client and server spawn, a log displays in the **Console** of the client and server sending RPC messages to each other.

The client kicks off the exchange in its `OnNetworkSpawn` call for the first time with a counter value of `0`. It then makes an RPC call to the server with the next value. The server receives this and calls the client. The Console displays the following for the server and client respectively.

```log
Server Received the RPC #0 on NetworkObject #1
Server Received the RPC #1 on NetworkObject #1
Server Received the RPC #2 on NetworkObject #1
Server Received the RPC #3 on NetworkObject #1
...
```

```log
Client Received the RPC #0 on NetworkObject #1
Client Received the RPC #1 on NetworkObject #1
Client Received the RPC #2 on NetworkObject #1
Client Received the RPC #3 on NetworkObject #1
...
```

Only the client owning the NetworkObject owning the `RpcTest` script will send RPCs on the server, but they will all receive RPCs from the server. This means that if you test with multiple clients the consoles will log RPCs received once per NetworkObject per iteration on the server and all clients. If testing with a host and a client, you will see the following on the host's **Console**. This is because as a server it will receive the other client's server RPCs and as a client it will also receive its own client RPCs.

```log
Server Received the RPC #0 on NetworkObject #2
Client Received the RPC #0 on NetworkObject #2
Server Received the RPC #1 on NetworkObject #2
Client Received the RPC #1 on NetworkObject #2
Server Received the RPC #2 on NetworkObject #2
Client Received the RPC #2 on NetworkObject #2
Server Received the RPC #3 on NetworkObject #2
Client Received the RPC #3 on NetworkObject #2
...
```

> [!NOTE]
> The `NetworkObjectId` here is `2` because the host also has a NetworkObject with the `RpcTest` script spawned for it, but it won't send the initial RPC starting the chain because it's a server.

## Adding Netcode script to your player prefab

At this point, you should have set up script and should have experimented with sending and receiving RPCs via the `RpcTest.cs` script above. This next step demonstrates how you can add additional netcode logic to your player prefab via the `HelloWorldPlayer.cs` script.

1. Create a new script in the `Scripts` folder named `HelloWorldPlayer.cs`.
2. Copy the following code into the `HelloWorldPlayer.cs` script and save it:

```csharp
using Unity.Netcode;
using UnityEngine;

namespace HelloWorld
{
    public class HelloWorldPlayer : NetworkBehaviour
    {
        public NetworkVariable<Vector3> Position = new NetworkVariable<Vector3>();

        public override void OnNetworkSpawn()
        {
            if (IsOwner)
            {
                Move();
            }
        }

        public void Move()
        {
            SubmitPositionRequestRpc();
        }

        [Rpc(SendTo.Server)]
        private void SubmitPositionRequestRpc(RpcParams rpcParams = default)
        {
            var randomPosition = GetRandomPositionOnPlane();
            transform.position = randomPosition;
            Position.Value = randomPosition;
        }

        static Vector3 GetRandomPositionOnPlane()
        {
            return new Vector3(Random.Range(-3f, 3f), 1f, Random.Range(-3f, 3f));
        }

        private void Update()
        {
            transform.position = Position.Value;
        }
    }
}
```

#### A Review of the `HelloWorldPlayer.cs` script

The `HelloWorldPlayer.cs` script adds some basic movement to the Hello World project player. Both the server player and the client player can start player movement. However, the movement occurs through the server's position NetworkVariable, which means the server player can move immediately, but the client player must request a movement from the server, wait for the server to update the position NetworkVariable, then replicate the change locally.

The `HelloWorldPlayer` class inherits from `Unity.Netcode`'s NetworkBehaviour instead of MonoBehaviour. This allows you to customize the networking code as you override what happens when the Player spawns.

```csharp
public class HelloWorldPlayer : NetworkBehaviour
```

For multiplayer games, every object runs on at least two machines: player one and player two. Because of this, you need to ensure both machines have the same behavior and have the correct information about the object. One of the instances that come into play then is to understand how the Player moves. Only one player controls how the Player object moves. The following code enforces this by validating if the machine running the code is the player's owner.

```csharp
        public override void OnNetworkSpawn()
        {
            if (IsOwner)
            {
                Move();
            }
        }
```

Any MonoBehaviour implementing a NetworkBehaviour component can override the Netcode for GameObjects method `OnNetworkSpawn()`. The `OnNetworkSpawn()` method fires in response to the NetworkObject spawning. The `HelloWorldPlayer` class overrides `OnNetworkSpawn` because clients and the server run different logic. You can override this behavior on any NetworkBehaviour component.

Because the server and client can be the same machine and the Player's owner (aka Host), you want further to differentiate the two and have different Move behavior for each.

If the current player is the server, the code determines a random position to spawn the Player. You can't find the spawn location if the current player is the client. You have to get it from the server.

```csharp
        public void Move()
        {
            SubmitPositionRequestRpc();
        }

        [Rpc(SendTo.Server)]
        private void SubmitPositionRequestRpc(RpcParams rpcParams = default)
        {
            var randomPosition = GetRandomPositionOnPlane();
            transform.position = randomPosition;
            Position.Value = randomPosition;
        }

        private void Update()
        {
            transform.position = Position.Value;
        }
```

#### Positioning the player using an RPC

This section walks you through the `HelloWorldPlayer.cs` portion of the script that declares the `SubmitPositionRequestRpc` RPC.

If the player is a server-owned player at `OnNetworkSpawn()`, you can immediately move this player, as suggested in the following code.

```csharp
            SubmitPositionRequestRpc();
```

You can call this `Rpc` when the player is a client or a server. When you call an `Rpc` with `SendTo.Server`  on the server side, it executes in the same way as a local function call by default.

The `Rpc` sets the position NetworkVariable on the server's instance of the player by just picking a random point on the plane.

```csharp
        [Rpc(SendTo.Server)]
        private void SubmitPositionRequestRpc(RpcParams rpcParams = default)
        {
            var randomPosition = GetRandomPositionOnPlane();
            transform.position = randomPosition;
            Position.Value = randomPosition;
        }
```

The server instance of the player modifies the `Position` `NetworkVariable` through the `Rpc`. If the player is a client, it must apply the position locally inside the `Update` loop. (Since the two values are the same on the server, the server can run the same logic with no side effects, but you could also add `if(IsClient)` here.)

```csharp
        private void Update()
        {
            transform.position = Position.Value;
        }
```

Because the `HelloWorldPlayer.cs` script handles the position NetworkVariable, the `HelloWorldManager.cs` script can define the contents of `SubmitNewPosition()`.

```csharp
        private void SubmitNewPosition()
        {
            if (GUILayout.Button(NetworkManager.Singleton.IsServer ? "Move" : "Request Position Change"))
            {
                var playerObject = NetworkManager.Singleton.SpawnManager.GetLocalPlayerObject();
                var player = playerObject.GetComponent<HelloWorldPlayer>();
                player.Move();
            }
        }
```

The method in the code block above adds a contextual button that changes depending on whether the client is a server or a client. When you press the button this method creates, it finds your local player and calls `Move()`.

You can now create a build that shows the concepts outlined above.

Create two build instances: one for the host and the other for the client (to join the host's game).

Both build instances can move the player with the GUI button. The server moves the player immediately and replicates the movement on the client.

The client can request a new position, instructing the server to change that instance's position `NetworkVariable`. After the server updates the position `NetworkVariable`, the client applies that `NetworkVariable` position inside its `Update()` method.

## Add the `HelloWorldPlayer.cs` script to the Player prefab

This section guides you through adding the `HelloWorldPlayer.cs` script to the Player prefab.

Select the Player prefab:

1. From the **Project** tab, select **Assets** > **Prefabs**.
2. Select **Player**.

Add the `HelloWorldPlayer.cs` script to the Player prefab as a component:

1. With the Player prefab selected, select **Add Component** from the Inspector tab.
2. Select **Scripts** > **Hello World** > **Hello World Player**.


## Add a NetworkTransform

This section guides you through adding a NetworkTransform component that moves the player. NetworkTransform is a component used to synchronize the position, rotation, and scale of objects across the network.

Add a NetworkTransform component to the Player prefab:

1. Select the **Player** prefab in Assets > Prefabs.
2. In the **Inspector** tab (with the Player prefab selected), select **Add Component**.
3. Select **Netcode** > **NetworkTransform**.

Create a script named `NetworkTransformTest.cs`.

1. In the **Project** tab, go to **Assets** > **Scripts**.
2. Right-click, then select **Create** > **C# Script**.
3. Name it `NetworkTransformTest`.

Add the `NetworkTransformTest` script to the Player prefab:

1. Select the **Player** prefab in **Assets** > **Prefabs**.
2. In the **Inspector** tab (with the Player prefab selected), select **Add Component**.
3. Select **Scripts** > **Network Transform Test**.

Edit the `NetworkTransformTest.cs` script:

1. In the **Project** tab, select **Assets** > **Scripts** > **`NetworkTransformTest`**.
2. In the **Inspector** tab (with the script selected), select **Open**. This opens this script in the default local text editor.
3. Edit the `NetworkTransformTest.cs` script to match the following:

```csharp
using System;
using Unity.Netcode;
using UnityEngine;

public class NetworkTransformTest : NetworkBehaviour
{
    private void Update()
    {
        if (IsServer)
        {
            float theta = Time.frameCount / 10.0f;
            transform.position = new Vector3((float) Math.Cos(theta), 0.0f, (float) Math.Sin(theta));
        }
    }
}
```

4. Save the scene by pressing **Ctrl/Cmd** + **S** (or by selecting **File** > **Save**).

### Test the NetworkTransform

This section guides you through testing the NetworkTransform you added in the earlier section.

1. Select **File** > **Build Setting...**.
2. In the **Build Setting** window, configure your build settings as needed.
3. Click **Build** and choose a location to save your first build.
4. After the first build is done, return to the **Build Setting** window.
5. Click **Build** again and choose a different location to save your second build.
    * Alternatively, you can run the builds by:
      - Launching the client and server together in a terminal, as shown in [Testing the command line helper](command-line-helper.md).
      - Using the Multiplayer Play Mode package, which lets you run multiple instances of the Unity Editor to test multiplayer functionality. Refer to [Multiplayer Play Mode](https://docs-multiplayer.unity3d.com/tools/current/mppm) to learn more.

After the client and server spawn, the player capsule moves in a circle on both the client and the server.


## Links discovered
- [client-server](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md)
- [Testing the command line helper](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/tutorials/command-line-helper.md)
- [Unity Hub](https://unity.com/download)
- [Netcode for GameObjects requirements](https://docs-multiplayer.unity3d.com/netcode/current/installation)
- [Install Netcode for GameObjects](https://docs-multiplayer.unity3d.com/netcode/current/installation)
- [Player Objects](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/components/core/networkobject.md#finding-playerobjects)
- [Create a command line helper](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/tutorials/command-line-helper.md)
- [Multiplayer Play Mode](https://docs-multiplayer.unity3d.com/tools/current/mppm)

--- com.unity.netcode.gameobjects/Documentation~/tutorials/helloworld.md ---
# Your Netcode "Hello World" Project

A "Hello World" program is a computer program that outputs or displays the message "Hello, World!". Normally it's  the first program written by people learning to code. it's also used as a sanity test to make sure that a computer language is correctly installed and that the operator understands how to use it.

This "Hello World" tutorial walks you through creating a project, installing Netcode for GameObjects (Netcode), and creating the basic components for your first networked game.

## Create a new project in Unity

1. Open the **Unity Hub**.
1. Click **New**.
1. Select type '3D'
1. Name the project *Hello World*.
1. Select the location you want to save the project.

## Install Netcode

See the [install Netcode guide](../install.md) to install the Netcode package.

## Create the Basic Components

In this section we will create the basic building blocks of a multiplayer game.

### Creating Network Manager and selecting the Transport

In this section we add a Network Manager and add Unity Transport to our project. The [NetworkManager](../components/core/networkmanager.md) is the component that has all your project's netcode-related settings. Unity Transport is the transport layer that Netcode uses for communication between the server and the clients. See [here](../advanced-topics/transports.md) for more.

1. Right-click in the **Hierarchy** tab of the main Unity Window.
1. Select **Create Empty**.
1. Rename the GameObject **NetworkManager**.
2. Select **NetworkManager**.
3. Click **Add Component** in the Inspector Tab.
4. Select **Netcode** from the list shown.
5. Select NetworkManager Component from the list displayed.
6. Inside the NetworkManager component tab, locate the  `NetworkTransport` field.
7. Click "Select Transport".
8. Select `UnityTransport`.
9. Save your scene.

## Creating an object to spawn for each connected player

This section adds in a player object and spawns it for each connected player.

1. Right-click in the **Hierarchy** tab of the Unity Window to create a **3D Object > Capsule**
1. Rename it **Player**.
1. While **Player** is selected, add a **Netcode** > NetworkObject component in the Inspector Tab.
1. Click the **Assets** folder under the **Project** tab.
2. Right-click inside the **Assets** folder to **Create** > **Folder** and call it **Prefabs**.
3. Make **Player** a Prefab by dragging it to **Prefabs** folder you just created.
4. Delete **Player** from scene.

> [!NOTE]
> We remove the **Player** object from the scene because we assign this network Prefab to the `Player Prefab` property in the NetworkManager component. The library does not support defining a player object as an in-scene placed NetworkObject.


5. Select NetworkManager.
6. Inside the NetworkManager component tab, locate the  `Player Prefab` field.
7. Drag this player Prefab from above into this field.

> [!NOTE]
> When you drop the Prefab into the `Player Prefab` slot, you are telling the library that when a client connects to the game, automatically spawn this Prefab as the character for the connecting client. If you don't have any Prefab set as the `Player Prefab` no player object will be spawned.

1. Create a **3D Object->Plane**, centered at (0,0,0).
1. Save your scene

### Adding your scene to the build

> [!NOTE]
> When 'Enable Scene Management' is enabled for the NetworkManager (allowing the server to control which scenes should be loaded for the clients), we must ensure that the current scene has been added to the build, otherwise, we will be unable to enter play mode. This option is enabled by default.

1. Click **File** > **Build Settings**, in the upper-left corner of the Unity window
2. Click **Add Open Scenes**
3. Close the `Build Settings` window.

## Creating a command line helper

This command line helper will allow us to launch builds with a command line argument that will start a networking session, either as a server, host, or client. This can make testing builds easier.

1. Right-click the **Assets** folder and create a new folder by hovering over **Create** and selecting **Folder**. Name it **Scripts**.
2. Create a script called `NetworkCommandLine` by right-clicking on your **Scripts** folder, hovering over **Create** and selecting **C# Script**.
3. In the **Hierarchy** menu, right-click on the NetworkManager and choose **Create Empty**.

   This will create an  empty GameObject with NetworkManager as its parent.

4. Rename this child GameObject `NetworkCommandLine`.
5. With the new `NetworkCommandLine` object selected, click **Add Component** from the **Inspector** tab.
6. Select **Scripts** from the drop-down and click on the `NetworkCommandLine.cs` script you created earlier.
7. Open the `NetworkCommandLine.cs` script by double-clicking from the **Project** tab > **Assets** > **Scripts**. It will open in your text editor
8. Edit the `NetworkCommandLine.cs` script to match the following:

<details open>
<summary>Click to show/hide the Code.

</summary>

``` csharp
using System.Collections.Generic;
using Unity.Netcode;
using UnityEngine;

public class NetworkCommandLine : MonoBehaviour
{
   private NetworkManager netManager;

   void Start()
   {
       netManager = GetComponentInParent<NetworkManager>();

       if (Application.isEditor) return;

       var args = GetCommandlineArgs();

       if (args.TryGetValue("-mode", out string mode))
       {
           switch (mode)
           {
               case "server":
                   netManager.StartServer();
                   break;
               case "host":
                   netManager.StartHost();
                   break;
               case "client":

                   netManager.StartClient();
                   break;
           }
       }
   }

   private Dictionary<string, string> GetCommandlineArgs()
   {
       Dictionary<string, string> argDictionary = new Dictionary<string, string>();

       var args = System.Environment.GetCommandLineArgs();

       for (int i = 0; i < args.Length; ++i)
       {
           var arg = args[i].ToLower();
           if (arg.StartsWith("-"))
           {
               var value = i < args.Length - 1 ? args[i + 1].ToLower() : null;
               value = (value?.StartsWith("-") ?? false) ? null : value;

               argDictionary.Add(arg, value);
           }
       }
       return argDictionary;
   }
}
```

</details>

9. Paste the copied code into your code editor.
1. Save your changes. Your script will reload in the Unity Editor.
1. Back in the Editor, open **Edit** -> **Project Settings**
1. Select the **Player tab**.
1. Expand the **Resolution and Presentation**.
1. From **Resolution** > **Fullscreen Mode**, change `Fullscreen Window` to `Windowed`.
1. Back to the Editor main window, save your scene.


> [!NOTE]
> If you are using a Pro Unity license, you may want to disable the splash screen by unchecking **Splash Image** > **Splash Screen** > **Show Splash Screen**.

### Testing the command line helper

Now we will test that the command line helper script works.

1. Select **File** > **Build and Run**.
1. Create a new folder called `Build` inside your Hello World project folder.
1. **Save As** the binary `HelloWorld`.
1. Your project will build and launch in a new window, and you should see the plane.
1. Quit your app.
1. Now to launch from the command line.

#### Windows

For Windows you should do the following:


1. Open your Command Prompt.
1. Enter the following. Be sure to change the noted section `< >` of **both** commands to your project.

> [!NOTE]
> You may get a UAC prompt requesting permission for the binary to run you should allow it.

  Server:
  ```
  <Path to Project>\Build\HelloWorld.exe -mode server
  ```

  Client:
  ```
  <path to project>\Build\HelloWorld.exe -mode client
  ```

  To run these commands on a single line:
  ```
  HelloWorld\Build\HelloWorld.exe -mode server & HelloWorld\Build\HelloWorld.exe -mode client
  ```

  Example:
  ```
  C:\Users\sarao>HelloWorld\Build\HelloWorld.exe -mode server & HelloWorld\Build\HelloWorld.exe -mode client
  ```

On Windows, no standard out stream exists by default, so you will need to view the Debug.log file to see the outputs. You can find the Debug.log  files in:

`C:\Users\username\AppData\LocalLow\CompanyName\ProductName\Player.log`

Where the `CompanyName` should default to `DefaultCompany` for a new project and  `ProductName` should be equal to the project's name.

Alternatively you can modify the Windows commands to create a log.txt file in the same folder as your **HelloWorld** folder.

Modify the commands as follows:

  Server:
  ```
  <Path to Project>\Build\HelloWorld.exe -logfile log-server.txt -mode server
  ```

  Client:
  ```
  <Path to Project>\Build\HelloWorld.exe  -logfile log-client.txt -mode client
  ```

  Example (Running as a single command line):
  ```
  C:\Users\sarao>HelloWorld\Build\HelloWorld.exe -logfile -log-server.txt -mode server & HelloWorld\Build\HelloWorld.exe -logfile log-client.txt -mode client
  ```

#### MacOS

For Mac you should do the following:

1. Open Terminal.
2. Enter the following. Be sure to change the noted section `< >` of **both** commands to your project.

Server
```
<Path to Project>/Build/HelloWorld.app/Contents/MacOS/<Project Name> -mode server -logfile -
```

Client
```
<Path to Project>/Build/HelloWorld.app/Contents/MacOS/<Project Name> -mode client -logfile -
```

Run both as a single command:
```
<Path to Project>/Build/HelloWorld.app/Contents/MacOS/<Project Name> -mode server -logfile - & ; ~ <Path to Project>/Build/HelloWorld.app/Contents/MacOS/<Project Name> -mode client -logfile -
```

## Testing Hello World

### Route 1 - Editor
Now, to see if everything works as expected we can test starting a host in the editor. A host plays the role of a server and a client at the same time.

1. Click **Play**.
1. Click the **Start Host** button in the **NetworkManager** GameObject's inspector.
1. You should now see your scene with your Player Prefab spawned.

### Route 2 - Command Line
You can also use the command line helper to launch a server and one or more clients to connect to the server. You should see just the plane on the server until the first client connects. Then, a new Player Prefab will be spawned by Netcode for each connected client; however, they will be overlapped in the game view.

## Next Steps

See the following content to continue your journey using Netcode:

* Check out the educational samples to further explore Netcode and its abilities:
  * [Boss Room](../samples/bossroom/getting-started-boss-room.md)
  * [2D Spaceshooter Bitesize Sample](../samples/bitesize/bitesize-spaceshooter.md)
  * [Invaders Bitesize Sample](../samples/bitesize/bitesize-invaders.md)
  * [Client-Driven Bitesize Sample](../samples/bitesize/bitesize-clientdriven.md)


## Links discovered
- [install Netcode guide](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/install.md)
- [NetworkManager](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/components/core/networkmanager.md)
- [here](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/advanced-topics/transports.md)
- [Boss Room](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bossroom/getting-started-boss-room.md)
- [2D Spaceshooter Bitesize Sample](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bitesize/bitesize-spaceshooter.md)
- [Invaders Bitesize Sample](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bitesize/bitesize-invaders.md)
- [Client-Driven Bitesize Sample](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bitesize/bitesize-clientdriven.md)

--- Examples/CharacterControllerMovingBodies/ProjectSettings/ProjectVersion.txt ---
m_EditorVersion: 6000.0.61f1
m_EditorVersionWithRevision: 6000.0.61f1 (74a0adb02c31)


--- Examples/OverridingScenesAndPrefabs/ProjectSettings/ProjectVersion.txt ---
m_EditorVersion: 6000.0.61f1
m_EditorVersionWithRevision: 6000.0.61f1 (74a0adb02c31)


--- Examples/PingTool/ProjectSettings/ProjectVersion.txt ---
m_EditorVersion: 6000.0.61f1
m_EditorVersionWithRevision: 6000.0.61f1 (74a0adb02c31)


--- com.unity.netcode.gameobjects/Documentation~/learn/rpcnetvarexamples.md ---
# RPCs vs NetworkVariables examples

This page has examples of how the Small Coop Sample (Boss Room) uses `RPC`s and `NetworkVariable`s. It gives guidance on when to use `RPC`s versus `NetworkVariable`s in your own projects.

See the [RPC vs NetworkVariable](rpcvnetvar.md) tutorial for more information.

## RPCs for movement

Boss Room uses RPCs to send movement inputs.

```csharp reference
https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/v2.2.0/Assets/Scripts/Gameplay/UserInput/ClientInputSender.cs
```

Boss Room wants the full history of inputs sent, not just the latest value. There is no need for `NetworkVariable`s, you just want to blast your inputs to the server. Since Boss Room isn't a twitch shooter, it sends inputs as reliable `RPC`s without worrying about the latency an input loss would add.

## Arrow's GameObject vs Fireball's VFX

The archer's arrows use a standalone GameObject that's replicated over time. Since this object's movements are slow, the Boss Room development team decided to use state (via the NetworkTransform) to replicate the ability's status (in case a client connected while the arrow was flying).

```csharp reference
https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/v2.2.0/Assets/Scripts/Gameplay/GameplayObjects/Projectiles/PhysicsProjectile.cs
```

Boss Room might have used an `RPC` instead (for the Mage's projectile attack). Since the Mage's projectile fires quickly, the player experience isn't affected by the few milliseconds where a newly connected client might miss the projectile. In fact, it helps Boss Room save on bandwidth when managing a replicated object. Instead, Boss Room sends a single RPC to trigger the FX client side.

```csharp reference

https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/v2.2.0/Assets/Scripts/Gameplay/GameplayObjects/Projectiles/FXProjectile.cs

```

## Breakable state

Boss Room might have used a "break" `RPC` to set a breakable object as broken and play the appropriate visual effects. Applying the "replicate information when a player joins the game mid-game" rule of thumb, the Boss Room development team used `NetworkVariable`s instead. Boss Room uses the `OnValueChanged` callback on those values to play the visual effects (and an initial check when spawning the NetworkBehaviour).

```csharp reference

https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/v2.2.0/Assets/Scripts/Gameplay/GameplayObjects/Breakable.cs#L59-L78

```

The visual changes:

```csharp reference

https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/v2.2.0/Assets/Scripts/Gameplay/GameplayObjects/Breakable.cs#L146-L156

```

**Error when connecting after imps have died**: The following is a small gotcha the Boss Room development team encountered while developing Boss Room. Using `NetworkVariable`s isn't magical. If you use `OnValueChanged`, you still need to make sure you initialize your values when spawning for the first time. `OnValueChanged` isn't called when connecting for the first time, only for the next value changes.

![imp not appearing dead](../images/01_imp_not_appearing_dead.png)


```csharp reference
https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/v2.2.0/Assets/Scripts/Gameplay/GameplayObjects/Character/ServerAnimationHandler.cs#L23-L30
```

## Hit points

Boss Room syncs all character and object hit points through `NetworkVariable`s, making it easy to collect data.

If Boss Room synced this data through `RPC`s, Boss Room would need to keep a list of `RPC`s to send to connecting players to ensure they get the latest hit point values for each object. Keeping a list of `RPC`s for each object to send to those `RPC`s on connecting would be a maintainability nightmare. By using `NetworkVariable`s, Boss Room lets the SDK do the work.


## Links discovered
- [RPC vs NetworkVariable](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/rpcvnetvar.md)
- [imp not appearing dead](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/images/01_imp_not_appearing_dead.png)

--- com.unity.netcode.gameobjects/Documentation~/advanced-topics/network-update-loop-system/network-update-loop-reference.md ---
# NetworkUpdateLoop reference

The following diagrams provide insight into the Network Update Loop process and APIs.

## Injecting NetworkUpdateLoop Systems Into PlayerLoop

<div class="imgwhite">

![Injecting NetworkUpdateLoop Systems Into PlayerLoop](../images/injecting-networkupdatesloop.svg)

</div>

## NetworkUpdateLoop Running INetworkUpdateSystem Updates

<div class="imgwhite">

![NetworkUpdateLoop Running INetworkUpdateSystem Updates](../images/runninginetworkupdatesystemupdates.svg)

</div>


## Links discovered
- [Injecting NetworkUpdateLoop Systems Into PlayerLoop](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/advanced-topics/images/injecting-networkupdatesloop.svg)
- [NetworkUpdateLoop Running INetworkUpdateSystem Updates](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/advanced-topics/images/runninginetworkupdatesystemupdates.svg)

--- com.unity.netcode.gameobjects/Documentation~/networking-concepts.md ---
# Networking concepts

Understand the networking concepts that underpin Netcode for GameObjects.

| **Topic**                       | **Description**                  |
| :------------------------------ | :------------------------------- |
| **[Authority](terms-concepts/authority.md)** | Multiplayer games are games that are played between many different game instances. Each game instance has their own copy of the game world and behaviors within that game world. To have a shared game experience, each networked object is required to have an **authority**. |
| **[Ownership](terms-concepts/ownership.md)** | Understand how ownership works in Netcode for GameObjects as a precursor to [authority](terms-concepts/authority.md). |
| **[Network topologies](network-topologies.md)** | Understand and decide which network topology to use in your project. |

## Links discovered
- [Authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md)
- [Ownership](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/ownership.md)
- [authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md)
- [Network topologies](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/network-topologies.md)

--- com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md ---
# Authority

Multiplayer games are games that are played between many different game instances. Each game instance has their own copy of the game world and behaviors within that game world. To have a shared game experience, each networked object is required to have an **authority**.

The authority of a networked object has the ultimate power to make definitive decisions about that object. Each object must have one and only one authority. The authority has the final control over all state and behavior of that object.

The authoritative game instance is the game instance that has authority over a given networked object. This game instance is responsible for simulating networked game behavior. The authority is able to mediate the effects of network lag, and is responsible for reconciling behavior if many players are attempting to simultaneously interact with the same object.

## Authority models

Netcode for GameObjects provides two authority models: [server authority](#server-authority) and [distributed authority](#distributed-authority).

### Server authority

The server authority model has a single game instance that is defined as the server. That game instance is responsible for running the main simulation and managing all aspects of running the networked game. Server authority is the authority model used for [client-server games](client-server.md).

The server authority model has the strength of providing a centralized authority to manage any potential game state conflicts. This allows the implementation of systems such as game state rollback and competitive client prediction. However, this can come at the expense of adding latencies, because all state changes must be sent to the server game instance, processed, and then sent out to other game instances.

Server authority games can also be resource intensive. The server runs the simulation for the entire game world, and so the server needs to be powerful enough to handle the simulation and networking of all connected game clients. This resource requirement can become expensive.

Server authority is primarily used by performance-sensitive games, such as first-person shooters, or competitive games where having a central server authority is necessary to minimize cheating and the effects of bad actors.

### Distributed authority

The [distributed authority model](distributed-authority.md) shares authority between game instances. Each game instance is the authority for a subdivision of the networked objects in the game and is responsible for running the simulation for their subdivision of objects. Updates are shared from other game instances for the rest of the simulation.

The authority of each networked object is responsible for simulating the behavior and managing any aspects of running the networked game that relate to the objects it's the authority of.

Because distributed authority games share the simulation between each connected client, they're less resource intensive. Each machine connected to the game processes a subdivision of the simulation, so no single machine needs to have the capacity to process the entire simulation. This results in a multiplayer game experience that can run on cheaper machines and is less resource intensive.

## Checking for authority

The `HasAuthority` property, which is available on both NetworkObjects and NetworkBehaviours, is session-mode agnostic and works in both distributed authority and client-server contexts. It's recommended to use `HasAuthority` whenever you're working with individual objects, regardless of whether you're using a distributed authority or client-server topology.

```csharp
public class MonsterAI : NetworkBehaviour
{
    public override void OnNetworkSpawn()
    {
        if (!HasAuthority)
        {
            return;
        }
        // Authority monster init script here
        base.OnNetworkSpawn();
    }

    private void Update()
    {
        if (!IsSpawned || !HasAuthority)
        {
            return;
        }
        // Authority updates monster AI here
    }
}
```

Using distributed authority with Netcode for GameObjects requires a shift in the understanding of authority: instead of authority belonging to the server in all cases, it belongs to whichever client instance currently has authority. This necessitates a shift away from using local, non-replicated properties to store pertinent states; instead, [NetworkVariables](../basics/networkvariable.md) should be used to keep states synchronized and saved when all clients disconnect from a session or ownership is transferred to another client.

Distributed authority supports all built-in NetworkVariable data types. Because there's no concept of an authoritative server in a distributed authority session, all NetworkVariables are automatically configured with owner write and everyone read permissions.

## Additional resources

- [Ownership](ownership.md)


## Links discovered
- [client-server games](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md)
- [distributed authority model](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/distributed-authority.md)
- [NetworkVariables](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/networkvariable.md)
- [Ownership](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/ownership.md)

--- com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md ---
# Client-server topologies

Client-server is one possible [network topology](network-topologies.md) you can use for your multiplayer game.

## Defining client-server

A client-server topology consists of two distinct types of game instances: a single server game instance, and one or more client game instances. The server always has [authority](authority.md) and runs the main simulation of the game, including simulating physics, spawning and despawning objects, and authorizing client requests. Client game instances can then connect to the server to interact with and respond to the server's game simulation.

Client-server encompasses multiple potential network arrangements. The most common is a dedicated game server, in which a specialized server manages the game and exists solely for that purpose.

An alternative client-server arrangement is a [listen server](../learn/listenserverhostarchitecture.md), in which the game server runs on the same machine as a client. In this arrangement, the server game instance is referred to as a host. A host game instance runs as both a server and a client simultaneously.

## Checking for game instance type

### `IsServer`

`IsServer` or `!IsServer` is the traditional client-server method of checking whether the current game instance is running as a server instance. This is useful for ensuring that the server instance is the only instance running authoritative game logic, such as spawning objects, processing game rules, and validating client actions.

Use `IsServer` to ensure that only the server executes authoritative or global code. For example, spawning enemies, handling core game logic, or updating shared state should only happen on the server. This prevents clients from making unauthorized changes and helps maintain a consistent game state across all connected players.

```csharp
public class MonsterAI : NetworkBehaviour
{
    public override void OnNetworkSpawn()
    {
        if (!IsServer)
        {
            return;
        }
        // Server-side monster init script here
        base.OnNetworkSpawn();
    }

    private void Update()
    {
        if (!IsSpawned || !IsServer)
        {
            return;
        }
        // Server-side updates monster AI here
    }
}
```

### `IsHost`

Use the `IsHost` property to determine if the current game instance is running as both a server and a client simultaneously, a configuration known as a host. In Netcode for GameObjects, this is common when using a [listen server](../learn/listenserverhostarchitecture.md), where the server and one client share the same process.

`IsHost` can be useful for branching resource heavy logic so that a game running as a listen-server can use code-paths optimized for running on end devices.

```csharp
public class MonsterAI : NetworkBehaviour
{
    public override void OnNetworkSpawn()
    {
        if (!IsServer)
        {
            return;
        }
        // Server-side monster init script here
        base.OnNetworkSpawn();
    }

    private void Update()
    {
        if (!IsSpawned || !IsServer)
        {
            return;
        }
        if (IsHost)
        {
          // Monster AI that is optimized for user devices using a listen-server here.
          return
        }

        // Monster AI that is optimized for the dedicated game server here.
    }
}
```

### `IsClient`

Use the `IsClient` property to check if the current game instance is running as a client. This is helpful for executing logic that should only run on client machines, such as updating UI elements, handling local input, or playing client-specific effects. Use `IsClient` to ensure that code only runs on the client side, preventing unintended execution on the server or in non-client contexts.

`IsClient` will be `true` for host instances as a host game instance is running as both a server and a client simultaneously.

```csharp
public class MonsterAI : NetworkBehaviour
{
    public override void OnNetworkSpawn()
    {
        if (IsClient)
        {
            // Play client side effects here

            if (!IsHost)
            {
               // exit early if the game instance is only a client
               return;
            }
        }

        // Server-side monster init script here
        base.OnNetworkSpawn();
    }
}
```

## Use cases for client-server

Dedicated servers are often the most expensive network topology, but also offer the highest performance and can provide additional functionality such as competitive client prediction, rollback, and a centralized authority to manage any potential client conflicts. However, this comes at the cost of added latencies when communicating state changes from one client to another, as all state changes must be sent from client to server, processed, and then sent back out to other clients.

Client-server is primarily used by performance-sensitive games, such as first-person shooters, or competitive games where having a central server authority is necessary to minimize cheating and the effects of bad actors.

## Additional resources

- [Network topologies](network-topologies.md)
- [Distributed authority](distributed-authority.md)
- [Listen server architecture](../learn/listenserverhostarchitecture.md)

## Links discovered
- [network topology](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/network-topologies.md)
- [authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md)
- [listen server](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/listenserverhostarchitecture.md)
- [Network topologies](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/network-topologies.md)
- [Distributed authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/distributed-authority.md)
- [Listen server architecture](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/listenserverhostarchitecture.md)

--- com.unity.netcode.gameobjects/Documentation~/terms-concepts/distributed-authority.md ---
#  Distributed authority topologies

The [distributed authority network topology](network-topologies.md#distributed-authority) is one possible [network topology](network-topologies.md) available within Netcode for GameObjects. Distributed authority games use the [distributed authority model](authority.md#distributed-authority).

The traditional [client-server network topology](network-topologies.md#client-server) has a dedicated game instance running the game simulation. This means all state changes must be communicated to the server and then the server communicates those updates to all other connected clients. This design works well when using a powerful dedicated game server, however significant latencies are added when communicating state changes with a [listen server architecture](../learn/listenserverhostarchitecture.md).

> [!NOTE]
> The distributed authority service provided by the [Multiplayer Services package](https://docs.unity.com/ugs/en-us/manual/mps-sdk/manual) has a free tier for bandwidth and connectivity hours, allowing you to develop and test without immediate cost. Refer to the [Unity Gaming Services pricing page](https://unity.com/products/gaming-services/pricing) for complete details.

## Considerations

Using a distributed authority topology is typically not suitable for high-performance competitive games that require an accurate predictive motion model. The distributed authority model successfully addresses a lot of visual and input-related issues, but does have some limitations:

* Because authority and ownership of objects is distributed across clients, there's typically no single physics simulation governing the interaction of all objects. This can require approaching physics-related gameplay differently compared to a traditional client-server context.
* Depending on the platform and design of your product, it can be easier for bad actors to cheat. The authority model gives more trust to individual clients. Evaluate your cheating tolerance when developing with distributed authority.

## Session ownership

When using the distributed authority topology, it's necessary to have a single dedicated client that's responsible for managing and synchronizing global game state-related tasks. This client is referred to as the session owner.

The initial session owner is the first client that joins when the session is created. If this client disconnects during the game, a new session owner is automatically selected and promoted from within the clients that are currently connected.

### `IsSessionOwner`

To determine if the current client is the session owner, use the `IsSessionOwner` property provided by Netcode for GameObjects. This property is available on the `NetworkManager.Singleton` instance and returns `true` if the local client is the session owner.

```csharp
public class MonsterAI : NetworkBehaviour
{
    public override void OnNetworkSpawn()
    {
        if (!IsSessionOwner)
        {
            return;
        }
        // Global monster init behaviour here
        base.OnNetworkSpawn();
    }

    private void Update()
    {
        if (!IsSpawned || !IsSessionOwner)
        {
            return;
        }
        // Global monster AI updates here
    }
}
```

You can use this property to conditionally execute logic that should only run on the session owner, such as managing global game state or handling session-wide events.

## Additional resources

- [Distributed authority quickstart](../learn/distributed-authority-quick-start.md)
- [Understanding ownership and authority](./ownership.md)
- [Spawning synchronization](../basics/spawning-synchronization.md)
- [Deferred despawning](../basics/deferred-despawning.md)
- [Distributed Authority Social Hub sample](../samples/bitesize/bitesize-socialhub.md)


## Links discovered
- [distributed authority network topology](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/network-topologies.md#distributed-authority)
- [network topology](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/network-topologies.md)
- [distributed authority model](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md#distributed-authority)
- [client-server network topology](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/network-topologies.md#client-server)
- [listen server architecture](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/listenserverhostarchitecture.md)
- [Multiplayer Services package](https://docs.unity.com/ugs/en-us/manual/mps-sdk/manual)
- [Unity Gaming Services pricing page](https://unity.com/products/gaming-services/pricing)
- [Distributed authority quickstart](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/distributed-authority-quick-start.md)
- [Understanding ownership and authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/ownership.md)
- [Spawning synchronization](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/spawning-synchronization.md)
- [Deferred despawning](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/deferred-despawning.md)
- [Distributed Authority Social Hub sample](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bitesize/bitesize-socialhub.md)

--- com.unity.netcode.gameobjects/Documentation~/learn/faq.md ---
# Frequently asked questions

The FAQ provides immediate answers for questions collected from the Community on developing games with Multiplayer, including Netcode for GameObjects (Netcode), Transport, and more.

## Unity Netcode for GameObjects (Netcode)

<div id="faq">

### Does Netcode have a Public Roadmap?

See the [Multiplayer Networking Public Roadmap](https://unity.com/roadmap/unity-platform/multiplayer-networking) to review, suggest, and vote on features for all Multiplayer Networking, Netcode, and documentation.

### Implement a Dedicated Server vs a Listen Server, would I need to make changes to the codebase?

Netcode works with both a Listen Server and a Dedicated Server model. You just have to be careful that you're using things like `IsServer` and `IsHost` correctly.

### Does Netcode have any Matchmaking functionality?

You would have to implement matchmaking using third party matchmaking services. Netcode has no matchmaking functionality.

### What are recommendations for getting a game connecting over the internet?

The Multiplayer Technology Team recommend the following:

1. Upload your server build to a cloud provider or another server machine and run it there.
2. Host your game locally and open ports in your router.

   It should work just like over LAN you just have to connect to the public IP itself. Make sure to open UDP on the router. Many forward ports tutorials are available to review, including this option https://portforward.com/.

3. Use a Relay.

   [Unity Relay](https://docs.unity.com/relay/introduction.html) offers a way for game developers to securely offer increased connectivity between players by using a join code style workflow without needing to invest in a third-party solution. The Relay service enables developers to connect players together using a listen server. Instead of using dedicated game servers (DGS), the Relay service provides connectivity through a universal Relay server acting as a proxy.

   Another option is to use something like the `SteamP2PTransport`, which will work without the need of setting up any servers if you release your game on Steam.

### Is it good for add Spawnable object into NetworkConfig after start host?

Yes, but you need to ensure that all your clients add the same object to their configurations as well. You can't only add it on the host.

### How do I join from two devices on the same network?

The client need to use the local IPv4 address of your server. On Windows, you can find that address by opening the Command Prompt and typing `ipconfig`. Search for the `IPv4 Address` value on the server's machine.

Your client needs an input field to input the server's IP. If you just need something for prototyping, you can use [NetworkManagerHud](https://github.com/Unity-Technologies/multiplayer-community-contributions/tree/main/com.community.netcode.extensions/Runtime/NetworkManagerHud). You should attach this code to the NetworkManager GameObject.

### What's the best method for spawning?

Spawning can always be done on the host/server. If you want to give a client control over spawning objects, you need to implement a server RPC that you call on the client to spawn the object.

### What are best practices for handing physics with Netcode?

Networked physics is complicated, with many different ways to handle them. Currently, physics can be a little difficult to handle with Netcode and the built-in NetworkTransform.

The Multiplayer Technology Team recommends the following:

- Simulate the physics on the server and transforms on the client.
- Remove the Rigidbody component from all your client objects and have just the server drive the position of the physics object. This should help reduce stutter on the client.

### How do you implement on Steam?

The Steam transport should be quite straightforward to use. Just add it to your project and set the `ConnectToSteamID` in the transport on the client to connect to the host that's all you need.

</div>

## Boss Room and Bitesize Samples

<div id="faq">

### Why do I get path too long errors with Boss Room on Windows?

Using Windows' built-in extracting tool may generate an `Error 0x80010135: Path too long` error window which can invalidate the extraction process.

As a workaround, shorten the zip file to a single character (for example "c.zip") and move it to the shortest path on your computer (such as in root `C:\`) and retry. If that solution fails, another workaround is to extract the downloaded zip file using an application like 7zip.

### Why do I get unidentified developer errors with Boss Room?

If you try to run a build on OSX and receive a warning dialog mentioning an "unidentified developer," you might need to override your security settings for this application:

1. In the Finder on your Mac, locate the application you want to open.

> [!NOTE]
> Don't use Launchpad, it doesn't allow you to access the shortcut menu.

1. Control-click the app icon, then choose **Open** from the shortcut menu.
1. Select **Open**.

The app is saved as an exception to your security settings. You can open it in the future by double-clicking it just as you can any registered app.

See [Apple Support](https://support.apple.com/guide/mac-help/open-a-mac-app-from-an-unidentified-developer-mh40616/mac) for details.

### Why is there an `InitBootStrap` scene as the startup scene for Boss Room and Bitesize Samples?

The initial reason is that in Netcode the NetworkManager is a singleton class. The Bitesize Samples Team initially created it in the main menu, but when the host was leaving the in-game/networked scene, the Network Manager was getting destroyed, which led to not being able to host a game again without restarting the game instance.

The Bootstrap scene ensures that the NetworkManager and other singletons are initialized first and will be there when you get back to main menu.

</div>


## Links discovered
- [Multiplayer Networking Public Roadmap](https://unity.com/roadmap/unity-platform/multiplayer-networking)
- [Unity Relay](https://docs.unity.com/relay/introduction.html)
- [NetworkManagerHud](https://github.com/Unity-Technologies/multiplayer-community-contributions/tree/main/com.community.netcode.extensions/Runtime/NetworkManagerHud)
- [Apple Support](https://support.apple.com/guide/mac-help/open-a-mac-app-from-an-unidentified-developer-mh40616/mac)

--- com.unity.netcode.gameobjects/Documentation~/learn/listenserverhostarchitecture.md ---
# Create a game with a listen server and host architecture

## What is a listen server

A listen server acts as both a server and client on a single player's machine for multiplayer game play. This means one player both plays the game and owns the game world while other players connect to this server.

This set up has performance, security, and cost considerations for implementation.

### Disadvantages

- Network performance relies on the residential internet connection of the host player and their machine's output efficiency. Both may cause the remote players connecting to the host to suffer performance issues.
- The host player may have a large latency advantage over the remote players.
- With access to all of the game world's information, the host player has an easier opportunity to cheat.
- The server, i.e. the game ceases to exist when the host player leaves the game.

### Advantages

- Essentially free compared to dedicated server options.
- Doesn't require special infrastructure or forward planning to set up. This makes them common use for LAN parties because latency and bandwidth issues aren't a concern.

## When to use a listen server architecture

Listen server architecture is a popular choice for single player games that want to provide the option to add a friend into an existing game world. Listen servers are best suited for a smaller player group (< 12) and games that don't require a persistent world.

> [!NOTE]
> *Persistent world* in Netcode for GameObjects means "a persistent online world."
> For example, the game state isn't bound to a player or a session, but is typically tied to the host.

In contrast to dedicated servers, listen servers are cheaper without the need to run dedicated authoritative servers for a game. Often, the listen server approach is chosen to avoid setting up a system to orchestrate the game server fleet.

> [!NOTE]
> You still need to set up matchmaking for your player to join together to play. A listen server game requires redirecting players to the client-hosted server.

## Connecting to a listen server

Personal computers are hidden behind NATs (Network Address Translation devices) and routers to protect them from direct access. To connect to a listen server, you may choose an option such as [port forwarding](#port-forwarding), a [relay server](#relay-server), [NAT punch-through](#nat-punchthrough), or a [NAT punch with relay fallback](#nat-punch-and-relay-fallback).

### Port Forwarding

With port forwarding, the host can allow another player to connect to a listen server by forwarding a public port on their router to a machine in their local network.

Considerations:

* It has risks. By opening ports, you create direct pathways for hackers and malware attacks to access your system.
* The host must manually open the ports on their router, and this requires some technical knowledge the average user may not have.
* The host may not always have access to their router and would not be able to open a port. For example, the host may be using a mobile device, a corporate network, or public WiFi.

Port forwarding may not be a viable option for a released game but can be useful for development. For more information about port forwarding, see https://portforward.com/.

### Relay Server

A dedicated server has ports already forwarded for players to connect anytime. These servers can run in the cloud or a data center. The relay server option uses these servers to send data between players.

In a listen server relay scenario, the host and all clients connect to the same listen server. Clients send packets to the relay server, which then redirects these packets to the intended recipient.

Advantages:

* Compared to direct connecting through port forwarding, a relay server should always work for any client.
* A relay server knows when the host client disconnects and can inform the other clients or start a host migration process.

Disadvantages:

A relay server costs money, and the round trip times for packet exchange may be higher because they have to go through the relay server instead of being sent directly to the other client.

### NAT Punch-through

Network Address Translation (NAT) punch-through, also known as hole punching, opens a direct connection without port forwarding. When successful, clients are directly connected to each other to exchange packets. However, depending on the NAT types among the clients, NAT punching often fails.

Ways to NAT punch:
* Session Traversal Utilities for NAT STUN
* Interactive Connectivity Establishment ICE
* User Datagram Protocol (UDP) hole punching

Because of its high rate of failure, NAT punch-through is typically only used with a relay fallback.

### NAT Punch and Relay Fallback

This option combines NAT punching with a relay fallback. Clients first try to connect to the host by NAT punching and default back to the relay server on failure. This reduces the workload on the relay server while allowing clients to still connect to the host.

It is widely used because it reduces the hosting costs of relay servers.


--- com.unity.netcode.gameobjects/Documentation~/terms-concepts/mutliplayer-terms.md ---
# Multiplayer Networking Terminology

The following are essential, high-level terms used in multiplayer networking and Netcode for GameObjects:

import MTTterms from '/static/shared/_terminology.md';

<MTTterms/>


--- com.unity.netcode.gameobjects/Documentation~/terms-concepts/network-topologies.md ---
# Network topologies

Network topology defines how a network is arranged. In the context of multiplayer games, this primarily relates to how clients, hosts, and servers are connected and communicate. Different network topologies have different benefits and drawbacks, depending on the type of game you want to make.

## Network topologies

The network topologies that Netcode for GameObjects supports are based on the two primary [authority models](authority.md).

### Client-server

Client-server games use a [server authority model](authority.md#server-authority). In this network topology the server has final authority on the state of the game. Each client sends updates to the server, and the server runs the main game simulation. The game has a single server and many clients.

Within the client-server network topology there are two main [network architectures](client-server.md). These are the dedicated game server (where a dedicated machine runs only the game simulation), and the listen-server architecture (where a single game instance runs both the game simulation and a playing game client).

For more details about client-server topologies, refer to the [Client-server topologies page](client-server.md).

### Distributed authority

In a distributed authority topology, game instances share responsibility for owning and tracking the state of objects in the network using a [distributed authority model](authority.md#distributed-authority). A small, lightweight central state service tracks a minimal amount of game state and routes network traffic. There is no server simulating the game: each connected game instance runs a subdivision of the simulation.

Distributed authority topologies are useful for keeping costs down, and solve a lot of the input-related issues typically addressed using client prediction systems. However, the lack of a central authority can make them more vulnerable to cheating and bad actors.

For more details about distributed authority topologies, refer to the [Distributed authority page](distributed-authority.md).

## Network topology comparison

The primary differences between [client-server](client-server.md) and [distributed authority](distributed-authority.md) topologies are cost, security, and latency. There are further considerations for these metrics based on the different [client-server network architectures](client-server.md) that can be used.

* **Cost**: Client-server topologies using a dedicated game server are typically an expensive option due to the hardware and running costs involved in maintaining a powerful server machine, although this does allow for higher performance and better [tick rates](../learn/ticks-and-update-rates.md). Distributed authority networks are cheaper, since they lack a dedicated central server and game simulations run solely on clients. Listen servers are running on an already existing game instance and so there is no extra cost involved.
* **Security**: Because the distributed authority topology spreads authority across multiple clients, any one client may be compromised and/or cheating without making the entire experience unplayable. With a client-server architecture, a dedicated game server is much more resilient to compromised clients, while listen servers have a single point of failure if the game instance hosting the server is compromised.
* **Latency**:  In a distributed authority topology, game state updates are sent to the distributed authority service which then proxies those messages directly to the other connected clients. With the client-server topology, latency can depend greatly based on the location and [network architecture](client-server.md) of the server.

## Which network topology will meet your project's needs?

Both of the network topologies that are provided by Netcode for GameObjects are suitable for a wide range of use-cases. The following questions can help you determine if a certain network topology will fit the needs of your project.

Does your project require:

* A centralized, trusted server for the purpose of securing specific game states from being modified by bad actors?
  * If you answered yes, then the client-server topology is likely to be the best fit for your project's needs. The distributed authority topology relies on the assumption that each game instance can be trusted therefore it is not a reliable authority mode for games where local game instances may be attempting to cheat.

* Client-side prediction with rollback capabilities?
  * If you answered yes, then the client-server topology is likely to be the best fit for your project's needs.

If you're looking for a development flow with simple instantiation and spawning of visually synchronized objects, then the distributed authority topology could be a good fit for your project's needs.


## Links discovered
- [authority models](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md)
- [server authority model](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md#server-authority)
- [network architectures](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md)
- [Client-server topologies page](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md)
- [distributed authority model](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md#distributed-authority)
- [Distributed authority page](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/distributed-authority.md)
- [client-server](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md)
- [distributed authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/distributed-authority.md)
- [client-server network architectures](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md)
- [tick rates](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/ticks-and-update-rates.md)
- [network architecture](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md)

--- com.unity.netcode.gameobjects/Documentation~/terms-concepts/ownership.md ---
# Ownership

Understand how ownership works in Netcode for GameObjects as a precursor to [authority](./authority.md).

By default, Netcode for GameObjects assumes a [client-server topology](./client-server.md), in which the server owns all NetworkObjects (with [some exceptions](../components/core/networkobject.md#ownership)) and has ultimate authority over [spawning and despawning](../basics/object-spawning.md).

Netcode for GameObjects also supports building games with a [distributed authority topology](./distributed-authority.md), which provides more options for ownership and authority over NetworkObjects.

## Ownership in client-server

In a client-server topology, the server has ultimate authority over all NetworkObjects. Clients can request ownership of [specific objects](../components/core/networkobject.md#ownership), but the server has the final say in whether to grant or deny these requests.

## Ownership in distributed authority

In a distributed authority setting, authority over NetworkObjects isn't bound to a single server, but distributed across clients depending on a NetworkObject's [ownership permission settings](#ownership-permission-settings-distributed-authority-only). NetworkObjects with the distributable permission set are automatically distributed amongst clients as they connect and disconnect.

When a client starts a distributed authority session it spawns its player, locks the local player's permissions so that no other client can take ownership, and then spawns some NetworkObjects. At this point, Client-A has full authority over the distributable spawned objects and its player object.

![Distributed authority start](../images/distributed-authority-start.jpg)

When another player joins, as in the following diagram, authority over distributable objects is split between both clients. Distributing the NetworkObjects in this way reduces the processing and bandwidth load for both clients. The same distribution happens when a player leaves, either gracefully or unexpectedly. The ownership and last known state of the subset of objects owned by the leaving player is transferred over to the remaining connected clients with no interruption in gameplay.

![Distributed authority new client](../images/distributed-authority-new-client.jpg)

### Ownership permission settings (distributed authority only)

The following ownership permission settings, defined by [`NetworkObject.OwnershipStatus`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@latest?subfolder=/api/Unity.Netcode.NetworkObject.OwnershipStatus.html), are only relevant when using a distributed authority network topology:

| **Ownership setting** | **Description** |
|-------------------|-------------|
| `None` | Ownership of this NetworkObject can't be redistributed, requested, or transferred (a Player might have this, for example). |
| `Distributable` | Ownership of this NetworkObject is automatically redistributed when a client joins or leaves, as long as ownership is not locked or a request is pending. |
| `Transferable` | Ownership of this NetworkObject can be transferred immediately, as long as ownership isn't locked and there are no pending requests. |
| `RequestRequired` | Ownership of this NetworkObject must be requested before it can be transferred and will always be locked after transfer. |
| `SessionOwner` | This NetworkObject is always owned by the [session owner](distributed-authority.md#session-ownership) and can't be transferred or distributed. If the session owner changes, this NetworkObject is automatically transferred to the new session owner. |

You can also use `NetworkObject.SetOwnershipLock` to lock and unlock the permission settings of a NetworkObject for a period of time, preventing ownership changes on a temporary basis.

> [!NOTE]
> The ownership permissions are only visible when you have the Multiplayer Services SDK package installed and you're inspecting a NetworkObject within the Editor. Ownership permissions have no impact when using a client-server network topology, because the server always has authority.

#### Request ownership

When requesting ownership of a NetworkObject using [`NetworkObject.RequestOwnership`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@latest?subfolder=/api/Unity.Netcode.NetworkObject.RequestOwnership.html), the following outcomes are possible depending on the ownership status of the NetworkObject when the request is received.

| **Ownership status of NetworkObject** | **Response** | **Description** |
|--------------------------|--------------|---------------------|
| `OwnershipStatus.Transferable` | `OwnershipRequestStatus.RequestSent` | Ownership is transferred immediately, as long as a request isn't already in progress and the NetworkObject's ownership isn't locked. Ownership isn't locked after the transfer. |
| `OwnershipStatus.RequestRequired` | `OwnershipRequestStatus.RequestSent` | Request granted, as long as a request isn't already in progress and the NetworkObject's ownership isn't locked. |
| `OwnershipStatus.RequestRequired` but `IsOwner` is `true`for the requesting client | `OwnershipRequestStatus.AlreadyOwner` | No action taken. The current client is already the owner. |
| `OwnershipStatus.RequestRequired` but `IsOwnershipLocked` is `true` | `OwnershipRequestStatus.Locked` | Request denied. The current owner has locked ownership which means requests can't be made at this time. |
| `OwnershipStatus.RequestRequired` but `IsRequestInProgress` is `true` | `OwnershipRequestStatus.RequestInProgress` | Request denied. A known request is already in progress. You can scan for ownership changes and try again after a specific period of time or no longer attempt to request ownership. |
| `OwnershipStatus.SessionOwner` | `OwnershipRequestStatus.SessionOwnerOnly` | Request denied. Only the session owner can have ownership of this NetworkObject. |
| `OwnershipStatus.Distributable` | `OwnershipRequestStatus.RequestRequiredNotSet` | Request denied. Distributable NetworkObjects can only have their ownership changed as part of distribution when clients join or leave a session. |
| `OwnershipStatus.None` | `OwnershipRequestStatus.RequestRequiredNotSet` | Request denied. Ownership of this NetworkObject can't be redistributed, requested, or transferred. |

## Additional resources

* [Authority](authority.md)
* [Client-server](client-server.md)
* [Distributed authority](distributed-authority.md)


## Links discovered
- [authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md)
- [client-server topology](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md)
- [some exceptions](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/components/core/networkobject.md#ownership)
- [spawning and despawning](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/object-spawning.md)
- [distributed authority topology](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/distributed-authority.md)
- [specific objects](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/components/core/networkobject.md#ownership)
- [Distributed authority start](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/images/distributed-authority-start.jpg)
- [Distributed authority new client](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/images/distributed-authority-new-client.jpg)
- [`NetworkObject.OwnershipStatus`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@latest?subfolder=/api/Unity.Netcode.NetworkObject.OwnershipStatus.html)
- [session owner](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/distributed-authority.md#session-ownership)
- [`NetworkObject.RequestOwnership`](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@latest?subfolder=/api/Unity.Netcode.NetworkObject.RequestOwnership.html)
- [Authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/authority.md)
- [Client-server](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/client-server.md)
- [Distributed authority](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/terms-concepts/distributed-authority.md)

--- com.unity.netcode.gameobjects/Documentation~/samples/bossroom/architecture.md ---
# Boss Room architecture

> [!WARNING]
> Boss Room is no longer being actively maintained as of 2026. While it remains available as a learning resource, it may not be compatible with the latest versions of Netcode for GameObjects or Unity.

Boss Room is a fully functional co-op multiplayer RPG made with Unity Netcode. It's an educational sample designed to showcase typical Netcode patterns often featured in similar multiplayer games. Players work together to fight Imps and a boss using a click-to-move control model.

This article describes the high-level architecture of the Boss Room codebase and dives into some reasoning behind architectural decisions.

## Assembly structure

Boss Room's code is organized into multiple domain-based assemblies, each with a relatively self-contained purpose.

An exception to this organization structure is the Gameplay assembly, which houses most of the networked gameplay logic and other functionality tightly coupled with the gameplay logic.

This assembly separation style enforces better separation of concerns and helps keep the codebase organized. It also uses more granular recompilation during iterations to save time.

![Assembly structure](../../images/arch-2.png)

## Application flow

The application flow of Boss Room starts with the `Startup` scene (which should always load first).

:::tip
The Boss Room sample has an editor tool that enforces starting from the `Startup` scene even if you're working in another scene. You can disable this tool through the Unity Editor by selecting **Menu** > **Boss Room** > **Don't Load Bootstrap Scene On Play**. Select **Load Bootstrap Scene On Play** to re-enable it.
:::

The `ApplicationController` component lives on a GameObject in the Startup scene and serves as the application's entry point (and composition root). It binds dependencies throughout the application's lifetime (the core dependency injection managed “singletons”). See the [Dependency Injection](#dependency-injection) section for more information.

## Game state and scene flow

Each scene in Boss Room has an entry point component sitting on a root-level GameObject that serves as a scene-specific composition root.

After Boss Room starts and the initial bootstrap logic completes, the `ApplicationController` class loads the `MainMenu` scene.

The MainMenu scene only has the `MainMenuClientState`, whereas scenes that contain networked logic also have the server counterparts to the client state components. In the latter case, both the server and client components exist on the same GameObject.

The NetworkManager starts when the `CharSelect` scene loads, which happens when a player joins or hosts a game. The host drives game state transitions and controls the set of loaded scenes. Having the host manage the state transitions and scenes indirectly forces all clients to load the same scenes as the server they're connected to (via Netcode's networked scene management).

### Application Flow Diagram

![Application Flow Diagram](../../images/arch-1.png)

:::note
Boss Room's main room has four scenes. The primary scene (Boss Room's root scene) has the state components, game logic, level `navmesh`, and trigger areas that let the server know to load a given sub-scene. Boss Room loads each sub-scene additively using those triggers.
:::tip

Sub-scenes contain spawn points for the enemies and visual assets for their respective level segments. The server unloads sub-scenes that don't have active players and loads the required sub-scenes based on the players' position. If at least one player overlaps with the sub-scene's trigger area, the server loads the sub-scene.

## Transports

Boss Room supports two network transport mechanisms:

* IP
* Unity Relay

Clients connect directly to a host via an IP address when using IP. However, the IP network transport only works if the client and host are in the same local area network (or if the host uses port forwarding).

With the Unity Relay network transport, clients don't need to worry about sharing a local area network or port forwarding. However, you must first [set up the Relay service](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Documentation/Unity-Relay/README.md).

See the [Multiplayer over the internet](getting-started-boss-room.md) section of the Boss Room README for more information about using the two network transport mechanisms.

Boss Room uses the Unity Transport package. Boss Room's assigns its instance of Unity Transport to the `transport` field of the NetworkManager.

The Unity Transport Package is a network transport layer with network simulation tools that help spot networking issues early during development. Boss Room has both buttons to start a game in the two modes and will setup Unity Transport automatically to use either one of them at runtime.

Unity Transport supports Unity Relay (provided by Unity Gaming Services). See the documentation on [Unity Transport package](https://docs.unity3d.com/Packages/com.unity.transport@latest?subfolder=/manual/index.html) and [Unity Relay](https://docs-multiplayer.unity3d.com/docs/relay/relay) for more information.

## Connection flow state machine

The `ConnectionManager`, a simple state machine, owns Boss Room's network connection flow. It receives inputs from Netcode for GameObjects (or the user) and handles the inputs according to its current state. Each state inherits from the `ConnectionState` abstract class. If you add a new transport, you must extend the `StartingHostState` and `ClientConnectingState` states. Both of these classes assume you're using the Unity Transport transport.

![Connection flow state machine](../../images/arch-3.png)

## Session management and reconnection

To allow users to reconnect to the game and restore their game state, Boss Room stores a map of the GUIDs for their respective data. This way, it ensures that when a player disconnects, Boss Room accurately reassigns data to that player when they reconnect.

For more information, see [Session Management](../../advanced-topics/session-management.md).

## Unity Gaming Services integration

Boss Room is a multiplayer experience designed to be playable over the internet. To effectively support this, it integrates several [Unity Gaming Services](https://unity.com/solutions/gaming-services) (UGS):

* Authentication
* Lobby
* Relay

These three UGS services allow players to host and join games without needing port forwarding or out-of-game coordination.

To keep a single source of truth for service access (and avoid scattering of service access logic), Boss Room wraps UGS SDK access into `Facades` and uses UI mediators to contain the service logic triggered by user interfaces (UIs).

* [`AuthenticationServiceFacade.cs`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/UnityServices/Auth/AuthenticationServiceFacade.cs)
* [`LobbyServiceFacade.cs`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/UnityServices/Lobbies/LobbyServiceFacade.cs)
* Lobby and Relay - client join - `JoinLobbyRequest()` in [Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs)
* Relay Join - `StartClientLobby()` in [Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs)
* Relay Create - `StartHostLobby()` in [Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs)
* Lobby and Relay - host creation - `CreateLobbyRequest()` in [Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs)

## Core gameplay structure

:::note
An `Avatar` is at the same level as an `Imp` and lives in a scene. A `Persistent Player` lives across scenes.
:::

A `Persistent Player` Prefab goes into the `Player` Prefab slot in the NetworkManager of Boss Room. As a result, Boss Room spawns a single `Persistent Player` Prefab per client, and each client owns their respective `Persistent Player` instances.

:::note
There is no need to mark `Persistent Player` instances as `DontDestroyOnLoad`. Netcode for GameObjects automatically keeps these prefabs alive between scene loads while the connections are live.
:::

The `Persistent Player` Prefab stores synchronized data about a player, such as their name and selected `PlayerAvatar` GUID.

Each connected client owns their respective instance of the PlayerAvatar prefab. Netcode for GameObjects destroys the `PlayerAvatar` instance when a scene load occurs (either to the `PostGame` or `MainMenu` scenes) or if the client disconnects.

In the `CharSelect` scene, clients select from eight possible avatar classes. Boss Room stores each player's selection inside the `PersistentPlayer`'s `NetworkAvatarGuidState`.

Inside the Boss Room scene, `ServerBossRoomState` spawns a `PlayerAvatar` per `PersistentPlayer` present.

The following example of a selected “Archer Boy” class shows the `PlayerAvatar` GameObject hierarchy:

* `PlayerAvatar` is a NetworkObject that Boss Room destroys when the scene unloads.
* `PlayerGraphics` is a child GameObject containing a NetworkAnimator component responsible for replicating animations invoked on the server.
* `PlayerGraphics_Archer_Boy` is a purely graphical representation of the selected avatar class.

`ClientAvatarGuidHandler`, a NetworkBehaviour component residing on the `PlayerAvatar` Prefab instance, fetches the validated avatar GUID from `NetworkAvatarGuidState` and spawns a local, non-networked graphics GameObject corresponding to the avatar GUID.

### Characters

`ServerCharacter` exists on a `PlayerAvatar` (or another NPC character) and has server RPCs and `NetworkVariables` that store the state of a given character. It's responsible for executing the server-side logic for the characters. This server-side logic includes the following:

* Movement and pathfinding via `ServerCharacterMovement` use `NavMeshAgent,` which exists on the server to translate the character's transform (synchronized using the NetworkTransform component);
* Player action queueing and execution via `ServerActionPlayer`;
* AI logic via `AIBrain` (applies to NPCs);
* Character animations via `ServerAnimationHandler`, which uses NetworkAnimator to synchronize;
* `ClientCharacter` is primarily a host for the `ClientActionPlayer` class and has the client RPCs for the character gameplay logic.

### Game config setup

We defined Boss Room's game configuration using ScriptableObjects.

The [`GameDataSource.cs`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/RuntimeDataContainers/GameDataSource.cs) singleton class stores all actions and character classes in the game.

[`CharacterClass`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Configuration/CharacterClass.cs) is the data representation of a Character and has elements such as starting stats and a list of Actions the character can perform. It covers both player characters and non-player characters (NPCs) alike.

The [`Action`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Configuration/Action.cs) subclasses are data-driven and represent discrete verbs, such as swinging a weapon or reviving a player.

### Action System

:::note
Boss Room's action system was created specifically for Boss Room's educational purpose. You'll need to implement a more user friendly custom action system to allow for better game design emergence from your game designers.
:::

Boss Room's Action System is a generalized mechanism for `Characters` to "do stuff" in a networked way. `ScriptableObject`-derived `Actions` implement the client and server logic of any given thing the characters can do in the game.

There are a variety of actions that serve different purposes. Some actions are generic and reused by multiple character classes, while others are specific to a single class.

Each character can have multiple actions that exist simultaneously but only one active `Action` (also called the "blocking" action). If a character triggers a later action, Boss Room queues it behind the current action. Non-blocking actions can run in the background without interfering with the current action.

Boss Room synchronizes actions by calling a `ServerCharacter.RecvDoActionServerRPC` and passing the `ActionRequestData`, a struct that implements the `INetworkSerializable` interface.

:::note
`ActionRequestData` has an `ActionID` field, a simple struct that wraps an integer containing the index of a given `ScriptableObject` `Action` in the registry of abilities available to characters. The registry of available character abilities is stored in `GameDataSource`.
:::

Boss Room uses the `ActionID` struct to reconstruct the requested action and play it on the server by creating a pooled clone of the `ScriptableObject` `Action` that corresponds to the action. Clients then play out the visual part of the ability (including particle effects and projectiles).

It's also possible to play an anticipatory animation on the client requesting an ability. For instance, you might want to play a small jump animation when the character receives movement input but hasn't yet moved (because it hasn't synchronized the data from the server).

[`ServerActionPlayer`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ActionPlayers/ServerActionPlayer.cs) and [`ClientActionPlayer`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ActionPlayers/ClientActionPlayer.cs) are companion classes to actions Boss Room uses to play out the actions on both the client and server.

#### Movement action flow

The following list describes the movement flow of a player character.

1. The client uses a mouse to click on the target destination.
2. The client sends an RPC (containing the target destination) to the server.
3. Anticipatory animation plays immediately on the client.
4. There's network latency before the server receives the RPC.
5. The server receives the RPC (containing the target destination).
6. The server performs pathfinding calculations.
7. The server completes the pathfinding, and the server representation of the entity starts updating its NetworkTransform at the same cadence as `FixedUpdate`.
8. There's network latency before clients receive replication data.
9. The client representation of the entity updates its NetworkVariables.

:::note
The Visuals GameObject never outpaces the simulation GameObject and is always slightly behind the networked position and rotation.
:::

### Navigation system

Each scene with navigation (or dynamic navigation objects) should have a `NavigationSystem` component on a scene GameObject. The GameObject containing the `NavigationSystem` component must have the `NavigationSystem` tag.

#### Building a navigation mesh

Boss Room uses `NavMeshComponents`, meaning building directly from the `Navigation` window fails to deliver the desired results.

Instead, find a `NavMeshComponent` in the given scene (for example, a `NavMeshSurface`) and use the **Bake** button on that script.

You should also ensure each scene has exactly one `navmesh` file. You can find `navmesh` files stored in a folder with the same name as the corresponding scene (prefixed by “`NavMesh-`”).

## Architectural patterns and decisions

### Dependency injection

Boss Room implements the [Dependency Injection](https://en.wikipedia.org/wiki/Dependency_injection) (DI) pattern using the [`VContainer`](https://vcontainer.hadashikick.jp/) library. DI allows Boss Room to clearly define its dependencies in code instead of using static access, pervasive singletons, or scriptable object references (Scriptable Object Architecture). Code is easy to version-control and comparatively easy to understand for a programmer, unlike Unity YAML-based objects, such as scenes, scriptable object instances, and prefabs.

DI also allows Boss Room to circumvent the problem of cross-scene references to common dependencies, even though it still has to manage the lifecycle of MonoBehaviour-based dependencies by marking them with `DontDestroyOnLoad` and destroying them manually when appropriate.

:::note
`ApplicationController` inherits from the `VContainer`'s `LifetimeScope`, a class that serves as a dependency injection scope and bootstrapper that facilitates binding dependencies. Scene-specific State classes inherit from `LifetimeScope`, too.
:::

In the Unity Editor Inspector, you can choose a parent scope for any `LifetimeScope`. When doing so, it's helpful to set a cross-scene reference to some parent scopes, most commonly the `ApplicationController`. Setting a cross-scene reference allows you to bind scene-specific dependencies while maintaining easy access to the global dependencies of the `ApplicationController` in the State-specific version of a `LifetimeScope` object.

### `Client`/`Server` code separation

A challenge the Boss Room development team encountered when developing Boss Room was that code would often run in a single context, either client or server. Reading mixed client and server code adds a layer of complexity, making mistakes more likely.

To solve this challenge, they explored different client-server code separation approaches. The team eventually decided to revert the initial client/server/shared assemblies to a more classic domain-driven assembly architecture while keeping more complex classes separated by client/server.

The initial thought was that separating assemblies by client and server would allow for easier porting to a dedicated game server (DGS) model afterward; the team would only need to strip a single assembly to ensure code only runs when necessary.

However, this approach had two primary issues:

* It introduced callback hell, which made code (that should be trivial) too complex. You can look at the different action implementations in Boss Room 1.3.1 to see this.
* Many components were better suited as single simple classes instead of three-class horrors.

After investigation, the Boss Room development team determined that client/server separation was unnecessary for the following reasons:

* There's no need for [asmdef (assembly definition)](https://docs.unity3d.com/Manual/cus-asmdef.html) stripping because you can ifdef out single classes instead.
* It's not completely necessary to ifdef classes because it's only compile-time insurance that certain parts of client-side code never run. You can still disable the component on Awake at runtime if it's not mean to run on the server or client.
* The added complexity outweighed the pros that'd help with stripping whole assemblies.
* Most `Client`/`Server` class pairs are tightly coupled and call one another; they have split implementations of the same logical object. Separating them into different assemblies forces you to create “bridge classes” to avoid circular dependencies between your client and server assemblies. By putting your client and server classes in the same assemblies, you allow those circular dependencies in those tightly coupled classes and remove unnecessary bridging and abstractions.
* Whole assembly stripping is incompatible with Netcode for GameObjects because Netcode for GameObjects doesn't support NetworkBehaviour stripping. Components related to a NetworkObject must match on the client and server sides. If these components aren't identical, it creates undefined runtime errors (the errors will change from one use to another; they range from no issue, to silent errors, to buffer exceptions) with Netcode for GameObjects' NetworkBehaviour indexing.

After those experiments, the Boss Room development team established new rules for the codebase:

* Use domain-based assemblies
* Use single classes for small components (for example, the Boss Room door with a simple on/off state).
    * If a class never grows too big, use a single NetworkBehaviour (because it's easy to maintain).
* Use client and server classes (with each pointing to the other) for client/server separation.
* Place client/server pairs in the same assembly.
* If you start the game as a client, the server components disable themselves, leaving you with only client components executing. Ensure you don't destroy the server components. Netcode for GameObjects still requires the server component for network message sending.
* The clients have a `m_Server`, and servers have a `m_Client` property.
* The `Server` class owns server-driven `NetworkVariables`. Similarly, the `Client` class owns owner-driven `NetworkVariables`. This ownership separation helps make larger classes more readable and maintainable.
* Use partial classes when separating by context isn't possible.
* Continue using the `Client`/`Server` prefix to make contexts more obvious. Note: You can't use prefixes for `ScriptableObjects` that have file name requirements.
* Use `Client`/`Server`/`Shared` separation when you have a one-to-many relationship where your server class needs to send information to many client classes. You can also achieve this with the [`NetworkedMessageChannel`](#networkedmessagechannel).

You still need to take care of code executing in `Start` and `Awake`. If the code in `Start` and `Awake` runs simultaneously with the NetworkManager's initialization, it might not know whether the player is a host or client.

### Publisher-Subscriber Messaging

Boss Room implements a dependency injection-friendly Publisher-Subscriber pattern that allows Boss Room to send and receive strongly-typed messages in a loosely coupled manner, where communicating systems only know about the `IPublisher`/`ISubscriber` of a given message type.

Because publishers and subscribers are classes, Boss Room can have more interesting behavior for message transfer, such as buffered and networked messaging. See the [`NetworkedMessageChannel`](#networkedmessagechannel) section.

These mechanisms allow Boss Room to avoid circular references and limit the dependency surface between assemblies. Cross-communicating systems rely on common messages but don't necessarily need to know about each other. Because messages don't need to know about each other, Boss Room can more easily separate them into smaller assemblies.

These mechanisms allow for strong separation of concerns and coupling reduction using PubSub and dependency injection (DI). Boss Room uses DI to pass the handles to the `IPublisher` or `ISubscriber` of any given event type. As a result, message publishers and consumers are unaware of each other.

`MessageChannel` classes implement the `IPublisher` and `ISubscriber` interfaces and have the actual messaging logic.

:::note
The Boss Room development team considered using a third party library for messaging (like `MessagePipe`). However, since Boss Room needed custom networked channels and the use cases were quite simple, the team decided to go with an in-house light implementation. If Boss Room was a full game with more gameplay, it'd benefit more from a library that with more features.
:::

#### `NetworkedMessageChannel`

With in-process messaging, Boss Room implements the `NetworkedMessageChannel`, which uses the same API, but allows for sending data between peers. Boss Room implements the Netcode synchronization for these using custom Netcode for GameObjects messaging, which serves as a useful synchronization primitive in the codebase arsenal.


## Links discovered
- [Assembly structure](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/images/arch-2.png)
- [Application Flow Diagram](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/images/arch-1.png)
- [set up the Relay service](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Documentation/Unity-Relay/README.md)
- [Multiplayer over the internet](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/samples/bossroom/getting-started-boss-room.md)
- [Unity Transport package](https://docs.unity3d.com/Packages/com.unity.transport@latest?subfolder=/manual/index.html)
- [Unity Relay](https://docs-multiplayer.unity3d.com/docs/relay/relay)
- [Connection flow state machine](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/images/arch-3.png)
- [Session Management](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/advanced-topics/session-management.md)
- [Unity Gaming Services](https://unity.com/solutions/gaming-services)
- [`AuthenticationServiceFacade.cs`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/UnityServices/Auth/AuthenticationServiceFacade.cs)
- [`LobbyServiceFacade.cs`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/UnityServices/Lobbies/LobbyServiceFacade.cs)
- [Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/UI/Lobby/LobbyUIMediator.cs)
- [Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/ConnectionManagement/ConnectionState/OfflineState.cs)
- [`GameDataSource.cs`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/GameplayObjects/RuntimeDataContainers/GameDataSource.cs)
- [`CharacterClass`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Configuration/CharacterClass.cs)
- [`Action`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Configuration/Action.cs)
- [`ServerActionPlayer`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ActionPlayers/ServerActionPlayer.cs)
- [`ClientActionPlayer`](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Assets/Scripts/Gameplay/Action/ActionPlayers/ClientActionPlayer.cs)
- [Dependency Injection](https://en.wikipedia.org/wiki/Dependency_injection)
- [`VContainer`](https://vcontainer.hadashikick.jp/)
- [asmdef (assembly definition)](https://docs.unity3d.com/Manual/cus-asmdef.html)

--- CONTRIBUTING.md ---
# Contributing

Thank you for your interest in contributing to Unity Multiplayer Networking!

Here are our guidlines for contributing:

* [Code of Conduct](#coc)
* [Ways to Contribute](#ways)
* [Issues and Bugs](#issue)
* [Feature Requests](#feature)
* [Improving Documentation](#docs)
* [Unity Contribution Agreement](#cla)
* [Pull Request Submission Guidlines](#submit-pr)

## <a name="coc"></a> Code of Conduct

Please help us keep Unity Netcode for GameObjects open and inclusive. Read and follow our [Code of Conduct](CODE_OF_CONDUCT.md).

## <a name="ways"></a> Ways to Contribute

There are many ways in which you can contribute to Netcode for GameObjects.

### <a name="issue"></a> Issues and Bugs

If you find a bug in the source code, you can help us by submitting an issue to our
GitHub Repository. Even better, you can submit a Pull Request with a fix.

### <a name="feature"></a> Feature Requests

You can request a new feature by submitting an issue to our GitHub Repository.

If you would like to implement a new feature then consider what kind of change it is:

* **Major Changes** that you wish to contribute to the project should be discussed first with other developers. We will have a more formal process for this soon. For now submit your ideas as an issue.

* **Small Changes** can be directly submitted to the GitHub Repository
  as a Pull Request. See the section about [Pull Request Submission Guidelines](#submit-pr).

### <a name="docs"></a> Documentation

We accept changes and improvements to our documentation. Just submit a Pull Request with your proposed changes as described in the [Pull Request Submission Guidelines](#submit-pr).

## <a name="cla"></a> Contributor License Agreements

When you open a pull request, you will be asked to enter into Unity's License Agreement which is based on The Apache Software Foundation's contribution agreement. We allow both individual contributions and contributions made on behalf of companies. We use an open source tool called CLA assistant. If you have any questions on our CLA, please submit an issue

## <a name="submit-pr"></a> Pull Request Submission Guidelines

We use the [Gitflow Workflow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow) for the development of the Netcode for GameObjects. This means development happens on the **develop branch** and Pull Requests should be submited to it.

### Commit Message Guidelines
We have very precise rules over how our git commit messages can be formatted.  This leads to **more
readable messages** that are easy to follow when looking through the **project history**. We follow angular's message format.

#### **Commit Message Format**
Each commit message consists of a **header**, a **body** and a **footer**.  The header has a special
format that includes a **type**, a **scope** and a **subject**:

```
<type>(<scope>): <subject>
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
```

The **header** is mandatory and the **scope** of the header is optional.

Any line of the commit message cannot be longer 100 characters! This allows the message to be easier
to read on GitHub as well as in various git tools.

The footer should contain a [closing reference to an issue](https://help.github.com/articles/closing-issues-via-commit-messages/) if any.

If the change isn't backwards compatible. You have to disclose that in the footer like this. Here is an example:
```
perf(networked-vars): Improved performance by removing duplex functionality

BREAKING CHANGE: Removes duplex functionality from network variables in order to improve performance
```
Samples:

```
docs(changelog): update changelog to beta.5
```
```
fix(release): need to depend on latest rxjs and zone.js

The version in our package.json gets copied to the one we publish, and users need the latest of these.
```

### Revert
If the commit reverts a previous commit, it should begin with `revert: `, followed by the header of the reverted commit. In the body it should say: `This reverts commit <hash>.`, where the hash is the SHA of the commit being reverted.

### Type
Must be one of the following:

* **build**: Changes that affect the build system or external dependencies (example scopes: msbuild, xUnit)
* **ci**: Changes to our CI configuration files and scripts (example scopes: AppVeyor, xUnit)
* **docs**: Documentation only changes
* **feat**: A new feature
* **fix**: A bug fix
* **perf**: A code change that improves performance
* **refactor**: A code change that neither fixes a bug nor adds a feature
* **style**: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)
* **test**: Adding missing tests or correcting existing tests

Always write a clear log message for your commits. One-line messages are fine for small changes, but bigger changes should look like this:

    $ git commit -m "A brief summary of the commit
    > 
    > A paragraph describing what changed and its impact."


## Links discovered
- [Code of Conduct](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/CODE_OF_CONDUCT.md)
- [Gitflow Workflow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow)
- [closing reference to an issue](https://help.github.com/articles/closing-issues-via-commit-messages/)

--- LICENSE.md ---
Unity Companion License (UCL License)

com.unity.netcode.gameobjects copyright ©  2021-2024 Unity Technologies
Licensed under the Unity Companion License for Unity-dependent projects (see https://unity3d.com/legal/licenses/unity_companion_license).
Unless expressly provided otherwise, the Software under this license is made available strictly on an “AS IS” BASIS WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED. Please review the license for details on these and other terms and conditions.




--- com.unity.netcode.gameobjects/CHANGELOG.md ---
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/) and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

Additional documentation and release notes are available at [Multiplayer Documentation](https://docs-multiplayer.unity3d.com).

## [Unreleased]

### Added


### Changed

- If the Unity Transport Disconnect Timeout is set to 0 in the Editor, the timeout will be entirely disabled. (#3810)

### Deprecated


### Removed


### Fixed

- Fixed issue where maxCapacity calculation overflows if a developer sets a very, very high (large) m_DisconnectTimeoutMS in the Editor for Unity Transport. (#3810)

### Security


### Obsolete


## [2.8.0] - 2025-12-15

### Added

- It is now possible to control which port clients will bind to using the `UnityTransport.ConnectionData.ClientBindPort` field. If not set, clients will bind to an ephemeral port (same as before this change). (#3764)
- Added a flag to override command-line arguments (port and ip) in `SetConnectionData`. (#3760)
- Added a command-line singleton to parse environment command-line arguments. (#3760)
- Added `NetworkAnimator.AuthorityMode` which allows you to select whether the `NetworkAnimator` will use a server or owner authority model for state updates (like `NetworkTransform`). (#3586)
- Added the ability to select which `Animator` parameters the authority `NetworkAnimator` instance should synchronize. This can be done via the inspector view interface or during runtime via `NetworkAnimator.EnableParameterSynchronization`. (#3586)

### Changed

- Improve performance of `ParentSyncMessage`. (#3814)
- Improve performance of `DestroyObjectMessage`. (#3801)
- Improve performance of `CreateObjectMessage`. (#3800)
- First pass of CoreCLR engine API changes. (#3799)
- Changed when a server is disconnecting a client with a reason it now defers the complete transport disconnect sequence until the end of the frame after the server's transport has sent all pending outbound messages. (#3786)
- Improve performance of `NetworkTransformState`. (#3770)
- Changed NetworkAnimator to use the `RpcAttribute` along with the appropriate `SendTo` parameter. (#3586)

### Fixed

- Ensure `NetworkBehaviour.IsSessionOwner` is correctly set when a new session owner is promoted. (#3817)
- Fixed issue where spawning a player in distributed authority mode via a client, typically session owner, other than the newly connected client and scene management is disabled then the already spawned players will not properly get synchronized by each owning client due to the newly connected client's identifier already being added prior to synchronization. (#3816)
- Reset extended ownership flags on `NetworkObject` despawn. (#3817)
- Fixed issues with the "Client-server quickstart for Netcode for GameObjects" script having static methods and properties. (#3787)
- Fixed issue where a warning message was being logged upon a client disconnecting from a server when the log level is set to developer. (#3786)
- Fixed issue where the server or host would no longer have access to the transport id to client id table when processing a transport level client disconnect event. (#3786)
- Fixed issue where invoking an RPC, on another `NetworkBehaviour` associated with the same `NetworkObject` that is ordered before the `NetworkBehaviour` invoking the RPC, during `OnNetworkSpawn` could throw an exception if scene management is disabled. (#3782)
- Fixed issue where the `Axis to Synchronize` toggles didn't work with multi object editing in `NetworkTransform`. (#3781)
- Fixed issue where using the dedicated server package would override all attempts to change the port by code. (#3760)
- Fixed issue with authority animator instance sending itself RPCs. (#3586)

## [2.7.0] - 2025-10-27

### Added

- `RpcInvokePermission` to control who has permission to invoke specific RPC methods. (#3731)
- Added NetworkRigidbody documentation section. (#3664)
- Added new fields to the `SceneMap` struct when using Unity 6.3 or higher. These fields allow referencing scene handles via the new `SceneHandle` struct. (#3734)

### Changed

- Better error message when using generic IEquatable in a generic INetworkSerializable class and updated documentation with workaround. (#3739)
- The `NetworkManager` functions `GetTransportIdFromClientId` and `GetClientIdFromTransportId` will now return `ulong.MaxValue` when the clientId or transportId do not exist. (#3707)
- Changed NetworkShow to send a message at the end of the frame and force a NetworkVariable synchronization prior to generating the CreateObjectMessage as opposed to waiting until the next network tick to synchronize the show with the update to NetworkVariables. (#3664)
- Changed NetworkTransform now synchronizes `NetworkTransform.SwitchTransformSpaceWhenParented` when it is updated by the motion model authority. (#3664)
- Changed when NetworkObjects pending to be shown to clients can now occur on partial network ticks. If any pending NetworkObjects pending to be shown to clients happens to be ready on a new network tick they still are shown after network variable deltas have been processed. (#3664)
- Changed the default `NetworkDelivery` used by all messages is now reliable fragmented sequenced with the exception of named, unnamed, and any messages sent with a user specified network delivery type. This assures certain order of operations to be preserved when same call-stack changes are applied to a newly spawned, authority side, NetworkObject. (#3664)
- Changed NetworkTransform documentation to better reflect the Teleport methods intended usage along with updates to NetworkObject and physics areas of the documentation. (#3664)
- The first session owner no longer sends two synchronization messages to the service. (#3563)
- Updated transport dependency of the package to 2.6.0 (#3736)

### Deprecated

- Deprecated all `RequireOwnership` fields around the RPCs in favor of the `RpcInvokePermission`. (#3731)
- On Unity 6.5 some `SceneMap` fields that use an `int` to represent a `SceneHandle` are deprecated. (#3734)

### Removed

- Removed usage of UNITY_UNET_PRESENT define (#3736)

### Fixed

- CMB service no longer waits for a timeout before disconnecting on an invalid ConnectionRequest. (#3812)
- Initialization errors with NetworkAnimator. (#3767)
- Multiple disconnect events from the same transport will no longer disconnect the host. (#3707)
- Fixed NetworkTransform state synchronization issue when `NetworkTransform.SwitchTransformSpaceWhenParented` is enabled and the associated NetworkObject is parented multiple times in a single frame or within a couple of frames. (#3664)
- Fixed issue when spawning, parenting, and immediately re-parenting when `NetworkTransform.SwitchTransformSpaceWhenParented` is enabled. (#3664)
- Fixed issue where the disconnect event and provided message was too generic to know why the disconnect occurred. (#3551)
- Exception when the network prefab list in the network manager has uninitialized elements. (#3739)

## [2.6.0] - 2025-10-12

### Added

- `NetworkSceneManager` as an internal wrapper for the `SceneManager.Scene.handle` and swapped all places that use an `int` to represent a `Scene.handle` to instead use the `NetworkSceneManager`. (#3647)
- Clicking on the Help icon in the inspector will now redirect to the relevant documentation. (#3663)
- Added a `Set` function onto `NetworkList` that takes an optional parameter that forces an update to be processed even if the current value is equal to the previous value. (#3690)

### Changed

- Improved performance of the NetworkVariable. (#3683)
- Improved performance around the NetworkBehaviour component. (#3687)

### Fixed

- Distributed authority clients no longer send themselves in the `ClientIds` list when sending a `ChangeOwnershipMessage`. (#3687)
- Made a variety of small performance improvements. (#3683)

## [2.5.1] - 2025-09-14

### Added

- Added a warning when `NetworkManager.NetworkConfig.ConnectionApproval` is set in a distributed authority context. (#3658)

### Fixed

- Fixed issue where a client, under above average latency and packet loss conditions, could receive multiple NetworkTransform state updates in one frame and when processing the state updates only the last state update would be applied to the transform if interpolation was disabled. (#3614)

## [2.5.0] - 2025-08-17

### Added

- Added `AsNativeArray()` read‑only accessor to `NetworkList<T>` (#3567)
- Added serializer for `Pose` (#3546)
- Added `AttachableBehaviour` helper component to provide an alternate approach to parenting items without using the `NetworkObject` parenting. (#3518)
- Added `AttachableNode` helper component that is used by `AttachableBehaviour` as the target node for parenting. (#3518)
- Added `ComponentController` helper component that can be used to synchronize the enabling and disabling of components and can be used in conjunction with `AttachableBehaviour`. (#3518)
- Added `NetworkBehaviour.OnNetworkPreDespawn` that is invoked before running through the despawn sequence for the `NetworkObject` and all NetworkBehaviour children of the `NetworkObject` being despawned. (#3518)
- Added methods `GetDefaultNetworkSettings` and `GetDefaultPipelineConfigurations` to `UnityTransport`. These can be used to retrieve the default settings and pipeline stages that are used by `UnityTransport`. This is useful when providing a custom driver constructor through `UnityTransport.s_DriverConstructor`, since it allows reusing or tuning the existing configuration instead of trying to recreate it. This means a transport with a custom driver can now easily benefit from most of the features of `UnityTransport`, like integration with the Network Simulator and Network Profiler from the multiplayer tools package. (#3501)
- Added mappings between `ClientId` and `TransportId`. (#3516)
- Added `NetworkPrefabInstanceHandlerWithData<T>`, a variant of `INetworkPrefabInstanceHandler` that provides access to custom instantiation data directly within the `Instantiate()` method. (#3497)

### Fixed

- Removed allocation to the heap in NetworkBehaviourUpdate. (#3573)
- Fixed issue where NetworkConfig.ConnectionData could cause the ConnectionRequestMessage to exceed the transport's MTU size and would result in a buffer overflow error. (#3564)
- Fixed regression issue in v2.x where `NetworkObject.GetNetworkBehaviourAtOrderIndex` was converted from public to internal. (#3541)
- Fixed ensuring OnValueChanged callback is still triggered on the authority when a collection changes and then reverts to the previous value in the same frame. (#3539)
- Fixed synchronizing the destroyGameObject parameter to clients for InScenePlaced network objects. (#3514)
- Fixed distributed authority related issue where enabling the `NetworkObject.DestroyWithScene` would cause errors when a destroying non-authority instances due to loading (single mode) or unloading scene events. (#3500)
- Fixed an issue where `UnityTransport` would not accept single words as valid hostnames (notably "localhost"). (#3591)
- Fixed issue where viewing a `NetworkBehaviour` with one or more `NetworkVariable` fields could throw an exception if running a distributed authority network topology with a local (DAHost) host and viewed on the host when the host is not the authority of the associated `NetworkObject`. (#3578)
- Fixed issue when using a distributed authority network topology and  viewing a `NetworkBehaviour` with one or more `NetworkVariable` fields in the inspector view would not show editable fields. (#3578)
- Fixed issue with unnecessary internal GC Allocations when using the `IReadOnlyList`  `NetworkManager.ConnectedClientsIds` within a `foreach` statement by either replacing with a `for` loop or directly referencing the `NetworkConnectionManager.ConnectedClientIds`. (#3527)

### Changed

- Marked `UnityTransport.ConnectionAddressData.ServerEndPoint` as obsolete. It can't work when using hostnames as the server address, and its functionality can easily be replicated using `NetworkEndpoint.Parse`. (#3591)
- Optimized `NetworkList<T>` indexer setter to skip operations when the new value equals the existing value, improving performance by avoiding unnecessary list events and network synchronization. (#3587)

## [2.4.4] - 2025-07-07

### Added

- Added documentation to package repository.

## [2.4.3] - 2025-06-25

### Fixed

- Fixed issue where spawned objects with `NetworkObject.DontDestroyWithOwner` set to `false` would not be destroyed when using a client-server network topology. (#3522)


## [2.4.2] - 2025-06-13

### Fixed

- Fixed `NullReferenceException` on `NetworkList` when used without a NetworkManager in scene. (#3503)
- Fixed issue where `NetworkClient` could persist some settings if re-using the same NetworkManager instance. (#3491)
- Fixed issue where a pooled `NetworkObject` was not resetting the internal latest parent property when despawned. (#3491)
- Fixed issue where the initial client synchronization pre-serialization process was not excluding spawned `NetworkObject` instances that already had pending visibility for the client being synchronized. (#3488)
- Fixed issue where there was a potential for a small memory leak in the `ConnectionApprovedMessage`. (#3486)


## [2.4.1] - 2025-06-11

### Added

- Added: Full XML API documentation coverage primarily focused around the test helpers API. (#3444)

### Changed

- Changed: Assembly names while keeping the same namespaces. If your project is using the `Unity.Netcode.TestHelpers.Runtime` assembly then you need to switch `asmdef` references to `Unity.Netcode.Runtime.Tests`. (#3444)
- Changed: Migrated multiplayer metrics tests to Multiplayer Tools repository and removed the multiplayer tools test project. (#3444)


## [2.4.0] - 2025-06-02

### Added

- Added `SinglePlayerTransport` that provides the ability to start as a host for a single player network session. (#3473)
- When using UnityTransport >=2.4 and Unity >= 6000.1.0a1, SetConnectionData will accept a fully qualified hostname instead of an IP as a connect address on the client side. (#3441)


### Fixed

- Fixed issue where the `NetworkObject.DontDestroyWithOwner` was not being honored. (#3477)
- Fixed issue where non-authority NetworkTransform instances would not allow non-synchronized axis values to be updated locally. (#3471)
- Fixed issue where invoking `NetworkObject.NetworkShow` and `NetworkObject.ChangeOwnership` consecutively within the same call stack location could result in an unnecessary change in ownership error message generated on the target client side. (#3468)
- Fixed issue where `NetworkVariable`s on a NetworkBehaviour could fail to synchronize changes if one has `NetworkVariableUpdateTraits` set and is dirty but is not ready to send. (#3466)
- Fixed issue with the Distributed Authority connection sequence with scene management enabled where the `ClientConnected` event was fired before the client was synchronized. (#3459)
- Fixed inconsistencies in the `OnSceneEvent` callback. (#3458)
- Fixed issues with the NetworkBehaviour and `NetworkVariable` length safety checks. (#3405)
- Fixed memory leaks when domain reload is disabled. (#3427)
- Fixed issue where disabling the physics or physics2D package modules could result in a compilation error. (#3422)
- Fixed an exception being thrown when unregistering a custom message handler from within the registered callback. (#3417)

## [2.3.2] - 2025-04-22

### Fixed

- Fixed issue where the authority instance of NetworkTransform could check for state updates more than one time in a frame if the frame rate is greater than the tick frequency. (#3413)
- Fixed issue where the new interpolator types were blocking after the first consumption of a sequence of buffered state updates. (#3413)
- Fixed issue where root level in-scene placed `NetworkObject`s would only allow the ownership permission to be no less than distributable or sessionowner. (#3407)


## [2.3.1] - 2025-04-14

### Fixed

- Fixed issue where during a `NetworkObject`'s spawn if you instantiated, spawned, and parented another network prefab under the currently spawning `NetworkObject` the parenting message would not properly defer until the parent `NetworkObject` was spawned. (#3401)


## [2.3.0] - 2025-04-09

### Added

- Added `NetworkManager.OnPreShutdown` which is called before the NetworkManager cleans up and shuts down. (#3366)
- Added `Lerp` interpolation type that still uses a lerp approach but uses the new buffer consumption logic. (#3355)
- Added property to enable or disable lerp smoothing for position, rotation, and scale interpolators. (#3355)
- Added `NetworkTransform.InterpolationBufferTickOffset` static property to provide users with a way to increase or decrease the time marker where interpolators will pull state update from the queue. (#3355)
- Added interpolator types as an inspector view selection for position, rotation, and scale. (#3337)
- Added a new smooth dampening interpolator type that provides a nice balance between precision and smoothing results. (#3337)
- Added `NetworkTimeSystem.TickLatency` property that provides the average latency of a client. (#3337)
- Added `FastBufferReader(ArraySegment<byte> buffer, Allocator copyAllocator)` constructor that uses the `ArraySegment.Offset` as the `FastBufferReader` offset and the `ArraySegment.Count` as the `FastBufferReader` length. (#3321)
- Added `FastBufferReader(ArraySegment<byte> buffer, Allocator copyAllocator, int length = -1)` constructor that uses the `ArraySegment.Offset` as the `FastBufferReader` offset. (#3321)

### Fixed

- Fixed issue where in-scene placed `NetworkObjects` could fail to synchronize its transform properly (especially without a NetworkTransform) if their parenting changes from the default when the scene is loaded and if the same scene remains loaded between network sessions while the parenting is completely different from the original hierarchy. (#3387)
- Fixed an issue in `UnityTransport` where the transport would accept sends on invalid connections, leading to a useless memory allocation and confusing error message. (#3382)
- Fixed issue where the time delta that interpolators used would not be properly updated during multiple fixed update invocations within the same player loop frame. (#3355)
- Fixed issue when using a distributed authority network topology and many clients attempt to connect simultaneously the session owner could max-out the maximum in-flight reliable messages allowed, start dropping packets, and some of the connecting clients would fail to fully synchronize. (#3350)
- Fixed issue when using a distributed authority network topology and scene management was disabled clients would not be able to spawn any new network prefab instances until synchronization was complete. (#3350)
- Fixed issue where an owner that changes ownership, when using a distributed authority network topology, could yield identical previous and current owner identifiers. This could also cause NetworkTransform to fail to change ownership which would leave the previous owner still subscribed to network tick events. (#3347)
- Fixed issue where the `MaximumInterpolationTime` could not be modified from within the inspector view or runtime. (#3337)
- Fixed `ChangeOwnership` changing ownership to clients that are not observers. This also happened with automated object distribution. (#3323)
- Fixed issue where `AnticipatedNetworkVariable` previous value returned by `AnticipatedNetworkVariable.OnAuthoritativeValueChanged` is updated correctly on the non-authoritative side. (#3306)
- Fixed `OnClientConnectedCallback` passing incorrect `clientId` when scene management is disabled. (#3312)
- Fixed issue where the `NetworkObject.Ownership` custom editor did not take the default "Everything" flag into consideration. (#3305)
- Fixed DestroyObject flow on non-authority game clients. (#3291)
- Fixed exception being thrown when a `GameObject` with an associated NetworkTransform is disabled. (#3243)
- Fixed issue where the scene migration synchronization table was not cleaned up if the `GameObject` of a `NetworkObject` is destroyed before it should have been. (#3230)
- Fixed issue where the scene migration synchronization table was not cleaned up upon NetworkManager shutting down. (#3230)
- Fixed `NetworkObject.DeferDespawn` to respect the `DestroyGameObject` parameter. (#3219)
- Fixed issue where a `NetworkObject` with nested NetworkTransform components of varying authority modes was not being taken into consideration and would break both the initial NetworkTransform synchronization and fail to properly handle synchronized state updates of the nested NetworkTransform components. (#3209)
- Fixed issue with distributing parented children that have the distributable and/or transferrable permissions set and have the same owner as the root parent, that has the distributable permission set, were not being distributed to the same client upon the owning client disconnecting when using a distributed authority network topology. (#3203)
- Fixed issue where a spawned `NetworkObject` that was registered with a prefab handler and owned by a client would invoke destroy more than once on the host-server side if the client disconnected while the `NetworkObject` was still spawned. (#3200)
- Fixed issue where `NetworkVariableBase` derived classes were not being re-initialized if the associated `NetworkObject` instance was not destroyed and re-spawned. (#3181)

### Changed

- Changed the scene loading event serialization order for in-scene placed `NetworkObject`s to be based on their parent-child hierarchy. (#3387)
- Changed the original `Lerp` interpolation type to `LegacyLerp`. (#3355)
- Changed `BufferedLinearInterpolator<T>.Update(float deltaTime, NetworkTime serverTime)` as being deprecated since this method is only used for internal testing purposes. (#3337)
- Changed error thrown when attempting to build a dedicated server with Unity Transport that uses websockets to provide more useful information to the user. (#3336)
- Changed root in-scene placed `NetworkObject` instances now will always have either the `Distributable` permission set unless the `SessionOwner` permission is set. (#3305)
- Changed the `DestroyObject` message to reduce the serialized message size and remove the unnecessary message field. (#3304)
- Changed the `NetworkTimeSystem.Sync` method to use half RTT to calculate the desired local time offset as opposed to the full RTT. (#3212)

## [2.2.0] - 2024-12-12

### Added

- Added `NetworkObject.OwnershipStatus.SessionOwner` to allow Network Objects to be distributable and only owned by the Session Owner. This flag will override all other `OwnershipStatus` flags. (#3175)
- Added `UnityTransport.GetEndpoint` method to provide a way to obtain `NetworkEndpoint` information of a connection via client identifier. (#3130)
- Added `NetworkTransport.OnEarlyUpdate` and `NetworkTransport.OnPostLateUpdate` methods to provide more control over handling transport related events at the start and end of each frame. (#3113)

### Fixed

- Fixed issue where the server, host, or session owner would not populate the in-scene place `NetworkObject` table if the scene was loaded prior to starting the NetworkManager. (#3177)
- Fixed issue where the `NetworkObjectIdHash` value could be incorrect when entering play mode while still in prefab edit mode with pending changes and using MPPM. (#3162)
- Fixed issue where a sever only NetworkManager instance would spawn the actual `NetworkPrefab`'s `GameObject` as opposed to creating an instance of it. (#3160)
- Fixed issue where only the session owner (as opposed to all clients) would handle spawning prefab overrides properly when using a distributed authority network topology. (#3160)
- Fixed issue where an exception was thrown when calling `NetworkManager.Shutdown` after calling `UnityTransport.Shutdown`. (#3118)
- Fixed issue where `NetworkList` properties on in-scene placed `NetworkObject`s could cause small memory leaks when entering playmode. (#3147)
- Fixed in-scene `NertworkObject` synchronization issue when loading a scene with currently connected clients connected to a session created by a NetworkManager started as a server (i.e. not as a host). (#3133)
- Fixed issue where a NetworkManager started as a server would not add itself as an observer to in-scene placed `NetworkObject`s instantiated and spawned by a scene loading event. (#3133)
- Fixed issue where spawning a player using `NetworkObject.InstantiateAndSpawn` or `NetworkSpawnManager.InstantiateAndSpawn` would not update the `NetworkSpawnManager.PlayerObjects` or assign the newly spawned player to the `NetworkClient.PlayerObject`. (#3122)
- Fixed issue where queued UnitTransport (NetworkTransport) message batches were being sent on the next frame. They are now sent at the end of the frame during `PostLateUpdate`.  (#3113)
- Fixed issue where `NotOwnerRpcTarget` or `OwnerRpcTarget` were not using their replacements `NotAuthorityRpcTarget` and `AuthorityRpcTarget` which would invoke a warning. (#3111)
- Fixed issue where client is removed as an observer from spawned objects when their player instance is despawned. (#3110)
- Fixed issue where NetworkAnimator would statically allocate write buffer space for `Animator` parameters that could cause a write error if the number of parameters exceeded the space allocated. (#3108)

### Changed

- In-scene placed `NetworkObject`s have been made distributable when balancing object distribution after a connection event. (#3175)
- Optimised `NetworkVariable` and NetworkTransform related packets when in Distributed Authority mode.
- The Debug Simulator section of the Unity Transport component was removed. This section was not functional anymore and users are now recommended to use the more featureful [Network Simulator](https://docs-multiplayer.unity3d.com/tools/current/tools-network-simulator/) tool from the Multiplayer Tools package instead. (#3121)

## [2.1.1] - 2024-10-18

### Added

- Added ability to edit the `NetworkConfig.AutoSpawnPlayerPrefabClientSide` within the inspector view. (#3097)
- Added `IContactEventHandlerWithInfo` that derives from `IContactEventHandler` that can be updated per frame to provide `ContactEventHandlerInfo` information to the `RigidbodyContactEventManager` when processing collisions. (#3094)
  - `ContactEventHandlerInfo.ProvideNonRigidBodyContactEvents`: When set to true, non-`Rigidbody` collisions with the registered `Rigidbody` will generate contact event notifications. (#3094)
  - `ContactEventHandlerInfo.HasContactEventPriority`: When set to true, the `Rigidbody` will be prioritized as the instance that generates the event if the `Rigidbody` colliding does not have priority. (#3094)
- Added a static `NetworkManager.OnInstantiated` event notification to be able to track when a new NetworkManager instance has been instantiated. (#3088)
- Added a static `NetworkManager.OnDestroying` event notification to be able to track when an existing NetworkManager instance is being destroyed. (#3088)

### Fixed

- Fixed issue where `NetworkPrefabProcessor` would not mark the prefab list as dirty and prevent saving the `DefaultNetworkPrefabs` asset when only imports or only deletes were detected.(#3103)
- Fixed an issue where nested NetworkTransform components in owner authoritative mode cleared their initial settings on the server, causing improper synchronization. (#3099)
- Fixed issue with service not getting synchronized with in-scene placed `NetworkObject` instances when a session owner starts a `SceneEventType.Load` event. (#3096)
- Fixed issue with the in-scene network prefab instance update menu tool where it was not properly updating scenes when invoked on the root prefab instance. (#3092)
- Fixed an issue where newly synchronizing clients would always receive current `NetworkVariable` values, potentially causing issues with collections if there were pending updates. Now, pending state updates serialize previous values to avoid duplicates on new clients. (#3081)
- Fixed issue where changing ownership would mark every `NetworkVariable` dirty. Now, it will only mark any `NetworkVariable` with owner read permissions as dirty and will send/flush any pending updates to all clients prior to sending the change in ownership message. (#3081)
- Fixed an issue where transferring ownership of `NetworkVariable` collections didn't update the new owner’s previous value, causing the last added value to be detected as a change during additions or removals. (#3081)
- Fixed issue where a client (or server) with no write permissions for a `NetworkVariable` using a standard .NET collection type could still modify the collection which could cause various issues depending upon the modification and collection type. (#3081)
- Fixed issue where applying the position and/or rotation to the `NetworkManager.ConnectionApprovalResponse` when connection approval and auto-spawn player prefab were enabled would not apply the position and/or rotation when the player prefab was instantiated. (#3078)
- Fixed issue where `NetworkObject.SpawnWithObservers` was not being honored when spawning the player prefab. (#3077)
- Fixed issue with the client count not being correct on the host or server side when a client disconnects itself from a session. (#3075)

### Changed

- Changed `NetworkConfig.AutoSpawnPlayerPrefabClientSide` is no longer automatically set when starting NetworkManager. (#3097)
- Updated `NetworkVariableDeltaMessage` so the server now forwards delta state updates from clients immediately, instead of waiting until the end of the frame or the next network tick. (#3081)

## [2.0.0] - 2024-09-12

### Added

- Added tooltips for all of the `NetworkObject` component's properties. (#3052)
- Added message size validation to named and unnamed message sending functions for better error messages. (#3049)
- Added "Check for NetworkObject Component" property to the Multiplayer->Netcode for GameObjects project settings. When disabled, this will bypass the in-editor `NetworkObject` check on NetworkBehaviour components. (#3031)
- Added `NetworkTransform.SwitchTransformSpaceWhenParented` property that, when enabled, will handle the world to local, local to world, and local to local transform space transitions when interpolation is enabled. (#3013)
- Added `NetworkTransform.TickSyncChildren` that, when enabled, will tick synchronize nested and/or child NetworkTransform components to eliminate any potential visual jittering that could occur if the NetworkTransform instances get into a state where their state updates are landing on different network ticks. (#3013)
- Added `NetworkObject.AllowOwnerToParent` property to provide the ability to allow clients to parent owned objects when running in a client-server network topology. (#3013)
- Added `NetworkObject.SyncOwnerTransformWhenParented` property to provide a way to disable applying the server's transform information in the parenting message on the client owner instance which can be useful for owner authoritative motion models. (#3013)
- Added `NetcodeEditorBase` editor helper class to provide easier modification and extension of the SDK's components. (#3013)

### Fixed

- Fixed issue where NetworkAnimator would send updates to non-observer clients. (#3057)
- Fixed issue where an exception could occur when receiving a universal RPC for a `NetworkObject` that has been despawned. (#3052)
- Fixed issue where a NetworkObject hidden from a client that is then promoted to be session owner was not being synchronized with newly joining clients.(#3051)
- Fixed issue where clients could have a wrong time delta on `NetworkVariableBase` which could prevent from sending delta state updates. (#3045)
- Fixed issue where setting a prefab hash value during connection approval but not having a player prefab assigned could cause an exception when spawning a player. (#3042)
- Fixed issue where the `NetworkSpawnManager.HandleNetworkObjectShow` could throw an exception if one of the `NetworkObject` components to show was destroyed during the same frame. (#3030)
- Fixed issue where the `NetworkManagerHelper` was continuing to check for hierarchy changes when in play mode. (#3026)
- Fixed issue with newly/late joined clients and NetworkTransform synchronization of parented `NetworkObject` instances. (#3013)
- Fixed issue with smooth transitions between transform spaces when interpolation is enabled (requires `NetworkTransform.SwitchTransformSpaceWhenParented` to be enabled). (#3013)

### Changed

- Changed `NetworkTransformEditor` now uses NetworkTransform as the base type class to assure it doesn't display a foldout group when using the base NetworkTransform component class. (#3052)
- Changed `NetworkAnimator.Awake` is now a protected virtual method. (#3052)
- Changed  when invoking `NetworkManager.ConnectionManager.DisconnectClient` during a distributed authority session a more appropriate message is logged. (#3052)
- Changed `NetworkTransformEditor` so it now derives from `NetcodeEditorBase`. (#3013)
- Changed `NetworkRigidbodyBaseEditor` so it now derives from `NetcodeEditorBase`. (#3013)
- Changed `NetworkManagerEditor` so it now derives from `NetcodeEditorBase`. (#3013)


## [2.0.0-pre.4] - 2024-08-21

### Added

- Added `NetworkVariable.CheckDirtyState` that is to be used in tandem with collections in order to detect whether the collection or an item within the collection has changed. (#3004)

### Fixed

- Fixed issue where nested NetworkTransform components were not getting updated. (#3016)
- Fixed issue by adding null checks in `NetworkVariableBase.CanClientRead` and `NetworkVariableBase.CanClientWrite` methods to ensure safe access to NetworkBehaviour. (#3012)
- Fixed issue where `FixedStringSerializer<T>` was using `NetworkVariableSerialization<byte>.AreEqual` to determine if two bytes were equal causes an exception to be thrown due to no byte serializer having been defined. (#3009)
- Fixed Issue where a state with dual triggers, inbound and outbound, could cause a false layer to layer state transition message to be sent to non-authority NetworkAnimator instances and cause a warning message to be logged. (#3008)
- Fixed issue using collections within `NetworkVariable` where the collection would not detect changes to items or nested items. (#3004)
- Fixed issue where `List`, `Dictionary`, and `HashSet` collections would not uniquely duplicate nested collections. (#3004)
- Fixed issue where `NotAuthorityTarget` would include the service observer in the list of targets to send the RPC to as opposed to excluding the service observer as it should. (#3000)
- Fixed issue where `ProxyRpcTargetGroup` could attempt to send a message if there were no targets to send to. (#3000)

### Changed

- Changed NetworkAnimator to automatically switch to owner authoritative mode when using a distributed authority network topology. (#3021)
- Changed permissions exception thrown in `NetworkList` to exiting early with a logged error that is now a unified permissions message within `NetworkVariableBase`. (#3004)
- Changed permissions exception thrown in `NetworkVariable.Value` to exiting early with a logged error that is now a unified permissions message within `NetworkVariableBase`. (#3004)


## [2.0.0-pre.3] - 2024-07-23

### Added
- Added: `UnityTransport.GetNetworkDriver` and `UnityTransport.GetLocalEndpoint` methods to expose the driver and local endpoint being used. (#2978)

### Fixed

- Fixed issue where deferred despawn was causing GC allocations when converting an `IEnumerable` to a list. (#2983)
- Fixed issue where the realtime network stats monitor was not able to display RPC traffic in release builds due to those stats being only available in development builds or the editor. (#2979)
- Fixed issue where `NetworkManager.ScenesLoaded` was not being updated if `PostSynchronizationSceneUnloading` was set and any loaded scenes not used during synchronization were unloaded. (#2971)
- Fixed issue where `Rigidbody2d` under Unity 6000.0.11f1 has breaking changes where `velocity` is now `linearVelocity` and `isKinematic` is replaced by `bodyType`. (#2971)
- Fixed issue where `NetworkSpawnManager.InstantiateAndSpawn` and `NetworkObject.InstantiateAndSpawn` were not honoring the ownerClientId parameter when using a client-server network topology. (#2968)
- Fixed issue where internal delta serialization could not have a byte serializer defined when serializing deltas for other types. Added `[GenerateSerializationForType(typeof(byte))]` to both the `NetworkVariable` and `AnticipatedNetworkVariable` classes to assure a byte serializer is defined.(#2962)
- Fixed issue when scene management was disabled and the session owner would still try to synchronize a late joining client. (#2962)
- Fixed issue when using a distributed authority network topology where it would allow a session owner to spawn a `NetworkObject` prior to being approved. Now, an error message is logged and the `NetworkObject` will not be spawned prior to the client being approved.  (#2962)
- Fixed issue where attempting to spawn during `NetworkBehaviour.OnInSceneObjectsSpawned` and `NetworkBehaviour.OnNetworkSessionSynchronized` notifications would throw a collection modified exception.  (#2962)

### Changed

- Changed logic where clients can now set the `NetworkSceneManager` client synchronization mode when using a distributed authority network topology. (#2985)


## [2.0.0-pre.2] - 2024-06-17

### Added

- Added `AnticipatedNetworkVariable<T>`, which adds support for client anticipation of `NetworkVariable` values, allowing for more responsive gameplay. (#2957)
- Added `AnticipatedNetworkTransform`, which adds support for client anticipation of NetworkTransforms. (#2957)
- Added `NetworkVariableBase.ExceedsDirtinessThreshold` to allow network variables to throttle updates by only sending updates when the difference between the current and previous values exceeds a threshold. (This is exposed in `NetworkVariable<T>` with the callback `NetworkVariable<T>.CheckExceedsDirtinessThreshold`). (#2957)
- Added `NetworkVariableUpdateTraits`, which add additional throttling support: `MinSecondsBetweenUpdates` will prevent the `NetworkVariable` from sending updates more often than the specified time period (even if it exceeds the dirtiness threshold), while `MaxSecondsBetweenUpdates` will force a dirty `NetworkVariable` to send an update after the specified time period even if it has not yet exceeded the dirtiness threshold. (#2957)
- Added virtual method `NetworkVariableBase.OnInitialize` which can be used by `NetworkVariable` subclasses to add initialization code. (#2957)
- Added `NetworkTime.TickWithPartial`, which represents the current tick as a double that includes the fractional/partial tick value. (#2957)
- Added `NetworkTickSystem.AnticipationTick`, which can be helpful with implementation of client anticipation. This value represents the tick the current local client was at at the beginning of the most recent network round trip, which enables it to correlate server update ticks with the client tick that may have triggered them. (#2957)
- Added event `NetworkManager.OnSessionOwnerPromoted` that is invoked when a new session owner promotion occurs. (#2948)
- Added `NetworkRigidBodyBase.GetLinearVelocity` and `NetworkRigidBodyBase.SetLinearVelocity` convenience/helper methods. (#2948)
- Added `NetworkRigidBodyBase.GetAngularVelocity` and `NetworkRigidBodyBase.SetAngularVelocity` convenience/helper methods. (#2948)

### Fixed

- Fixed issue when NetworkTransform half float precision is enabled and ownership changes the current base position was not being synchronized. (#2948)
- Fixed issue where `OnClientConnected` not being invoked on the session owner when connecting to a new distributed authority session. (#2948)
- Fixed issue where Rigidbody micro-motion (i.e. relatively small velocities) would result in non-authority instances slightly stuttering as the body would come to a rest (i.e. no motion). Now, the threshold value can increase at higher velocities and can decrease slightly below the provided threshold to account for this. (#2948)

### Changed

- Changed NetworkAnimator no longer requires the `Animator` component to exist on the same `GameObject`. (#2957)
- Changed `NetworkObjectReference` and `NetworkBehaviourReference` to allow null references when constructing and serializing. (#2957)
- Changed the client's owned objects is now returned (`NetworkClient` and `NetworkSpawnManager`) as an array as opposed to a list for performance purposes. (#2948)
- Changed `NetworkTransfrom.TryCommitTransformToServer` to be internal as it will be removed by the final 2.0.0 release. (#2948)
- Changed `NetworkTransformEditor.OnEnable` to a virtual method to be able to customize a NetworkTransform derived class by creating a derived editor control from `NetworkTransformEditor`. (#2948)


## [2.0.0-exp.5] - 2024-06-03

### Fixed

- Fixed issue where SessionOwner message was being treated as a new entry for the new message indexing when it should have been ordinally sorted with the legacy message indices. (#2942)

### Changed
- Changed `FastBufferReader` and `FastBufferWriter` so that they always ensure the length of items serialized is always serialized as an `uint` and added a check before casting for safe reading and writing.(#2946)


## [2.0.0-exp.4] - 2024-05-31

### Added

- Added `NetworkRigidbodyBase.AttachToFixedJoint` and `NetworkRigidbodyBase.DetachFromFixedJoint` to replace parenting for rigid bodies that have `NetworkRigidbodyBase.UseRigidBodyForMotion` enabled. (#2933)
- Added `NetworkBehaviour.OnNetworkPreSpawn` and `NetworkBehaviour.OnNetworkPostSpawn` methods that provide the ability to handle pre and post spawning actions during the `NetworkObject` spawn sequence. (#2912)
- Added a client-side only `NetworkBehaviour.OnNetworkSessionSynchronized` convenience method that is invoked on all NetworkBehaviours after a newly joined client has finished synchronizing with the network session in progress. (#2912)
- Added `NetworkBehaviour.OnInSceneObjectsSpawned` convenience method that is invoked when all in-scene `NetworkObject`s have been spawned after a scene has been loaded or upon a host or server starting. (#2912)

### Fixed

- Fixed issue where non-authoritative rigid bodies with `NetworkRigidbodyBase.UseRigidBodyForMotion` enabled would constantly log errors about the renderTime being before `StartTimeConsumed`. (#2933)
- Fixed issue where in-scene placed NetworkObjects could be destroyed if a client disconnects early and/or before approval. (#2924)
- Fixed issue where a `NetworkObject` component's associated NetworkBehaviour components would not be detected if scene loading is disabled in the editor and the currently loaded scene has in-scene placed `NetworkObject`s. (#2912)
- Fixed issue where an in-scene placed `NetworkObject` with NetworkTransform that is also parented under a `GameObject` would not properly synchronize when the parent `GameObject` had a world space position other than 0,0,0. (#2898)

### Changed

- Change all the access modifiers of test class from Public to Internal (#2930)
- Changed messages are now sorted by enum values as opposed to ordinally sorting the messages by their type name. (#2929)
- Changed `NetworkClient.SessionModeTypes` to `NetworkClient.NetworkTopologyTypes`. (#2875)
- Changed `NetworkClient.SessionModeType` to `NetworkClient.NetworkTopologyType`. (#2875)
- Changed `NetworkConfig.SessionMode` to `NeworkConfig.NetworkTopology`. (#2875)

## [2.0.0-exp.2] - 2024-04-02

### Added
- Added updates to all internal messages to account for a distributed authority network session connection. (#2863)
- Added `NetworkRigidbodyBase` that provides users with a more customizable network rigidbody, handles both `Rigidbody` and `Rigidbody2D`, and provides an option to make NetworkTransform use the rigid body for motion. (#2863)
  - For a customized `NetworkRigidbodyBase` class:
    - `NetworkRigidbodyBase.AutoUpdateKinematicState` provides control on whether the kinematic setting will be automatically set or not when ownership changes.
    - `NetworkRigidbodyBase.AutoSetKinematicOnDespawn` provides control on whether isKinematic will automatically be set to true when the associated `NetworkObject` is despawned.
    - `NetworkRigidbodyBase.Initialize` is a protected method that, when invoked, will initialize the instance. This includes options to:
      - Set whether using a `RigidbodyTypes.Rigidbody` or `RigidbodyTypes.Rigidbody2D`.
      - Includes additional optional parameters to set the NetworkTransform, `Rigidbody`, and `Rigidbody2d` to use.
  - Provides additional public methods:
    - `NetworkRigidbodyBase.GetPosition` to return the position of the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting).
    - `NetworkRigidbodyBase.GetRotation` to return the rotation of the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting).
    - `NetworkRigidbodyBase.MovePosition` to move to the position of the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting).
    - `NetworkRigidbodyBase.MoveRotation` to move to the rotation of the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting).
    - `NetworkRigidbodyBase.Move` to move to the position and rotation of the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting).
    - `NetworkRigidbodyBase.Move` to move to the position and rotation of the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting).
    - `NetworkRigidbodyBase.SetPosition` to set the position of the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting).
    - `NetworkRigidbodyBase.SetRotation` to set the rotation of the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting).
    - `NetworkRigidbodyBase.ApplyCurrentTransform` to set the position and rotation of the `Rigidbody` or `Rigidbody2d` based on the associated `GameObject` transform (depending upon its initialized setting).
    - `NetworkRigidbodyBase.WakeIfSleeping` to wake up the rigid body if sleeping.
    - `NetworkRigidbodyBase.SleepRigidbody` to put the rigid body to sleep.
    - `NetworkRigidbodyBase.IsKinematic` to determine if the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting) is currently kinematic.
    - `NetworkRigidbodyBase.SetIsKinematic` to set the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting) current kinematic state.
    - `NetworkRigidbodyBase.ResetInterpolation` to reset the `Rigidbody` or `Rigidbody2d` (depending upon its initialized setting) back to its original interpolation value when initialized.
  - Now includes a `MonoBehaviour.FixedUpdate` implementation that will update the assigned NetworkTransform when `NetworkRigidbodyBase.UseRigidBodyForMotion` is true. (#2863)
- Added `RigidbodyContactEventManager` that provides a more optimized way to process collision enter and collision stay events as opposed to the `Monobehaviour` approach. (#2863)
  - Can be used in client-server and distributed authority modes, but is particularly useful in distributed authority.
- Added rigid body motion updates to NetworkTransform which allows users to set interolation on rigid bodies. (#2863)
  - Extrapolation is only allowed on authoritative instances, but custom class derived from `NetworkRigidbodyBase` or NetworkRigidBody or `NetworkRigidbody2D` automatically switches non-authoritative instances to interpolation if set to extrapolation.
- Added distributed authority mode support to NetworkAnimator. (#2863)
- Added session mode selection to NetworkManager inspector view. (#2863)
- Added distributed authority permissions feature. (#2863)
- Added distributed authority mode specific `NetworkObject` permissions flags (Distributable, Transferable, and RequestRequired). (#2863)
- Added distributed authority mode specific `NetworkObject.SetOwnershipStatus` method that applies one or more `NetworkObject` instance's ownership flags. If updated when spawned, the ownership permission changes are synchronized with the other connected clients. (#2863)
- Added distributed authority mode specific `NetworkObject.RemoveOwnershipStatus` method that removes one or more `NetworkObject` instance's ownership flags. If updated when spawned, the ownership permission changes are synchronized with the other connected clients. (#2863)
- Added distributed authority mode specific `NetworkObject.HasOwnershipStatus` method that will return (true or false) whether one or more ownership flags is set. (#2863)
- Added distributed authority mode specific `NetworkObject.SetOwnershipLock` method that locks ownership of a `NetworkObject` to prevent ownership from changing until the current owner releases the lock. (#2863)
- Added distributed authority mode specific `NetworkObject.RequestOwnership` method that sends an ownership request to the current owner of a spawned `NetworkObject` instance. (#2863)
- Added distributed authority mode specific `NetworkObject.OnOwnershipRequested` callback handler that is invoked on the owner/authoritative side when a non-owner requests ownership. Depending upon the boolean returned value depends upon whether the request is approved or denied. (#2863)
- Added distributed authority mode specific `NetworkObject.OnOwnershipRequestResponse` callback handler that is invoked when a non-owner's request has been processed. This callback includes a `NetworkObjet.OwnershipRequestResponseStatus` response parameter that describes whether the request was approved or the reason why it was not approved. (#2863)
- Added distributed authority mode specific `NetworkObject.DeferDespawn` method that defers the despawning of `NetworkObject` instances on non-authoritative clients based on the tick offset parameter. (#2863)
- Added distributed authority mode specific `NetworkObject.OnDeferredDespawnComplete` callback handler that can be used to further control when deferring the despawning of a `NetworkObject` on non-authoritative instances. (#2863)
- Added `NetworkClient.SessionModeType` as one way to determine the current session mode of the network session a client is connected to. (#2863)
- Added distributed authority mode specific `NetworkClient.IsSessionOwner` property to determine if the current local client is the current session owner of a distributed authority session. (#2863)
- Added distributed authority mode specific client side spawning capabilities. When running in distributed authority mode, clients can instantiate and spawn `NetworkObject` instances (the local client is automatically the owner of the spawned object). (#2863)
  - This is useful to better visually synchronize owner authoritative motion models and newly spawned `NetworkObject` instances (i.e. projectiles for example).
- Added distributed authority mode specific client side player spawning capabilities. Clients will automatically spawn their associated player object locally. (#2863)
- Added distributed authority mode specific `NetworkConfig.AutoSpawnPlayerPrefabClientSide` property (default is true) to provide control over the automatic spawning of player prefabs on the local client side. (#2863)
- Added distributed authority mode specific `NetworkManager.OnFetchLocalPlayerPrefabToSpawn` callback that, when assigned, will allow the local client to provide the player prefab to be spawned for the local client. (#2863)
  - This is only invoked if the `NetworkConfig.AutoSpawnPlayerPrefabClientSide` property is set to true.
- Added distributed authority mode specific `NetworkBehaviour.HasAuthority` property that determines if the local client has authority over the associated `NetworkObject` instance (typical use case is within a NetworkBehaviour script much like that of `IsServer` or `IsClient`). (#2863)
- Added distributed authority mode specific `NetworkBehaviour.IsSessionOwner` property that determines if the local client is the session owner (typical use case would be to determine if the local client can has scene management authority within a NetworkBehaviour script). (#2863)
- Added support for distributed authority mode scene management where the currently assigned session owner can start scene events (i.e. scene loading and scene unloading). (#2863)

### Fixed

- Fixed issue where the host was not invoking `OnClientDisconnectCallback` for its own local client when internally shutting down. (#2822)
- Fixed issue where NetworkTransform could potentially attempt to "unregister" a named message prior to it being registered. (#2807)
- Fixed issue where in-scene placed `NetworkObject`s with complex nested children `NetworkObject`s (more than one child in depth) would not synchronize properly if WorldPositionStays was set to true. (#2796)

### Changed
- Changed client side awareness of other clients is now the same as a server or host. (#2863)
- Changed `NetworkManager.ConnectedClients` can now be accessed by both server and clients. (#2863)
- Changed `NetworkManager.ConnectedClientsList` can now be accessed by both server and clients. (#2863)
- Changed NetworkTransform defaults to owner authoritative when connected to a distributed authority session. (#2863)
- Changed `NetworkVariable` defaults to owner write and everyone read permissions when connected to a distributed authority session (even if declared with server read or write permissions).  (#2863)
- Changed `NetworkObject` no longer implements the `MonoBehaviour.Update` method in order to determine whether a `NetworkObject` instance has been migrated to a different scene. Instead, only `NetworkObjects` with the `SceneMigrationSynchronization` property set will be updated internally during the `NetworkUpdateStage.PostLateUpdate` by NetworkManager. (#2863)
- Changed NetworkManager inspector view layout where properties are now organized by category. (#2863)
- Changed NetworkTransform to now use `NetworkTransformMessage` as opposed to named messages for NetworkTransformState updates. (#2810)
- Changed `CustomMessageManager` so it no longer attempts to register or "unregister" a null or empty string and will log an error if this condition occurs. (#2807)

## [1.9.1] - 2024-04-18

### Added
- Added `AnticipatedNetworkVariable<T>`, which adds support for client anticipation of NetworkVariable values, allowing for more responsive game play (#2820)
- Added `AnticipatedNetworkTransform`, which adds support for client anticipation of NetworkTransforms (#2820)
- Added `NetworkVariableBase.ExceedsDirtinessThreshold` to allow network variables to throttle updates by only sending updates when the difference between the current and previous values exceeds a threshold. (This is exposed in NetworkVariable<T> with the callback NetworkVariable<T>.CheckExceedsDirtinessThreshold) (#2820)
- Added `NetworkVariableUpdateTraits`, which add additional throttling support: `MinSecondsBetweenUpdates` will prevent the `NetworkVariable` from sending updates more often than the specified time period (even if it exceeds the dirtiness threshold), while `MaxSecondsBetweenUpdates` will force a dirty `NetworkVariable` to send an update after the specified time period even if it has not yet exceeded the dirtiness threshold. (#2820)
- Added virtual method `NetworkVariableBase.OnInitialize()` which can be used by `NetworkVariable` subclasses to add initialization code (#2820)
- Added virtual method `NetworkVariableBase.Update()`, which is called once per frame to support behaviors such as interpolation between an anticipated value and an authoritative one. (#2820)
- Added `NetworkTime.TickWithPartial`, which represents the current tick as a double that includes the fractional/partial tick value. (#2820)
- `NetworkVariable` now includes built-in support for `NativeHashSet`, `NativeHashMap`, `List`, `HashSet`, and `Dictionary` (#2813)
- `NetworkVariable` now includes delta compression for collection values (`NativeList`, `NativeArray`, `NativeHashSet`, `NativeHashMap`, `List`, `HashSet`, `Dictionary`, and `FixedString` types) to save bandwidth by only sending the values that changed. (Note: For `NativeList`, `NativeArray`, and `List`, this algorithm works differently than that used in `NetworkList`. This algorithm will use less bandwidth for "set" and "add" operations, but `NetworkList` is more bandwidth-efficient if you are performing frequent "insert" operations.) (#2813)
- `UserNetworkVariableSerialization` now has optional callbacks for `WriteDelta` and `ReadDelta`. If both are provided, they will be used for all serialization operations on NetworkVariables of that type except for the first one for each client. If either is missing, the existing `Write` and `Read` will always be used. (#2813)
- Network variables wrapping `INetworkSerializable` types can perform delta serialization by setting `UserNetworkVariableSerialization<T>.WriteDelta` and `UserNetworkVariableSerialization<T>.ReadDelta` for those types. The built-in `INetworkSerializable` serializer will continue to be used for all other serialization operations, but if those callbacks are set, it will call into them on all but the initial serialization to perform delta serialization. (This could be useful if you have a large struct where most values do not change regularly and you want to send only the fields that did change.) (#2813)

### Fixed

- Fixed issue where `NetworkTransformEditor` would throw and exception if you excluded the physics package. (#2871)
- Fixed issue where NetworkTransform could not properly synchronize its base position when using half float precision. (#2845)
- Fixed issue where the host was not invoking `OnClientDisconnectCallback` for its own local client when internally shutting down. (#2822)
- Fixed issue where NetworkTransform could potentially attempt to "unregister" a named message prior to it being registered. (#2807)
- Fixed issue where in-scene placed `NetworkObject`s with complex nested children `NetworkObject`s (more than one child in depth) would not synchronize properly if WorldPositionStays was set to true. (#2796)

### Changed

- Changed `NetworkObjectReference` and `NetworkBehaviourReference` to allow null references when constructing and serializing. (#2874)
- Changed NetworkAnimator no longer requires the `Animator` component to exist on the same `GameObject`. (#2872)
- Changed NetworkTransform to now use `NetworkTransformMessage` as opposed to named messages for NetworkTransformState updates. (#2810)
- Changed `CustomMessageManager` so it no longer attempts to register or "unregister" a null or empty string and will log an error if this condition occurs. (#2807)

## [1.8.1] - 2024-02-05

### Fixed

- Fixed a compile error when compiling for IL2CPP targets when using the new `[Rpc]` attribute. (#2824)

## [1.8.0] - 2023-12-12

### Added

- Added a new RPC attribute, which is simply `Rpc`. (#2762)
  - This is a generic attribute that can perform the functions of both Server and Client RPCs, as well as enabling client-to-client RPCs. Includes several default targets: `Server`, `NotServer`, `Owner`, `NotOwner`, `Me`, `NotMe`, `ClientsAndHost`, and `Everyone`. Runtime overrides are available for any of these targets, as well as for sending to a specific ID or groups of IDs.
  - This attribute also includes the ability to defer RPCs that are sent to the local process to the start of the next frame instead of executing them immediately, treating them as if they had gone across the network. The default behavior is to execute immediately.
  - This attribute effectively replaces `ServerRpc` and `ClientRpc`. `ServerRpc` and `ClientRpc` remain in their existing forms for backward compatibility, but `Rpc` will be the recommended and most supported option.
- Added `NetworkManager.OnConnectionEvent` as a unified connection event callback to notify clients and servers of all client connections and disconnections within the session (#2762)
- Added `NetworkManager.ServerIsHost` and `NetworkBehaviour.ServerIsHost` to allow a client to tell if it is connected to a host or to a dedicated server (#2762)
- Added `SceneEventProgress.SceneManagementNotEnabled` return status to be returned when a `NetworkSceneManager` method is invoked and scene management is not enabled. (#2735)
- Added `SceneEventProgress.ServerOnlyAction` return status to be returned when a `NetworkSceneManager` method is invoked by a client. (#2735)
- Added `NetworkObject.InstantiateAndSpawn` and `NetworkSpawnManager.InstantiateAndSpawn` methods to simplify prefab spawning by assuring that the prefab is valid and applies any override prior to instantiating the `GameObject` and spawning the `NetworkObject` instance. (#2710)

### Fixed

- Fixed issue where a client disconnected by a server-host would not receive a local notification. (#2789)
- Fixed issue where a server-host could shutdown during a relay connection but periodically the transport disconnect message sent to any connected clients could be dropped. (#2789)
- Fixed issue where a host could disconnect its local client but remain running as a server. (#2789)
- Fixed issue where `OnClientDisconnectedCallback` was not being invoked under certain conditions. (#2789)
- Fixed issue where `OnClientDisconnectedCallback` was always returning 0 as the client identifier. (#2789)
- Fixed issue where if a host or server shutdown while a client owned NetworkObjects (other than the player) it would throw an exception. (#2789)
- Fixed issue where setting values on a `NetworkVariable` or `NetworkList` within `OnNetworkDespawn` during a shutdown sequence would throw an exception. (#2789)
- Fixed issue where a teleport state could potentially be overridden by a previous unreliable delta state. (#2777)
- Fixed issue where NetworkTransform was using the `NetworkManager.ServerTime.Tick` as opposed to `NetworkManager.NetworkTickSystem.ServerTime.Tick` during the authoritative side's tick update where it performed a delta state check. (#2777)
- Fixed issue where a parented in-scene placed NetworkObject would be destroyed upon a client or server exiting a network session but not unloading the original scene in which the NetworkObject was placed. (#2737)
- Fixed issue where during client synchronization and scene loading, when client synchronization or the scene loading mode are set to `LoadSceneMode.Single`, a `CreateObjectMessage` could be received, processed, and the resultant spawned `NetworkObject` could be instantiated in the client's currently active scene that could, towards the end of the client synchronization or loading process, be unloaded and cause the newly created `NetworkObject` to be destroyed (and throw and exception). (#2735)
- Fixed issue where a NetworkTransform instance with interpolation enabled would result in wide visual motion gaps (stuttering) under above normal latency conditions and a 1-5% or higher packet are drop rate. (#2713)
- Fixed issue where  you could not have multiple source network prefab overrides targeting the same network prefab as their override. (#2710)

### Changed

- Changed the server or host shutdown so it will now perform a "soft shutdown" when `NetworkManager.Shutdown` is invoked. This will send a disconnect notification to all connected clients and the server-host will wait for all connected clients to disconnect or timeout after a 5 second period before completing the shutdown process. (#2789)
- Changed `OnClientDisconnectedCallback` will now return the assigned client identifier on the local client side if the client was approved and assigned one prior to being disconnected. (#2789)
- Changed `NetworkTransform.SetState` (and related methods) now are cumulative during a fractional tick period and sent on the next pending tick. (#2777)
- `NetworkManager.ConnectedClientsIds` is now accessible on the client side and will contain the list of all clients in the session, including the host client if the server is operating in host mode (#2762)
- Changed `NetworkSceneManager` to return a `SceneEventProgress` status and not throw exceptions for methods invoked when scene management is disabled and when a client attempts to access a `NetworkSceneManager` method by a client. (#2735)
- Changed NetworkTransform authoritative instance tick registration so a single NetworkTransform specific tick event update will update all authoritative instances to improve perofmance. (#2713)
- Changed `NetworkPrefabs.OverrideToNetworkPrefab` dictionary is no longer used/populated due to it ending up being related to a regression bug and not allowing more than one override to be assigned to a network prefab asset. (#2710)
- Changed in-scene placed `NetworkObject`s now store their source network prefab asset's `GlobalObjectIdHash` internally that is used, when scene management is disabled, by clients to spawn the correct prefab even if the `NetworkPrefab` entry has an override. This does not impact dynamically spawning the same prefab which will yield the override on both host and client. (#2710)
- Changed in-scene placed `NetworkObject`s no longer require a `NetworkPrefab` entry with `GlobalObjectIdHash` override in order for clients to properly synchronize. (#2710)
- Changed in-scene placed `NetworkObject`s now set their `IsSceneObject` value when generating their `GlobalObjectIdHash` value. (#2710)
- Changed the default `NetworkConfig.SpawnTimeout` value from 1.0s to 10.0s. (#2710)


## [1.7.1] - 2023-11-15

### Added

### Fixed

- Fixed a bug where having a class with Rpcs that inherits from a class without Rpcs that inherits from NetworkVariable would cause a compile error. (#2751)
- Fixed issue where `NetworkBehaviour.Synchronize` was not truncating the write buffer if nothing was serialized during `NetworkBehaviour.OnSynchronize` causing an additional 6 bytes to be written per NetworkBehaviour component instance. (#2749)

## [1.7.0] - 2023-10-11

### Added

- exposed NetworkObject.GetNetworkBehaviourAtOrderIndex as a public API (#2724)
- Added context menu tool that provides users with the ability to quickly update the GlobalObjectIdHash value for all in-scene placed prefab instances that were created prior to adding a NetworkObject component to it. (#2707)
- Added methods NetworkManager.SetPeerMTU and NetworkManager.GetPeerMTU to be able to set MTU sizes per-peer (#2676)
- Added `GenerateSerializationForGenericParameterAttribute`, which can be applied to user-created Network Variable types to ensure the codegen generates serialization for the generic types they wrap. (#2694)
- Added `GenerateSerializationForTypeAttribute`, which can be applied to any class or method to ensure the codegen generates serialization for the specific provided type. (#2694)
- Exposed `NetworkVariableSerialization<T>.Read`, `NetworkVariableSerialization<T>.Write`, `NetworkVariableSerialization<T>.AreEqual`, and `NetworkVariableSerialization<T>.Duplicate` to further support the creation of user-created network variables by allowing users to access the generated serialization methods and serialize generic types efficiently without boxing. (#2694)
- Added `NetworkVariableBase.MarkNetworkBehaviourDirty` so that user-created network variable types can mark their containing NetworkBehaviour to be processed by the update loop. (#2694)

### Fixed

- Fixed issue where the server side `NetworkSceneManager` instance was not adding the currently active scene to its list of scenes loaded. (#2723)
- Generic NetworkBehaviour types no longer result in compile errors or runtime errors (#2720)
- Rpcs within Generic NetworkBehaviour types can now serialize parameters of the class's generic types (but may not have generic types of their own) (#2720)
- Errors are no longer thrown when entering play mode with domain reload disabled (#2720)
- NetworkSpawn is now correctly called each time when entering play mode with scene reload disabled (#2720)
- NetworkVariables of non-integer types will no longer break the inspector (#2714)
- NetworkVariables with NonSerializedAttribute will not appear in the inspector (#2714)
- Fixed issue where `UnityTransport` would attempt to establish WebSocket connections even if using UDP/DTLS Relay allocations when the build target was WebGL. This only applied to working in the editor since UDP/DTLS can't work in the browser. (#2695)
- Fixed issue where a NetworkBehaviour component's `OnNetworkDespawn` was not being invoked on the host-server side for an in-scene placed `NetworkObject` when a scene was unloaded (during a scene transition) and the NetworkBehaviour component was positioned/ordered before the `NetworkObject` component. (#2685)
- Fixed issue where `SpawnWithObservers` was not being honored when `NetworkConfig.EnableSceneManagement` was disabled. (#2682)
- Fixed issue where NetworkAnimator was not internally tracking changes to layer weights which prevented proper layer weight synchronization back to the original layer weight value. (#2674)
- Fixed "writing past the end of the buffer" error when calling ResetDirty() on managed network variables that are larger than 256 bytes when serialized. (#2670)
- Fixed issue where generation of the `DefaultNetworkPrefabs` asset was not enabled by default. (#2662)
- Fixed issue where the `GlobalObjectIdHash` value could be updated but the asset not marked as dirty. (#2662)
- Fixed issue where the `GlobalObjectIdHash` value of a (network) prefab asset could be assigned an incorrect value when editing the prefab in a temporary scene. (#2662)
- Fixed issue where the `GlobalObjectIdHash` value generated after creating a (network) prefab from an object constructed within the scene would not be the correct final value in a stand alone build. (#2662)

### Changed

- Updated dependency on `com.unity.transport` to version 1.4.0. (#2716)

## [1.6.0] - 2023-08-09

### Added

- Added a protected virtual method `NetworkTransform.OnInitialize(ref NetworkTransformState replicatedState)` that just returns the replicated state reference.

### Fixed

- Fixed issue where invoking `NetworkManager.Shutdown` within `NetworkManager.OnClientStopped` or `NetworkManager.OnServerStopped` would force `NetworkManager.ShutdownInProgress` to remain true after completing the shutdown process. (#2661)
- Fixed issue where ARMv7 Android builds would crash when trying to validate the batch header. (#2654)
- Fixed issue with client synchronization of position when using half precision and the delta position reaches the maximum value and is collapsed on the host prior to being forwarded to the non-owner clients. (#2636)
- Fixed issue with scale not synchronizing properly depending upon the spawn order of NetworkObjects. (#2636)
- Fixed issue position was not properly transitioning between ownership changes with an owner authoritative NetworkTransform. (#2636)
- Fixed issue where a late joining non-owner client could update an owner authoritative NetworkTransform if ownership changed without any updates to position prior to the non-owner client joining. (#2636)

### Changed

## [1.5.2] - 2023-07-24

### Added

### Fixed
- Bumped minimum Unity version supported to 2021.3 LTS
- Fixed issue where `NetworkClient.OwnedObjects` was not returning any owned objects due to the `NetworkClient.IsConnected` not being properly set. (#2631)
- Fixed a crash when calling TrySetParent with a null Transform (#2625)
- Fixed issue where a NetworkTransform using full precision state updates was losing transform state updates when interpolation was enabled. (#2624)
- Fixed issue where `NetworkObject.SpawnWithObservers` was not being honored for late joining clients. (#2623)
- Fixed issue where invoking `NetworkManager.Shutdown` multiple times, depending upon the timing, could cause an exception. (#2622)
- Fixed issue where removing ownership would not notify the server that it gained ownership. This also resolves the issue where an owner authoritative NetworkTransform would not properly initialize upon removing ownership from a remote client. (#2618)
- Fixed ILPP issues when using CoreCLR and for certain dedicated server builds. (#2614)
- Fixed an ILPP compile error when creating a generic NetworkBehaviour singleton with a static T instance. (#2603)

### Changed

## [1.5.1] - 2023-06-07

### Added

- Added support for serializing `NativeArray<>` and `NativeList<>` in `FastBufferReader`/`FastBufferWriter`, `BufferSerializer`, `NetworkVariable`, and RPCs. (To use `NativeList<>`, add `UNITY_NETCODE_NATIVE_COLLECTION_SUPPORT` to your Scripting Define Symbols in `Project Settings > Player`) (#2375)
- The location of the automatically-created default network prefab list can now be configured (#2544)
- Added: Message size limits (max single message and max fragmented message) can now be set using NetworkManager.MaximumTransmissionUnitSize and NetworkManager.MaximumFragmentedMessageSize for transports that don't work with the default values (#2530)
- Added `NetworkObject.SpawnWithObservers` property (default is true) that when set to false will spawn a `NetworkObject` with no observers and will not be spawned on any client until `NetworkObject.NetworkShow` is invoked. (#2568)

### Fixed

- Fixed: Fixed a null reference in codegen in some projects (#2581)
- Fixed issue where the `OnClientDisconnected` client identifier was incorrect after a pending client connection was denied. (#2569)
- Fixed warning "Runtime Network Prefabs was not empty at initialization time." being erroneously logged when no runtime network prefabs had been added (#2565)
- Fixed issue where some temporary debug console logging was left in a merged PR. (#2562)
- Fixed the "Generate Default Network Prefabs List" setting not loading correctly and always reverting to being checked. (#2545)
- Fixed issue where users could not use NetworkSceneManager.VerifySceneBeforeLoading to exclude runtime generated scenes from client synchronization. (#2550)
- Fixed missing value on `NetworkListEvent` for `EventType.RemoveAt` events.  (#2542,#2543)
- Fixed issue where parenting a NetworkTransform under a transform with a scale other than Vector3.one would result in incorrect values on non-authoritative instances. (#2538)
- Fixed issue where a server would include scene migrated and then despawned NetworkObjects to a client that was being synchronized. (#2532)
- Fixed the inspector throwing exceptions when attempting to render `NetworkVariable`s of enum types. (#2529)
- Making a `NetworkVariable` with an `INetworkSerializable` type that doesn't meet the `new()` constraint will now create a compile-time error instead of an editor crash (#2528)
- Fixed Multiplayer Tools package installation docs page link on the NetworkManager popup. (#2526)
- Fixed an exception and error logging when two different objects are shown and hidden on the same frame (#2524)
- Fixed a memory leak in `UnityTransport` that occurred if `StartClient` failed. (#2518)
- Fixed issue where a client could throw an exception if abruptly disconnected from a network session with one or more spawned `NetworkObject`(s). (#2510)
- Fixed issue where invalid endpoint addresses were not being detected and returning false from NGO UnityTransport. (#2496)
- Fixed some errors that could occur if a connection is lost and the loss is detected when attempting to write to the socket. (#2495)

### Changed

- Adding network prefabs before NetworkManager initialization is now supported. (#2565)
- Connecting clients being synchronized now switch to the server's active scene before spawning and synchronizing NetworkObjects. (#2532)
- Updated `UnityTransport` dependency on `com.unity.transport` to 1.3.4. (#2533)
- Improved performance of NetworkBehaviour initialization by replacing reflection when initializing NetworkVariables with compile-time code generation, which should help reduce hitching during additive scene loads. (#2522)

## [1.4.0] - 2023-04-10

### Added

- Added a way to access the GlobalObjectIdHash via PrefabIdHash for use in the Connection Approval Callback. (#2437)
- Added `OnServerStarted` and `OnServerStopped` events that will trigger only on the server (or host player) to notify that the server just started or is no longer active (#2420)
- Added `OnClientStarted` and `OnClientStopped` events that will trigger only on the client (or host player) to notify that the client just started or is no longer active (#2420)
- Added `NetworkTransform.UseHalfFloatPrecision` property that, when enabled, will use half float values for position, rotation, and scale. This yields a 50% bandwidth savings a the cost of precision. (#2388)
- Added `NetworkTransform.UseQuaternionSynchronization` property that, when enabled, will synchronize the entire quaternion. (#2388)
- Added `NetworkTransform.UseQuaternionCompression` property that, when enabled, will use a smallest three implementation reducing a full quaternion synchronization update to the size of an unsigned integer. (#2388)
- Added `NetworkTransform.SlerpPosition` property that, when enabled along with interpolation being enabled, will interpolate using `Vector3.Slerp`. (#2388)
- Added `BufferedLinearInterpolatorVector3` that replaces the float version, is now used by NetworkTransform, and provides the ability to enable or disable `Slerp`. (#2388)
- Added `HalfVector3` used for scale when half float precision is enabled. (#2388)
- Added `HalfVector4` used for rotation when half float precision and quaternion synchronization is enabled. (#2388)
- Added `HalfVector3DeltaPosition` used for position when half float precision is enabled. This handles loss in position precision by updating only the delta position as opposed to the full position. (#2388)
- Added `NetworkTransform.GetSpaceRelativePosition` and `NetworkTransform.GetSpaceRelativeRotation` helper methods to return the proper values depending upon whether local or world space. (#2388)
- Added `NetworkTransform.OnAuthorityPushTransformState` virtual method that is invoked just prior to sending the `NetworkTransformState` to non-authoritative instances. This provides users with the ability to obtain more precise delta values for prediction related calculations. (#2388)
- Added `NetworkTransform.OnNetworkTransformStateUpdated` virtual method that is invoked just after the authoritative `NetworkTransformState` is applied. This provides users with the ability to obtain more precise delta values for prediction related calculations. (#2388)
- Added `NetworkTransform.OnInitialize`virtual method that is invoked after the NetworkTransform has been initialized or re-initialized when ownership changes. This provides for a way to make adjustments when NetworkTransform is initialized (i.e. resetting client prediction etc) (#2388)
- Added `NetworkObject.SynchronizeTransform` property (default is true) that provides users with another way to help with bandwidth optimizations where, when set to false, the `NetworkObject`'s associated transform will not be included when spawning and/or synchronizing late joining players. (#2388)
- Added `NetworkSceneManager.ActiveSceneSynchronizationEnabled` property, disabled by default, that enables client synchronization of server-side active scene changes. (#2383)
- Added `NetworkObject.ActiveSceneSynchronization`, disabled by default, that will automatically migrate a `NetworkObject` to a newly assigned active scene. (#2383)
- Added `NetworkObject.SceneMigrationSynchronization`, enabled by default, that will synchronize client(s) when a `NetworkObject` is migrated into a new scene on the server side via `SceneManager.MoveGameObjectToScene`. (#2383)

### Changed

- Made sure the `CheckObjectVisibility` delegate is checked and applied, upon `NetworkShow` attempt. Found while supporting (#2454), although this is not a fix for this (already fixed) issue. (#2463)
- Changed NetworkTransform authority handles delta checks on each new network tick and no longer consumes processing cycles checking for deltas for all frames in-between ticks. (#2388)
- Changed the `NetworkTransformState` structure is now public and now has public methods that provide access to key properties of the `NetworkTransformState` structure. (#2388)
- Changed NetworkTransform interpolation adjusts its interpolation "ticks ago" to be 2 ticks latent if it is owner authoritative and the instance is not the server or 1 tick latent if the instance is the server and/or is server authoritative. (#2388)
- Updated `NetworkSceneManager` to migrate dynamically spawned `NetworkObject`s with `DestroyWithScene` set to false into the active scene if their current scene is unloaded. (#2383)
- Updated the server to synchronize its local `NetworkSceneManager.ClientSynchronizationMode` during the initial client synchronization. (#2383)

### Fixed

- Fixed issue where during client synchronization the synchronizing client could receive a ObjectSceneChanged message before the client-side NetworkObject instance had been instantiated and spawned. (#2502)
- Fixed issue where NetworkAnimator was building client RPC parameters to exclude the host from sending itself messages but was not including it in the ClientRpc parameters. (#2492)
- Fixed issue where NetworkAnimator was not properly detecting and synchronizing cross fade initiated transitions. (#2481)
- Fixed issue where NetworkAnimator was not properly synchronizing animation state updates. (#2481)
- Fixed float NetworkVariables not being rendered properly in the inspector of NetworkObjects. (#2441)
- Fixed an issue where Named Message Handlers could remove themselves causing an exception when the metrics tried to access the name of the message.(#2426)
- Fixed registry of public `NetworkVariable`s in derived NetworkBehaviours (#2423)
- Fixed issue where runtime association of `Animator` properties to `AnimationCurve`s would cause NetworkAnimator to attempt to update those changes. (#2416)
- Fixed issue where NetworkAnimator would not check if its associated `Animator` was valid during serialization and would spam exceptions in the editor console. (#2416)
- Fixed issue with a child's rotation rolling over when interpolation is enabled on a NetworkTransform. Now using half precision or full quaternion synchronization will always update all axis. (#2388)
- Fixed issue where NetworkTransform was not setting the teleport flag when the `NetworkTransform.InLocalSpace` value changed. This issue only impacted NetworkTransform when interpolation was enabled. (#2388)
- Fixed issue when the `NetworkSceneManager.ClientSynchronizationMode` is `LoadSceneMode.Additive` and the server changes the currently active scene prior to a client connecting then upon a client connecting and being synchronized the NetworkSceneManager would clear its internal ScenePlacedObjects list that could already be populated. (#2383)
- Fixed issue where a client would load duplicate scenes of already preloaded scenes during the initial client synchronization and `NetworkSceneManager.ClientSynchronizationMode` was set to `LoadSceneMode.Additive`. (#2383)

## [1.3.1] - 2023-03-27

### Added

- Added detection and graceful handling of corrupt packets for additional safety. (#2419)

### Changed

- The UTP component UI has been updated to be more user-friendly for new users by adding a simple toggle to switch between local-only (127.0.0.1) and remote (0.0.0.0) binding modes, using the toggle "Allow Remote Connections" (#2408)
- Updated `UnityTransport` dependency on `com.unity.transport` to 1.3.3. (#2450)
- `NetworkShow()` of `NetworkObject`s are delayed until the end of the frame to ensure consistency of delta-driven variables like `NetworkList`.
- Dirty `NetworkObject` are reset at end-of-frame and not at serialization time.
- `NetworkHide()` of an object that was just `NetworkShow()`n produces a warning, as remote clients will _not_ get a spawn/despawn pair.
- Renamed the NetworkTransform.SetState parameter `shouldGhostsInterpolate` to `teleportDisabled` for better clarity of what that parameter does. (#2228)
- Network prefabs are now stored in a ScriptableObject that can be shared between NetworkManagers, and have been exposed for public access. By default, a Default Prefabs List is created that contains all NetworkObject prefabs in the project, and new NetworkManagers will default to using that unless that option is turned off in the Netcode for GameObjects settings. Existing NetworkManagers will maintain their existing lists, which can be migrated to the new format via a button in their inspector. (#2322)

### Fixed

- Fixed issue where changes to a layer's weight would not synchronize unless a state transition was occurring.(#2399)
- Fixed issue where `NetworkManager.LocalClientId` was returning the `NetworkTransport.ServerClientId` as opposed to the `NetworkManager.m_LocalClientId`. (#2398)
- Fixed issue where a dynamically spawned `NetworkObject` parented under an in-scene placed `NetworkObject` would have its `InScenePlaced` value changed to `true`. This would result in a soft synchronization error for late joining clients. (#2396)
- Fixed a UTP test that was failing when you install Unity Transport package 2.0.0 or newer. (#2347)
- Fixed issue where `NetcodeSettingsProvider` would throw an exception in Unity 2020.3.x versions. (#2345)
- Fixed server side issue where, depending upon component ordering, some NetworkBehaviour components might not have their OnNetworkDespawn method invoked if the client side disconnected. (#2323)
- Fixed a case where data corruption could occur when using UnityTransport when reaching a certain level of send throughput. (#2332)
- Fixed an issue in `UnityTransport` where an exception would be thrown if starting a Relay host/server on WebGL. This exception should only be thrown if using direct connections (where WebGL can't act as a host/server). (#2321)
- Fixed NetworkAnimator issue where it was not checking for `AnimatorStateTtansition.destinationStateMachine` and any possible sub-states defined within it. (#2309)
- Fixed NetworkAnimator issue where the host client was receiving the ClientRpc animation updates when the host was the owner.(#2309)
- Fixed NetworkAnimator issue with using pooled objects and when specific properties are cleaned during despawn and destroy.(#2309)
- Fixed issue where NetworkAnimator was checking for animation changes when the associated `NetworkObject` was not spawned.(#2309)
- Corrected an issue with the documentation for BufferSerializer (#2401)

## [1.2.0] - 2022-11-21

### Added

- Added protected method `NetworkBehaviour.OnSynchronize` which is invoked during the initial `NetworkObject` synchronization process. This provides users the ability to include custom serialization information that will be applied to the NetworkBehaviour prior to the `NetworkObject` being spawned. (#2298)
- Added support for different versions of the SDK to talk to each other in circumstances where changes permit it. Starting with this version and into future versions, patch versions should be compatible as long as the minor version is the same. (#2290)
- Added `NetworkObject` auto-add helper and Multiplayer Tools install reminder settings to Project Settings. (#2285)
- Added `public string DisconnectReason` getter to NetworkManager and `string Reason` to `ConnectionApprovalResponse`. Allows connection approval to communicate back a reason. Also added `public void DisconnectClient(ulong clientId, string reason)` allowing setting a disconnection reason, when explicitly disconnecting a client. (#2280)

### Changed

- Changed 3rd-party `XXHash` (32 & 64) implementation with an in-house reimplementation (#2310)
- When `NetworkConfig.EnsureNetworkVariableLengthSafety` is disabled `NetworkVariable` fields do not write the additional `ushort` size value (_which helps to reduce the total synchronization message size_), but when enabled it still writes the additional `ushort` value. (#2298)
- Optimized bandwidth usage by encoding most integer fields using variable-length encoding. (#2276)

### Fixed
- Fixed `IsSpawnedObjectsPendingInDontDestroyOnLoad` is only set to true when loading a scene using `LoadSceneMode.Singleonly`. (#2330)
- Fixed issue where NetworkTransform components nested under a parent with a `NetworkObject` component  (i.e. network prefab) would not have their associated `GameObject`'s transform synchronized. (#2298)
- Fixed issue where `NetworkObject`s that failed to instantiate could cause the entire synchronization pipeline to be disrupted/halted for a connecting client. (#2298)
- Fixed issue where in-scene placed `NetworkObject`s nested under a `GameObject` would be added to the orphaned children list causing continual console warning log messages. (#2298)
- Custom messages are now properly received by the local client when they're sent while running in host mode. (#2296)
- Fixed issue where the host would receive more than one event completed notification when loading or unloading a scene only when no clients were connected. (#2292)
- Fixed an issue in `UnityTransport` where an error would be logged if the 'Use Encryption' flag was enabled with a Relay configuration that used a secure protocol. (#2289)
- Fixed issue where in-scene placed `NetworkObjects` were not honoring the `AutoObjectParentSync` property. (#2281)
- Fixed the issue where `NetworkManager.OnClientConnectedCallback` was being invoked before in-scene placed `NetworkObject`s had been spawned when starting NetworkManager as a host. (#2277)
- Creating a `FastBufferReader` with `Allocator.None` will not result in extra memory being allocated for the buffer (since it's owned externally in that scenario). (#2265)

### Removed

- Removed the `NetworkObject` auto-add and Multiplayer Tools install reminder settings from the Menu interface. (#2285)

## [1.1.0] - 2022-10-21

### Added

- Added `NetworkManager.IsApproved` flag that is set to `true` a client has been approved.(#2261)
- `UnityTransport` now provides a way to set the Relay server data directly from the `RelayServerData` structure (provided by the Unity Transport package) throuh its `SetRelayServerData` method. This allows making use of the new APIs in UTP 1.3 that simplify integration of the Relay SDK. (#2235)
- IPv6 is now supported for direct connections when using `UnityTransport`. (#2232)
- Added WebSocket support when using UTP 2.0 with `UseWebSockets` property in the `UnityTransport` component of the NetworkManager allowing to pick WebSockets for communication. When building for WebGL, this selection happens automatically. (#2201)
- Added position, rotation, and scale to the `ParentSyncMessage` which provides users the ability to specify the final values on the server-side when `OnNetworkObjectParentChanged` is invoked just before the message is created (when the `Transform` values are applied to the message). (#2146)
- Added `NetworkObject.TryRemoveParent` method for convenience purposes opposed to having to cast null to either `GameObject` or `NetworkObject`. (#2146)

### Changed

- Updated `UnityTransport` dependency on `com.unity.transport` to 1.3.0. (#2231)
- The send queues of `UnityTransport` are now dynamically-sized. This means that there shouldn't be any need anymore to tweak the 'Max Send Queue Size' value. In fact, this field is now removed from the inspector and will not be serialized anymore. It is still possible to set it manually using the `MaxSendQueueSize` property, but it is not recommended to do so aside from some specific needs (e.g. limiting the amount of memory used by the send queues in very constrained environments). (#2212)
- As a consequence of the above change, the `UnityTransport.InitialMaxSendQueueSize` field is now deprecated. There is no default value anymore since send queues are dynamically-sized. (#2212)
- The debug simulator in `UnityTransport` is now non-deterministic. Its random number generator used to be seeded with a constant value, leading to the same pattern of packet drops, delays, and jitter in every run. (#2196)
- `NetworkVariable<>` now supports managed `INetworkSerializable` types, as well as other managed types with serialization/deserialization delegates registered to `UserNetworkVariableSerialization<T>.WriteValue` and `UserNetworkVariableSerialization<T>.ReadValue` (#2219)
- `NetworkVariable<>` and `BufferSerializer<BufferSerializerReader>` now deserialize `INetworkSerializable` types in-place, rather than constructing new ones. (#2219)

### Fixed

- Fixed `NetworkManager.ApprovalTimeout` will not timeout due to slower client synchronization times as it now uses the added `NetworkManager.IsApproved` flag to determined if the client has been approved or not.(#2261)
- Fixed issue caused when changing ownership of objects hidden to some clients (#2242)
- Fixed issue where an in-scene placed NetworkObject would not invoke NetworkBehaviour.OnNetworkSpawn if the GameObject was disabled when it was despawned. (#2239)
- Fixed issue where clients were not rebuilding the `NetworkConfig` hash value for each unique connection request. (#2226)
- Fixed the issue where player objects were not taking the `DontDestroyWithOwner` property into consideration when a client disconnected. (#2225)
- Fixed issue where `SceneEventProgress` would not complete if a client late joins while it is still in progress. (#2222)
- Fixed issue where `SceneEventProgress` would not complete if a client disconnects. (#2222)
- Fixed issues with detecting if a `SceneEventProgress` has timed out. (#2222)
- Fixed issue #1924 where `UnityTransport` would fail to restart after a first failure (even if what caused the initial failure was addressed). (#2220)
- Fixed issue where `NetworkTransform.SetStateServerRpc` and `NetworkTransform.SetStateClientRpc` were not honoring local vs world space settings when applying the position and rotation. (#2203)
- Fixed ILPP `TypeLoadException` on WebGL on MacOS Editor and potentially other platforms. (#2199)
- Implicit conversion of NetworkObjectReference to GameObject will now return null instead of throwing an exception if the referenced object could not be found (i.e., was already despawned) (#2158)
- Fixed warning resulting from a stray NetworkAnimator.meta file (#2153)
- Fixed Connection Approval Timeout not working client side. (#2164)
- Fixed issue where the `WorldPositionStays` parenting parameter was not being synchronized with clients. (#2146)
- Fixed issue where parented in-scene placed `NetworkObject`s would fail for late joining clients. (#2146)
- Fixed issue where scale was not being synchronized which caused issues with nested parenting and scale when `WorldPositionStays` was true. (#2146)
- Fixed issue with `NetworkTransform.ApplyTransformToNetworkStateWithInfo` where it was not honoring axis sync settings when `NetworkTransformState.IsTeleportingNextFrame` was true. (#2146)
- Fixed issue with `NetworkTransform.TryCommitTransformToServer` where it was not honoring the `InLocalSpace` setting. (#2146)
- Fixed ClientRpcs always reporting in the profiler view as going to all clients, even when limited to a subset of clients by `ClientRpcParams`. (#2144)
- Fixed RPC codegen failing to choose the correct extension methods for `FastBufferReader` and `FastBufferWriter` when the parameters were a generic type (i.e., List<int>) and extensions for multiple instantiations of that type have been defined (i.e., List<int> and List<string>) (#2142)
- Fixed the issue where running a server (i.e. not host) the second player would not receive updates (unless a third player joined). (#2127)
- Fixed issue where late-joining client transition synchronization could fail when more than one transition was occurring.(#2127)
- Fixed throwing an exception in `OnNetworkUpdate` causing other `OnNetworkUpdate` calls to not be executed. (#1739)
- Fixed synchronization when Time.timeScale is set to 0. This changes timing update to use unscaled deltatime. Now network updates rate are independent from the local time scale. (#2171)
- Fixed not sending all NetworkVariables to all clients when a client connects to a server. (#1987)
- Fixed IsOwner/IsOwnedByServer being wrong on the server after calling RemoveOwnership (#2211)

## [1.0.2] - 2022-09-12

### Fixed

- Fixed issue where NetworkTransform was not honoring the InLocalSpace property on the authority side during OnNetworkSpawn. (#2170)
- Fixed issue where NetworkTransform was not ending extrapolation for the previous state causing non-authoritative instances to become out of synch. (#2170)
- Fixed issue where NetworkTransform was not continuing to interpolate for the remainder of the associated tick period. (#2170)
- Fixed issue during `NetworkTransform.OnNetworkSpawn` for non-authoritative instances where it was initializing interpolators with the replicated network state which now only contains the transform deltas that occurred during a network tick and not the entire transform state. (#2170)

## [1.0.1] - 2022-08-23

### Changed

- Changed version to 1.0.1. (#2131)
- Updated dependency on `com.unity.transport` to 1.2.0. (#2129)
- When using `UnityTransport`, _reliable_ payloads are now allowed to exceed the configured 'Max Payload Size'. Unreliable payloads remain bounded by this setting. (#2081)
- Performance improvements for cases with large number of NetworkObjects, by not iterating over all unchanged NetworkObjects

### Fixed

- Fixed an issue where reading/writing more than 8 bits at a time with BitReader/BitWriter would write/read from the wrong place, returning and incorrect result. (#2130)
- Fixed issue with the internal `NetworkTransformState.m_Bitset` flag not getting cleared upon the next tick advancement. (#2110)
- Fixed interpolation issue with `NetworkTransform.Teleport`. (#2110)
- Fixed issue where the authoritative side was interpolating its transform. (#2110)
- Fixed Owner-written NetworkVariable infinitely write themselves (#2109)
- Fixed NetworkList issue that showed when inserting at the very end of a NetworkList (#2099)
- Fixed issue where a client owner of a `NetworkVariable` with both owner read and write permissions would not update the server side when changed. (#2097)
- Fixed issue when attempting to spawn a parent `GameObject`, with `NetworkObject` component attached, that has one or more child `GameObject`s, that are inactive in the hierarchy, with NetworkBehaviour components it will no longer attempt to spawn the associated NetworkBehaviour(s) or invoke ownership changed notifications but will log a warning message. (#2096)
- Fixed an issue where destroying a NetworkBehaviour would not deregister it from the parent NetworkObject, leading to exceptions when the parent was later destroyed. (#2091)
- Fixed issue where `NetworkObject.NetworkHide` was despawning and destroying, as opposed to only despawning, in-scene placed `NetworkObject`s. (#2086)
- Fixed NetworkAnimator synchronizing transitions twice due to it detecting the change in animation state once a transition is started by a trigger. (#2084)
- Fixed issue where NetworkAnimator would not synchronize a looping animation for late joining clients if it was at the very end of its loop. (#2076)
- Fixed issue where NetworkAnimator was not removing its subscription from `OnClientConnectedCallback` when despawned during the shutdown sequence. (#2074)
- Fixed IsServer and IsClient being set to false before object despawn during the shutdown sequence. (#2074)
- Fixed NetworkList Value event on the server. PreviousValue is now set correctly when a new value is set through property setter. (#2067)
- Fixed NetworkLists not populating on client. NetworkList now uses the most recent list as opposed to the list at the end of previous frame, when sending full updates to dynamically spawned NetworkObject. The difference in behaviour is required as scene management spawns those objects at a different time in the frame, relative to updates. (#2062)

## [1.0.0] - 2022-06-27

### Changed

- Changed version to 1.0.0. (#2046)

## [1.0.0-pre.10] - 2022-06-21

### Added

- Added a new `OnTransportFailure` callback to NetworkManager. This callback is invoked when the manager's `NetworkTransport` encounters an unrecoverable error. Transport failures also cause the NetworkManager to shut down. Currently, this is only used by `UnityTransport` to signal a timeout of its connection to the Unity Relay servers. (#1994)
- Added `NetworkEvent.TransportFailure`, which can be used by implementations of `NetworkTransport` to signal to NetworkManager that an unrecoverable error was encountered. (#1994)
- Added test to ensure a warning occurs when nesting NetworkObjects in a NetworkPrefab (#1969)
- Added `NetworkManager.RemoveNetworkPrefab(...)` to remove a prefab from the prefabs list (#1950)

### Changed

- Updated `UnityTransport` dependency on `com.unity.transport` to 1.1.0. (#2025)
- (API Breaking) `ConnectionApprovalCallback` is no longer an `event` and will not allow more than 1 handler registered at a time. Also, `ConnectionApprovalCallback` is now an `Action<>` taking a `ConnectionApprovalRequest` and a `ConnectionApprovalResponse` that the client code must fill (#1972) (#2002)

### Removed

### Fixed
- Fixed issue where dynamically spawned `NetworkObject`s could throw an exception if the scene of origin handle was zero (0) and the `NetworkObject` was already spawned. (#2017)
- Fixed issue where `NetworkObject.Observers` was not being cleared when despawned. (#2009)
- Fixed NetworkAnimator could not run in the server authoritative mode. (#2003)
- Fixed issue where late joining clients would get a soft synchronization error if any in-scene placed NetworkObjects were parented under another `NetworkObject`. (#1985)
- Fixed issue where `NetworkBehaviourReference` would throw a type cast exception if using `NetworkBehaviourReference.TryGet` and the component type was not found. (#1984)
- Fixed `NetworkSceneManager` was not sending scene event notifications for the currently active scene and any additively loaded scenes when loading a new scene in `LoadSceneMode.Single` mode. (#1975)
- Fixed issue where one or more clients disconnecting during a scene event would cause `LoadEventCompleted` or `UnloadEventCompleted` to wait until the `NetworkConfig.LoadSceneTimeOut` period before being triggered. (#1973)
- Fixed issues when multiple `ConnectionApprovalCallback`s were registered (#1972)
- Fixed a regression in serialization support: `FixedString`, `Vector2Int`, and `Vector3Int` types can now be used in NetworkVariables and RPCs again without requiring a `ForceNetworkSerializeByMemcpy<>` wrapper. (#1961)
- Fixed generic types that inherit from NetworkBehaviour causing crashes at compile time. (#1976)
- Fixed endless dialog boxes when adding a NetworkBehaviour to a NetworkManager or vice-versa. (#1947)
- Fixed NetworkAnimator issue where it was only synchronizing parameters if the layer or state changed or was transitioning between states. (#1946)
- Fixed NetworkAnimator issue where when it did detect a parameter had changed it would send all parameters as opposed to only the parameters that changed. (#1946)
- Fixed NetworkAnimator issue where it was not always disposing the `NativeArray` that is allocated when spawned. (#1946)
- Fixed NetworkAnimator issue where it was not taking the animation speed or state speed multiplier into consideration. (#1946)
- Fixed NetworkAnimator issue where it was not properly synchronizing late joining clients if they joined while `Animator` was transitioning between states. (#1946)
- Fixed NetworkAnimator issue where the server was not relaying changes to non-owner clients when a client was the owner. (#1946)
- Fixed issue where the `PacketLoss` metric for tools would return the packet loss over a connection lifetime instead of a single frame. (#2004)

## [1.0.0-pre.9] - 2022-05-10

### Fixed

- Fixed Hosting again after failing to host now works correctly (#1938)
- Fixed NetworkManager to cleanup connected client lists after stopping (#1945)
- Fixed NetworkHide followed by NetworkShow on the same frame works correctly (#1940)

## [1.0.0-pre.8] - 2022-04-27

### Changed

- `unmanaged` structs are no longer universally accepted as RPC parameters because some structs (i.e., structs with pointers in them, such as `NativeList<T>`) can't be supported by the default memcpy struct serializer. Structs that are intended to be serialized across the network must add `INetworkSerializeByMemcpy` to the interface list (i.e., `struct Foo : INetworkSerializeByMemcpy`). This interface is empty and just serves to mark the struct as compatible with memcpy serialization. For external structs you can't edit, you can pass them to RPCs by wrapping them in `ForceNetworkSerializeByMemcpy<T>`. (#1901)
- Changed requirement to register in-scene placed NetworkObjects with NetworkManager in order to respawn them.  In-scene placed NetworkObjects are now automatically tracked during runtime and no longer need to be registered as a NetworkPrefab.  (#1898)

### Removed

- Removed `SIPTransport` (#1870)
- Removed `ClientNetworkTransform` from the package samples and moved to Boss Room's Utilities package which can be found [here](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/ClientAuthority/ClientNetworkTransform.cs) (#1912)

### Fixed

- Fixed issue where `NetworkSceneManager` did not synchronize despawned in-scene placed NetworkObjects. (#1898)
- Fixed NetworkTransform generating false positive rotation delta checks when rolling over between 0 and 360 degrees. (#1890)
- Fixed client throwing an exception if it has messages in the outbound queue when processing the `NetworkEvent.Disconnect` event and is using UTP. (#1884)
- Fixed issue during client synchronization if 'ValidateSceneBeforeLoading' returned false it would halt the client synchronization process resulting in a client that was approved but not synchronized or fully connected with the server. (#1883)
- Fixed an issue where UNetTransport.StartServer would return success even if the underlying transport failed to start (#854)
- Passing generic types to RPCs no longer causes a native crash (#1901)
- Fixed a compile failure when compiling against com.unity.nuget.mono-cecil >= 1.11.4 (#1920)
- Fixed an issue where calling `Shutdown` on a NetworkManager that was already shut down would cause an immediate shutdown the next time it was started (basically the fix makes `Shutdown` idempotent). (#1877)

## [1.0.0-pre.7] - 2022-04-06

### Added

- Added editor only check prior to entering into play mode if the currently open and active scene is in the build list and if not displays a dialog box asking the user if they would like to automatically add it prior to entering into play mode. (#1828)
- Added `UnityTransport` implementation and `com.unity.transport` package dependency (#1823)
- Added `NetworkVariableWritePermission` to `NetworkVariableBase` and implemented `Owner` client writable netvars. (#1762)
- `UnityTransport` settings can now be set programmatically. (#1845)
- `FastBufferWriter` and Reader IsInitialized property. (#1859)
- Prefabs can now be added to the network at **runtime** (i.e., from an addressable asset). If `ForceSamePrefabs` is false, this can happen after a connection has been formed. (#1882)
- When `ForceSamePrefabs` is false, a configurable delay (default 1 second, configurable via `NetworkConfig.SpawnTimeout`) has been introduced to gracefully handle race conditions where a spawn call has been received for an object whose prefab is still being loaded. (#1882)

### Changed

- Changed `NetcodeIntegrationTestHelpers` to use `UnityTransport` (#1870)
- Updated `UnityTransport` dependency on `com.unity.transport` to 1.0.0 (#1849)

### Removed

- Removed `SnapshotSystem` (#1852)
- Removed `com.unity.modules.animation`, `com.unity.modules.physics` and `com.unity.modules.physics2d` dependencies from the package (#1812)
- Removed `com.unity.collections` dependency from the package (#1849)

### Fixed

- Fixed in-scene placed NetworkObjects not being found/ignored after a client disconnects and then reconnects. (#1850)
- Fixed issue where `UnityTransport` send queues were not flushed when calling `DisconnectLocalClient` or `DisconnectRemoteClient`. (#1847)
- Fixed NetworkBehaviour dependency verification check for an existing NetworkObject not searching from root parent transform relative GameObject. (#1841)
- Fixed issue where entries were not being removed from the NetworkSpawnManager.OwnershipToObjectsTable. (#1838)
- Fixed ClientRpcs would always send to all connected clients by default as opposed to only sending to the NetworkObject's Observers list by default. (#1836)
- Fixed clarity for NetworkSceneManager client side notification when it receives a scene hash value that does not exist in its local hash table. (#1828)
- Fixed client throws a key not found exception when it times out using UNet or UTP. (#1821)
- Fixed network variable updates are no longer limited to 32,768 bytes when NetworkConfig.EnsureNetworkVariableLengthSafety is enabled. The limits are now determined by what the transport can send in a message. (#1811)
- Fixed in-scene NetworkObjects get destroyed if a client fails to connect and shuts down the NetworkManager. (#1809)
- Fixed user never being notified in the editor that a NetworkBehaviour requires a NetworkObject to function properly. (#1808)
- Fixed PlayerObjects and dynamically spawned NetworkObjects not being added to the NetworkClient's OwnedObjects (#1801)
- Fixed issue where NetworkManager would continue starting even if the NetworkTransport selected failed. (#1780)
- Fixed issue when spawning new player if an already existing player exists it does not remove IsPlayer from the previous player (#1779)
- Fixed lack of notification that NetworkManager and NetworkObject cannot be added to the same GameObject with in-editor notifications (#1777)
- Fixed parenting warning printing for false positives (#1855)

## [1.0.0-pre.6] - 2022-03-02

### Added

- NetworkAnimator now properly synchrhonizes all animation layers as well as runtime-adjusted weighting between them (#1765)
- Added first set of tests for NetworkAnimator - parameter syncing, trigger set / reset, override network animator (#1735)

### Fixed

- Fixed an issue where sometimes the first client to connect to the server could see messages from the server as coming from itself. (#1683)
- Fixed an issue where clients seemed to be able to send messages to ClientId 1, but these messages would actually still go to the server (id 0) instead of that client. (#1683)
- Improved clarity of error messaging when a client attempts to send a message to a destination other than the server, which isn't allowed. (#1683)
- Disallowed async keyword in RPCs (#1681)
- Fixed an issue where Alpha release versions of Unity (version 2022.2.0a5 and later) will not compile due to the UNet Transport no longer existing (#1678)
- Fixed messages larger than 64k being written with incorrectly truncated message size in header (#1686) (credit: @kaen)
- Fixed overloading RPC methods causing collisions and failing on IL2CPP targets. (#1694)
- Fixed spawn flow to propagate `IsSceneObject` down to children NetworkObjects, decouple implicit relationship between object spawning & `IsSceneObject` flag (#1685)
- Fixed error when serializing ConnectionApprovalMessage with scene management disabled when one or more objects is hidden via the CheckObjectVisibility delegate (#1720)
- Fixed CheckObjectVisibility delegate not being properly invoked for connecting clients when Scene Management is enabled. (#1680)
- Fixed NetworkList to properly call INetworkSerializable's NetworkSerialize() method (#1682)
- Fixed NetworkVariables containing more than 1300 bytes of data (such as large NetworkLists) no longer cause an OverflowException (the limit on data size is now whatever limit the chosen transport imposes on fragmented NetworkDelivery mechanisms) (#1725)
- Fixed ServerRpcParams and ClientRpcParams must be the last parameter of an RPC in order to function properly. Added a compile-time check to ensure this is the case and trigger an error if they're placed elsewhere (#1721)
- Fixed FastBufferReader being created with a length of 1 if provided an input of length 0 (#1724)
- Fixed The NetworkConfig's checksum hash includes the NetworkTick so that clients with a different tickrate than the server are identified and not allowed to connect (#1728)
- Fixed OwnedObjects not being properly modified when using ChangeOwnership (#1731)
- Improved performance in NetworkAnimator (#1735)
- Removed the "always sync" network animator (aka "autosend") parameters (#1746)
- Fixed in-scene placed NetworkObjects not respawning after shutting down the NetworkManager and then starting it back up again (#1769)

## [1.0.0-pre.5] - 2022-01-26

### Added

- Added `PreviousValue` in `NetworkListEvent`, when `Value` has changed (#1528)

### Changed

- NetworkManager's GameObject is no longer allowed to be nested under one or more GameObject(s).(#1484)
- NetworkManager DontDestroy property was removed and now NetworkManager always is migrated into the DontDestroyOnLoad scene. (#1484)'

### Fixed

- Fixed network tick value sometimes being duplicated or skipped. (#1614)
- Fixed The ClientNetworkTransform sample script to allow for owner changes at runtime. (#1606)
- Fixed When the LogLevel is set to developer NetworkBehaviour generates warning messages when it should not (#1631)
- Fixed NetworkTransport Initialize now can receive the associated NetworkManager instance to avoid using NetworkManager.Singleton in transport layer (#1677)
- Fixed a bug where NetworkList.Contains value was inverted (#1363)

## [1.0.0-pre.4] - 2021-01-04

### Added

- Added `com.unity.modules.physics` and `com.unity.modules.physics2d` package dependencies (#1565)

### Removed

- Removed `com.unity.modules.ai` package dependency (#1565)
- Removed `FixedQueue`, `StreamExtensions`, `TypeExtensions` (#1398)

### Fixed

- Fixed in-scene NetworkObjects that are moved into the DDOL scene not getting restored to their original active state (enabled/disabled) after a full scene transition (#1354)
- Fixed invalid IL code being generated when using `this` instead of `this ref` for the FastBufferReader/FastBufferWriter parameter of an extension method. (#1393)
- Fixed an issue where if you are running as a server (not host) the LoadEventCompleted and UnloadEventCompleted events would fire early by the NetworkSceneManager (#1379)
- Fixed a runtime error when sending an array of an INetworkSerializable type that's implemented as a struct (#1402)
- NetworkConfig will no longer throw an OverflowException in GetConfig() when ForceSamePrefabs is enabled and the number of prefabs causes the config blob size to exceed 1300 bytes. (#1385)
- Fixed NetworkVariable not calling NetworkSerialize on INetworkSerializable types (#1383)
- Fixed NullReferenceException on ImportReferences call in NetworkBehaviourILPP (#1434)
- Fixed NetworkObjects not being despawned before they are destroyed during shutdown for client, host, and server instances. (#1390)
- Fixed KeyNotFound exception when removing ownership of a newly spawned NetworkObject that is already owned by the server. (#1500)
- Fixed NetworkManager.LocalClient not being set when starting as a host. (#1511)
- Fixed a few memory leak cases when shutting down NetworkManager during Incoming Message Queue processing. (#1323)
- Fixed network tick value sometimes being duplicated or skipped. (#1614)

### Changed

- The SDK no longer limits message size to 64k. (The transport may still impose its own limits, but the SDK no longer does.) (#1384)
- Updated com.unity.collections to 1.1.0 (#1451)
- NetworkManager's GameObject is no longer allowed to be nested under one or more GameObject(s).(#1484)
- NetworkManager DontDestroy property was removed and now NetworkManager always is migrated into the DontDestroyOnLoad scene. (#1484)

## [1.0.0-pre.3] - 2021-10-22

### Added

- ResetTrigger function to NetworkAnimator (#1327)

### Fixed

- Overflow exception when syncing Animator state. (#1327)
- Added `try`/`catch` around RPC calls, preventing exception from causing further RPC calls to fail (#1329)
- Fixed an issue where ServerClientId and LocalClientId could have the same value, causing potential confusion, and also fixed an issue with the UNet where the server could be identified with two different values, one of which might be the same as LocalClientId, and the other of which would not.(#1368)
- IL2CPP would not properly compile (#1359)

## [1.0.0-pre.2] - 2021-10-19


### Added

- Associated Known Issues for the 1.0.0-pre.1 release in the changelog

### Changed

- Updated label for `1.0.0-pre.1` changelog section

## [1.0.0-pre.1] - 2021-10-19

### Added

- Added `ClientNetworkTransform` sample to the SDK package (#1168)
- Added `Bootstrap` sample to the SDK package (#1140)
- Enhanced `NetworkSceneManager` implementation with additive scene loading capabilities (#1080, #955, #913)
  - `NetworkSceneManager.OnSceneEvent` provides improved scene event notificaitons
- Enhanced NetworkTransform implementation with per axis/component based and threshold based state replication (#1042, #1055, #1061, #1084, #1101)
- Added a jitter-resistent `BufferedLinearInterpolator<T>` for NetworkTransform (#1060)
- Implemented `NetworkPrefabHandler` that provides support for object pooling and `NetworkPrefab` overrides (#1073, #1004, #977, #905,#749, #727)
- Implemented auto `NetworkObject` transform parent synchronization at runtime over the network (#855)
- Adopted Unity C# Coding Standards in the codebase with `.editorconfig` ruleset (#666, #670)
- When a client tries to spawn a `NetworkObject` an exception is thrown to indicate unsupported behavior. (#981)
- Added a `NetworkTime` and `NetworkTickSystem` which allows for improved control over time and ticks. (#845)
- Added a `OnNetworkDespawn` function to `NetworkObject` which gets called when a `NetworkObject` gets despawned and can be overriden. (#865)
- Added `SnapshotSystem` that would allow variables and spawn/despawn messages to be sent in blocks (#805, #852, #862, #963, #1012, #1013, #1021, #1040, #1062, #1064, #1083, #1091, #1111, #1129, #1166, #1192)
  - Disabled by default for now, except spawn/despawn messages
  - Will leverage unreliable messages with eventual consistency
- NetworkBehaviour and `NetworkObject`'s NetworkManager instances can now be overriden (#762)
- Added metrics reporting for the new network profiler if the Multiplayer Tools package is present (#1104, #1089, #1096, #1086, #1072, #1058, #960, #897, #891, #878)
- `NetworkBehaviour.IsSpawned` a quick (and stable) way to determine if the associated NetworkObject is spawned (#1190)
- Added NetworkRigidBody and `NetworkRigidbody2D` components to support networking `Rigidbody` and `Rigidbody2D` components (#1202, #1175)
- Added `NetworkObjectReference` and `NetworkBehaviourReference` structs which allow to sending `NetworkObject/Behaviours` over RPCs/`NetworkVariable`s (#1173)
- Added NetworkAnimator component to support networking `Animator` component (#1281, #872)

### Changed

- Bumped minimum Unity version, renamed package as "Unity Netcode for GameObjects", replaced `MLAPI` namespace and its variants with `Unity.Netcode` namespace and per asm-def variants (#1007, #1009, #1015, #1017, #1019, #1025, #1026, #1065)
  - Minimum Unity version:
    - 2019.4 → 2020.3+
  - Package rename:
    - Display name: `MLAPI Networking Library` → `Netcode for GameObjects`
    - Name: `com.unity.multiplayer.mlapi` → `com.unity.netcode.gameobjects`
    - Updated package description
  - All `MLAPI.x` namespaces are replaced with `Unity.Netcode`
    - `MLAPI.Messaging` → `Unity.Netcode`
    - `MLAPI.Connection` → `Unity.Netcode`
    - `MLAPI.Logging` → `Unity.Netcode`
    - `MLAPI.SceneManagement` → `Unity.Netcode`
    - and other `MLAPI.x` variants to `Unity.Netcode`
  - All assembly definitions are renamed with `Unity.Netcode.x` variants
    - `Unity.Multiplayer.MLAPI.Runtime` → `Unity.Netcode.Runtime`
    - `Unity.Multiplayer.MLAPI.Editor` → `Unity.Netcode.Editor`
    - and other `Unity.Multiplayer.MLAPI.x` variants to `Unity.Netcode.x` variants
- Renamed `Prototyping` namespace and assembly definition to `Components` (#1145)
- Changed `NetworkObject.Despawn(bool destroy)` API to default to `destroy = true` for better usability (#1217)
- Scene registration in NetworkManager is now replaced by Build Setttings → Scenes in Build List (#1080)
- `NetworkSceneManager.SwitchScene` has been replaced by `NetworkSceneManager.LoadScene` (#955)
- `NetworkManager, NetworkConfig, and NetworkSceneManager` scene registration replaced with scenes in build list (#1080)
- `GlobalObjectIdHash` replaced `PrefabHash` and `PrefabHashGenerator` for stability and consistency (#698)
- `NetworkStart` has been renamed to `OnNetworkSpawn`. (#865)
- Network variable cleanup - eliminated shared mode, variables are server-authoritative (#1059, #1074)
- NetworkManager and other systems are no longer singletons/statics (#696, #705, #706, #737, #738, #739, #746, #747, #763, #765, #766, #783, #784, #785, #786, #787, #788)
- Changed `INetworkSerializable.NetworkSerialize` method signature to use `BufferSerializer<T>` instead of `NetworkSerializer` (#1187)
- Changed `CustomMessagingManager`'s methods to use `FastBufferWriter` and `FastBufferReader` instead of `Stream` (#1187)
- Reduced internal runtime allocations by removing LINQ calls and replacing managed lists/arrays with native collections (#1196)

### Removed

- Removed `NetworkNavMeshAgent` (#1150)
- Removed `NetworkDictionary`, `NetworkSet` (#1149)
- Removed `NetworkVariableSettings` (#1097)
- Removed predefined `NetworkVariable<T>` types (#1093)
  - Removed `NetworkVariableBool`, `NetworkVariableByte`, `NetworkVariableSByte`, `NetworkVariableUShort`, `NetworkVariableShort`, `NetworkVariableUInt`, `NetworkVariableInt`, `NetworkVariableULong`, `NetworkVariableLong`, `NetworkVariableFloat`, `NetworkVariableDouble`, `NetworkVariableVector2`, `NetworkVariableVector3`, `NetworkVariableVector4`, `NetworkVariableColor`, `NetworkVariableColor32`, `NetworkVariableRay`, `NetworkVariableQuaternion`
- Removed `NetworkChannel` and `MultiplexTransportAdapter` (#1133)
- Removed ILPP backend for 2019.4, minimum required version is 2020.3+ (#895)
- `NetworkManager.NetworkConfig` had the following properties removed: (#1080)
  - Scene Registrations no longer exists
  - Allow Runtime Scene Changes was no longer needed and was removed
- Removed the NetworkObject.Spawn payload parameter (#1005)
- Removed `ProfilerCounter`, the original MLAPI network profiler, and the built-in network profiler module (2020.3). A replacement can now be found in the Multiplayer Tools package. (#1048)
- Removed UNet RelayTransport and related relay functionality in UNetTransport (#1081)
- Removed `UpdateStage` parameter from `ServerRpcSendParams` and `ClientRpcSendParams` (#1187)
- Removed `NetworkBuffer`, `NetworkWriter`, `NetworkReader`, `NetworkSerializer`, `PooledNetworkBuffer`, `PooledNetworkWriter`, and `PooledNetworkReader` (#1187)
- Removed `EnableNetworkVariable` in `NetworkConfig`, it is always enabled now (#1179)
- Removed NetworkTransform's FixedSendsPerSecond, AssumeSyncedSends, InterpolateServer, ExtrapolatePosition, MaxSendsToExtrapolate, Channel, EnableNonProvokedResendChecks, DistanceSendrate (#1060) (#826) (#1042, #1055, #1061, #1084, #1101)
- Removed NetworkManager's `StopServer()`, `StopClient()` and `StopHost()` methods and replaced with single `NetworkManager.Shutdown()` method for all (#1108)

### Fixed

- Fixed ServerRpc ownership check to `Debug.LogError` instead of `Debug.LogWarning` (#1126)
- Fixed `NetworkObject.OwnerClientId` property changing before `NetworkBehaviour.OnGainedOwnership()` callback (#1092)
- Fixed `NetworkBehaviourILPP` to iterate over all types in an assembly (#803)
- Fixed cross-asmdef RPC ILPP by importing types into external assemblies (#678)
- Fixed NetworkManager shutdown when quitting the application or switching scenes (#1011)
  - Now NetworkManager shutdowns correctly and despawns existing `NetworkObject`s
- Fixed Only one `PlayerPrefab` can be selected on NetworkManager inspector UI in the editor (#676)
- Fixed connection approval not being triggered for host (#675)
- Fixed various situations where messages could be processed in an invalid order, resulting in errors (#948, #1187, #1218)
- Fixed `NetworkVariable`s being default-initialized on the client instead of being initialized with the desired value (#1266)
- Improved runtime performance and reduced GC pressure (#1187)
- Fixed #915 - clients are receiving data from objects not visible to them (#1099)
- Fixed NetworkTransform's "late join" issues, NetworkTransform now uses `NetworkVariable`s instead of RPCs (#826)
- Throw an exception for silent failure when a client tries to get another player's `PlayerObject`, it is now only allowed on the server-side (#844)

### Known Issues

- `NetworkVariable` does not serialize `INetworkSerializable` types through their `NetworkSerialize` implementation
- `NetworkObjects` marked as `DontDestroyOnLoad` are disabled during some network scene transitions
- NetworkTransform interpolates from the origin when switching Local Space synchronization
- Exceptions thrown in `OnNetworkSpawn` user code for an object will prevent the callback in other objects
- Cannot send an array of `INetworkSerializable` in RPCs
- ILPP generation fails with special characters in project path

## [0.2.0] - 2021-06-03

WIP version increment to pass package validation checks. Changelog & final version number TBD.

## [0.1.1] - 2021-06-01

This is hotfix v0.1.1 for the initial experimental Unity MLAPI Package.

### Changed

- Fixed issue with the Unity Registry package version missing some fixes from the v0.1.0 release.

## [0.1.0] - 2021-03-23

This is the initial experimental Unity MLAPI Package, v0.1.0.

### Added

- Refactored a new standard for Remote Procedure Call (RPC) in MLAPI which provides increased performance, significantly reduced boilerplate code, and extensibility for future-proofed code. MLAPI RPC includes `ServerRpc` and `ClientRpc` to execute logic on the server and client-side. This provides a single performant unified RPC solution, replacing MLAPI Convenience and Performance RPC (see [here](#removed-features)).
- Added standarized serialization types, including built-in and custom serialization flows. See [RFC #2](https://github.com/Unity-Technologies/com.unity.multiplayer.rfcs/blob/master/text/0002-serializable-types.md) for details.
- `INetworkSerializable` interface replaces `IBitWritable`.
- Added `NetworkSerializer`..., which is the main aggregator that implements serialization code for built-in supported types and holds `NetworkReader` and `NetworkWriter` instances internally.
- Added a Network Update Loop infrastructure that aids Netcode systems to update (such as RPC queue and transport) outside of the standard `MonoBehaviour` event cycle. See [RFC #8](https://github.com/Unity-Technologies/com.unity.multiplayer.rfcs/blob/master/text/0008-network-update-loop.md) and the following details:
  - It uses Unity's [low-level Player Loop API](https://docs.unity3d.com/ScriptReference/LowLevel.PlayerLoop.html) and allows for registering `INetworkUpdateSystem`s with `NetworkUpdate` methods to be executed at specific `NetworkUpdateStage`s, which may also be before or after `MonoBehaviour`-driven game logic execution.
  - You will typically interact with `NetworkUpdateLoop` for registration and `INetworkUpdateSystem` for implementation.
  - `NetworkVariable`s are now tick-based using the `NetworkTickSystem`, tracking time through network interactions and syncs.
- Added message batching to handle consecutive RPC requests sent to the same client. `RpcBatcher` sends batches based on requests from the `RpcQueueProcessing`, by batch size threshold or immediately.
- [GitHub 494](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/494): Added a constraint to allow one `NetworkObject` per `GameObject`, set through the `DisallowMultipleComponent` attribute.
- Integrated MLAPI with the Unity Profiler for versions 2020.2 and later:
  - Added new profiler modules for MLAPI that report important network data.
  - Attached the profiler to a remote player to view network data over the wire.
- A test project is available for building and experimenting with MLAPI features. This project is available in the MLAPI GitHub [testproject folder](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/tree/release/0.1.0/testproject).
- Added a [MLAPI Community Contributions](https://github.com/Unity-Technologies/mlapi-community-contributions/tree/master/com.mlapi.contrib.extensions) new GitHub repository to accept extensions from the MLAPI community. Current extensions include moved MLAPI features for lag compensation (useful for Server Authoritative actions) and `TrackedObject`.

### Changed

- [GitHub 520](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/520): MLAPI now uses the Unity Package Manager for installation management.
- Added functionality and usability to `NetworkVariable`, previously called `NetworkVar`. Updates enhance options and fully replace the need for `SyncedVar`s.
- [GitHub 507](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/507): Reimplemented NetworkAnimator, which synchronizes animation states for networked objects.
- GitHub [444](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/444) and [455](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/455): Channels are now represented as bytes instead of strings.

For users of previous versions of MLAPI, this release renames APIs due to refactoring. All obsolete marked APIs have been removed as per [GitHub 513](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/513) and [GitHub 514](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/514).

| Previous MLAPI Versions | V 0.1.0 Name |
| -- | -- |
| `NetworkingManager` | NetworkManager |
| `NetworkedObject` | `NetworkObject` |
| `NetworkedBehaviour` | NetworkBehaviour |
| `NetworkedClient` | `NetworkClient` |
| `NetworkedPrefab` | `NetworkPrefab` |
| `NetworkedVar` | `NetworkVariable` |
| `NetworkedTransform` | NetworkTransform |
| `NetworkedAnimator` | NetworkAnimator |
| `NetworkedAnimatorEditor` | `NetworkAnimatorEditor` |
| `NetworkedNavMeshAgent` | `NetworkNavMeshAgent` |
| `SpawnManager` | `NetworkSpawnManager` |
| `BitStream` | `NetworkBuffer` |
| `BitReader` | `NetworkReader` |
| `BitWriter` | `NetworkWriter` |
| `NetEventType` | `NetworkEventType` |
| `ChannelType` | `NetworkDelivery` |
| `Channel` | `NetworkChannel` |
| `Transport` | `NetworkTransport` |
| `NetworkedDictionary` | `NetworkDictionary` |
| `NetworkedList` | `NetworkList` |
| `NetworkedSet` | `NetworkSet` |
| `MLAPIConstants` | `NetworkConstants` |
| `UnetTransport` | `UNetTransport` |

### Fixed

- [GitHub 460](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/460): Fixed an issue for RPC where the host-server was not receiving RPCs from the host-client and vice versa without the loopback flag set in `NetworkingManager`.
- Fixed an issue where data in the Profiler was incorrectly aggregated and drawn, which caused the profiler data to increment indefinitely instead of resetting each frame.
- Fixed an issue the client soft-synced causing PlayMode client-only scene transition issues, caused when running the client in the editor and the host as a release build. Users may have encountered a soft sync of `NetworkedInstanceId` issues in the `SpawnManager.ClientCollectSoftSyncSceneObjectSweep` method.
- [GitHub 458](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/458): Fixed serialization issues in `NetworkList` and `NetworkDictionary` when running in Server mode.
- [GitHub 498](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/498): Fixed numerical precision issues to prevent not a number (NaN) quaternions.
- [GitHub 438](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/438): Fixed booleans by reaching or writing bytes instead of bits.
- [GitHub 519](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/519): Fixed an issue where calling `Shutdown()` before making `NetworkManager.Singleton = null` is null on `NetworkManager.OnDestroy()`.

### Removed

With a new release of MLAPI in Unity, some features have been removed:

- SyncVars have been removed from MLAPI. Use `NetworkVariable`s in place of this functionality. <!-- MTT54 -->
- [GitHub 527](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/527): Lag compensation systems and `TrackedObject` have moved to the new [MLAPI Community Contributions](https://github.com/Unity-Technologies/mlapi-community-contributions/tree/master/com.mlapi.contrib.extensions) repo.
- [GitHub 509](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/509): Encryption has been removed from MLAPI. The `Encryption` option in `NetworkConfig` on the `NetworkingManager` is not available in this release. This change will not block game creation or running. A current replacement for this functionality is not available, and may be developed in future releases. See the following changes:
  - Removed `SecuritySendFlags` from all APIs.
  - Removed encryption, cryptography, and certificate configurations from APIs including NetworkManager and `NetworkConfig`.
  - Removed "hail handshake", including NetworkManager implementation and `NetworkConstants` entries.
  - Modified `RpcQueue` and `RpcBatcher` internals to remove encryption and authentication from reading and writing.
- Removed the previous MLAPI Profiler editor window from Unity versions 2020.2 and later.
- Removed previous MLAPI Convenience and Performance RPC APIs with the new standard RPC API. See [RFC #1](https://github.com/Unity-Technologies/com.unity.multiplayer.rfcs/blob/master/text/0001-std-rpc-api.md) for details.
- [GitHub 520](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/520): Removed the MLAPI Installer.

### Known Issues

- `NetworkNavMeshAgent` does not synchronize mesh data, Agent Size, Steering, Obstacle Avoidance, or Path Finding settings. It only synchronizes the destination and velocity, not the path to the destination.
- For `RPC`, methods with a `ClientRpc` or `ServerRpc` suffix which are not marked with [ServerRpc] or [ClientRpc] will cause a compiler error.
- For NetworkAnimator, Animator Overrides are not supported. Triggers do not work.
- For `NetworkVariable`, the `NetworkDictionary` `List` and `Set` must use the `reliableSequenced` channel.
- `NetworkObjects`s are supported but when spawning a prefab with nested child network objects you have to manually call spawn on them
- NetworkTransform have the following issues:
  - Replicated objects may have jitter.
  - The owner is always authoritative about the object's position.
  - Scale is not synchronized.
- Connection Approval is not called on the host client.
- For `NamedMessages`, always use `NetworkBuffer` as the underlying stream for sending named and unnamed messages.
- For NetworkManager, connection management is limited. Use `IsServer`, `IsClient`, `IsConnectedClient`, or other code to check if MLAPI connected correctly.

## [0.0.1-preview.1] - 2020-12-20

This was an internally-only-used version of the Unity MLAPI Package


## Links discovered
- [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)
- [Semantic Versioning](https://semver.org/spec/v2.0.0.html)
- [Multiplayer Documentation](https://docs-multiplayer.unity3d.com)
- [Network Simulator](https://docs-multiplayer.unity3d.com/tools/current/tools-network-simulator/)
- [here](https://github.com/Unity-Technologies/com.unity.multiplayer.samples.coop/blob/main/Packages/com.unity.multiplayer.samples.coop/Utilities/Net/ClientAuthority/ClientNetworkTransform.cs)
- [RFC #2](https://github.com/Unity-Technologies/com.unity.multiplayer.rfcs/blob/master/text/0002-serializable-types.md)
- [RFC #8](https://github.com/Unity-Technologies/com.unity.multiplayer.rfcs/blob/master/text/0008-network-update-loop.md)
- [low-level Player Loop API](https://docs.unity3d.com/ScriptReference/LowLevel.PlayerLoop.html)
- [GitHub 494](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/494)
- [testproject folder](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/tree/release/0.1.0/testproject)
- [MLAPI Community Contributions](https://github.com/Unity-Technologies/mlapi-community-contributions/tree/master/com.mlapi.contrib.extensions)
- [GitHub 520](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/520)
- [GitHub 507](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/507)
- [444](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/444)
- [455](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/455)
- [GitHub 513](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/513)
- [GitHub 514](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/514)
- [GitHub 460](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/460)
- [GitHub 458](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/458)
- [GitHub 498](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/498)
- [GitHub 438](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/438)
- [GitHub 519](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/519)
- [GitHub 527](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/527)
- [GitHub 509](https://github.com/Unity-Technologies/com.unity.multiplayer.mlapi/pull/509)
- [RFC #1](https://github.com/Unity-Technologies/com.unity.multiplayer.rfcs/blob/master/text/0001-std-rpc-api.md)

--- com.unity.netcode.gameobjects/LICENSE.md ---
Unity Companion License (UCL License)

com.unity.netcode.gameobjects copyright © 2024 Unity Technologies
Licensed under the Unity Companion License for Unity-dependent projects (see https://unity3d.com/legal/licenses/unity_companion_license).
Unless expressly provided otherwise, the Software under this license is made available strictly on an “AS IS” BASIS WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED. Please review the license for details on these and other terms and conditions.


--- Tools/scripts/release.py ---
"""
This python script makes the NGO package release ready. What it does is:
1) Update changelogs
2) Update validation exception file based on manifest version

Note that this script NEEDS TO BE RUN FROM THE ROOT of the project.
"""
#!/usr/bin/env python3
import json
import os
import re
import sys
import subprocess
import platform

from Utils.general_utils import get_package_version_from_manifest, update_changelog, update_validation_exceptions # nopep8

def regenerate_wrench():
    """
    It runs Tools/regenerate-ci.cmd OR Tools/regenerate-ci.sh script
    to regenerate the CI files. (depending on the OS)
    
    This is needed because wrench scripts content is created dynamically depending on the available editors
    """

    # --- Regenerate the CI files ---
    print("\nRegenerating CI files...")
    script_path = ""
    if platform.system() == "Windows":
        script_path = os.path.join('Tools', 'regenerate-ci.cmd')
    else: # macOS and Linux
        script_path = os.path.join('Tools', 'regenerate-ci.sh')

    if not os.path.exists(script_path):
        raise FileNotFoundError(f"Error: Regeneration script not found at '{script_path}'.")

    try:
        # Execute the regeneration script
        # On non-Windows systems, the script might need execute permissions.
        if platform.system() != "Windows":
            os.chmod(script_path, 0o755)

        subprocess.run([script_path], check=True, shell=True)

    except subprocess.CalledProcessError as e:
        raise Exception(f"Error: The CI regeneration script failed with exit code {e.returncode}.")
    except Exception as e:
        raise Exception(f"An unexpected error occurred while running the regeneration script: {e}")
        

def make_package_release_ready(manifest_path, changelog_path, validation_exceptions_path, package_version):

    if not os.path.exists(manifest_path):
        print(f" Path does not exist: {manifest_path}")
        sys.exit(1)

    if not os.path.exists(changelog_path):
        print(f" Path does not exist: {changelog_path}")
        sys.exit(1)
        
    if not os.path.exists(validation_exceptions_path):
        print(f" Path does not exist: {validation_exceptions_path}")
        sys.exit(1)

    if package_version is None:
        print(f"Package version not found at {manifest_path}")
        sys.exit(1)

    try: 
        # Update the ValidationExceptions.json file
        # with the new package version OR remove it if not a release branch
        update_validation_exceptions(validation_exceptions_path, package_version)
        # Clean the CHANGELOG and add latest entry
        # package version is already know as explained in
        # https://github.cds.internal.unity3d.com/unity/dots/pull/14318
        update_changelog(changelog_path, package_version)
        # Make sure that the wrench scripts are up to date
        regenerate_wrench()

    except Exception as e:
        print(f"An unexpected error occurred: {e}", file=sys.stderr)
        sys.exit(1)





if __name__ == '__main__':
    manifest_path = 'com.unity.netcode.gameobjects/package.json'
    changelog_path = 'com.unity.netcode.gameobjects/CHANGELOG.md'
    validation_exceptions_path = './ValidationExceptions.json'
    package_version = get_package_version_from_manifest(manifest_path)

    make_package_release_ready(manifest_path, changelog_path, validation_exceptions_path, package_version)


--- Tools/scripts/Utils/createPrAfterRelease.py ---
﻿"""
Creates a direct commit to specified branch (in the config) to update the changelog, package version and validation exceptions for a new release using the GitHub API.
Quite often the changelog gets distorted between the time we branch for the release and the time we will branch back.
To mitigate this we want to create changelog update PR straight away and merge it fast while proceeding with the release.

This will also allow us to skip any PRs after releasing, unless, we made some changes on this branch.

"""
#!/usr/bin/env python3
import os
import sys
from github import GithubException
from git import Actor

PARENT_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), '../'))
sys.path.insert(0, PARENT_DIR)

from ReleaseAutomation.release_config import ReleaseConfig
from Utils.general_utils import get_package_version_from_manifest, update_changelog, update_package_version_by_patch, update_validation_exceptions
from Utils.git_utils import get_local_repo

def createPrAfterRelease(config: ReleaseConfig):
    """
    The function updates the changelog and package version of the package in anticipation of a new release.
    This means that it will
        1) Clean and update the changelog for the current package version.
        2) Add new Unreleased section template at the top.
        3) Update the package version in the package.json file by incrementing the patch version to signify the current state of the package.
        4) Update package version in the validation exceptions to match the new package version.

    This assumes that at the same time you already branched off for the release. Otherwise it may be confusing
    """

    try:
        if not config.github_manager.is_branch_present(config.default_repo_branch):
            raise Exception(f"Branch '{config.default_repo_branch}' does not exist. Exiting.")

        author = Actor(config.commiter_name, config.commiter_email)
        committer = Actor(config.commiter_name, config.commiter_email)

        repo = get_local_repo()
        repo.git.fetch('--prune', '--prune-tags')
        
        # Check if there are uncommitted changes that would block checkout
        # Stash them if they exist to allow checkout to proceed
        has_uncommitted_changes = repo.is_dirty()
        if has_uncommitted_changes:
            print("Uncommitted changes detected. Stashing before checkout...")
            repo.git.stash('push', '-m', 'Auto-stash before checkout for release PR creation')
        
        repo.git.checkout(config.default_repo_branch)
        repo.git.pull("origin", config.default_repo_branch)
        
        # Create a new branch for the release changes PR to default branch
        repo.git.checkout('-b', config.pr_branch_name)

        # Update the changelog file with adding new [Unreleased] section
        update_changelog(config.changelog_path, config.package_version, add_unreleased_template=True)
        # Update the package version by patch to represent the "current package state" after release
        updated_package_version = update_package_version_by_patch(config.manifest_path)
        update_validation_exceptions(config.validation_exceptions_path, updated_package_version)

        repo.git.add(config.changelog_path)
        repo.git.add(config.manifest_path)
        repo.git.add(config.validation_exceptions_path)

        repo.index.commit(config.pr_commit_message, author=author, committer=committer, skip_hooks=True)
        repo.git.push("origin", config.pr_branch_name)

        github = config.github_manager
        pr = github.create_pull_request(title=config.pr_commit_message, body=config.pr_body, head=config.pr_branch_name, base=config.default_repo_branch)
        github.request_reviews(pr, config.pr_reviewers)

        print(f"Successfully updated and created the PR targeting: {config.default_repo_branch}")

    except GithubException as e:
        print(f"An error occurred with the GitHub API: {e.status}", file=sys.stderr)
        print(f"Error details: {e.data}", file=sys.stderr)
        sys.exit(1)
    except Exception as e:
        print(f"An unexpected error occurred: {e}", file=sys.stderr)
        sys.exit(1)


--- Tools/scripts/ReleaseAutomation/release_config.py ---
﻿"""Netcode configuration for the release process automation."""

import datetime
import sys
import os
from github import Github
from github import GithubException

PARENT_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), '../'))
sys.path.insert(0, PARENT_DIR)

from Utils.general_utils import get_package_version_from_manifest
from release import make_package_release_ready

class GithubUtils:
    def __init__(self, access_token, repo):
        self.github = Github(base_url="https://api.github.com",
                             login_or_token=access_token)
        self.repo = self.github.get_repo(repo)

    def is_branch_present(self, branch_name):
        try:
            self.repo.get_branch(branch_name)
            return True # Branch exists

        except GithubException as ghe:
            if ghe.status == 404:
                return False # Branch does not exist
            raise Exception(f"An error occurred with the GitHub API: {ghe.status}", data=ghe.data)
            
    def create_pull_request(self, title, body, head, base):
        try:
            return self.repo.create_pull(title=title, body=body, head=head, base=base)

        except GithubException as ghe:
            raise Exception(f"Failed to create pull request: {ghe.status}", ghe.data) from ghe
    
    def request_reviews(self, pr, reviewers):
        if not reviewers:
            return
    
        try:
            pr.create_review_request(reviewers=reviewers)
        except GithubException as ghe:
            raise Exception(f"Failed to request reviews: {ghe.status}", ghe.data) from ghe


class ReleaseConfig:
    """A simple class to hold all shared configuration."""
    def __init__(self):
        self.manifest_path = 'com.unity.netcode.gameobjects/package.json'
        self.changelog_path = 'com.unity.netcode.gameobjects/CHANGELOG.md'
        self.validation_exceptions_path = './ValidationExceptions.json'
        self.github_repo = 'Unity-Technologies/com.unity.netcode.gameobjects'
        self.default_repo_branch = 'develop-2.0.0' # Changelog and package version change will be pushed to this branch
        self.yamato_project_id = '1201'
        self.command_to_run_on_release_branch = make_package_release_ready

        self.release_weekday = 6  # Sunday
        self.release_week_cycle = 4  # Release every 4 weeks
        self.anchor_date = datetime.date(2025, 7, 20) # Anchor date for the release cycle (previous release Sunday)

        self.package_version = get_package_version_from_manifest(self.manifest_path)
        self.release_branch_name = f"release/{self.package_version}" # Branch from which we want to release
        
        self.release_commit_message = f"Updated changelog and package version for Netcode in anticipation of v{self.package_version} release"
        
        self.pr_branch_name = f"netcode-update-after-{self.package_version}-release-branch-creation" # Branch from which we will create PR to default branch with relevant changes after release branch is created
        self.pr_commit_message = f"chore: Updated aspects of Netcode package in anticipation of v{self.package_version} release"
        self.pr_body = f"This PR was created in sync with branching of {self.release_branch_name}. It includes changes that should land on the default Netcode branch ({self.default_repo_branch}) to reflect the new state of the package after the v{self.package_version} release:\n" \
            f"1) Updated CHANGELOG.md by adding new [Unreleased] section template at the top and cleaning the Changelog for the current release.\n" \
            f"2) Updated package version in package.json by incrementing the patch version to signify the current state of the package.\n" \
            f"3) Updated package version in ValidationExceptions.json to match the new package version.\n\n" \
            f"Please review and merge this PR to keep the default branch up to date with the latest package state after the release. Those changes can land immediately OR after the release was finalized but make sure that the Changelog will be merged correctly as sometimes some discrepancies may be introduced due to new entries being introduced meantime\n"
        self.pr_reviewers = ["michal-chrobot"]

        GITHUB_TOKEN_NAME = "NETCODE_GITHUB_TOKEN"
        YAMATO_API_KEY_NAME = "NETCODE_YAMATO_API_KEY"
        self.github_token = os.environ.get(GITHUB_TOKEN_NAME)
        self.yamato_api_token = os.environ.get(YAMATO_API_KEY_NAME)
        self.commiter_name = "netcode-automation"
        self.commiter_email = "svc-netcode-sdk@unity3d.com"

        self.yamato_samples_to_build = [
            {
                "name": "BossRoom",
                "jobDefinition": f".yamato%2Fproject-builders%2Fproject-builders.yml%23build_BossRoom_project",
            },
            {
                "name": "Asteroids",
                "jobDefinition": f".yamato%2Fproject-builders%2Fproject-builders.yml%23build_Asteroids_project",
            },
            {
                "name": "SocialHub",
                "jobDefinition": f".yamato%2Fproject-builders%2Fproject-builders.yml%23build_SocialHub_project",
            }
        ]

        self.yamato_build_automation_configs = [
            {
                "job_name": "Build Sample for Windows with minimal supported editor (2022.3), burst ON, IL2CPP",
                "variables": [
                    { "key": "BURST_ON_OFF", "value": "on" },
                    { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "win64" },
                    { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "il2cpp" },
                    { "key": "UNITY_VERSION", "value": "2022.3" } # Minimal supported editor
                ]
            },
            {
                "job_name": "Build Sample for Windows with latest functional editor (6000.2), burst ON, IL2CPP",
                "variables": [
                    { "key": "BURST_ON_OFF", "value": "on" },
                    { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "win64" },
                    { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "il2cpp" },
                    { "key": "UNITY_VERSION", "value": "6000.3" } # Editor that most our users will use (not alpha). Sometimes when testing on trunk we have weird editor issues not caused by us so the preference will be to test on latest editor that our users will use.
                ]
            },
            {
                "job_name": "Build Sample for Windows with latest editor (trunk), burst ON, IL2CPP",
                "variables": [
                    { "key": "BURST_ON_OFF", "value": "on" },
                    { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "win64" },
                    { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "il2cpp" },
                    { "key": "UNITY_VERSION", "value": "trunk" } # latest editor
                ]
            },
            {
                "job_name": "Build Sample for MacOS with minimal supported editor (2022.3), burst OFF, Mono",
                "variables": [
                    { "key": "BURST_ON_OFF", "value": "off" },
                    { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "mac" },
                    { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "mono" },
                    { "key": "UNITY_VERSION", "value": "2022.3" } # Minimal supported editor
                ]
            },
            {
                "job_name": "Build Sample for MacOS with latest functional editor (6000.2), burst OFF, Mono",
                "variables": [
                    { "key": "BURST_ON_OFF", "value": "off" },
                    { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "mac" },
                    { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "mono" },
                    { "key": "UNITY_VERSION", "value": "6000.3" } # Editor that most our users will use (not alpha). Sometimes when testing on trunk we have weird editor issues not caused by us so the preference will be to test on latest editor that our users will use.
                ]
            },
            {
                "job_name": "Build Sample for MacOS with latest editor (trunk), burst OFF, Mono",
                "variables": [
                    { "key": "BURST_ON_OFF", "value": "off" },
                    { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "mac" },
                    { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "mono" },
                    { "key": "UNITY_VERSION", "value": "trunk" } # latest editor
                ]
            },
            {
                "job_name": "Build Sample for Android with minimal supported editor (2022.3), burst ON, IL2CPP",
                "variables": [
                    { "key": "BURST_ON_OFF", "value": "on" },
                    { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "android" },
                    { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "il2cpp" },
                    { "key": "UNITY_VERSION", "value": "2022.3" } # Minimal supported editor
                ]
            },
            {
                "job_name": "Build Sample for Android with latest functional editor (6000.2), burst ON, IL2CPP",
                "variables": [
                    { "key": "BURST_ON_OFF", "value": "on" },
                    { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "android" },
                    { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "il2cpp" },
                    { "key": "UNITY_VERSION", "value": "6000.3" } # Editor that most our users will use (not alpha). Sometimes when testing on trunk we have weird editor issues not caused by us so the preference will be to test on latest editor that our users will use.
                ]
            },
            {
                "job_name": "Build Sample for Android with latest editor (trunk), burst ON, IL2CPP",
                "variables": [
                    { "key": "BURST_ON_OFF", "value": "on" },
                    { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "android" },
                    { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "il2cpp" },
                    { "key": "UNITY_VERSION", "value": "trunk" } # latest editor
                ]
            }
        ]

        error_messages = []
        if not os.path.exists(self.manifest_path):
            error_messages.append(f" Path does not exist: {self.manifest_path}")

        if not os.path.exists(self.changelog_path):
            error_messages.append(f" Path does not exist: {self.changelog_path}")

        if not os.path.exists(self.validation_exceptions_path):
            error_messages.append(f" Path does not exist: {self.validation_exceptions_path}")

        if not callable(self.command_to_run_on_release_branch):
            error_messages.append("command_to_run_on_release_branch is not a function! Actual value:", self.command_to_run_on_release_branch)

        if self.package_version is None:
            error_messages.append(f"Package version not found at {self.manifest_path}")

        if not self.github_token:
            error_messages.append(f"Error: {GITHUB_TOKEN_NAME} environment variable not set.")

        if not self.yamato_api_token:
            error_messages.append(f"Error: {YAMATO_API_KEY_NAME} environment variable not set.")

        # Initialize PyGithub and get the repository object
        self.github_manager = GithubUtils(self.github_token, self.github_repo)

        if not self.github_manager.is_branch_present(self.default_repo_branch):
            error_messages.append(f"Branch '{self.default_repo_branch}' does not exist.")

        if self.github_manager.is_branch_present(self.release_branch_name):
            error_messages.append(f"Branch '{self.release_branch_name}' is already present in the repo.")

        if error_messages:
            summary = "Failed to initialize NetcodeReleaseConfig due to invalid setup:\n" + "\n".join(f"- {msg}" for msg in error_messages)
            raise ValueError(summary)


--- Tools/scripts/ReleaseAutomation/run_release_preparation.py ---
﻿"""Automation for package release process."""

import sys
import os

PARENT_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), '../'))
sys.path.insert(0, PARENT_DIR)

from ReleaseAutomation.release_config import ReleaseConfig
from Utils.git_utils import create_release_branch
from Utils.verifyReleaseConditions import verifyReleaseConditions
from Utils.createPrAfterRelease import createPrAfterRelease
from Utils.triggerYamatoJobsForReleasePreparation import trigger_release_preparation_jobs

def PrepareNetcodePackageForRelease():
    try:
        config = ReleaseConfig()

        print("\nStep 1: Verifying release conditions...")
        verifyReleaseConditions(config)
    except Exception as e:
        print("\n--- Release conditions were not met ---", file=sys.stderr)
        print(f"Reason: {e}", file=sys.stderr)
        sys.exit(0) # In this case we want the job not to fail because this will be an intended blocking behavior
    
    
    
    try:
        print("\nStep 2: Creating release branch...")
        create_release_branch(config)

        print("\nStep 3: Triggering Yamato validation jobs...")
        trigger_release_preparation_jobs(config)

        print("\nStep 4: Creating PR with needed changes to default branch...")
        createPrAfterRelease(config)

    except Exception as e:
        print("\n--- ERROR: Netcode release process failed ---", file=sys.stderr)
        print(f"Reason: {e}", file=sys.stderr)
        sys.exit(1)

if __name__ == "__main__":
    PrepareNetcodePackageForRelease()


--- Tools/scripts/Utils/triggerYamatoJobsForReleasePreparation.py ---
﻿"""
This script triggers .yamato/wrench/publish-trigger.yml#all_promotion_related_jobs_promotiontrigger to facilitate package release process
We still need to manually set up Packageworks but this script will already trigger required jobs so we don't need to wait for them
The goal is to already trigger those when release branch is being created so after Packageworks setup we can already see the results

Additionally the job also triggers build automation job that will prepare builds for the Playtest.
"""
#!/usr/bin/env python3

import os
import sys

PARENT_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), '../'))
sys.path.insert(0, PARENT_DIR)

import requests
from ReleaseAutomation.release_config import ReleaseConfig
from Utils.git_utils import get_latest_git_revision

YAMATO_API_URL = "https://yamato-api.cds.internal.unity3d.com/jobs"

def trigger_wrench_promotion_job_on_yamato(yamato_api_token, project_id, branch_name, revision_sha):
    """
    Triggers publish-trigger.yml#all_promotion_related_jobs_promotiontrigger job (via the REST API) to run release validation.
    This function basically query the job that NEEDS to pass in order to release via Packageworks
    Note that this will not publish/promote anything by itself but will just trigger the job that will run all the required tests and validations.

    For the arguments we need to pass the Yamato API Long Lived Token, project ID, branch name and revision SHA on which we want to trigger the job.
    """

    headers = {
        "Authorization": f"ApiKey {yamato_api_token}",
        "Content-Type": "application/json"
    }

    data = {
        "source": {
            "branchname": branch_name,
            "revision": revision_sha,
        },
        "links": {
            "project": f"/projects/{project_id}",
            "jobDefinition": f"/projects/{project_id}/revisions/{revision_sha}/job-definitions/.yamato%2Fwrench%2Fpublish-trigger.yml%23all_promotion_related_jobs_promotiontrigger"
        }
    }

    print(f"Triggering job on branch {branch_name}...\n")
    response = requests.post(YAMATO_API_URL, headers=headers, json=data, timeout=10)

    if response.status_code in [200, 201]:
        data = response.json()
        print(f"Successfully triggered '{data['jobDefinitionName']}' where full path is '{data['jobDefinition']['filename']}' on {branch_name} branch and {revision_sha} revision.")
    else:
        raise Exception(f"Failed to trigger job. Status: {response.status_code}, Error: {response.text}")


def trigger_automated_builds_job_on_yamato(yamato_api_token, project_id, branch_name, revision_sha, samples_to_build, build_automation_configs):
    """
    Triggers Yamato jobs (via the REST API) to prepare builds for Playtest.
    Build Automation is based on https://github.cds.internal.unity3d.com/unity/dots/pull/14314

    For the arguments we need to pass the Yamato API Long Lived Token, project ID, branch name and revision SHA on which we want to trigger the job.
    On top of that we should pass samples_to_build in format like

    samples_to_build = [
        {
            "name": "NetcodeSamples",
            "jobDefinition": f".yamato%2Fproject-builders%2Fproject-builders.yml%23build_NetcodeSamples_project",
        }
    ]

    Note that "name" is just a human readable name of the sample (for debug message )and "jobDefinition" is the path to the job definition in the Yamato project. This path needs to be URL encoded, so for example / or # signs need to be replaced with %2F and %23 respectively.

    You also need to pass build_automation_configs which will specify arguments for the build automation job. It should be in the following format:

    build_automation_configs = [
        {
            "job_name": "Build Sample for Windows with minimal supported editor (2022.3), burst ON, IL2CPP",
            "variables": [
                { "key": "BURST_ON_OFF", "value": "on" },
                { "key": "PLATFORM_WIN64_MAC_ANDROID", "value": "win64" },
                { "key": "SCRIPTING_BACKEND_IL2CPP_MONO", "value": "il2cpp" },
                { "key": "UNITY_VERSION", "value": "2022.3" }
            ]
        }
    ]

    Again, note that the "job_name" is used for  debug message and "variables" is a list of environment variables that will be passed to the job. Each variable should be a dictionary with "key" and "value" fields.

    The function will trigger builds for each sample in samples_to_build with each configuration in build_automation_configs.
    """

    headers = {
        "Authorization": f"ApiKey {yamato_api_token}",
        "Content-Type": "application/json"
    }

    for sample in samples_to_build:
        for config in build_automation_configs:
            data = {
                "source": {
                    "branchname": branch_name,
                    "revision": revision_sha,
                },
                "links": {
                    "project": f"/projects/{project_id}",
                    "jobDefinition": f"/projects/{project_id}/revisions/{revision_sha}/job-definitions/{sample['jobDefinition']}"
                },
                "environmentVariables": config["variables"]
            }

            print(f"Triggering the build of {sample['name']} with a configuration '{config['job_name']}' on branch {branch_name}...\n")
            response = requests.post(YAMATO_API_URL, headers=headers, json=data, timeout=10)

            if not response.status_code in [200, 201]:
                print(f"Failed to trigger job. Status: {response.status_code}", file=sys.stderr)
                print("  Error:", response.text, file=sys.stderr)
                # I will continue the job since it has a limited amount of requests and I don't want to block the whole script if one of the jobs fails



def trigger_release_preparation_jobs(config: ReleaseConfig):
    """Triggers Wrench dry run promotion jobs and build automation for anticipation for Playtesting and Packageworks setup for Netcode."""

    try:
        revision_sha = get_latest_git_revision(config.release_branch_name)

        trigger_wrench_promotion_job_on_yamato(config.yamato_api_token, config.yamato_project_id, config.release_branch_name, revision_sha)
        trigger_automated_builds_job_on_yamato(config.yamato_api_token, config.yamato_project_id, config.release_branch_name, revision_sha, config.yamato_samples_to_build, config.yamato_build_automation_configs)

    except Exception as e:
        print("\n--- ERROR: Job failed ---", file=sys.stderr)
        print(f"Reason: {e}", file=sys.stderr)
        sys.exit(1)


--- Tools/scripts/Utils/verifyReleaseConditions.py ---
﻿"""
Determines if Release conditions are met.

The script will check the following conditions:
1. **Is today a release day?**
    - The script checks if today is a specified in ReleaseConfig weekday that falls on the release cycle of the team.
    - Note that if the job is triggered manually, this condition will be bypassed.
2. **Is the [Unreleased] section of the CHANGELOG.md not empty?**
    - The script checks if the [Unreleased] section in the CHANGELOG.md contains meaningful entries.
3. **Does the release branch already exist?**
    - If the release branch for the target release already exists, the script will not run.
"""
#!/usr/bin/env python3

import sys
import os

PARENT_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), '../ReleaseAutomation'))
sys.path.insert(0, PARENT_DIR)

import datetime
import re
from release_config import ReleaseConfig

def get_yamato_trigger_type():
    """
    Retrieves the trigger type for the current Yamato job from environment variables.
    In other words, we can check if the job was triggered manually, by a schedule, or by a PR, etc.
    This value is set to Recurring when triggered by automation
    """
    trigger_type = os.environ.get('YAMATO_TRIGGER_TYPE', 'Manual')
    
    return trigger_type


def is_release_date(weekday, release_week_cycle, anchor_date):
    """
    Checks if today is a weekday that falls on the release_week_cycle starting from anchor_date .
    Returns True if it is, False otherwise.
    """
    today = datetime.date.today()
    # Check first if today is given weekday
    # Note as for example you could run a job that utilizes the fact that weekly trigger as per https://internaldocs.unity.com/yamato_continuous_integration/usage/jobs/recurring-jobs/#cron-syntax runs every Saturday, between 2 and 8 AM UTC depending on the load
    if today.weekday() != weekday:
        return False

    # Condition 2: Must be on a release_week_cycle interval from the anchor_date.
    days_since_anchor = (today - anchor_date).days
    weeks_since_anchor = days_since_anchor / 7

    # We run on the first week of every release_week_cycle (e.g., week 0, 4, 8, ...)
    return weeks_since_anchor % release_week_cycle == 0


def is_changelog_empty(changelog_path):
    """
    Checks if the [Unreleased] section in the CHANGELOG.md contains meaningful entries.
    It is considered "empty" if the section only contains headers (like ### Added) but no actual content.
    """
    if not os.path.exists(changelog_path):
        raise FileNotFoundError(f"Changelog file not found at {changelog_path}")

    with open(changelog_path, 'r', encoding='UTF-8') as f:
        content = f.read()

    # This pattern starts where Unreleased section is placed
    # Then it matches in the first group all empty sections (only lines that are empty or start with ##)
    # The second group matches the start of the next Changelog entry (## [).
    # if both groups are matched it means that the Unreleased section is empty.
    pattern = re.compile(r"^## \[Unreleased\]\n((?:^###.*\n|^\s*\n)*)(^## \[)", re.MULTILINE)
    match = pattern.search(content)

    # If we find a match for the "empty unreleased changelog entry" pattern, it means the changelog IS empty.
    return match


def verifyReleaseConditions(config: ReleaseConfig):
    """
    Function to verify if the release automation job should run.
    This function checks the following conditions:
    1. If today is a scheduled release day (based on release cycle, weekday and anchor date).
    2. If the [Unreleased] section of the CHANGELOG.md is not empty.
    3. If the release branch does not already exist.
    """

    error_messages = []

    try:
        trigger_type = get_yamato_trigger_type()
        is_manual = trigger_type in {"Manual", "AdHoc"}
        
        if not is_manual and not is_release_date(config.release_weekday, config.release_week_cycle, config.anchor_date):
            error_messages.append(f"Condition not met: Today is not the scheduled release day. It should be weekday: {config.release_weekday}, every {config.release_week_cycle} weeks starting from {config.anchor_date}.")

        if is_changelog_empty(config.changelog_path):
            error_messages.append("Condition not met: The [Unreleased] section of the changelog has no meaningful entries.")

        if config.github_manager.is_branch_present(config.release_branch_name):
            error_messages.append("Condition not met: The release branch already exists.")

        if error_messages:
            print("\n--- Release conditions not met: ---")
            for i, msg in enumerate(error_messages, 1):
                print(f"{i}. {msg}")
            print("\nJob will not run. Exiting.")
            sys.exit(0)

    except Exception as e:
        print("\n--- ERROR: Release Verification failed ---", file=sys.stderr)
        print(f"Reason: {e}", file=sys.stderr)
        sys.exit(1)


--- .yamato/README.md ---
﻿# Netcode for GameObjects CI Documentation

## Overview
This document provides an overview of the Continuous Integration (CI) implementation for Netcode for GameObjects.
Specifics of each test are described within related files (for example .yamato/package-tests.yml) and this file present high level overview related to overall implementation.

## Test Configurations
CI related files are present inside .yamato/ folder and we can distinguish specific tests

### Helper jobs
- `.yamato/package-pack.yml` responsible for generating package artifacts (.tgz) required for testing and publishing.
- `.yamato/_run-all.yml` responsible for grouping tests into groups for easier management (for example "all console tests").
- `.yamato/_triggers.yml` responsible for defining triggers (PR, nightly, weekly etc.) and defining which tests to run.
- `disable-burst-if-requested.py` responsible for helping to disable burst if needed.
- `.yamato/project.metafile` being the central configuration file defining test environments, platforms, projects, editors and other parameters used.

### In-Editor Tests
- `.yamato/package-tests.yml` responsible for running package tests.
- `.yamato/project-tests.yml` responsible for running project tests.
- `.yamato/project-updated-dependencies-test.yml` responsible for running tests after updating dependencies to latest ones.
- `.yamato/project-standards.yml` responsible for running standards check on a package.
- `.yamato/code-coverage.yml` responsible for running code coverage analysis.
- `.yamato/performance-tests.yml` responsible for running performance tests.
- `.yamato/webgl-build.yml` responsible for making a build for webgl platform.

### Standalone Tests
- `.yamato/desktop-standalone-tests.yml` responsible for running tests on standalone desktops.
- `.yamato/console-standalone-test.yml` responsible for running tests on standalone consoles.
- `.yamato/mobile-standalone-test.yml` responsible for running tests on standalone mobiles.

### Wrench jobs
This file is auto generated by wrench and used for automating release process.
Those tests can also be used by our CI as dependencies.
- `.yamato/wrench/api-validation-jobs.yml` responsible for validating api for a given package version (for example if there are no breaking changes when updating patch version)
- `.yamato/wrench/package-pack-jobs.yml` responsible for generating package artifacts (.tgz) required for testing and publishing.
- `.yamato/wrench/preview-a-p-v.yml` responsible for validating PVP (Package Verification Profiles) standards for the package.
- `.yamato/wrench/promotion-jobs.yml` responsible for publishing.
- `.yamato/wrench/publish-trigger.yml` responsible for defining jobs that need to pass in order to publish.
- `.yamato/wrench/recipe-regeneration.yml` responsible for verifying regeneration of wrench recipes (no manual changes).
- `.yamato/wrench/validation-jobs.yml` responsible for running package tests.
- `.yamato/wrench/wrench_config.json` this is the configuration file for wrench.
- `.yamato/generated-scripts/` is a collection of infrastructure instability detection tools.

## Jobs Configuration Structure
This section explains some configuration details that may be confusing while looking at .yml files.

### Job Generation
Our configuration uses a dynamic job generation approach based on the `.yamato/project.metafile` configuration. While it may appear that only one job is defined per file, the system (Yamato) actually generates multiple jobs through nested loops.
Usually only 1 job is defined and then generated with multiple configurations/parameters but in case of standalone tests 2 jobs are defined which are responsible for building and then testing.

### Job Naming Convention
Because the jobs are being generated their names will be filled by given parameters from project.metfaile. For example jobs from .yamato/console-standalone-test may have names like:
- Display Name (in Yamato): `Build testproject - [win, 6000.0, il2cpp]`
- Internal Job Name (used when adding dependency for example): `console_standalone_build_testproject_win_6000.0`

## Platform Support
Currently, the CI implementation supports the following platforms:
1. Console Platforms:
   - Switch
   - PS4
   - PS5
   - Xbox360
   - XboxOne
2. Mobile Platforms:
   - Android
   - iOS
3. Desktop Platforms:
   - Windows
   - Ubuntu
   - macOS
4. Unity Editor Versions
    - Supports NGOv2.X (6000.0+ editors)
5. Architectures
   - x64
   - ARM64 (This is present for consoles/mobiles but will be extended. More information is present in specific standalone test files)

## Design Considerations
In theory, we could manually write jobs for every configuration. However, this approach would be more error-prone, especially when modifications or fixes are needed, as it would require keeping track of all configurations.
The downside of our current approach is that it can sometimes impact readability due to the use of nested if and for statements.


--- CODE_OF_CONDUCT.md ---
# Contributor Covenant Code of Conduct

## Our Pledge

In the interest of fostering an open and welcoming environment, we as
contributors and maintainers pledge to make participation in our project and
our community a harassment-free experience for everyone, regardless of age, body
size, disability, ethnicity, sex characteristics, gender identity and expression,
level of experience, education, socio-economic status, nationality, personal
appearance, race, religion, or sexual identity and orientation.

## Our Standards

Examples of behavior that contributes to creating a positive environment
include:

* Using welcoming and inclusive language
* Being respectful of differing viewpoints and experiences
* Gracefully accepting constructive criticism
* Focusing on what is best for the community
* Showing empathy towards other community members

Examples of unacceptable behavior by participants include:

* The use of sexualized language or imagery and unwelcome sexual attention or
  advances
* Trolling, insulting/derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others' private information, such as a physical or electronic
  address, without explicit permission
* Other conduct which could reasonably be considered inappropriate in a
  professional setting

## Our Responsibilities

Project maintainers are responsible for clarifying the standards of acceptable
behavior and are expected to take appropriate and fair corrective action in
response to any instances of unacceptable behavior.

Project maintainers have the right and responsibility to remove, edit, or
reject comments, commits, code, wiki edits, issues, and other contributions
that are not aligned to this Code of Conduct, and will communicate reasons
for moderation decisions when appropriate.

## Scope

This Code of Conduct applies within all project spaces, and it also applies when
an individual is representing the project or its community in public spaces.
Examples of representing a project or community include using an official
project e-mail address, posting via an official social media account, or acting
as an appointed representative at an online or offline event.

## Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported by contacting the project team. All
complaints will be reviewed and investigated and will result in a response that
is deemed necessary and appropriate to the circumstances. The project team is
obligated to maintain confidentiality with regard to the reporter of an incident.
Further details of specific enforcement policies may be posted separately.

Project maintainers who do not follow or enforce the Code of Conduct in good
faith may face temporary or permanent repercussions as determined by other
members of the project's leadership.

## Attribution

This Code of Conduct is adapted from the [Contributor Covenant][homepage], version 1.4,
available at https://www.contributor-covenant.org/version/1/4/code-of-conduct.html

--- README.md ---
# Netcode for GameObjects

[![Forums](https://img.shields.io/badge/unity--forums-multiplayer-blue)](https://discussions.unity.com/tag/Netcode-for-GameObjects) [![Discord](https://img.shields.io/discord/449263083769036810.svg?label=discord&logo=discord&color=informational)](https://discord.gg/unity)
[![Manual](https://img.shields.io/badge/docs-manual-informational.svg)](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@latest) [![API](https://img.shields.io/badge/docs-api-informational.svg)](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@latest/?subfolder=/api/Unity.Netcode.NetworkManager.html)

[![GitHub Release](https://img.shields.io/github/release/Unity-Technologies/com.unity.netcode.gameobjects.svg?logo=github)](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/releases/latest)

### Welcome!

Welcome to the Netcode for GameObjects repository.

Netcode for GameObjects is a Unity package that provides networking capabilities to GameObject & MonoBehaviour workflows. The framework is interoperable with many low-level transports, including the official [Unity Transport Package](https://docs.unity3d.com/Packages/com.unity.transport@latest).

### Getting Started

Visit the [Multiplayer Docs Site](https://docs.unity3d.com/Manual/multiplayer.html) for package & API documentation, as well as information about several samples which leverage the Netcode for GameObjects package.

You can also use our [quickstart guide](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@latest/?subfolder=/manual/tutorials/get-started-with-ngo.html) to get a taste of how to use the framework for basic networked tasks.

### Community and Feedback

For general questions, networking advice or discussions about Netcode for GameObjects, please join our [Discord Community](https://discord.gg/unity) or create a post in the [Unity Forum's "Netcode for GameObjects" section](https://discussions.unity.com/tag/Netcode-for-GameObjects).

### Compatibility

Netcode for GameObjects targets the following Unity versions:
- Unity 6 (LTS)

On the following runtime platforms:
- Windows, MacOS, and Linux
- iOS and Android
- Most closed platforms, such as consoles. Contact us for more information about specific closed platforms.

### Development

This repository is broken into multiple components, each one implemented as a Unity Package.
```
    .
    ├── com.unity.netcode.gameobjects           # The core netcode SDK unity package (source + tests)
    └── testproject                             # A Unity project with various test implementations & scenes which exercise the features in the above packages.
```

### Contributing

We are an open-source project and we encourage and welcome contributions. If you wish to contribute, please be sure to review our [contribution guidelines](CONTRIBUTING.md).

#### Issues and missing features

If you have an issue, bug or feature request, please follow the information in our [contribution guidelines](CONTRIBUTING.md) to submit an issue.

You can also check out our public [roadmap](https://unity.com/roadmap#unity-platform-multiplayer) to get an idea for what we might be working on next!


## Links discovered
- [![Forums](https://img.shields.io/badge/unity--forums-multiplayer-blue)
- [![Discord](https://img.shields.io/discord/449263083769036810.svg?label=discord&logo=discord&color=informational)
- [![Manual](https://img.shields.io/badge/docs-manual-informational.svg)
- [![API](https://img.shields.io/badge/docs-api-informational.svg)
- [![GitHub Release](https://img.shields.io/github/release/Unity-Technologies/com.unity.netcode.gameobjects.svg?logo=github)
- [Unity Transport Package](https://docs.unity3d.com/Packages/com.unity.transport@latest)
- [Multiplayer Docs Site](https://docs.unity3d.com/Manual/multiplayer.html)
- [quickstart guide](https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@latest/?subfolder=/manual/tutorials/get-started-with-ngo.html)
- [Discord Community](https://discord.gg/unity)
- [Unity Forum's "Netcode for GameObjects" section](https://discussions.unity.com/tag/Netcode-for-GameObjects)
- [contribution guidelines](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/CONTRIBUTING.md)
- [roadmap](https://unity.com/roadmap#unity-platform-multiplayer)

--- dotnet-tools/README.md ---
# .NET Tools for Unity Netcode

## Netcode.Standards

C# coding standards tool for Netcode that relies on `.editorconfig` ruleset and `dotnet format` tool

### How to Install & Uninstall

Build (Pack)

```zsh
dotnet pack dotnet-tools/netcode.standards
```

Install

```zsh
dotnet tool install --global --add-source ./dotnet-tools/netcode.standards netcode.standards
```

Check

```zsh
netcode.standards --help
```

Uninstall

```zsh
dotnet tool uninstall --global netcode.standards
```

### How to Use

#### Commands

Check

```zsh
# check for standards issues without touching files
netcode.standards --check
```

Fix
```zsh
# try to fix standards issues and save file changes
netcode.standards --fix
```

#### Options

Specifying at least one of `--check` or `--fix` is required.

However, you can also specify other options to configure the tool.

|Option|Description|
|:-|:-|
|`--project <project>`|Target project folder [default: testproject]|
|`--pattern <pattern>`|Search pattern string [default: *.sln]|
|`--verbosity <verbosity>`|Logs verbosity level [default: normal]|
|`-?`, `-h`, `--help`|Show help and usage information|


--- minimalproject/ProjectSettings/ProjectVersion.txt ---
m_EditorVersion: 6000.0.61f1
m_EditorVersionWithRevision: 6000.0.61f1 (74a0adb02c31)


--- .github/pull_request_template.md ---
## Purpose of this PR
[//]: # (
Replace this block with what this PR does and why. Describe what you'd like reviewers to know, how you applied the engineering principles, and any interesting tradeoffs made. 
)

### Jira ticket
_Link to related jira ticket ([Use the smart commits](https://support.atlassian.com/bitbucket-cloud/docs/use-smart-commits/)). Short version (e.g. MTT-123) also works and gets auto-linked_

### Changelog
[//]: # (updated with all public facing changes  - API changes, UI/UX changes, behaviour changes, bug fixes. Remove if not relevant.)

- Added: The package whose Changelog should be added to should be in the header. Delete the changelog section entirely if it's not needed.
- Fixed: If you update multiple packages, create a new section with a new header for the other package.
- Removed/Deprecated/Changed: Each bullet should be prefixed with Added, Fixed, Removed, Deprecated, or Changed to indicate where the entry should go.

<!--  Uncomment and mark items off with a * if this PR deprecates any API:
### Deprecated API
- [ ] An `[Obsolete]` attribute was added along with a `(RemovedAfter yyyy-mm-dd)` entry.
- [ ] An [api updater](https://confluence.unity3d.com/display/DEV/Obsolete+API+updaters) was added.
- [ ] Deprecation of the API is explained in the CHANGELOG.
- [ ] The users can understand why this API was removed and what they should use instead.
-->

## Documentation
[//]: # (
This section is REQUIRED and should mention what documentation changes were following the changes in this PR. 
We should always evaluate if the changes in this PR require any documentation changes.
)

- No documentation changes or additions were necessary.
- Includes documentation for previously-undocumented public API entry points.
- Includes edits to existing public API documentation.

## Testing & QA (How your changes can be verified during release Playtest)
[//]: #  (
This section is REQUIRED and should describe how the changes were tested and how should they be tested when Playtesting for the release.
It can range from "edge case covered by unit tests" to "manual testing required and new sample was added".
Expectation is that PR creator does some manual testing and provides a summary of it here.)

<!-- Add any performance testing results here if relevant. -->

### Functional Testing
[//]: # (If checked, List manual tests that have been performed.)
_Manual testing :_
- [ ] `Manual testing done`

_Automated tests:_
- [ ] `Covered by existing automated tests`
- [ ] `Covered by new automated tests`

_Does the change require QA team to:_

- [ ] `Review automated tests`?
- [ ] `Execute manual tests`?
- [ ] `Provide feedback about the PR`?

If any boxes above are checked the QA team will be automatically added as a PR reviewer.

## Backports
[//]: # (
This section is REQUIRED and should link to the PR that targets other NGO version which is either develop or develop-2.0.0 branch
Add the following to the PR title: "\[Backport\] ..."
If this is not needed, for example feature specific to NGOv2.X, then just mention this fact.
)


## Links discovered
- [Use the smart commits](https://support.atlassian.com/bitbucket-cloud/docs/use-smart-commits/)
- [api updater](https://confluence.unity3d.com/display/DEV/Obsolete+API+updaters)

--- .github/ISSUE_TEMPLATE/bug_report.md ---
---
name: Bug report
about: Create a report to help us improve
title: ''
labels: stat:awaiting-triage, stat:reply-needed, type:bug
assignees: ''

---

### Description

A clear and concise description of what the bug is.

### Reproduce Steps

1. Go to '...'
2. Click on '....'
3. Scroll down to '....'
4. See error

### Actual Outcome

A clear and concise description of what happened and broke.

### Expected Outcome

A clear and concise description of what you expected to happen.

### Screenshots

If applicable, add screenshots to help explain your problem.

### Environment

- OS: [e.g. macOS Monterey]
- Unity Version: [e.g. 2020.3]
- Netcode Version: [e.g. 1.0.0-pre.6]
- Netcode Commit: [e.g. https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/commit/ba418fa5b600ad9eb61fab0575f12fbecc2c6520]
- Netcode Topology: [e.g. Client-Server, Distributed Authority, etc.]

### Additional Context

Add any other context about the problem here. Logs, code snippets would be useful here but please also consider attaching a minimal Unity project that reproduces the issue.


--- .github/ISSUE_TEMPLATE/feature_request.md ---
---
name: Feature Request
about: Suggest an idea for this project
title: ''
labels: stat:awaiting-triage, stat:reply-needed, type:feature
assignees: ''

---

**Is your feature request related to a problem? Please describe.**
A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]

**Describe the solution you'd like**
A clear and concise description of what you want to happen.

**Describe alternatives you've considered**
A clear and concise description of any alternative solutions or features you've considered.

**Additional context**
Add any other context or screenshots about the feature request here.


--- com.unity.netcode.gameobjects/README.md ---
# Netcode for GameObjects

[![Forums](https://img.shields.io/badge/unity--forums-multiplayer-blue)](https://forum.unity.com/forums/multiplayer.26/) [![Discord](https://img.shields.io/discord/449263083769036810.svg?label=discord&logo=discord&color=informational)](https://discord.gg/FM8SE9E)
[![Manual](https://img.shields.io/badge/docs-manual-informational.svg)](https://docs-multiplayer.unity3d.com/netcode/current/about) [![API](https://img.shields.io/badge/docs-api-informational.svg)](https://docs-multiplayer.unity3d.com/netcode/current/api/introduction)

Netcode for GameObjects is a Unity package that provides networking capabilities to GameObject & MonoBehaviour workflows. The framework is interoperable with many low-level transports, including the official [Unity Transport Package](https://docs-multiplayer.unity3d.com/transport/current/about).

### Getting Started

Visit the [Multiplayer Docs Site](https://docs-multiplayer.unity3d.com/) for package & API documentation, as well as information about several samples which leverage the Netcode for GameObjects package.

You can also jump right into our [Hello World](https://docs-multiplayer.unity3d.com/netcode/current/tutorials/helloworld) guide for a taste of how to use the framework for basic networked tasks.

### Community and Feedback

For general questions, networking advice or discussions about Netcode for GameObjects, please join our [Discord Community](https://discord.gg/FM8SE9E) or create a post in the [Unity Multiplayer Forum](https://forum.unity.com/forums/multiplayer.26/).


## Links discovered
- [![Forums](https://img.shields.io/badge/unity--forums-multiplayer-blue)
- [![Discord](https://img.shields.io/discord/449263083769036810.svg?label=discord&logo=discord&color=informational)
- [![Manual](https://img.shields.io/badge/docs-manual-informational.svg)
- [![API](https://img.shields.io/badge/docs-api-informational.svg)
- [Unity Transport Package](https://docs-multiplayer.unity3d.com/transport/current/about)
- [Multiplayer Docs Site](https://docs-multiplayer.unity3d.com/)
- [Hello World](https://docs-multiplayer.unity3d.com/netcode/current/tutorials/helloworld)
- [Discord Community](https://discord.gg/FM8SE9E)
- [Unity Multiplayer Forum](https://forum.unity.com/forums/multiplayer.26/)

--- com.unity.netcode.gameobjects/Documentation~/index.md ---
# Netcode for GameObjects

Netcode for GameObjects is a high-level networking library built for Unity for you to abstract networking logic. You can send GameObjects and world data across a networking session to many players at once. With Netcode for GameObjects, you can focus on building your game instead of low-level protocols and networking frameworks.

## Before you begin

Netcode for GameObjects supports the following versions:

- Unity 6.0+ and later
- Mono and IL2CPP [Scripting Backends](https://docs.unity3d.com/Manual/scripting-backends.html)

Netcode for GameObjects supports the following platforms:

- Windows, macOS, and Linux
- iOS and Android
- XR platforms running on Windows, Android, and iOS operating systems
- Most [**closed platforms**](https://unity.com/platform-installation), such as consoles. Contact us for more information about specific closed platforms.
  - When working with consoles (such as PlayStation, Xbox, or Nintendo Switch), there may be Netcode-specific policies you should be aware of while testing and before launching your game live. Refer to the console's internal documentation for more information. This content is typically protected by NDA.
- WebGL (requires Netcode for GameObjects 1.2.0+ and Unity Transport 2.0.0+)


## Links discovered
- [Scripting Backends](https://docs.unity3d.com/Manual/scripting-backends.html)
- [**closed platforms**](https://unity.com/platform-installation)

--- com.unity.netcode.gameobjects/Documentation~/advanced-topics/network-update-loop-system/index.md ---
# About NetworkUpdateLoop

Often there is a need to update netcode systems like RPC queue, transport IO, and others outside the standard MonoBehaviour event cycle.

The Network Update Loop infrastructure utilizes Unity's low-level Player Loop API allowing for registering `INetworkUpdateSystems` with `NetworkUpdate()` methods to be executed at specific `NetworkUpdateStages` which may be either before or after MonoBehaviour-driven game logic execution.

Typically you will interact with `NetworkUpdateLoop` for registration and `INetworkUpdateSystem` for implementation. Systems such as network tick and future features (such as network variable snapshotting) will rely on this pipeline.

## Registration

`NetworkUpdateLoop` exposes four methods for registration:

| Method | Registers |
| -- | -- |
| `void RegisterNetworkUpdate(INetworkUpdateSystem updateSystem, NetworkUpdateStage updateStage)` | Registers an `INetworkUpdateSystem` to be executed on the specified `NetworkUpdateStage` |
| `void RegisterAllNetworkUpdates(INetworkUpdateSystem updateSystem)` | Registers an `INetworkUpdateSystem` to be executed on all `NetworkUpdateStage`s |
| `void UnregisterNetworkUpdate(INetworkUpdateSystem updateSystem, NetworkUpdateStage updateStage)` | Unregisters an `INetworkUpdateSystem` from the specified `NetworkUpdateStage` |
| `void UnregisterAllNetworkUpdates(INetworkUpdateSystem updateSystem)` | Unregisters an `INetworkUpdateSystem` from all `NetworkUpdateStage`s |

## Update Stages

After injection, the player loops follows these stages. The player loop executes the `Initialization` stage and that invokes `NetworkUpdateLoop`'s `RunNetworkInitialization` method which iterates over registered `INetworkUpdateSystems` in `m_Initialization_Array` and calls `INetworkUpdateSystem.NetworkUpdate(UpdateStage)` on them.

In all `NetworkUpdateStages`, it iterates over an array and calls the `NetworkUpdate` method over `INetworkUpdateSystem` interface, and the pattern is repeated.

<Mermaid chart={`
    graph LR;
    A(Initialization)
    B(EarlyUpdate)
    C(FixedUpdate)
    D(PreUpdate)
    E(Update)
    F(PreLateUpdate)
    G(PostLateUpdate)
    A --> B --> C --> D --> E --> F --> G
`}/>

| Stage | Method |
| -- | -- |
| `Initialization` | `RunNetworkInitialization` |
| `EarlyUpdate` | `RunNetworkEarlyUpdate`<br/>`ScriptRunDelayedStartupFrame`<br/>Other systems |
| `FixedUpdate` | `RunNetworkFixedUpdate`<br/>`ScriptRunBehaviourFixedUpdate`<br/>Other systems |
| `PreUpdate` | `RunNetworkPreUpdate`<br/>`PhysicsUpdate`<br/>`Physics2DUpdate`<br/>Other systems |
| `Update` | `RunNetworkUpdate`<br/>`ScriptRunBehaviourUpdate`<br/>Other systems |
| `PreLateUpdate` | `RunNetworkPreLateUpdate`<br/>`ScriptRunBehaviourLateUpdate` |
| `PostLateUpdate` | `PlayerSendFrameComplete`<br/>`RunNetworkPostLateUpdate`<br/>Other systems |

## References

See [Network Update Loop Reference](network-update-loop-reference.md) for process flow diagrams and code.


## Links discovered
- [Network Update Loop Reference](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/advanced-topics/network-update-loop-system/network-update-loop-reference.md)

--- com.unity.netcode.gameobjects/Documentation~/command-line-arguments.md ---
# Command-line arguments

Use [command-line arguments](https://docs.unity3d.com/Documentation/Manual/CommandLineArguments.html) to configure certain aspects of your game at launch. This is especially useful for dedicated server builds, where arguments let you override default network settings such as the IP address and port.

## Using command-line arguments

When launching a standalone build (such as a headless dedicated server), you can supply custom arguments to modify runtime behavior.

Reserved arguments:

- `-port`
- `-ip`

Unity provides built-in parsing for standard arguments, and you can extend this behavior by adding your own.

## Custom arguments

You can define additional custom command-line arguments and retrieve them through the `CommandLineOptions` class. Use `GetArgs()` in your project code to collect and process these values.

> [!NOTE]
> Adding a custom command-line argument requires you to explicitly retrieve and handle it in your implementation.

## Example

The following code shows you an example of defining and then reading a custom command-line argument.
```
private const string k_OverrideArg = "-argName";

private bool ParseCommandLineOptions(out string command)
{
    if (CommandLineOptions.Instance.GetArg(k_OverrideArg) is string argValue)
    {
        command = argValue;
        return true;
    }
    command = default;
    return false;
}
```

Usage example:

```
if (ParseCommandLineOptions(out var command))
{
    // Your logic here
}
```

## Override connection data

If you want to ignore the connection port provided through command-line arguments, you can override it by using the optional `forceOverride` parameter in:

```
UnityTransport.SetConnectionData(string ip, ushort port, string listenAddress, bool forceOverride);
```

Setting `forceOverride` to `true` ensures that the values you pass to `SetConnectionData` override any values specified via command-line arguments.

## Additional resources

- [Command-line arguments in the Unity Manual](https://docs.unity3d.com/6000.2/Documentation/Manual/CommandLineArguments.html)


## Links discovered
- [command-line arguments](https://docs.unity3d.com/Documentation/Manual/CommandLineArguments.html)
- [Command-line arguments in the Unity Manual](https://docs.unity3d.com/6000.2/Documentation/Manual/CommandLineArguments.html)

--- com.unity.netcode.gameobjects/Documentation~/configuration.md ---
# Configuration

Configure your Netcode for GameObjects project.


| **Topic**                                               | **Description**                                                                                                   |
|:--------------------------------------------------------|:------------------------------------------------------------------------------------------------------------------|
| **[Configuring connections](configure-connections.md)** | Configure connections in your project.                                                                            |
| **[Transports](advanced-topics/transports.md)**         | Transport layers establish communication between your application and different hosts in a network.               |
| **[Unity Relay](relay/relay.md)**                       | Use Unity Relay with Netcode for GameObjects to connect clients and hosts over the internet using a relay server. |
| **[Command-line arguments](command-line-arguments.md)** | Use command-line arguments to configure certain aspects of your game at launch.                                                                              |

## Links discovered
- [Configuring connections](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/configure-connections.md)
- [Transports](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/advanced-topics/transports.md)
- [Unity Relay](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/relay/relay.md)
- [Command-line arguments](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/command-line-arguments.md)

--- com.unity.netcode.gameobjects/Documentation~/configure-connections.md ---
# Configuration

Configure connections in your project.

| **Topic**                       | **Description**                  |
| :------------------------------ | :------------------------------- |
| **[Connection approval](basics/connection-approval.md)** | Connection approval allows you to decide, on a per connection basis, whether to allow a connection. You can also use connection approval to specify the player Prefab to create, allowing you to override the default NetworkManager-defined player Prefab on a per player basis. |
| **[Max players](basics/maxnumberplayers.md)** | Netcode for GameObjects provides a way to customize the [connection approval process](basics/connection-approval.md) that can reject incoming connections based on any number of user-specific reasons. |


## Links discovered
- [Connection approval](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/connection-approval.md)
- [Max players](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/maxnumberplayers.md)
- [connection approval process](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/connection-approval.md)

--- com.unity.netcode.gameobjects/Documentation~/integrated-management.md ---
# Integrated management

Understand Netcode for GameObject's integrated scene management system.

| **Topic**                       | **Description**                  |
| :------------------------------ | :------------------------------- |
| **[Using NetworkSceneManager](basics/scenemanagement/using-networkscenemanager.md)** | Understand how to use Netcode for GameObject's built in NetworkSceneManager component. |
| **[Scene events](basics/scenemanagement/scene-events.md)** | Use scene events to manage sychronization in a scene. |
| **[Client synchronization mode](basics/scenemanagement/client-synchronization-mode.md)** | Netcode for GameObjects provides you with the ability to select the client synchronization mode that best suits your project's needs. |
| **[Timing considerations](basics/scenemanagement/timing-considerations.md)** | Netcode for GameObjects handles many of the more complicated aspects of scene management.  This section is tailored towards those who want to better understand the client-server communication sequence for scene events as they occur over time. |
| **[In-scene placed NetworkObjects](basics/scenemanagement/inscene-placed-networkobjects.md)** | In-scene placed NetworkObjects are GameObjects with a NetworkObject component that was added to a scene from within the Editor. |

## Links discovered
- [Using NetworkSceneManager](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/scenemanagement/using-networkscenemanager.md)
- [Scene events](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/scenemanagement/scene-events.md)
- [Client synchronization mode](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/scenemanagement/client-synchronization-mode.md)
- [Timing considerations](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/scenemanagement/timing-considerations.md)
- [In-scene placed NetworkObjects](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/scenemanagement/inscene-placed-networkobjects.md)

--- com.unity.netcode.gameobjects/Documentation~/latency-performance.md ---
# Latency and performance

Manage latency and performance in your Netcode for GameObjects project.

| **Topic**                       | **Description**                  |
| :------------------------------ | :------------------------------- |
| **[Lag and packet loss](learn/lagandpacketloss.md)** | Multiplayer games operating over the internet have to manage adverse network factors that don't affect single-player or LAN-only multiplayer games, most notably network latency. Latency (also known as lag) is the delay between a user taking an action and seeing the expected result. When latency is too high, a game feels unresponsive and slow. |
| **[Ticks and update rates](learn/ticks-and-update-rates.md)** | In addition to the effects of latency, gameplay experience in a multiplayer game is also affected by the server's tick rate and the client's update rate. Low tick and update rates reduce game responsiveness and add to perceived latency for users. |
| **[Client-side interpolation](learn/clientside-interpolation.md)** | You can use client-side interpolation to improve perceived latency for users. |
| **[Client anticipation](advanced-topics/client-anticipation.md)** | Netcode for GameObjects doesn't support full client-side prediction and reconciliation, but it does support client anticipation: a simplified model that lacks the full rollback-and-replay prediction loop, but still provides a mechanism for anticipating the server result of an action and then correcting if you anticipated incorrectly. |
| **[Dealing with latency](learn/dealing-with-latency.md)** | Understand the available methods for dealing with different kinds of latency. |

## Links discovered
- [Lag and packet loss](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/lagandpacketloss.md)
- [Ticks and update rates](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/ticks-and-update-rates.md)
- [Client-side interpolation](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/clientside-interpolation.md)
- [Client anticipation](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/advanced-topics/client-anticipation.md)
- [Dealing with latency](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/learn/dealing-with-latency.md)

--- com.unity.netcode.gameobjects/Documentation~/migratingfromUNet.md ---
# Migrate from UNet to Netcode for GameObjects

UNet is deprecated and no longer supported. Follow this guide to migrate from UNet to Netcode for GameObjects.

## Comparison between Netcode for GameObjects and UNet

There are some differences between UNet and Netcode for GameObjects that you should be aware of as part of your migration:

* Naming constraints may cause issues. UNet prefixed methods with `Cmd` or `Rpc`, whereas Netcode requires postfix. This may require either complicated multi-line regex to find and replace, or manual updates. For example, `CommandAttribute` has been replaced with `RpcAttribute(SendTo.Server)` and `ClientRPCAttribute` has been replaced with `RpcAttribute(SendTo.NotServer)` or `RpcAttribute(SendTo.ClientsAndHost)`, depending on whether you want the host client to receive the RPC.
* Errors for RPC postfix naming patterns don't show in your IDE.
* Client and server have separate representations in UNet. UNet has a number of callbacks that don't exist in Netcode for GameObjects.
* Prefabs need to be added to the Prefab registration list in Netcode for GameObjects.
* Matchmaking isn't available in Netcode for GameObjects at this time.

## Back up your project

It's strongly recommended that you back up your existing UNet project before migration. You can do one or both of the following:

* Create a copy of your entire project folder.
* Use source control software, like Git.

## Install Netcode for GameObjects and restart Unity

Follow the [installation guide](install.md) to install Netcode for GameObjects.

Installing Netcode for GameObjects also installs some other packages such as [Unity Transport](https://docs.unity3d.com/Packages/com.unity.transport@latest/), [Unity Collections](https://docs.unity3d.com/Packages/com.unity.collections@latest/), and [Unity Burst](https://docs.unity3d.com/Packages/com.unity.burst@latest/).

## RPC Invoking

Invoking an RPC works the same way as in UNet. Just call the function and it will send an RPC.

<!-- I know a lot of things were done to `NetworkManager` in Netcode and assume this section is just incorrect now.

##  NetworkManager

UNET's `NetworkManager` is also called `NetworkManager` in Netcode and works in a similar way.

:::note
We recommend you don't inherit from `NetworkManager` in Netcode, which was a **recommended** pattern in UNET.
:::

## Replace NetworkManagerHUD

Currently Netcode offers no replacment for the NetworkMangerHUD.

The [Community Contributions Extension Package](https://github.com/Unity-Technologies/multiplayer-community-contributions/tree/master/com.community.netcode.extensions) has a a drop in `NetworkManagerHud` component you can use for a quick substitute.
-->

## Replace NetworkIdentity with NetworkObject

UNet's `NetworkIdentity` is called NetworkObject in Netcode for GameObjects and works in a similar way.

## Replace UNet NetworkTransform with Netcode NetworkTransform

UNet's `NetworkTransform` is also called `NetworkTransform` in Netcode for GameObjects and works in a similar way.

`NetworkTransform` doesn't have full feature parity with UNET's `NetworkTransform`. It lacks features like position synchronizing for rigid bodies.

## Replace UNet NetworkAnimator with Netcode NetworkAnimator

Replace UNet's `NetworkAnimator` with Netcode for GameObjects' `NetworkAnimator` component everywhere in your project.

## Update NetworkBehaviour

Replace UNet `NetworkBehaviour` with Netcode for GameObjects' `NetworkBehaviour` everywhere in your project.

```csharp
public class MyUnetClass : NetworkBehaviour
{
    [SyncVar]
    public float MySyncFloat;
    public void Start()
    {
        if (isClient)
        {
            CmdExample(10f);
        }
        else if (isServer)
        {
            RpcExample(10f);
        }
    }
    [Command]
    public void CmdExample(float x)
    {
        Debug.Log(“Runs on server”);
    }
    [ClientRpc]
    public void RpcExample(float x)
    {
        Debug.Log(“Runs on clients”);
    }
}
```

```csharp
public class MyNetcodeExample : NetworkBehaviour
{
    public NetworkVariable<float> MyNetworkVariable = new NetworkVariable<float>();
    public override void OnNetworkSpawn()
    {
        ExampleClientRpc(10f);
        ExampleServerRpc(10f);
    }
    [Rpc(SendTo.Server)]
    public void ExampleServerRpc(float x)
    {
        Debug.Log(“Runs on server”);
    }
    [Rpc(SendTo.ClientsAndHost)]
    public void ExampleClientRpc(float x)
    {
        Debug.Log(“Runs on clients”);
    }
}
```

Refer to [NetworkBehaviour](basics/networkbehaviour.md) for more information.

## Replace SyncVar

Replace `SyncVar` with `NetworkVariable` everywhere in your project.

To achieve equivalent functionality to `SyncVar`, hooks in Netcode for GameObjects subscribe a function to the `OnValueChanged` callback of the `NetworkVariable`. A notable difference between UNet hooks and Netcode for GameObjects' `OnValueChanged` callback is that Netcode for GameObjects gives you both the old and the newly changed value, while UNet only provides you with the old value. With UNet, you also had to manually assign the value of the `SyncVar`.

```csharp
public class SpaceShip : NetworkBehaviour
{
    [SyncVar]
    public string PlayerName;


    [SyncVar(hook = "OnChangeHealth"))]
    public int Health = 42;

    void OnChangeHealth(int newHealth){
        Health = newHealth; //This is no longer necessary in Netcode.
        Debug.Log($"My new health is {newHealth}.");
    }
}
```

```csharp
// Don't forget to initialize NetworkVariable with a value.
public NetworkVariable<string> PlayerName = new NetworkVariable<string>();

public NetworkVariable<int> Health = new NetworkVariable<int>(42);

// This how you update the value of a NetworkVariable, you can also use .Value to access the current value of a NetworkVariable.
void MyUpdate()
{
    Health.Value += 30;
}


void Awake()
{
  // Call this is in Awake or Start to subscribe to changes of the NetworkVariable.
    Health.OnValueChanged += OnChangeHealth;
}

void OnChangeHealth(int oldHealth, int newHealth){
    //There is no need anymore to manually assign the value of the variable here with Netcode. This is done automatically by Netcode for you.
    Debug.Log($"My new health is {newHealth}. Before my health was {oldHealth}");
}
```

Replace all postfix increment and decrement usages of SyncVar in your project. Netcode's `NetworkVariable.Value` exposes a value type that's why postfix increment/decrement isn't supported.

```csharp

public int Health = 42;

public void Update(){
  Health++;
}
```

```csharp

public NetworkVariable<int> Health = new NetworkVariable<int>(42);

public void Update(){
  Health.Value = Health.Value + 1;
}
```

Refer to [NetworkVariable](basics/networkvariable.md) for more information.

## Replace `SyncList` with `NetworkList`

Replace `SyncList<T>` with `NetworkList<T>` everywhere in your project. `NetworkList` has an `OnListChanged` event which is similar to UNet's `Callback`.

```csharp
public SyncListInt m_ints = new SyncListInt();

private void OnIntChanged(SyncListInt.Operation op, int index)
{
    Debug.Log("list changed " + op);
}


public override void OnStartClient()
{
    m_ints.Callback = OnIntChanged;
}
```

```csharp
NetworkList<int> m_ints = new NetworkList<int>();

// Call this is in Awake or Start to subscribe to changes of the NetworkList.
void ListenChanges()
{
    m_ints.OnListChanged += OnIntChanged;
}

// The NetworkListEvent has information about the operation and index of the change.
void OnIntChanged(NetworkListEvent<int> changeEvent)
{

}
```

## Replace Command/ClientRPC

UNet's `Command/ClientRPC` is replaced with `Server/ClientRpc` in Netcode for GameObjects, which works in a similar way.

```csharp
    [Command]
    public void CmdExample(float x)
    {
        Debug.Log(“Runs on server”);
    }
    [ClientRpc]
    public void RpcExample(float x)
    {
        Debug.Log(“Runs on clients”);
    }
```

```csharp
    [Rpc(SendTo.Server)]
    public void ExampleServerRpc(float x)
    {
        Debug.Log(“Runs on server”);
    }
    [Rpc(SendTo.ClientsAndHost)]
    public void ExampleClientRpc(float x)
    {
        Debug.Log(“Runs on clients”);
    }
```

> [!NOTE]
> In Netcode for GameObjects, RPC function names must end with an `Rpc` suffix.

Refer to [Messaging System](advanced-topics/messaging-system.md) for more information.

## Replace `OnServerAddPlayer`

Replace `OnServerAddPlayer` with `ConnectionApproval` everywhere in your project.

```csharp
using UnityEngine;
using UnityEngine.Networking;
using UnityEngine.Networking.NetworkSystem;

class MyManager : NetworkManager
{
    public override void OnServerAddPlayer(NetworkConnection conn, short playerControllerId, NetworkReader extraMessageReader)
    {
        if (extraMessageReader != null)
        {
            var s = extraMessageReader.ReadMessage<StringMessage>();
            Debug.Log("my name is " + s.value);
        }
        OnServerAddPlayer(conn, playerControllerId, extraMessageReader);
    }
}
```

Server-only example:

```csharp
using Unity.Netcode;

private void Setup()
{
    NetworkManager.Singleton.ConnectionApprovalCallback += ApprovalCheck;
    NetworkManager.Singleton.StartHost();
}

private void ApprovalCheck(byte[] connectionData, ulong clientId, NetworkManager.ConnectionApprovedDelegate callback)
{
    //Your logic here
    bool approve = true;
    bool createPlayerObject = true;

    // The Prefab hash. Use null to use the default player prefab
    // If using this hash, replace "MyPrefabHashGenerator" with the name of a Prefab added to the NetworkPrefabs field of your NetworkManager object in the scene
    ulong? prefabHash = NetworkpawnManager.GetPrefabHashFromGenerator("MyPrefabHashGenerator");

    //If approve is true, the connection gets added. If it's false. The client gets disconnected
    callback(createPlayerObject, prefabHash, approve, positionToSpawnAt, rotationToSpawnWith);
}
```

Refer to [Connection Approval](basics/connection-approval.md) for more information.

## Replace NetworkServer.Spawn with NetworkObject.Spawn

Replace `NetworkServer.Spawn`  with `NetworkObject.Spawn` everywhere in your project.

```csharp

using UnityEngine;
using UnityEngine.Networking;

public class Example : NetworkBehaviour
{
    //Assign the Prefab in the Inspector
    public GameObject m_MyGameObject;
    GameObject m_MyInstantiated;

    void Start()
    {
        //Instantiate the prefab
        m_MyInstantiated = Instantiate(m_MyGameObject);
        //Spawn the GameObject you assign in the Inspector
        NetworkServer.Spawn(m_MyInstantiated);
    }
}

```

```csharp
GameObject go = Instantiate(myPrefab, Vector3.zero, Quaternion.identity);
go.GetComponent<NetworkObject>().Spawn();
```

Refer to [Object Spawning](basics/object-spawning.md) for more information.

## Custom Spawn Handlers

Netcode has `Custom Spawn Handlers` to replace UNet's `Custom Spawn Functions`. See [Object Pooling](../advanced-topics/object-pooling) for more information.

## Replace `NetworkContextProperties`

Netcode has `IsLocalPlayer`, `IsClient`, `IsServer`, and `IsHost` to replace UNet's `isLocalPlayer`, `isClient`, and `isServer`. In Netcode for GameObjects, each object can be owned by a specific peer. This can be checked with `IsOwner`, which is similar to UNet's `hasAuthority`.

## `NetworkProximityChecker`, `OnCheckObserver` and network visibility

Netcode for GameObjects doesn't have direct equivalents for the following UNet components and functions:

* `NetworkPromimityChecker` component. Network visibility for clients works similar as in UNet.
* `ObjectHide` message. In Netcode for GameObjects, networked objects on the host are always visible.
* `OnSetLocalVisibility` function. A manual network proximity implementation with the `OnCheckObserver` can be ported to Netcode for GameObjects by using `NetworkObject.CheckObjectVisibility`.
* `OnRebuildObservers` isn't needed for the Netcode for GameObjects' visibility system.

```csharp
public override bool OnCheckObserver(NetworkConnection conn)
{
 return IsvisibleToPlayer(getComponent<NetworkIdentity>(), coon);
}

public bool IsVisibleToPlayer(NetworkIdentity identity, NetworkConnection conn){
    // Any promimity function.
    return true;
}
```

```csharp
public void Start(){
    NetworkObject.CheckObjectVisibility = ((clientId) => {
        return IsVisibleToPlayer(NetworkObject, NetworkManager.Singleton.ConnectedClients[clientId]);
    });
}

public bool IsVisibleToPlayer(NetworkObject networkObject, NetworkClient client){
    // Any promimity function.
    return true;
}
```

Refer to [Object Visibility](basics/object-visibility.md) to learn more about Netcodes network visibility check.

## Update scene management

In Netcode for Gameobjects, scene management isn't done using the `NetworkManager` like in UNet. The `NetworkSceneManager` provides equivalent functionality for switching scenes.

```csharp
public void ChangeScene()
{
    MyNetworkManager.ServerChangeScene("MyNewScene");
}
```

```csharp
public void ChangeScene()
{
    NetworkSceneManager.LoadScene("MyNewScene", LoadSceneMode.Single);
}
```

## Update `ClientAttribute/ClientCallbackAttribute` and `ServerAttribute/ServerCallbackAttribute`

Netcode for GameObjects currently doesn't offer a replacement for marking a function with an attribute so that it only runs on the server or the client. You can manually return out of the function instead.

```csharp
[Client]
public void MyClientOnlyFunction()
{
    Debug.Log("I'm a client!");
}
```

```csharp
public void MyClientOnlyFunction()
{
    if (!IsClient) { return; }

    Debug.Log("I'm a client!");
}
```

## Replace `SyncEvent` with an RPC event

Netcode for GameObjects doesn't provide an equivalent for `SyncEvent`. To port `SyncEvent` code from UNet to Netcode for GameObjects, send an RPC to invoke the event on the other side.

```csharp
public class DamageClass : NetworkBehaviour
{
    public delegate void TakeDamageDelegate(int amount);

    [SyncEvent]
    public event TakeDamageDelegate EventTakeDamage;

    [Command]
    public void CmdTakeDamage(int val)
    {
        EventTakeDamage(val);
    }
}
```

```csharp
public class DamageClass : NetworkBehaviour
{
    public delegate void TakeDamageDelegate(int amount);

    public event TakeDamageDelegate EventTakeDamage;

    [Rpc(SendTo.Server)]
    public void TakeDamageServerRpc(int val)
    {
        EventTakeDamage(val);
        OnTakeDamageClientRpc(val);
    }

    [Rpc(SendTo.ClientsAndHost)]
    public void OnTakeDamageClientRpc(int val){
        EventTakeDamage(val);
    }
}
```

## Network Discovery

Netcode for GameObjects doesn't provide Network Discovery. The Contributions repository provides an example implementation for [NetworkDiscovery](https://github.com/Unity-Technologies/multiplayer-community-contributions/tree/main/com.community.netcode.extensions/Runtime/NetworkDiscovery).

## Links discovered
- [installation guide](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/install.md)
- [Unity Transport](https://docs.unity3d.com/Packages/com.unity.transport@latest/)
- [Unity Collections](https://docs.unity3d.com/Packages/com.unity.collections@latest/)
- [Unity Burst](https://docs.unity3d.com/Packages/com.unity.burst@latest/)
- [Community Contributions Extension Package](https://github.com/Unity-Technologies/multiplayer-community-contributions/tree/master/com.community.netcode.extensions)
- [NetworkBehaviour](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/networkbehaviour.md)
- [NetworkVariable](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/networkvariable.md)
- [Messaging System](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/advanced-topics/messaging-system.md)
- [Connection Approval](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/connection-approval.md)
- [Object Spawning](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/object-spawning.md)
- [Object Pooling](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/advanced-topics/object-pooling.md)
- [Object Visibility](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/basics/object-visibility.md)
- [NetworkDiscovery](https://github.com/Unity-Technologies/multiplayer-community-contributions/tree/main/com.community.netcode.extensions/Runtime/NetworkDiscovery)

--- com.unity.netcode.gameobjects/Documentation~/network-components.md ---
# Network components

Understand the network components involved in a Netcode for GameObjects project.

| **Topic**                       | **Description**                  |
| :------------------------------ | :------------------------------- |
| **[Core components](components/core/corecomponents.md)** | Learn about the three core components of Netcode for GameObjects: NetworkObject, NetworkBehaviour, and NetworkManager. |
| **[Helper Components](components/helper/helpercomponents.md)** | Helper components available to use in your Netcode for GameObjects project. |


## Links discovered
- [Core components](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/components/core/corecomponents.md)
- [Helper Components](https://github.com/Unity-Technologies/com.unity.netcode.gameobjects/blob/develop-2.0.0/com.unity.netcode.gameobjects/Documentation~/components/helper/helpercomponents.md)

--- testproject/Legacy/MultiprocessRuntime/readme.md ---
# Multiprocess testing

## Why
Multiprocess testing can be used for different use cases like 
- integration tests (Netcode + actual transport or multi-scene testing for example)
- performance testing. 
- Anything requiring a more realistic environment for testing that involves having a full client and server, communicating on a real network interface using real transports in separate Unity processes.

The tests you write and test locally will be deployed dynamically to bokken instances. The tests shouldn't have to worry about what hardware it runs on, this should be abstracted away by "workers" and "coordinator".

## How to write a multiprocess test
There's a few steps to write a multiprocess test

1. Your test class needs to inherit from `BaseMultiprocessTests`
2. Each test method needs the `MultiprocessContextBasedTest` attribute
3. Each test method needs to run `InitializeContextSteps();`
4. Each context based step can use
```cs
yield return new ExecuteStepInContext(StepExecutionContext.Clients, stepToExecute: nbObjectsBytes => {
    // Something here
});
```
A test method would look like
```cs
    [UnityTest, MultiprocessContextBasedTest]
    public IEnumerator MyTest()
    {
        InitializeContextSteps(); // the only call that should be made outside of context based tests
        yield return new ExecuteStepInContext(StepExecutionContext.Server, bytes =>
        {
            Debug.Log("server stuff");
        });
        yield return new ExecuteStepInContext(StepExecutionContext.Clients, bytes =>
        {
            Debug.Log("client stuff");
            Assert.That(1, Is.EqualTo(1));
            throw new Exception("asdf"); // this client side exception will be communicated to the coordinator, making the test fail
        });
    }
```
Your test code shouldn't execute outside of these steps (as that test method can be executed multiple times, once for step registration and once for the actual test run for example)

Another way to write a multiprocess test without context based steps is to use TestCoordinator directly.
```cs
    private static void ExecuteSimpleCoordinatorTest()
    {
        TestCoordinator.Instance.WriteTestResultsServerRpc(float.PositiveInfinity);
    }

    [UnityTest]
    public IEnumerator CheckTestCoordinator()
    {
        // Call the client side method
        TestCoordinator.Instance.InvokeFromMethodActionRpc(ExecuteSimpleCoordinatorTest);

        var resultCount = 0;
        for (int i = 0; i < WorkerCount; i++) // wait and test for the two clients
        {
            yield return new WaitUntil(TestCoordinator.ResultIsSet());

            var (clientId, result) = TestCoordinator.ConsumeCurrentResult().Take(1).Single();
            Assert.Greater(result, 0f);
            resultCount++;
        }

        Assert.That(resultCount, Is.EqualTo(WorkerCount));
    }
```

Here's a complete set of examples using the API

```cs
using System;
using System.Collections;
using System.Collections.Generic;
using NUnit.Framework;
using Unity.PerformanceTesting;
using UnityEngine;
using UnityEngine.Profiling;
using UnityEngine.TestTools;
using static ExecuteStepInContext;

namespace Unity.Netcode.MultiprocessRuntimeTests
{
    public class DemoProcessTest : BaseMultiprocessTests
    {
        protected override int WorkerCount { get; } = 2; // spawns 2 clients connecting to the test runner
        protected override bool m_IsPerformanceTest { get; } = false; // specifies whether this should execute from editor or not

        [UnityTest, MultiprocessContextBasedTest] // attribute necessary for context based step execution
        public IEnumerator MyTest()
        {
            InitializeContextSteps(); // necessary to initialize context based steps

            // These steps execute sequentially.
            yield return new ExecuteStepInContext(StepExecutionContext.Server, bytes =>
            {
                Debug.Log("server stuff");
            });
            // for example, the test runner will yield on the same step until clients all report they are done with this step. Once all clients report they are done, the test can continue to the same step.
            yield return new ExecuteStepInContext(StepExecutionContext.Clients, bytes =>
            {
                Debug.Log("client stuff");
                Assert.That(1, Is.EqualTo(1));
                throw new Exception("asdf"); // this client side exception will be communicated to the coordinator, making the test fail
            });

            yield return new ExecuteStepInContext(StepExecutionContext.Clients, bytes =>
            {
                // To write results to the test runner, call this method:
                TestCoordinator.Instance.WriteTestResultsServerRpc(123);
                TestCoordinator.Instance.WriteTestResultsServerRpc(123);
                TestCoordinator.Instance.WriteTestResultsServerRpc(123); // could be replaced by json string instead for ease of use?
            });
            yield return new ExecuteStepInContext(StepExecutionContext.Server, bytes =>
            {
                // consumes first result sent above from any client
                TestCoordinator.ConsumeCurrentResult();
                // consumes all results from all clients
                foreach (var (clientID, result) in TestCoordinator.ConsumeCurrentResult())
                {
                    Assert.That(result, Is.EqualTo(123));
                }
                // consumes results for individual clients
                foreach (var clientID in TestCoordinator.AllClientIdsExceptMine)
                {
                    TestCoordinator.ConsumeCurrentResult(clientID);
                }
            });

            int someValue = 456; // one caveat to executeStepInContext is contrary to instinct, this is not shared between server and client execution.
            // to send that value to clients, "paramToPass" needs to be used
            yield return new ExecuteStepInContext(StepExecutionContext.Clients, bytes =>
            {
                var valueComingFromServer = BitConverter.ToInt32(bytes, 0);
            }, paramToPass: BitConverter.GetBytes(456)); // could be replaced by JSON string instead for ease of use?
            // useful for taking in [Values] method parameters as these are only known by the server

            // when you have client steps that take more than one frame, you can subscribe to the OnUpdate callback on CallbackComponent
            yield return new ExecuteStepInContext(StepExecutionContext.Clients, bytes =>
            {
                void Update(float _)
                {
                    NetworkManager.Singleton.gameObject.GetComponent<CallbackComponent>().OnUpdate -= Update;
                    TestCoordinator.Instance.ClientFinishedServerRpc(); // since finishOnInvoke is false, we need to do this manually
                }
                NetworkManager.Singleton.gameObject.GetComponent<CallbackComponent>().OnUpdate += Update;
            }, waitMultipleUpdates: true); // this keeps waiting "are you done? are you done? are you done?" and relies on the clients calling the "ClientFinishedServerRpc"

            yield return new ExecuteStepInContext(StepExecutionContext.Clients, bytes =>
            {
                int cpt = 0;
                void Update(float _)
                {
                    TestCoordinator.Instance.WriteTestResultsServerRpc(Time.time);
                }
                NetworkManager.Singleton.gameObject.GetComponent<CallbackComponent>().OnUpdate += Update;
            }, additionalIsFinishedWaiter: () => // this keeps waiting "are you done? are you done? are you done?" until this lambda returns true
            {
                foreach (var (clientId, latest) in TestCoordinator.ConsumeCurrentResult())
                {
                    return latest >= 10;
                }
                return false;
            });
        }

        [UnityTest, Performance] // already existing performance framework https://docs.unity3d.com/Packages/com.unity.test-framework.performance@2.8/manual/index.html
        public IEnumerator PerfTest()
        {
            var totalAllocSampleGroup = new SampleGroup("GC Alloc", SampleUnit.Kilobyte);
            var allocStat = Profiler.GetTotalAllocatedMemoryLong();
            Measure.Custom(totalAllocSampleGroup, allocStat / 1024); // this will record in Unity's shared Performance DB.
            // Dashboards will be able to display these stats overtime
            yield return null;
        }
    }
}


```


## How to run a test
**Local**: Test players need to be built first to test locally. 

**Automated**: Integration with CI should do this automatically.

![](readme-ressources/Building-Player.jpg)

Then run the tests from Unity's test runner.

Note that performance tests should be run from external processes (not from editor). This way the server code will run in a build, just as much as client code, for more realistic test results.

![](readme-ressources/Multiprocess.jpg)

## How it's done
### Multiple processes orchestration

Test code and host code execute in the same process: When writing play mode tests, Unity will start a unity environment for that test, including game loop, scene, object hierarchy, all that fun stuff. This means the test itself has access to everything other unity scripts would have access to. At test startup, the test will ask unity to switch scene to MultiprocessTestScene containing a GameObject already placed in that scene called TestCoordinator . The test will callStartHost that will listen for connections, still all in the same process.
Once that's done, that same test will then spawn new client processes. These clients will also start with that MultiprocessTestScene  loaded at startup, also containing a TestCoordinator . These client side TestCoordinators will detect they are clients (using command line arg) and instead of calling StartHost  will call StartClient . This is where new code to specify the IP to connect to would stand (the lines I sent you).
A good way I could have clarified that code is to separate TestCoordinator into TestCoordinatorClient and TestCoordinatorServer thinking of it. Right now TestCoordinator code does both.
Once the connection is established (tests yield wait for connection in  Setup code), then the tests can start sending RPCs to each other.
The test (that's server side) will call multiple TriggerActionIdClientRpc . This will trigger these actions on all clients. The clients execute their test code, then answer back with ClientFinishedServerRpc.
Once all the tests are done exchanging commands, a final RPC CloseRemoteClientRpc is called to tell the clients they are done.
If that RPC fails to send for some reason, clients also have a keep alive that tells them to self destroy when it expires.
If you look at the “how it's done” section in the multiprocess readme.md testproject/Assets/Tests/Runtime/MultiprocessRuntime/readme.md there's a few drawings to explain that flow.

So:
Editor
- Run tests
- Run host code
- Launches builds
Separate build
- Runs client RPCs that execute test code, not the tests themselves


Now just to bake your noodles a bit more, Unity will take an additional step before launching these steps. The above is true if you launch these tests from the editor. If you launch these tests in a separate player, Unity in the background will create a separate process for that player. That player will then connect using a plain tcp connection to the editor to report back on its test results. This is important to know if you want to have the test/host part launch on different platforms like mobile.

So the above would become
Editor
- Launches test player on platform
Test player
- Run tests
- Run host code
- Launches builds
Separate build
- Runs client RPCs …

With the bokken integration, we'll need to be careful about ressource contention at Unity, these tests could be heavy on ressources.
Tests when launched locally will simply create new OS processes for each worker players.



![](readme-ressources/OrchestrationOverview.jpg)
*Note that this diagram is still WIP for the CI part*
### Bokken orchestration
Bokken Orchestration can be performed with the support of the following tool:
[Multiplayer Multiprocess Test Tools](https://github.cds.internal.unity3d.com/unity/multiplayer-multiprocess-test-tools)
[Documentation](https://backstage.corp.unity3d.com/catalog/default/component/multiplayer-multiprocess-test-tools/docs/)

### CI
todo
#### Performance report dashboards
todo
### Client-server test coordination
A Test Coordinator is in charge of managing communication between the nodes, executing remote test code. The test coordinator is also in charge of process cleanup, if for example the server crashes, so we don't have zombie clients laying around.
The test coordinator in client mode will automatically try to connect to a server on Start().
### Context based step execution
Test methods are executed twice. Once in "registration" mode, to have all the steps register themselves using a unique ID. This ID is deterministic between client and server processes, so that when a server calls a step during actual test execution, the clients have the same ID associated with the same lambda.
During test execution, the main node's step will call an RPC on clients to trigger their pre-registered lambda. The main node's step will then yield until it receives a "client done" RPC from all clients. The main node's test will then be able to continue execution to the next step.

## The MultiprocessTestPlayer
The MultiprocessTestPlayer, which is built by the sub-menu items under "Netcode" -> "Multiprocess Test", supports many workflows and configurations.

### Command Line
Currently the MultiprocessTestPlayer can be configured via the command line on all platforms that support parsing of command line arguments in the C# layer.
For example, this means that command line configuration is not available on Android.

#### Setting the transport address
Default Values on Client: 127.0.0.1, 3076

In order to set the transport address for either the server/host or the client, the options of "-ip" and "-p" can be used.  For example:

    -ip 127.0.0.1 -p 3076
	
These options can be passed when starting the client, for example, in order to let it know where the host is to connect to.

#### Setting the transport
Default Values: UNET

The default transport is UNET but this can be switched to UTP by using 

    -transport utp
	

# Future considerations
- Integrate with local MultiInstance tests?
- Have ExecuteStepInContext a game facing feature for sequencing client-server actions?


## Links discovered
- [Multiplayer Multiprocess Test Tools](https://github.cds.internal.unity3d.com/unity/multiplayer-multiprocess-test-tools)
- [Documentation](https://backstage.corp.unity3d.com/catalog/default/component/multiplayer-multiprocess-test-tools/docs/)

--- testproject/ProjectSettings/ProjectVersion.txt ---
m_EditorVersion: 6000.2.12f1
m_EditorVersionWithRevision: 6000.2.12f1 (e89d5df0e333)


--- testproject/Assets/StreamingAssets/empty.txt ---


--- Tools/CI/service.cmb/README.md ---
# Testing against the CMB Service

The CMB Service is a tool that is external to our repository. The tool is inside the `runtime` folder in the [mps-common-multiplayer-backend](https://github.com/Unity-Technologies/mps-common-multiplayer-backend) repository.

Due to this, there is some more setup needed when running tests against the CMB Service.

## Configuration

The tests are automatically configured to run any `HostOrServer.DAHost` or `NetworkTopologyTypes.DistributedAuthority` test against the CMB server when either the `USE_CMB_SERVICE` scripting define is set, or when an environment variable is passed in with `USE_CMB_SERVICE=true`. When set, all non-distributed authority compatible tests will be ignored.

By default, the tests are configured to look for the service on the local machine (`localhost`/`http://127.0.0.1`) at port `7789`.

## Running against the service

First, ensure the `USE_CMB_SERVICE` scripting define or environment variable is set.

### Download the service

Go to the `CMB Runtime CI` action inside the cmb repo ([link here](https://github.com/Unity-Technologies/mps-common-multiplayer-backend/actions/workflows/runtime.yaml)). Open the most recent job and scroll down to the bottom of the page (You may have to scroll in the sidebar on the left, the centre of the page is not scrollable).

Inside the **Artifacts** section at the bottom of the page, download the `comb-server-<platform>-latest` that matches your computer architecture. This will download a pre-built binary of the most recent CMB Service.

### Run the service locally

Next we'll run the binary on the command line.

> [!NOTE]
> If you're running on macOS, you'll have to add execution privileges to the binary before running it.

```bash
xattr -c /path/to/comb-server
```

To run the service, run the following command:

```bash
/path/to/download/comb-server -l info --metrics-port 5000 standalone --port 7789 -t 60m
```

Note that we have set the port to `7789` to match where the tests will be looking.

After each test, all connected clients will disconnect from the service. The service will automatically shut down when that happens. When running multiple tests in a row, it can be more convenient to run the service in a loop:

```bash
while :; do /path/to/download/file -l info --metrics-port 5000 standalone --port 7789 -t 60m; done
```

### Run the tests

With `USE_CMB_SERVICE` set, everything should be configured so that running any distributed authority test in the editor should run against the service we have running on the command line. Try running a test to validate that information is logged in the command line.

## Further configuration

The following environment variables allow for further configuration of the setup.

`CMB_SERVICE_PORT` defines the port where the tests will try to connect to the service (defaults to `7789`).

`NGO_HOST` defines the http address where the tests will try to connect to the service (defaults to `127.0.0.1`).


## Links discovered
- [mps-common-multiplayer-backend](https://github.com/Unity-Technologies/mps-common-multiplayer-backend)
- [link here](https://github.com/Unity-Technologies/mps-common-multiplayer-backend/actions/workflows/runtime.yaml)

--- Tools/scripts/BuildAutomation/connect_services.py ---
﻿# This script modifies ProjectSettings.asset in order to connect the project to Services (like Relay). This is needed for Netcode related builds and can be probably skipped in other cases
# As a Netcode team we usually use (during Playtesting) the following settings

# Note that cloudProjectId, projectName and organizationId are defined as secrets

# Notice that those parameters are included as defaults but in your yml file you can override them with your own values.

import sys
import re
import argparse
import os

def parse_args():
    global args
    parser = argparse.ArgumentParser(description='Update ProjectSettings.asset in order to properly connect to services.')
    parser.add_argument('--project-settings-path', required=True, help='The absolute path to the project ProjectSettings.asset file that contains all of the services settings.')
    parser.add_argument('--cloud-project-ID', default=os.getenv("CLOUDPROJECTID"), help='ID of a cloud project to which we want to connect to.')
    parser.add_argument('--organization-ID', default=os.getenv("ORGANIZATIONID"), help="ID of the organization to which the cloud project belongs.")
    parser.add_argument('--project-name', default=os.getenv("PROJECTNAME"), help='Name of the project to which we want to connect to.')
    args = parser.parse_args()

def main():
    """
    Modifies ProjectSettings.asset in order to connect the project to Services
    """
    parse_args()

    with open(args.project_settings_path, 'r') as f:
        content = f.read()

    # Use regex to replace the values. This is safer than simple string replacement.
    content = re.sub(r"cloudProjectId:.*", f"cloudProjectId: {args.cloud_project_ID}", content)
    content = re.sub(r"organizationId:.*", f"organizationId: {args.organization_ID}", content)
    content = re.sub(r"projectName:.*", f"projectName: {args.project_name}", content)
    # Ensure the project is marked as connected
    content = re.sub(r"cloudEnabled:.*", "cloudEnabled: 1", content)

    with open(args.project_settings_path, 'w', encoding='UTF-8', newline='\n') as f:
        f.write(content)

    print(f"[Linker] Successfully updated {args.project_settings_path} with Project ID: {args.cloud_project_ID}, Org ID: {args.organization_ID}, Project Name: {args.project_name}")

if __name__ == "__main__":
    main()




--- Tools/scripts/BuildAutomation/disable-enable-burst.py ---
﻿# An example usage would be "- python Tools/CI/Netcode/BuildAutomations/disable-enable-burst.py --project-path {{ project.path }} --platform WebGL"
# This file aims to modify BurstAotSettings file which should be present under ProjectSettings folder.
# Note that this requires Burst package to be installed as well as you need to specify the platform for which you are building since there are different settings for each. (this is taken from environment variable)
# This script is not overriding existing settings file but completely replacing it

import argparse
import json
import os

# Function that parses arguments of the script
def parse_args():
    global args
    parser = argparse.ArgumentParser(description="Enable or disable Burst compilation and specify Unity project details.")

    # Add the mutually exclusive group for --disable-burst and --enable-burst
    group = parser.add_mutually_exclusive_group(required=True)
    group.add_argument('--disable-burst', action='store_true', help='Disable Burst compilation.')
    group.add_argument('--enable-burst', action='store_true', help='Enable Burst compilation.')

    # Add additional arguments
    parser.add_argument('--project-path', required=True, help='Specify the location of the Unity project.')

    args = parser.parse_args()


# This function creates a new burst settings file with default values. Notice that this should almost always not be used since assumption is that in our case we have projects with Burst preinstalled
# For the "default" values I used values from NetcodeSamples project in DOTS-monorepo
def create_config(settings_path):
    config_name = os.path.join(settings_path, 'BurstAotSettings_{}.json'.format(resolve_target()))
    monobehaviour = {
        'Version': 4,
        'EnableBurstCompilation': True,
        'EnableOptimisations': True,
        'EnableSafetyChecks': False,
        'EnableDebugInAllBuilds': False,
        'CpuMinTargetX32': 0,
        'CpuMaxTargetX32': 0,
        'CpuMinTargetX64': 0,
        'CpuMaxTargetX64': 0,
        'CpuTargetsX32': 6,
        'CpuTargetsX64': 72,
        'OptimizeFor': 0
    }

    data = {'MonoBehaviour': monobehaviour}
    with open(config_name, 'w', encoding='UTF-8', newline='\n') as f:
        json.dump(data, f)
    return config_name


# Burst has specific files for each platform, so we need to resolve the target platform to get the correct settings file.
# Note that this jobs uses environment variables to pass parameters to the script.
def resolve_target():
    # Get the platform value from the environment variable
    platform_key = os.environ.get('PLATFORM_WIN64_MAC_ANDROID').lower()

    resolved_target = platform_key
    if 'win64' == platform_key:
        resolved_target = 'StandaloneWindows'
    elif 'mac' == platform_key:
        resolved_target = 'StandaloneOSX'
    elif 'android' == platform_key:
        resolved_target = 'Android'
    else:
        raise ValueError("Unsupported platform: {}".format(platform) + "Check if you are passing correct argument for one of the supported platforms: StandaloneWindows or StandaloneLinux")

    return resolved_target


# This function either returns existing burst settings or creates new if a file was not found
def get_or_create_burst_AOT_config():
    settings_path = os.path.join(args.project_path, 'ProjectSettings')
    if not os.path.isdir(settings_path):
        os.mkdir(settings_path)
    config_names = [os.path.join(settings_path, filename) for filename in os.listdir(settings_path) if filename.startswith("BurstAotSettings_{}".format(resolve_target()))]
    if not config_names:
        return [create_config(settings_path)]
    return config_names


# Function that sets the AOT status in the burst settings file (essentially enables or disables burst compilation)
def set_burst_AOT(config_file, status):
    config = None
    with open(config_file, 'r') as f:
        config = json.load(f)

    assert config is not None, 'AOT settings not found; did the burst-enabled build finish successfully?'

    config['MonoBehaviour']['EnableBurstCompilation'] = status
    with open(config_file, 'w', encoding='UTF-8', newline='\n') as f:
        json.dump(config, f)


def main():
    parse_args()
    config_names = get_or_create_burst_AOT_config()

    platform_key = os.environ.get('PLATFORM_WIN64_MAC_ANDROID').lower()
    print(f"Burst compilation script: Unity project path is {args.project_path}")
    print(f"Burst compilation script: Target platform is {platform_key}")

    if args.disable_burst:
        print('BURST COMPILATION: DISABLED')

        for config_name in config_names:
            set_burst_AOT(config_name, False)

    elif args.enable_burst:
        print('BURST COMPILATION: ENABLED')

        for config_name in config_names:
            set_burst_AOT(config_name, True)

    else:
        sys.exit('BURST COMPILATION: unexpected value: {}'.format(args.enable_burst))



if __name__ == '__main__':
    main()


--- Tools/scripts/BuildAutomation/FileCopy.py ---
﻿import os
import shutil
import sys

def main():
    """
    Cleans and prepares the 'Assets/Scripts/Editor' directory for build automation scripts.
    It deletes the directory if it exists, recreates it, and copies in the necessary
    assembly definition and C# script files.
    """
    # --- 1. Argument Validation ---
    if len(sys.argv) < 2:
        print("Error: Missing required argument.")
        print("Usage: python prepare_build_scripts.py <path_to_project_root>")
        sys.exit(1)

    project_root = sys.argv[1]

    # --- 2. Define File Paths ---
    # The target directory inside the Unity project
    target_dir = os.path.join(project_root, 'Assets', 'Scripts', 'Editor')

    # The source files for build automation
    source_asmdef = 'Tools/scripts/BuildAutomation/Unity.ProjectBuild.Editor.asmdef'
    source_script = 'Tools/scripts/BuildAutomation/BuilderScripts.cs'

    print(f"Preparing build scripts for project at: {project_root}")
    print(f"Target editor script directory: {target_dir}")

    # --- 3. Clean and Recreate Directory ---
    try:
        if os.path.exists(target_dir):
            print(f"Directory '{target_dir}' exists. Removing it.")
            shutil.rmtree(target_dir)

        print(f"Creating directory: {target_dir}")
        os.makedirs(target_dir)

    except OSError as e:
        print(f"Error managing directory: {e}")
        sys.exit(1)

    # --- 4. Copy Build Automation Files ---
    try:
        print(f"Copying '{source_asmdef}' to '{target_dir}'")
        shutil.copy(source_asmdef, target_dir)

        print(f"Copying '{source_script}' to '{target_dir}'")
        shutil.copy(source_script, target_dir)

    except IOError as e:
        print(f"Error copying files: {e}")
        sys.exit(1)

    print("\nSuccessfully prepared build automation scripts.")

if __name__ == "__main__":
    main()



--- Tools/scripts/Utils/general_utils.py ---
"""Helper class for common operations."""
#!/usr/bin/env python3
import json
import os
import re
import datetime
import platform
import subprocess
import warnings

UNRELEASED_CHANGELOG_SECTION_TEMPLATE = r"""
## [Unreleased]

### Added


### Changed


### Deprecated


### Removed


### Fixed


### Security


### Obsolete
"""

def get_package_version_from_manifest(package_manifest_path):
    """
    Reads the package.json file and returns the version specified in it.
    """

    if not os.path.exists(package_manifest_path):
        raise FileNotFoundError(f"{package_manifest_path} couldn't be find")

    with open(package_manifest_path, 'rb') as f:
        json_text = f.read()
        data = json.loads(json_text)

    return data['version']


def update_package_version_by_patch(package_manifest_path):
    """
    Updates the package version in the package.json file.
    This function will bump the package version by a patch.

    The usual usage would be to bump package version during/after release to represent the "current package state" which progresses since the release branch was created
    """

    if not os.path.exists(package_manifest_path):
        raise FileNotFoundError(f"The file {package_manifest_path} does not exist.")

    with open(package_manifest_path, 'r', encoding='UTF-8') as f:
        package_manifest = json.load(f)

    version_parts = get_package_version_from_manifest(package_manifest_path).split('.')
    if len(version_parts) != 3:
        raise ValueError("Version format is not valid. Expected format: 'major.minor.patch'.")

    # Increment the patch version
    version_parts[2] = str(int(version_parts[2]) + 1)
    new_package_version = '.'.join(version_parts)

    package_manifest['version'] = new_package_version

    with open(package_manifest_path, 'w', encoding='UTF-8', newline='\n') as f:
        json.dump(package_manifest, f, indent=4)

    return new_package_version
        
        
def update_validation_exceptions(validation_file, package_version):
    """
    Updates the ValidationExceptions.json file with the new package version.
    """

    # If files do not exist, exit
    if not os.path.exists(validation_file):
        return

    # Update the PackageVersion in the exceptions
    with open(validation_file, 'rb') as f:
        json_text = f.read()
        data = json.loads(json_text)
        updated = False
        for exceptionElements in ["WarningExceptions", "ErrorExceptions"]:
            exceptions = data.get(exceptionElements)

            if exceptions is None:
                continue

            for exception in exceptions:
                if 'PackageVersion' in exception:
                    exception['PackageVersion'] = package_version
                    updated = True

    # If no exceptions were updated, we do not need to write the file
    if not updated:
        warnings.warn(f"No validation exceptions were updated in {validation_file}.")
        return

    with open(validation_file, 'w', encoding='UTF-8', newline='\n') as json_file:
        json.dump(data, json_file, ensure_ascii=False, indent=2)
        json_file.write("\n")  # Add newline cause Py JSON does not



def update_changelog(changelog_path, new_version, add_unreleased_template=False):
    """
    Cleans the [Unreleased] section of the changelog by removing empty subsections,
    then replaces the '[Unreleased]' tag with the new version and release date.
    If the version header already exists, it will remove the [Unreleased] section and add any entries under the present version.
    If add_unreleased_template is specified then it will also include the template at the top of the file

    1 - Cleans the [Unreleased] section by removing empty subsections.
    2 - Checks if the version header already has its section in the changelog.
    3 - If it does, it removes the [Unreleased] section and its content.
    4 - If it does not, it replaces the [Unreleased] section with the new version and today's date.
    """

    new_changelog_entry = f'## [{new_version}] - {datetime.date.today().isoformat()}'
    version_header_to_find_if_exists = f'## [{new_version}]'

    with open(changelog_path, 'r', encoding='UTF-8') as f:
        changelog_text = f.read()

    # This pattern finds a line starting with '###', followed by its newline,
    # and then two more lines that contain only whitespace.
    # The re.MULTILINE flag allows '^' to match the start of each line.
    pattern = re.compile(r"^###.*\n\n\n", re.MULTILINE)

    # Replace every match with an empty string. The goal is to remove empty CHANGELOG subsections.
    cleaned_content = pattern.sub('', changelog_text)

    if version_header_to_find_if_exists in changelog_text:
        warnings.warn(f"A changelog entry for version '{new_version}' already exists. The script will just remove Unreleased section and its content.")
        changelog_text = re.sub(r'(?s)## \[Unreleased(.*?)(?=## \[)', '', changelog_text)
    else:
        # Replace the [Unreleased] section with the new version + cleaned subsections
        print("Latest CHANGELOG entry will be modified to: " + new_changelog_entry)
        changelog_text = re.sub(r'## \[Unreleased\]', new_changelog_entry, cleaned_content)

    # Accounting for the very top of the changelog format
    header_end_pos = changelog_text.find('(https://docs-multiplayer.unity3d.com).', 1)
    insertion_point = changelog_text.find('\n', header_end_pos)

    final_content = ""
    if add_unreleased_template:
        print("Adding [Unreleased] section template to the top of the changelog.")
        final_content = (
            changelog_text[:insertion_point] +
            f"\n{UNRELEASED_CHANGELOG_SECTION_TEMPLATE}" +
            changelog_text[insertion_point:]
        )
    else:
        final_content = (
            changelog_text[:insertion_point] +
            changelog_text[insertion_point:]
        )

    # Write the changes
    with open(changelog_path, 'w', encoding='UTF-8', newline='\n') as file:
        file.write(final_content)


--- Tools/scripts/Utils/git_utils.py ---
"""Helper class for Git repo operations."""

import sys
import os

PARENT_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), '../ReleaseAutomation'))
sys.path.insert(0, PARENT_DIR)

import subprocess
from git import Repo, Actor
from github import GithubException
from release_config import ReleaseConfig

def get_local_repo():
    root_dir = subprocess.check_output(['git', 'rev-parse', '--show-toplevel'],
                                       universal_newlines=True, stderr=subprocess.STDOUT).strip()
    return Repo(root_dir)


def get_latest_git_revision(branch_name):
    """Gets the latest commit SHA for a given branch using git rev-parse."""
    try:
        subprocess.run(
            ['git', 'fetch', 'origin'],
            capture_output=True,
            text=True,
            check=True
        )
        remote_branch_name = f'origin/{branch_name}'
        # Executes the git command: git rev-parse <remote_branch_name>
        result = subprocess.run(
            ['git', 'rev-parse', remote_branch_name],
            capture_output=True,
            text=True,
            check=True
        )
        return result.stdout.strip()

    except FileNotFoundError as exc:
        raise Exception("Git command not found. Please ensure Git is installed and available in your PATH.") from exc
    except subprocess.CalledProcessError as e:
        raise Exception(f"Failed to get the latest revision for branch '{branch_name}'.") from e

def create_release_branch(config: ReleaseConfig):
    """
    Creates a new branch with the specified name, performs specified action, commits the current changes and pushes it to the repo.
    Note that command_to_run_on_release_branch (within the Config) should be a single command that will be executed using subprocess.run. For multiple commands consider using a Python script file.
    """

    try:
        if config.github_manager.is_branch_present(config.release_branch_name):
            raise Exception(f"Branch '{config.release_branch_name}' already exists.")

        repo = get_local_repo()

        new_branch = repo.create_head(config.release_branch_name, repo.head.commit)
        new_branch.checkout()

        if config.command_to_run_on_release_branch:
            print(f"\nExecuting command on branch '{config.release_branch_name}': {config.command_to_run_on_release_branch.__name__}")
            config.command_to_run_on_release_branch(config.manifest_path, config.changelog_path, config.validation_exceptions_path, config.package_version)

        repo.git.add(config.changelog_path)
        repo.git.add(config.manifest_path)
        repo.git.add(config.validation_exceptions_path)

        author = Actor(config.commiter_name, config.commiter_email)
        committer = Actor(config.commiter_name, config.commiter_email)

        repo.index.commit(config.release_commit_message, author=author, committer=committer, skip_hooks=True)
        repo.git.push("origin", config.release_branch_name)

        print(f"Successfully created, updated and pushed new branch: {config.release_branch_name}")

    except GithubException as e:
        raise GithubException(f"An error occurred with the GitHub API: {e.status}", data=e.data) from e
    except Exception as e:
        raise Exception(f"An unexpected error occurred: {e}") from e


--- Tools/scripts/BuildAutomation/manifest_update.py ---
﻿# This script is used to replace a package from the project manifest.json with a local version.
# The goal is that you will trigger the build process from your branch (for example release/1.2.3) and package from this branch will be use in the project manifest.1
# Note that for now this script is assuming that such package already has an entry in the manifest
# TODO: consider if it makes sense to just add new manifest entry (to test what?)

import json
import argparse
import os

def parse_args():
    global args
    parser = argparse.ArgumentParser(description='Update a Unity project manifest to point to the local package version.')
    parser.add_argument('--manifest-path', required=True, help='The absolute path to the project manifest.json file.')
    parser.add_argument('--package-name', default="com.unity.netcode.gameobjects", help="The name of the package to modify in the manifest.")
    parser.add_argument('--local-package-path', required=True, help='The absolute file path to the local package source directory.')
    args = parser.parse_args()

def main():
    """
    Updates a project's manifest.json to use package under passed local-package-path,
    and then prints the version of that local package.
    """
    parse_args()

    # Update the target project's manifest
    try:
        with open(args.manifest_path, 'r') as f:
            manifest_data = json.load(f)

        local_path_normalized = args.local_package_path.replace(os.sep, '/')
        manifest_data["dependencies"][args.package_name] = f"file:{local_path_normalized}"

        with open(args.manifest_path, 'w', encoding='UTF-8', newline='\n') as f:
            json.dump(manifest_data, f, indent=4)

        print(f"Successfully updated manifest at '{args.manifest_path}'")
        print(f"Set '{args.package_name}' to use local package at '{args.local_package_path}'")
    except Exception as e:
        print(f"Error updating manifest: {e}")
        exit(1)

    # --- Read and report the local package's version for log confirmation---
    # This is only for debug purposes
    try:
        # Construct the path to the local package's package.json file
        local_package_json_path = os.path.join(args.local_package_path, 'package.json')

        with open(local_package_json_path, 'r') as f:
            local_package_data = json.load(f)

        # Extract the version, providing a default if not found
        local_package_version = local_package_data.get('version', 'N/A')

        print(f"--> Verified local '{args.package-name}' version is: {local_package_version}")

    except FileNotFoundError:
        print(f"Warning: Could not find package.json at '{local_package_json_path}'")
    except Exception as e:
        print(f"Error reading local package version: {e}")

if __name__ == "__main__":
    main()


--- Tools/scripts/BuildAutomation/validate_params.py ---
import os
import sys

# --- Configuration ---
# A dictionary that maps each environment variable to a set of its allowed values.
# This is the single source of truth for all validation.
VALIDATION_RULES = {
    'SCRIPTING_BACKEND_IL2CPP_MONO': {'il2cpp', 'mono'},
    'BURST_ON_OFF': {'on', 'off'},
    'PLATFORM_WIN64_MAC_ANDROID': {'win64', 'mac', 'android'}
}

def main():
    """
    Validates Yamato environment variables using a rule-based dictionary.
    Exits with 1 if any variable is invalid, otherwise exits with 0.
    """
    all_params_valid = True

    for var_name, allowed_values in VALIDATION_RULES.items():
        actual_value = os.environ.get(var_name, '').lower()
        allowed_values_lower = {v.lower() for v in allowed_values}

        if actual_value not in allowed_values_lower:
            print(
                f"ERROR: Invalid {var_name}: '{actual_value}'. "
                f"Allowed values are: {list(allowed_values)}",
                file=sys.stderr
            )
            all_params_valid = False

    platform = os.environ.get('PLATFORM_WIN64_MAC_ANDROID', '').lower()
    scripting_backend = os.environ.get('SCRIPTING_BACKEND_IL2CPP_MONO', '').lower()

    if platform == 'mac' and scripting_backend == 'il2cpp':
        print(
            "ERROR: Invalid Configuration: The 'mac' platform with the 'il2cpp' "
            "Note that for now windows machine is used for building project and it's a known limitation that mac builds (via windows machine) can be done only with mono",
            file=sys.stderr
        )
        all_params_valid = False

    if platform == 'android' and scripting_backend == 'mono':
        print(
            "ERROR: Invalid Configuration: The 'android' platform with the 'mono' "
            "Note that mobile builds are not supporting mono and need il2cpp scripting backend",
            file=sys.stderr
        )
        all_params_valid = False

    if not all_params_valid:
        print("\nOne or more parameters failed validation. Halting build.", file=sys.stderr)
        sys.exit(1)

    print("All parameters are valid. Proceeding with the build.")

if __name__ == "__main__":
    main()
